var requirejs,require,define,__extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__createBinding,__addDisposableResource,__disposeResources,_self,Prism,__setModuleDefault,Reflect;(function(global,Promise,undef){function commentReplace(e,t){return t||""}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return e&&hasProp(e,t)&&e[t]}function obj(){return Object.create(null)}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,(function(t,o){!n&&hasProp(e,o)||(!i||"object"!=typeof t||!t||Array.isArray(t)||"function"==typeof t||t instanceof RegExp?e[o]=t:(e[o]||(e[o]={}),mixin(e[o],t,n,i)))})),e}function getGlobal(e){if(!e)return e;var t=global;return e.split(".").forEach((function(e){t=t[e]})),t}function newContext(e){function t(e,t,n){var i,o,r,a,s,l,c,d,u,p,m=t&&t.split("/"),h=x.map,f=h&&h["*"];if(e&&(l=(e=e.split("/")).length-1,x.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&m&&(e=m.slice(0,m.length-1).concat(e)),function(e){var t,n,i=e.length;for(t=0;t<i;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&h&&(m||f)){e:for(r=(o=e.split("/")).length;r>0;r-=1){if(s=o.slice(0,r).join("/"),m)for(a=m.length;a>0;a-=1)if((i=getOwn(h,m.slice(0,a).join("/")))&&(i=getOwn(i,s))){c=i,d=r;break e}!u&&f&&getOwn(f,s)&&(u=getOwn(f,s),p=r)}!c&&u&&(c=u,d=p),c&&(o.splice(0,d,c),e=o.join("/"))}return getOwn(x.pkgs,e)||e}function n(e){var t,n,i,o;for(t=0;t<queue.length;t+=1){if("string"!=typeof queue[t][0]){if(!e)break;queue[t].unshift(e),e=undef}t-=1,(n=(i=queue.shift())[0])in L||n in k||(n in T?v.apply(undef,i):k[n]=i)}e&&(o=getOwn(x.shim,e)||{},v(e,o.deps||[],o.exportsFn))}function i(e,i){var o=function(t,r,a,s){var l,c;if(i&&n(),"string"==typeof t){if(w[t])return w[t](e);if(!((l=y(t,e,!0).id)in L))throw new Error("Not loaded: "+l);return L[l]}return t&&!Array.isArray(t)&&(c=t,t=undef,Array.isArray(r)&&(t=r,r=a,a=s),i)?o.config(c)(t,r,a):(r=r||function(){return slice.call(arguments,0)},F.then((function(){return n(),v(undef,t||[],r,a,e)})))};return o.isBrowser="undefined"!=typeof document&&"undefined"!=typeof navigator,o.nameToUrl=function(e,t,n){var i,r,a,s,l,c,d=getOwn(x.pkgs,e);if(d&&(e=d),c=getOwn(B,e))return o.nameToUrl(c,t,n);if(urlRegExp.test(e))s=e+(t||"");else{for(i=x.paths,a=(r=e.split("/")).length;a>0;a-=1)if(l=getOwn(i,r.slice(0,a).join("/"))){Array.isArray(l)&&(l=l[0]),r.splice(0,a,l);break}s=r.join("/"),s=("/"===(s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js")).charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+s}return x.urlArgs&&!/^blob\:/.test(s)?s+x.urlArgs(e,s):s},o.toUrl=function(n){var i,r=n.lastIndexOf("."),a=n.split("/")[0];return-1!==r&&(!("."===a||".."===a)||r>1)&&(i=n.substring(r,n.length),n=n.substring(0,r)),o.nameToUrl(t(n,e),i,!0)},o.defined=function(t){return y(t,e,!0).id in L},o.specified=function(t){return(t=y(t,e,!0).id)in L||t in T},o}function o(e,t,n){e&&(L[e]=n,requirejs.onResourceLoad&&requirejs.onResourceLoad(C,t.map,t.deps)),t.finished=!0,t.resolve(n)}function r(e,t){e.finished=!0,e.rejected=!0,e.reject(t)}function a(e){e.factoryCalled=!0;var t,n=e.map.id;try{t=C.execCb(n,e.factory,e.values,L[n])}catch(t){return r(e,t)}n?t===undef&&(e.cjsModule?t=e.cjsModule.exports:e.usingExports&&(t=L[n])):I.splice(I.indexOf(e),1),o(n,e,t)}function s(e,t){this.rejected||this.depDefined[t]||(this.depDefined[t]=!0,this.depCount+=1,this.values[t]=e,this.depending||this.depCount!==this.depMax||a(this))}function l(e,t){var n={};return n.promise=new Promise((function(t,i){n.resolve=t,n.reject=function(t){e||I.splice(I.indexOf(n),1),i(t)}})),n.map=e?t||y(e):{},n.depCount=0,n.depMax=0,n.values=[],n.depDefined=[],n.depFinished=s,n.map.pr&&(n.deps=[y(n.map.pr)]),n}function c(e,t){var n;return e?(n=e in T&&T[e])||(n=T[e]=l(e,t)):(n=l(),I.push(n)),n}function d(e,t){return function(n){e.rejected||(n.dynaId||(n.dynaId="id"+(O+=1),n.requireModules=[t]),r(e,n))}}function u(e,t,n,i){n.depMax+=1,_(e,t).then((function(e){n.depFinished(e,i)}),d(n,e.id)).catch(d(n,n.map.id))}function p(e,t,a){e.load(t.n,i(a),function(e){function t(t){i||o(e,c(e),t)}var i;return t.error=function(t){r(c(e),t)},t.fromText=function(t,o){var a,s=c(e),l=y(y(e).n),d=l.id;i=!0,s.factory=function(e,t){return t},o&&(t=o),hasProp(x.config,e)&&(x.config[d]=x.config[e]);try{b.exec(t)}catch(e){(a=new Error("fromText eval for "+d+" failed: "+e)).requireType="fromtexteval",r(s,a)}n(d),s.deps=[l],u(l,null,s,s.deps.length)},t}(t.id),x)}function m(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function h(e,t,n){var i=e.map.id;t[i]=!0,!e.finished&&e.deps&&e.deps.forEach((function(i){var o=i.id,r=!hasProp(w,o)&&c(o,i);!r||r.finished||n[o]||(hasProp(t,o)?e.deps.forEach((function(t,n){t.id===o&&e.depFinished(L[o],n)})):h(r,t,n))})),n[i]=!0}function f(e){var t,n,i,o=[],a=1e3*x.waitSeconds,s=a&&j+a<(new Date).getTime();if(0===P&&(e?e.finished||h(e,{},{}):I.length&&I.forEach((function(e){h(e,{},{})}))),s){for(n in T)(i=T[n]).finished||o.push(i.map.id);(t=new Error("Timeout for modules: "+o)).requireModules=o,t.requireType="timeout",o.forEach((function(e){r(c(e),t)}))}else(P||I.length)&&(E||(E=!0,setTimeout((function(){E=!1,f()}),70)))}function g(e){return setTimeout((function(){e.dynaId&&q[e.dynaId]||(q[e.dynaId]=!0,b.onError(e))})),e}var b,v,y,_,w,E,S,C,L=obj(),k=obj(),x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},M=obj(),I=[],T=obj(),D=obj(),A=obj(),P=0,j=(new Date).getTime(),O=0,q=obj(),N=obj(),B=obj(),F=Promise.resolve();return S="function"==typeof importScripts?function(e){var t=e.url;N[t]||(N[t]=!0,c(e.id),importScripts(t),n(e.id))}:function(e){var t,i=e.id,o=e.url;N[o]||(N[o]=!0,(t=document.createElement("script")).setAttribute("data-requiremodule",i),t.type=x.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,P+=1,t.addEventListener("load",(function(){P-=1,n(i)}),!1),t.addEventListener("error",(function(){var e,n,o;P-=1,(n=getOwn(x.paths,i))&&Array.isArray(n)&&n.length>1?(t.parentNode.removeChild(t),n.shift(),(o=c(i)).map=y(i),o.map.url=b.nameToUrl(i),S(o.map)):((e=new Error("Load failed: "+i+": "+t.src)).requireModules=[i],e.requireType="scripterror",r(c(i),e))}),!1),t.src=o,x.onNodeCreated&&x.onNodeCreated(t,x,i,o),10===document.documentMode?asap.then((function(){document.head.appendChild(t)})):document.head.appendChild(t))},_=function(e,t){var n,i,o=e.id,r=x.shim[o];if(o in k)n=k[o],delete k[o],v.apply(undef,n);else if(!(o in T))if(e.pr){if(!(i=getOwn(B,o)))return _(y(e.pr)).then((function(n){var i=e.prn?e:y(o,t,!0),r=i.id,a=getOwn(x.shim,r);return r in A||(A[r]=!0,a&&a.deps?b(a.deps,(function(){p(n,i,t)})):p(n,i,t)),c(r).promise}));e.url=b.nameToUrl(i),S(e)}else r&&r.deps?b(r.deps,(function(){S(e)})):S(e);return c(o).promise},y=function(e,n,i){if("string"!=typeof e)return e;var o,r,a,s,l,c,d=e+" & "+(n||"")+" & "+!!i;return s=(a=m(e))[0],e=a[1],!s&&d in M?M[d]:(s&&(o=(s=t(s,n,i))in L&&L[s]),s?o&&o.normalize?(e=o.normalize(e,function(e){return function(n){return t(n,e,!0)}}(n)),c=!0):e=-1===e.indexOf("!")?t(e,n,i):e:(s=(a=m(e=t(e,n,i)))[0],e=a[1],r=b.nameToUrl(e)),l={id:s?s+"!"+e:e,n:e,pr:s,url:r,prn:s&&c},s||(M[d]=l),l)},w={require:function(e){return i(e)},exports:function(e){var t=L[e];return void 0!==t?t:L[e]={}},module:function(e,t){return{id:e,uri:t||"",exports:w.exports(e),config:function(){return getOwn(x.config,e)||{}}}}},v=function(e,t,n,i,r){if(e){if(e in D)return;D[e]=!0}var s=c(e);return t&&!Array.isArray(t)&&(n=t,t=[]),t=t?slice.call(t,0):null,i||(hasProp(x,"defaultErrback")?x.defaultErrback&&(i=x.defaultErrback):i=g),i&&s.promise.catch(i),r=r||e,"function"==typeof n?(!t.length&&n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,(function(e,n){t.push(n)})),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)),s.factory=n,s.deps=t,s.depending=!0,t.forEach((function(n,i){var o;t[i]=o=y(n,r,!0),"require"===(n=o.id)?s.values[i]=w.require(e):"exports"===n?(s.values[i]=w.exports(e),s.usingExports=!0):"module"===n?s.values[i]=s.cjsModule=w.module(e,s.map.url):void 0===n?s.values[i]=void 0:u(o,r,s,i)})),s.depending=!1,s.depCount===s.depMax&&a(s)):e&&o(e,s,n),j=(new Date).getTime(),e||f(s),s.promise},(b=i(null,!0)).config=function(t){var n,i,o,r;return t.context&&t.context!==e?(n=getOwn(contexts,t.context))?n.req.config(t):newContext(t.context).config(t):(M=obj(),t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/"),"string"==typeof t.urlArgs&&(i=t.urlArgs,t.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+i}),o=x.shim,r={paths:!0,bundles:!0,config:!0,map:!0},eachProp(t,(function(e,t){r[t]?(x[t]||(x[t]={}),mixin(x[t],e,!0,!0)):x[t]=e})),t.bundles&&eachProp(t.bundles,(function(e,t){e.forEach((function(e){e!==t&&(B[e]=t)}))})),t.shim&&(eachProp(t.shim,(function(e,t){Array.isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}}(e)),o[t]=e})),x.shim=o),t.packages&&t.packages.forEach((function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(x.paths[t]=e.location),x.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")})),(t.deps||t.callback)&&b(t.deps,t.callback),b)},b.onError=function(e){throw e},C={id:e,defined:L,waiting:k,config:x,deferreds:T,req:b,execCb:function(e,t,n,i){return t.apply(i,n)}},contexts[e]=C,b}var topReq,dataMain,src,subPath,bootstrapConfig,hasOwn,contexts,queue,currDirRegExp,urlRegExp,commentRegExp,cjsRequireRegExp,jsSuffixRegExp,slice,asap;if(!Promise)throw new Error("No Promise implementation available");bootstrapConfig=requirejs||require,hasOwn=Object.prototype.hasOwnProperty,contexts={},queue=[],currDirRegExp=/^\.\//,urlRegExp=/^\/|\:|\?|\.js$/,commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,slice=Array.prototype.slice,"function"!=typeof requirejs&&(asap=Promise.resolve(void 0),requirejs=topReq=newContext("_"),"function"!=typeof require&&(require=topReq),topReq.exec=function(text){return eval(text)},topReq.contexts=contexts,define=function(){queue.push(slice.call(arguments,0))},define.amd={jQuery:!0},bootstrapConfig&&topReq.config(bootstrapConfig),topReq.isBrowser&&!contexts._.config.skipDataMain&&(dataMain=document.querySelectorAll("script[data-main]")[0],dataMain=dataMain&&dataMain.getAttribute("data-main"),dataMain&&(dataMain=dataMain.replace(jsSuffixRegExp,""),bootstrapConfig&&bootstrapConfig.baseUrl||-1!==dataMain.indexOf("!")||(src=dataMain.split("/"),dataMain=src.pop(),subPath=src.length?src.join("/")+"/":"./",topReq.config({baseUrl:subPath})),topReq([dataMain]))))})(this,"undefined"!=typeof Promise?Promise:void 0),define("requireLib",(function(){})),requirejs.config({paths:{"focus-trap":"3rdParty/focus-trap/focus-trap.umd.min","perfect-scrollbar":"3rdParty/perfect-scrollbar",Pica:"3rdParty/pica",pica:"3rdParty/pica",prism:"3rdParty/prism",prismjs:"3rdParty/prism/prism","qr-creator":"3rdParty/qr-creator.min","reflect-metadata":"3rdParty/reflect-metadata",tabbable:"3rdParty/focus-trap/index.umd.min",tslib:"3rdParty/tslib",zxcvbn:"3rdParty/zxcvbn","@googlemaps/markerclusterer":"3rdParty/googlemaps/markerclusterer/index.umd","@ckeditor/ckeditor5-inspector":"3rdParty/ckeditor/ckeditor5-inspector/inspector","ckeditor5-bundle":"3rdParty/ckeditor/ckeditor5.bundle","ckeditor5-translation":"3rdParty/ckeditor/translations"},packages:[{name:"codemirror",location:"3rdParty/codemirror",main:"lib/codemirror"}],shim:{"perfect-scrollbar":{exports:"PerfectScrollbar"},"qr-creator":{exports:"QrCreator"}},map:{"*":{Ajax:"WoltLabSuite/Core/Ajax",AjaxJsonp:"WoltLabSuite/Core/Ajax/Jsonp",AjaxRequest:"WoltLabSuite/Core/Ajax/Request",CallbackList:"WoltLabSuite/Core/CallbackList",ColorUtil:"WoltLabSuite/Core/ColorUtil",Core:"WoltLabSuite/Core/Core",DateUtil:"WoltLabSuite/Core/Date/Util",Devtools:"WoltLabSuite/Core/Devtools",Dictionary:"WoltLabSuite/Core/Dictionary","Dom/ChangeListener":"WoltLabSuite/Core/Dom/Change/Listener","Dom/Traverse":"WoltLabSuite/Core/Dom/Traverse","Dom/Util":"WoltLabSuite/Core/Dom/Util",Environment:"WoltLabSuite/Core/Environment",EventHandler:"WoltLabSuite/Core/Event/Handler",EventKey:"WoltLabSuite/Core/Event/Key",Language:"WoltLabSuite/Core/Language",List:"WoltLabSuite/Core/List",ObjectMap:"WoltLabSuite/Core/ObjectMap",Permission:"WoltLabSuite/Core/Permission",StringUtil:"WoltLabSuite/Core/StringUtil","Ui/Alignment":"WoltLabSuite/Core/Ui/Alignment","Ui/CloseOverlay":"WoltLabSuite/Core/Ui/CloseOverlay","Ui/Confirmation":"WoltLabSuite/Core/Ui/Confirmation","Ui/Dialog":"WoltLabSuite/Core/Ui/Dialog","Ui/Notification":"WoltLabSuite/Core/Ui/Notification","Ui/ReusableDropdown":"WoltLabSuite/Core/Ui/Dropdown/Reusable","Ui/Screen":"WoltLabSuite/Core/Ui/Screen","Ui/Scroll":"WoltLabSuite/Core/Ui/Scroll","Ui/SimpleDropdown":"WoltLabSuite/Core/Ui/Dropdown/Simple","Ui/TabMenu":"WoltLabSuite/Core/Ui/TabMenu",Upload:"WoltLabSuite/Core/Upload",User:"WoltLabSuite/Core/User"}},waitSeconds:0}),define("jquery",[],(function(){return window.jQuery})),define("require.config",(function(){})),function(e,t){var n;e.elAttr=function(e,t,n){if(void 0===n)return e.getAttribute(t)||"";e.setAttribute(t,n)},e.elAttrBool=function(e,t){var n=elAttr(e,t);return"1"===n||"true"===n},e.elByClass=function(e,n){return(n||t).getElementsByClassName(e)},e.elById=function(e){return t.getElementById(e)},e.elBySel=function(e,n){return(n||t).querySelector(e)},e.elBySelAll=function(e,n,i){var o=(n||t).querySelectorAll(e);return"function"==typeof i&&Array.prototype.forEach.call(o,i),o},e.elByTag=function(e,n){return(n||t).getElementsByTagName(e)},e.elCreate=function(e){return t.createElement(e)},e.elClosest=function(e,t){if(!(e instanceof Node))throw new TypeError("Provided element is not a Node.");return e.nodeType===Node.TEXT_NODE&&null===(e=e.parentNode)?null:("string"!=typeof t&&(t=""),0===t.length?e:e.closest(t))},e.elData=function(e,t,n){if(t="data-"+t,void 0===n)return e.getAttribute(t)||"";e.setAttribute(t,n)},e.elDataBool=function(e,t){var n=elData(e,t);return"1"===n||"true"===n},e.elHide=function(e){e.style.setProperty("display","none","")},e.elIsHidden=function(e){return"none"===e.style.getPropertyValue("display")},e.elInnerError=function(e,t,n){var i,o,r,a=e.parentNode;if(null===a)throw new Error("Only elements that have a parent element or document are valid.");if("string"!=typeof t){if(null!=t&&!1!==t)throw new TypeError("The error message must be a string; `false`, `null` or `undefined` can be used as a substitute for an empty string.");t=""}return o=e,(i=a).classList.contains("inputAddon")&&(i=a.parentElement,o=a),null!==(r=o.nextElementSibling)&&"SMALL"===r.nodeName&&r.classList.contains("innerError")||(""===t?r=null:((r=elCreate("small")).className="innerError",i.insertBefore(r,o.nextSibling))),""===t?null!==r&&(a.removeChild(r),r=null):r[n?"innerHTML":"textContent"]=t,r},e.elRemove=function(e){e.parentNode.removeChild(e)},e.elShow=function(e){e.style.removeProperty("display")},e.elToggle=function(e){"none"===e.style.getPropertyValue("display")?elShow(e):elHide(e)},e.forEach=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},e.objOwns=function(e,t){return e.hasOwnProperty(t)},e.debounce=function(e,t,n){var i;return function(){var o=this,r=arguments;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(o,r)}),t),n&&!i&&e.apply(o,r)}},Object.defineProperty(e,"WCF_CLICK_EVENT",{value:"click"}),n=0,function t(){e.history.state&&e.history.state.name&&"initial"!==e.history.state.name?(e.history.replaceState({name:"skip",depth:++n},""),e.history.back(),setTimeout(t,1)):e.history.replaceState({name:"initial"},"")}(),e.addEventListener("popstate",(function(t){t.state&&t.state.name&&"skip"===t.state.name&&e.history.go(t.state.depth)})),e.String.prototype.hashCode=function(){var e,t,n=0;if(this.length)for(e=0,t=this.length;e<t;e++)n=(n<<5)-n+this.charCodeAt(e),n&=n;return n},Object.defineProperty(e,"SECURITY_TOKEN",{configurable:!1,get(){const e=t.cookie.split(";").map((e=>e.trim())).find((e=>e.startsWith("XSRF-TOKEN=")));if(void 0===e)return"COOKIE_NOT_FOUND";const[n,i]=e.split(/=/,2);return decodeURIComponent(i.trim())}})}(window,document),define("wcf.globalHelper",(function(){})),function(e){function t(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,i){return e[n]=t?t(n,i):i}}var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],(function(i){e(t(n,t(i)))})):"object"==typeof module&&"object"==typeof module.exports?e(t(n,t(module.exports))):e(t(n))}((function(e){var t,n,i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};__extends=function(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__assign=Object.assign||function(e){var t,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__rest=function(e,t){var n,i,o={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]]);return o},__decorate=function(e,t,n,i){var o,r,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},__param=function(e,t){return function(n,i){t(n,i,e)}},__esDecorate=function(e,t,n,i,o,r){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}var s,l,c,d,u,p=i.kind,m="getter"===p?"get":"setter"===p?"set":"value",h=!t&&e?i.static?e:e.prototype:null,f=t||(h?Object.getOwnPropertyDescriptor(h,i.name):{}),g=!1;for(l=n.length-1;l>=0;l--){for(d in c={},i)c[d]="access"===d?{}:i[d];for(d in i.access)c.access[d]=i.access[d];if(c.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");r.push(a(e||null))},u=(0,n[l])("accessor"===p?{get:f.get,set:f.set}:f[m],c),"accessor"===p){if(void 0===u)continue;if(null===u||"object"!=typeof u)throw new TypeError("Object expected");(s=a(u.get))&&(f.get=s),(s=a(u.set))&&(f.set=s),(s=a(u.init))&&o.unshift(s)}else(s=a(u))&&("field"===p?o.unshift(s):f[m]=s)}h&&Object.defineProperty(h,i.name,f),g=!0},__runInitializers=function(e,t,n){var i,o=arguments.length>2;for(i=0;i<t.length;i++)n=o?t[i].call(e,n):t[i].call(e);return o?n:void 0},__propKey=function(e){return"symbol"==typeof e?e:"".concat(e)},__setFunctionName=function(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},__generator=function(e,t){function n(n){return function(l){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,n[0]&&(s=0)),s;)try{if(i=1,o&&(r=2&n[0]?o.return:n[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}var i,o,r,a,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},__exportStar=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||__createBinding(t,e,n)},__createBinding=Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var n,i,o,r,a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;n=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(r)throw r.error}}return o},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){var e,t,n,i,o,r,a,s;for(e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(i=Array(e),o=0,t=0;t<n;t++)for(a=0,s=(r=arguments[t]).length;a<s;a++,o++)i[o]=r[a];return i},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,n){function i(e){c[e]&&(l[e]=function(t){return new Promise((function(n,i){d.push([e,t,n,i])>1||o(e,t)}))})}function o(e,t){try{(n=c[e](t)).value instanceof __await?Promise.resolve(n.value.v).then(r,a):s(d[0][2],n)}catch(e){s(d[0][3],e)}var n}function r(e){o("next",e)}function a(e){o("throw",e)}function s(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,c=n.apply(e,t||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l},__asyncDelegator=function(e){function t(t,o){n[t]=e[t]?function(n){return(i=!i)?{value:__await(e[t](n)),done:!1}:o?o(n):n}:o}var n,i;return n={},t("next"),t("throw",(function(e){throw e})),t("return"),n[Symbol.iterator]=function(){return this},n},__asyncValues=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(i,o){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,o,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},t=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},__importStar=function(e){var n,i;if(e&&e.__esModule)return e;if(n={},null!=e)for(i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(n,e,i);return t(n,e),n},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},__classPrivateFieldSet=function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldIn=function(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},__addDisposableResource=function(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t},n="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i},__disposeResources=function(e){function t(t){e.error=e.hasError?new n(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(var i,o;e.stack.length;){i=e.stack.pop();try{if(o=i.dispose&&i.dispose.call(i.value),i.async)return Promise.resolve(o).then(n,(function(e){return t(e),n()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()},e("__extends",__extends),e("__assign",__assign),e("__rest",__rest),e("__decorate",__decorate),e("__param",__param),e("__esDecorate",__esDecorate),e("__runInitializers",__runInitializers),e("__propKey",__propKey),e("__setFunctionName",__setFunctionName),e("__metadata",__metadata),e("__awaiter",__awaiter),e("__generator",__generator),e("__exportStar",__exportStar),e("__createBinding",__createBinding),e("__values",__values),e("__read",__read),e("__spread",__spread),e("__spreadArrays",__spreadArrays),e("__spreadArray",__spreadArray),e("__await",__await),e("__asyncGenerator",__asyncGenerator),e("__asyncDelegator",__asyncDelegator),e("__asyncValues",__asyncValues),e("__makeTemplateObject",__makeTemplateObject),e("__importStar",__importStar),e("__importDefault",__importDefault),e("__classPrivateFieldGet",__classPrivateFieldGet),e("__classPrivateFieldSet",__classPrivateFieldSet),e("__classPrivateFieldIn",__classPrivateFieldIn),e("__addDisposableResource",__addDisposableResource),e("__disposeResources",__disposeResources)})),define("WoltLabSuite/Core/Ajax/Status",["require","exports"],(function(e,t){"use strict";function n(){return void 0===o&&(o=new i),o}Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;class i{_activeRequests=0;_overlay;_timer=null;constructor(){this._overlay=document.createElement("div"),this._overlay.classList.add("spinner"),this._overlay.setAttribute("role","status");const e=document.createElement("woltlab-core-loading-indicator");e.size=48,this._overlay.append(e),document.body.append(this._overlay)}show(){this._activeRequests++,null===this._timer&&(this._timer=window.setTimeout((()=>{this._activeRequests&&this._overlay.classList.add("active"),this._timer=null}),250))}hide(){0==--this._activeRequests&&(null!==this._timer&&(window.clearTimeout(this._timer),this._timer=null),this._overlay.classList.remove("active"))}}let o;t.show=function(){n().show()},t.hide=function(){n().hide()}})),define("WoltLabSuite/Core/Core",["require","exports"],(function(e,t){"use strict";function n(e){return r(e)}function i(e,...t){const r=n(e=e||{});for(let n=0,a=t.length;n<a;n++){const a=t[n];a&&Object.keys(a).forEach((t=>{Array.isArray(a[t])||"object"!=typeof a[t]?r[t]=a[t]:o(a[t])?r[t]=i(e[t],a[t]):r[t]=a[t]}))}return r}function o(e){return"object"==typeof e&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}Object.defineProperty(t,"__esModule",{value:!0}),t.getXsrfToken=t.enableLegacyInheritance=t.debounce=t.stringToBool=t.getStoragePrefix=t.triggerEvent=t.serialize=t.getUuid=t.getType=t.isPlainObject=t.inherit=t.extend=t.convertLegacyUrl=t.clone=void 0;const r=function(e){return"object"==typeof e&&(Array.isArray(e)||o(e))?a(e):e},a=function(e){if(!e)return null;if(Array.isArray(e))return e.slice();const t={};return Object.keys(e).forEach((n=>t[n]=r(e[n]))),t},s="wsc"+window.WCF_PATH.hashCode()+"-";t.clone=n,t.convertLegacyUrl=function(e){return e.replace(/^index\.php\/(.*?)\/\?/,((e,t)=>{const n=t.split(/([A-Z][a-z0-9]+)/);t="";for(let e=0,i=n.length;e<i;e++){const i=n[e].trim();i.length&&(t.length&&(t+="-"),t+=i.toLowerCase())}return`index.php?${t}/&`}))},t.extend=i,t.inherit=function(e,t,n){if(null==e)throw new TypeError("The constructor must not be undefined or null.");if(null==t)throw new TypeError("The super constructor must not be undefined or null.");if(void 0===t.prototype)throw new TypeError("The super constructor must have a prototype.");e._super=t,e.prototype=i(Object.create(t.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0}}),n||{})},t.isPlainObject=o,t.getType=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)]$/,"$1")},t.getUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},t.serialize=function e(t,n){if(null===t)return"";const i=[];return Object.keys(t).forEach((o=>{const r=n?n+"["+o+"]":o,a=t[o];"object"==typeof a?i.push(e(a,r)):i.push(encodeURIComponent(r)+"="+encodeURIComponent(a))})),i.join("&")},t.triggerEvent=function(e,t){if("click"===t&&e instanceof HTMLElement)return void e.click();const n=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(n)},t.getStoragePrefix=function(){return s},t.stringToBool=function(e){return"1"===e||"true"===e},t.debounce=function(e,t=50,n={isImmediate:!1}){let i;return function(...o){const r=n.isImmediate&&void 0===i;void 0!==i&&clearTimeout(i),i=setTimeout((()=>{i=void 0,n.isImmediate||e.apply(this,o)}),t),r&&e.apply(this,o)}},t.enableLegacyInheritance=function(e){console.error("Relying on the legacy inheritance is no longer supported. Please migrate your code to use ES6 classes and inheritance.",e)},t.getXsrfToken=function(){const e=document.cookie.split(";").map((e=>e.trim())).find((e=>e.startsWith("XSRF-TOKEN=")));if(void 0===e)return"COOKIE_NOT_FOUND";const[t,n]=e.split(/=/,2);return decodeURIComponent(n.trim())}})),define("WoltLabSuite/Core/CallbackList",["require","exports"],(function(e,t){"use strict";return class{_callbacks=new Map;add(e,t){if("function"!=typeof t)throw new TypeError("Expected a valid callback as second argument for identifier '"+e+"'.");this._callbacks.has(e)||this._callbacks.set(e,[]),this._callbacks.get(e).push(t)}remove(e){this._callbacks.delete(e)}forEach(e,t){null===e?this._callbacks.forEach(((e,n)=>{e.forEach(t)})):this._callbacks.get(e)?.forEach(t)}}})),define("WoltLabSuite/Core/Dom/Change/Listener",["require","exports","tslib","../../CallbackList"],(function(e,t,n,i){"use strict";const o=new((i=n.__importDefault(i)).default);let r=!1;return{add:o.add.bind(o),remove:o.remove.bind(o),trigger(){if(!r)try{r=!0,o.forEach(null,(e=>e()))}finally{r=!1}}}})),define("WoltLabSuite/Core/Language",["require","exports"],(function(e,t){"use strict";function n(e,t={}){return window.WoltLabLanguage.getPhrase(e,t)}function i(e,t){window.WoltLabLanguage.registerPhrase(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.addObject=t.add=t.get=t.registerPhrase=t.getPhrase=void 0,t.getPhrase=n,t.registerPhrase=i,t.get=function(e,t={}){return n(e,t)},t.add=function(e,t){i(e,t)},t.addObject=function(e){Object.entries(e).forEach((([e,t])=>{i(e,t)}))}})),define("WoltLabSuite/Core/Component/Dialog/Controls",["require","exports","tslib","../../Language"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogControls=void 0,i=n.__importStar(i);class o{#e;constructor(e){this.#e=e}asAlert(e){const t={cancel:void 0,extra:void 0,isAlert:!0,primary:e?.primary||i.get("wcf.dialog.button.primary")};return this.#e.attachControls(t),this.#e}asConfirmation(e){const t={cancel:"",extra:void 0,isAlert:!0,primary:e?.primary||i.get("wcf.dialog.button.primary.confirm")};return this.#e.attachControls(t),this.#e}asPrompt(e){const t={cancel:"",extra:e?.extra,isAlert:!1,primary:e?.primary||i.get("wcf.dialog.button.primary.submit")};return this.#e.attachControls(t),this.#e}withoutControls(){return this.#e}}t.DialogControls=o,t.default=o})),define("WoltLabSuite/Core/StringUtil",["require","exports"],(function(e,t){"use strict";function n(e,t){const n=t?-t:2;return e.toLocaleString(document.documentElement.lang,{maximumFractionDigits:n}).replace("-","−")}function i(e){return String(e).substring(0,1).toUpperCase()+e.substring(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.toCamelCase=t.shortUnit=t.unescapeHTML=t.ucfirst=t.lcfirst=t.formatNumeric=t.escapeRegExp=t.escapeHTML=t.addThousandsSeparator=void 0,t.addThousandsSeparator=function(e){return e.toLocaleString(document.documentElement.lang)},t.escapeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.escapeRegExp=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")},t.formatNumeric=n,t.lcfirst=function(e){return String(e).substring(0,1).toLowerCase()+e.substring(1)},t.ucfirst=i,t.unescapeHTML=function(e){return String(e).replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},t.shortUnit=function(e){let t="";return e>=1e6?((e/=1e6)>10&&(e=Math.floor(e)),t="M"):e>=1e3&&((e/=1e3)>10&&(e=Math.floor(e)),t="k"),n(e,-1)+t},t.toCamelCase=function(e){return e.includes("-")?e.split("-").map(((e,t)=>(t>0&&(e=i(e)),e))).join(""):e}})),define("WoltLabSuite/Core/Dom/Util",["require","exports","tslib","../StringUtil"],(function(e,t,n,i){"use strict";function o(e,t,n){if(!t.contains(e))throw new Error("Ancestor element does not contain target element.");let i,o=e;const r=n+"Sibling";for(;null!==o&&o!==t;){if(null!==o[n+"ElementSibling"])return!1;if(o[r])for(i=o[r];i;){if(""!==i.textContent.trim())return!1;i=i[r]}o=o.parentNode}return!0}i=n.__importStar(i);let r=0;const a={createFragmentFromHtml(e){const t=document.createElement("div");a.setInnerHtml(t,e);const n=document.createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return n},getUniqueId(){let e;do{e="wcf"+r++}while(null!==document.getElementById(e));return e},escapeAttributeSelector:e=>e.replace(/(["\\])/g,"\\$1"),identify(e){if(!(e instanceof Element))throw new TypeError("Expected a valid DOM element as argument.");let t=e.id;return t||(t=a.getUniqueId(),e.id=t),t},outerHeight(e,t){t=t||window.getComputedStyle(e);let n=e.offsetHeight;return n+=~~t.marginTop+~~t.marginBottom,n},outerWidth(e,t){t=t||window.getComputedStyle(e);let n=e.offsetWidth;return n+=~~t.marginLeft+~~t.marginRight,n},outerDimensions(e){const t=window.getComputedStyle(e);return{height:a.outerHeight(e,t),width:a.outerWidth(e,t)}},offset(e){const t=e.getBoundingClientRect();return{top:Math.round(t.top+(window.scrollY||window.pageYOffset)),left:Math.round(t.left+(window.scrollX||window.pageXOffset))}},prepend(e,t){t.insertAdjacentElement("afterbegin",e)},insertAfter(e,t){t.insertAdjacentElement("afterend",e)},setStyles(e,t){let n=!1;Object.keys(t).forEach((i=>{/ !important$/.test(t[i])?(n=!0,t[i]=t[i].replace(/ !important$/,"")):n=!1,"important"!==e.style.getPropertyPriority(i)||n||e.style.removeProperty(i),e.style.setProperty(i,t[i],n?"important":"")}))},styleAsInt(e,t){const n=e.getPropertyValue(t);return null===n?0:parseInt(n,10)},setInnerHtml(e,t){let n;e.innerHTML=t,n=e instanceof HTMLTemplateElement?e.content:e;const i=n.querySelectorAll("script");for(let e=0,t=i.length;e<t;e++){const t=i[e],o=document.createElement("script");t.src?o.src=t.src:o.textContent=t.textContent,n.appendChild(o),t.remove()}},insertHtml(e,t,n){const i=document.createElement("template");a.setInnerHtml(i,e);const o=document.importNode(i.content,!0);switch(n){case"append":t.appendChild(o);break;case"after":if(null===t.parentNode)throw new Error("The reference element has no parent, but the insert position was set to 'after'.");t.parentNode.insertBefore(o,t.nextSibling);break;case"prepend":t.insertBefore(o,t.firstChild);break;case"before":if(null===t.parentNode)throw new Error("The reference element has no parent, but the insert position was set to 'before'.");t.parentNode.insertBefore(o,t);break;default:throw new Error("Unknown insert method '"+n+"'.")}},contains:(e,t)=>e.contains(t),getDataAttributes(e,t,n,o){0!==(t=t||"").indexOf("data-")&&(t="data-"+t),n=!0===n,o=!0===o;const r={};for(let a=0,s=e.attributes.length;a<s;a++){const s=e.attributes[a];if(0===s.name.indexOf(t)){let e=s.name.replace(new RegExp("^"+t),"");if(n){const t=e.split("-");e="";for(let n=0,r=t.length;n<r;n++)e.length&&(o&&"id"===t[n]?t[n]="ID":t[n]=i.ucfirst(t[n])),e+=t[n]}r[e]=s.value}}return r},unwrapChildNodes(e){if(null===e.parentNode)throw new Error("The element has no parent.");const t=e.parentNode;for(;e.childNodes.length;)t.insertBefore(e.childNodes[0],e);e.remove()},replaceElement(e,t){if(null===e.parentNode)throw new Error("The old element has no parent.");for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);e.parentNode.insertBefore(t,e),e.remove()},isAtNodeStart:(e,t)=>o(e,t,"previous"),isAtNodeEnd:(e,t)=>o(e,t,"next"),getFixedParent(e){for(;e&&e!==document.body;){if("fixed"===window.getComputedStyle(e).getPropertyValue("position"))return e;e=e.offsetParent}return null},hide(e){e.style.setProperty("display","none","")},show(e){e.style.removeProperty("display")},isHidden:e=>"none"===e.style.getPropertyValue("display"),toggle(e){a.isHidden(e)?a.show(e):a.hide(e)},innerError(e,t,n){const i=e.parentNode;if(null===i)throw new Error("Only elements that have a parent element or document are valid.");if("string"!=typeof t){if(t)throw new TypeError("The error message must be a string; `false`, `null` or `undefined` can be used as a substitute for an empty string.");t=""}let o=i,r=e;o.classList.contains("inputAddon")&&(o=i.parentElement,r=i);let a=r.nextElementSibling;return null!==a&&"SMALL"===a.nodeName&&a.classList.contains("innerError")||(""===t?a=null:(a=document.createElement("small"),a.className="innerError",o.insertBefore(a,r.nextSibling))),""===t?null!==a&&(a.remove(),a=null):n?a.innerHTML=t:a.textContent=t,a},innerSuccess(e,t,n){const i=e.parentNode;if(null===i)throw new Error("Only elements that have a parent element or document are valid.");if("string"!=typeof t){if(t)throw new TypeError("The message must be a string; `false`, `null` or `undefined` can be used as a substitute for an empty string.");t=""}let o=e.nextElementSibling;return null!==o&&"SMALL"===o.nodeName&&o.classList.contains("innerSuccess")||(""===t?o=null:(o=document.createElement("small"),o.className="innerSuccess",i.insertBefore(o,e.nextSibling))),""===t?null!==o&&(o.remove(),o=null):n?o.innerHTML=t:o.textContent=t,o},closest:(e,t)=>(e instanceof HTMLElement?e:e.parentElement).closest(t),getClosestElement:e=>e instanceof HTMLElement?e:e.parentElement};return window.bc_wcfDomUtil=a,a})),define("WoltLabSuite/Core/Ajax/Error",["require","exports","tslib","../Component/Dialog","../Core","../Language","../StringUtil"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerGlobalRejectionHandler=t.InvalidJson=t.ExpectedJson=t.StatusNotOk=t.ConnectionError=t.ApiError=void 0,o=n.__importStar(o),r=n.__importStar(r);class s extends Error{name="ApiError"}t.ApiError=s;class l extends s{originalError;constructor(e){let t="Unknown error";e instanceof Error&&(t=e.message),super(t),this.name="ConnectionError",this.originalError=e}}t.ConnectionError=l;class c extends s{response;constructor(e){super("The API request returned a status code outside of the 200-299 range."),this.name="StatusNotOk",this.response=e}}t.StatusNotOk=c;class d extends s{response;constructor(e){super("The API did not return a JSON response."),this.name="ExpectedJson",this.response=e}}t.ExpectedJson=d;class u extends s{response;constructor(e){super("Failed to decode the JSON response from the API."),this.name="InvalidJson",this.response=e}}t.InvalidJson=u;let p=!1;t.registerGlobalRejectionHandler=function(){p||(window.addEventListener("unhandledrejection",(e=>{e.reason instanceof s&&(e.preventDefault(),async function(e){const t=await async function(e){let t="",n="";if(e instanceof l)n=e.originalError instanceof TypeError?r.get("wcf.global.error.ajax.network",{message:e.message}):e.message;else if(e instanceof u)n=await e.response.clone().text();else if(e instanceof d||e instanceof c){let i;try{i=await e.response.clone().json()}catch(t){n=await e.response.clone().text()}if(i&&o.isPlainObject(i)&&Object.keys(i).length>0)i.returnValues&&i.returnValues.description&&(t+=`<br><p>Description:</p><p>${i.returnValues.description}</p>`),i.file&&i.line&&(t+=`<br><p>File:</p><p>${i.file} in line ${i.line}</p>`),i.exception?t+=`<br>Exception: <div style="white-space: pre;">${(0,a.escapeHTML)(i.exception)}</div>`:i.stacktrace?t+=`<br><p>Stacktrace:</p><p>${i.stacktrace}</p>`:i.exceptionID&&(t+=`<br><p>Exception ID: <code>${i.exceptionID}</code></p>`),n=i.message,i.previous&&i.previous.forEach((e=>{t+=`<hr><p>${e.message}</p>`,t+=`<br><p>Stacktrace</p><p>${e.stacktrace}</p>`}));else if(void 0===i){const e=document.createElement("iframe");return e.classList.add("dialog__iframe"),e.srcdoc=n,e}}if(!n||"undefined"===n){if(!window.ENABLE_DEBUG_MODE)return"";n="fetch() failed without a response body. Check your browser console."}return`<div class="ajaxDebugMessage"><p>${n}</p>${t}</div>`}(e);if(t instanceof HTMLIFrameElement){const e=(0,i.dialogFactory)().fromHtml(`<div class="dialog__iframeContainer">${t.outerHTML}</div>`).asAlert();e.show(r.get("wcf.global.error.title")),e.querySelector("dialog").classList.add("dialog--iframe")}else""!==t&&(0,i.dialogFactory)().fromHtml(t).asAlert().show(r.get("wcf.global.error.title"))}(e.reason))})),p=!0)}})),define("WoltLabSuite/Core/Ajax/Backend",["require","exports","tslib","./Status","./Error","../Core"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareRequest=void 0,i=n.__importStar(i);class a{url;constructor(e){this.url=e}get(){return new c(this.url,0)}post(e){return new l(this.url,1,e)}}let s=!1;window.addEventListener("unload",(()=>s=!0));class l{#t;#n;#i;#o;#r=!0;#a=!1;constructor(e,t,n){this.#t=e,this.#n=t,this.#i=n}getAbortController(){return void 0===this.#o&&(this.#o=new AbortController),this.#o}disableLoadingIndicator(){return this.#r=!1,this}allowCaching(){return this.#a=!0,this}async fetchAsJson(){const e=await this.#s({headers:{accept:"application/json"}});if(void 0===e)return;const t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw new o.ExpectedJson(e);let n;try{n=await e.json()}catch(t){throw new o.InvalidJson(e)}return n}async fetchAsResponse(){return this.#s()}async#s(t={}){(0,o.registerGlobalRejectionHandler)();const a=(0,r.extend)({headers:{"X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":(0,r.getXsrfToken)()},mode:"same-origin",credentials:"same-origin",cache:this.#a?"default":"no-store",redirect:"error"},t);1===this.#n?(a.method="POST",this.#i&&(this.#i instanceof FormData?(a.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",a.body=this.#i):(a.headers["Content-Type"]="application/json; charset=UTF-8",a.body=JSON.stringify(this.#i)))):a.method="GET",this.#o&&(a.signal=this.#o.signal);const l=this.#r;l&&i.show();try{const t=await fetch(this.#t,a);if(!t.ok)throw new o.StatusNotOk(t);return"yes"===t.headers.get("woltlab-background-queue-check")&&new Promise(((t,n)=>{e(["../BackgroundQueue"],t,n)})).then(n.__importStar).then((e=>e.invoke())),t}catch(e){if(e instanceof o.ApiError)throw e;if(e instanceof DOMException&&"AbortError"===e.name)return;if(!s)throw new o.ConnectionError(e)}finally{l&&i.hide()}}}class c extends l{allowCaching(){return super.allowCaching(),this}}t.prepareRequest=function(e){return new a(e)}})),define("WoltLabSuite/Core/Devtools",["require","exports"],(function(e,t){"use strict";function n(){window.sessionStorage&&window.sessionStorage.setItem("__wsc_devtools_config",JSON.stringify(i))}let i={editorAutosave:!0,editorInspector:!1,eventLogging:!1};const o={help(){window.console.log(""),window.console.log("%cAvailable commands:","text-decoration: underline"),Object.keys(o).filter((e=>"_internal_"!==e)).sort().forEach((e=>{window.console.log(`\tDevtools.${e}()`)})),window.console.log("")},toggleEditorAutosave(e){i.editorAutosave=!e&&!i.editorAutosave,n(),window.console.log("%c\tEditor autosave "+(i.editorAutosave?"enabled":"disabled"),"font-style: italic")},toggleEditorInspector(e){i.editorInspector=!!e||!i.editorInspector,n(),window.console.log("%c\tEditor inspector "+(i.editorInspector?"enabled":"disabled"),"font-style: italic")},toggleEventLogging(e){i.eventLogging=!!e||!i.eventLogging,n(),window.console.log("%c\tEvent logging "+(i.eventLogging?"enabled":"disabled"),"font-style: italic")},_internal_:{enable(){if(window.Devtools=o,window.console.log("%cDevtools for WoltLab Suite loaded","font-weight: bold"),window.sessionStorage){const e=window.sessionStorage.getItem("__wsc_devtools_config");try{null!==e&&(i=JSON.parse(e))}catch(e){}i.editorAutosave||o.toggleEditorAutosave(!0),i.editorInspector&&o.toggleEditorInspector(!0),i.eventLogging&&o.toggleEventLogging(!0)}window.console.log("Settings are saved per browser session, enter `Devtools.help()` to learn more."),window.console.log("")},editorAutosave:()=>i.editorAutosave,editorInspector:()=>i.editorInspector,eventLog(e,t){i.eventLogging&&window.console.log("[Devtools.EventLogging] Firing event: "+t+" @ "+e)}}};return o})),define("WoltLabSuite/Core/Event/Handler",["require","exports","tslib","../Core","../Devtools"],(function(e,t,n,i,o){"use strict";function r(e,t){"string"!=typeof t&&(t=void 0);const n=a.get(e);void 0!==n&&(void 0===t?a.delete(e):n.delete(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.removeAllBySuffix=t.removeAll=t.remove=t.fire=t.add=void 0,i=n.__importStar(i),o=n.__importDefault(o);const a=new Map;t.add=function(e,t,n){if("function"!=typeof n)throw new TypeError(`Expected a valid callback for '${t}'@'${e}'.`);let o=a.get(e);void 0===o&&(o=new Map,a.set(e,o));let r=o.get(t);void 0===r&&(r=new Map,o.set(t,r));const s=i.getUuid();return r.set(s,n),s},t.fire=function(e,t,n){o.default._internal_.eventLog(e,t),n=n||{},a.get(e)?.get(t)?.forEach((e=>e(n)))},t.remove=function(e,t,n){a.get(e)?.get(t)?.delete(n)},t.removeAll=r,t.removeAllBySuffix=function(e,t){const n=a.get(e);if(void 0===n)return;const i=-1*(t="_"+t).length;n.forEach(((n,o)=>{o.substr(i)===t&&r(e,o)}))}})),define("WoltLabSuite/Core/Form/Builder/Field/Field",["require","exports"],(function(e,t){"use strict";return class{_fieldId;_field;constructor(e){this.init(e)}init(e){this._fieldId=e,this._readField()}_getData(){throw new Error("Missing implementation of WoltLabSuite/Core/Form/Builder/Field/Field._getData!")}_readField(){if(this._field=document.getElementById(this._fieldId),null===this._field)throw new Error("Unknown field with id '"+this._fieldId+"'.")}destroy(){}getData(){return Promise.resolve(this._getData())}getId(){return this._fieldId}}})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Manager",["require","exports","tslib","../../../../Dom/Util","../../../../Event/Handler"],(function(e,t,n,i,o){"use strict";function r(){!0!==p?(p=!0,m=!1,o.fire("com.woltlab.wcf.form.builder.dependency","checkContainers"),p=!1,m&&r()):m=!0}function a(){const e=[];d.forEach(((t,n)=>{const o=document.getElementById(n);if(null===o)return void e.push(n);let r=!0;var a;t.forEach((e=>{var t;e.checkDependency()||(t=o,i.default.hide(t),s.add(t),t.classList.contains("tabMenuContent")&&t.parentNode.querySelector(".tabMenu").querySelectorAll("li").forEach((e=>{e.dataset.name===t.dataset.name&&i.default.hide(e)})),t.querySelectorAll("[max], [maxlength], [min], [required]").forEach((e=>{const t=new Map,n=e.getAttribute("max");n&&(t.set("max",n),e.removeAttribute("max"));const i=e.getAttribute("maxlength");i&&(t.set("maxlength",i),e.removeAttribute("maxlength"));const o=e.getAttribute("min");o&&(t.set("min",o),e.removeAttribute("min")),e.required&&(t.set("required","true"),e.removeAttribute("required")),u.set(e,t)})),r=!1)})),r&&(a=o,i.default.show(a),s.delete(a),a.classList.contains("tabMenuContent")&&a.parentNode.querySelector(".tabMenu").querySelectorAll("li").forEach((e=>{e.dataset.name===a.dataset.name&&i.default.show(e)})),a.querySelectorAll("input, select").forEach((e=>{let t=e.parentNode;for(;t!==a&&!i.default.isHidden(t);)t=t.parentNode;if(t===a&&u.has(e)){const t=u.get(e);t.has("max")&&e.setAttribute("max",t.get("max")),t.has("maxlength")&&e.setAttribute("maxlength",t.get("maxlength")),t.has("min")&&e.setAttribute("min",t.get("min")),t.has("required")&&e.setAttribute("required",""),u.delete(e)}})))})),e.forEach((e=>d.delete(e))),r()}Object.defineProperty(t,"__esModule",{value:!0}),t.unregister=t.register=t.isHiddenByDependencies=t.checkDependencies=t.checkContainers=t.addDependency=t.addContainerCheckCallback=void 0,i=n.__importDefault(i),o=n.__importStar(o);const s=new Set,l=new Map,c=new WeakSet,d=new Map,u=new WeakMap;let p=!1,m=!0;t.addContainerCheckCallback=function(e){if("function"!=typeof e)throw new TypeError("Expected a valid callback for parameter 'callback'.");o.add("com.woltlab.wcf.form.builder.dependency","checkContainers",e)},t.addDependency=function(e){const t=e.getDependentNode();d.has(t.id)?d.get(t.id).push(e):d.set(t.id,[e]),e.getFields().forEach((e=>{const t=i.default.identify(e);l.has(t)||(l.set(t,e),"INPUT"!==e.tagName||"checkbox"!==e.type&&"radio"!==e.type&&"hidden"!==e.type?e.addEventListener("input",(()=>a())):e.addEventListener("change",(()=>a())))}))},t.checkContainers=r,t.checkDependencies=a,t.isHiddenByDependencies=function(e){if(s.has(e))return!0;let t=!1;return s.forEach((n=>{n.contains(e)&&(t=!0)})),t},t.register=function(e){const t=document.getElementById(e);if(null===t)throw new Error("Unknown element with id '"+e+"'");if(c.has(t))throw new Error("Form with id '"+e+"' has already been registered.");c.add(t)},t.unregister=function(e){const t=document.getElementById(e);if(null===t)throw new Error("Unknown element with id '"+e+"'");if(!c.has(t))throw new Error("Form with id '"+e+"' has not been registered.");c.delete(t),s.forEach((e=>{t.contains(e)&&s.delete(e)})),d.forEach(((e,n)=>{t.contains(document.getElementById(n))&&d.delete(n),e.forEach((e=>{e.getFields().forEach((e=>{l.delete(e.id),u.delete(e)}))}))}))}})),define("WoltLabSuite/Core/Form/Builder/Manager",["require","exports","tslib","../../Core","../../Event/Handler","./Field/Field","./Field/Dependency/Manager"],(function(e,t,n,i,o,r,a){"use strict";function s(e,t){if(!l(e))throw new Error("Unknown form with id '"+e+"'.");return c.get(e).has(t)}function l(e){return d.has(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterForm=t.registerForm=t.registerField=t.hasForm=t.hasField=t.getForm=t.getField=t.getData=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a);const c=new Map,d=new Map;t.getData=function(e){if(!l(e))throw new Error("Unknown form with id '"+e+"'.");const t=[];return c.get(e).forEach((e=>{const n=e.getData();if(!(n instanceof Promise))throw new TypeError("Data for field with id '"+e.getId()+"' is no promise.");t.push(n)})),Promise.all(t).then((e=>e.reduce(((e,t)=>i.extend(e,t)),{})))},t.getField=function(e,t){if(!s(e,t))throw new Error("Unknown field with id '"+e+"' for form with id '"+t+"'.");return c.get(e).get(t)},t.getForm=function(e){if(!l(e))throw new Error("Unknown form with id '"+e+"'.");return d.get(e)},t.hasField=s,t.hasForm=l,t.registerField=function(e,t){if(!l(e))throw new Error("Unknown form with id '"+e+"'.");if(!(t instanceof r.default))throw new Error("Add field is no instance of 'WoltLabSuite/Core/Form/Builder/Field/Field'.");const n=t.getId();if(s(e,n))throw new Error("Form field with id '"+n+"' has already been registered for form with id '"+e+"'.");c.get(e).set(n,t),o.fire("WoltLabSuite/Core/Form/Builder/Manager","registerField",{field:t,formId:e})},t.registerForm=function(e){if(l(e))throw new Error("Form with id '"+e+"' has already been registered.");const t=document.getElementById(e);if(null===t)throw new Error("Unknown form with id '"+e+"'.");d.set(e,t),c.set(e,new Map),o.fire("WoltLabSuite/Core/Form/Builder/Manager","registerForm",{formId:e})},t.unregisterForm=function(e){if(!l(e))throw new Error("Unknown form with id '"+e+"'.");o.fire("WoltLabSuite/Core/Form/Builder/Manager","beforeUnregisterForm",{formId:e}),d.delete(e),c.get(e).forEach((function(e){e.destroy()})),c.delete(e),a.unregister(e),o.fire("WoltLabSuite/Core/Form/Builder/Manager","afterUnregisterForm",{formId:e})}})),define("WoltLabSuite/Core/Component/FormBuilder/Setup",["require","exports","tslib","../../Ajax/Backend","../../Dom/Util","../../Form/Builder/Manager"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormBuilderSetup=void 0,o=n.__importStar(o),r=n.__importStar(r);class a{async fromEndpoint(t){const a=await(0,i.prepareRequest)(t).get().fetchAsJson(),{dialogFactory:s}=await new Promise(((t,n)=>{e(["../Dialog"],t,n)})).then(n.__importStar),l=s().fromHtml(a.dialog).asPrompt();return new Promise((e=>{l.addEventListener("validate",(n=>{const s=r.getData(a.formId).then((async n=>{n instanceof Promise&&(n=await n);const s=await(0,i.prepareRequest)(t).post(n).fetchAsJson();return"dialog"in s?(r.unregisterForm(a.formId),o.setInnerHtml(l.content,s.dialog),!1):(l.addEventListener("primary",(()=>{r.hasForm(a.formId)&&r.unregisterForm(a.formId),e({ok:!0,result:s.result})})),!0)}));n.detail.push(s)})),l.addEventListener("cancel",(()=>{r.hasForm(a.formId)&&r.unregisterForm(a.formId),e({ok:!1,result:void 0})})),l.show(a.title)}))}}t.FormBuilderSetup=a,t.default=a})),define("WoltLabSuite/Core/Component/Dialog/Setup",["require","exports","tslib","./Controls","../../Dom/Util","../FormBuilder/Setup"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogSetup=void 0,i=n.__importDefault(i),o=n.__importStar(o),r=n.__importDefault(r);class a{fromElement(e){e instanceof HTMLTemplateElement&&(e=e.content.cloneNode(!0));const t=document.createElement("woltlab-core-dialog");return t.content.append(e),e instanceof HTMLElement&&(e.hidden=!1),new i.default(t)}fromId(e){const t=document.getElementById(e);if(null===t)throw new Error(`Unable to find the element identified by '${e}'.`);return this.fromElement(t)}fromHtml(e){const t=o.createFragmentFromHtml(e);if(0===t.childElementCount&&""===t.textContent.trim())throw new TypeError("The provided HTML string was empty.");return this.fromElement(t)}usingFormBuilder(){return new r.default}withoutContent(){const e=document.createElement("woltlab-core-dialog");return new i.default(e)}}t.DialogSetup=a,t.default=a})),define("WoltLabSuite/Core/Helper/PageOverlay",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPageOverlayContainer=t.releasePageOverlayContainer=t.adoptPageOverlayContainer=void 0;const n=document.createElement("div");n.id="pageOverlayContainer";const i=[];t.adoptPageOverlayContainer=function(e){i.push(e),e.append(n)},t.releasePageOverlayContainer=function(e){if(!i.includes(e))throw new Error("Cannot release the page overlay from a container that (no longer) adopts it.",{cause:{element:e}});const t=i.indexOf(e);if(0===t)throw new Error("Cannot release the page overlay, there is no previous owner.",{cause:{element:e}});t!==i.length-1?i.splice(t,1):(i.pop(),i[i.length-1].append(n))},t.getPageOverlayContainer=function(){return n}})),define("WoltLabSuite/Core/Ui/Screen",["require","exports","tslib","../Core"],(function(e,t,n,i){"use strict";function o(e){return r(e).mql.matches}function r(e){if("string"!=typeof e||""===e.trim())throw new TypeError("Expected a non-empty string for parameter 'query'.");m.has(e)&&(e=m.get(e)),p.has(e)&&(e=p.get(e));let t=s.get(e);return t||(t={callbacksMatch:new Map,callbacksUnmatch:new Map,callbacksSetup:new Map,mql:window.matchMedia(e)},t.mql.addListener(a),s.set(e,t),e!==t.mql.media&&m.set(t.mql.media,e)),t}function a(e){const t=r(e.media);if(e.matches)t.callbacksSetup.size?(t.callbacksSetup.forEach((e=>{e()})),t.callbacksSetup=new Map):t.callbacksMatch.forEach((e=>{e()}));else{if(t.callbacksSetup.size)return;t.callbacksUnmatch.forEach((e=>{e()}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.setDialogContainer=t.pageOverlayIsActive=t.pageOverlayClose=t.pageOverlayOpen=t.scrollEnable=t.scrollDisable=t.is=t.remove=t.on=void 0,i=n.__importStar(i);const s=new Map;let l,c=0,d=0,u=0;const p=new Map(Object.entries({"screen-xs":"(max-width: 544px)","screen-sm":"(min-width: 545px) and (max-width: 768px)","screen-sm-down":"(max-width: 768px)","screen-sm-up":"(min-width: 545px)","screen-sm-md":"(min-width: 545px) and (max-width: 1024px)","screen-md":"(min-width: 769px) and (max-width: 1024px)","screen-md-down":"(max-width: 1024px)","screen-md-up":"(min-width: 769px)","screen-lg":"(min-width: 1025px)","screen-lg-only":"(min-width: 1025px) and (max-width: 1280px)","screen-lg-down":"(max-width: 1280px)","screen-xl":"(min-width: 1281px)"})),m=new Map;t.on=function(e,t){const n=i.getUuid(),o=r(e);return"function"==typeof t.match&&o.callbacksMatch.set(n,t.match),"function"==typeof t.unmatch&&o.callbacksUnmatch.set(n,t.unmatch),"function"==typeof t.setup&&(o.mql.matches?t.setup():o.callbacksSetup.set(n,t.setup)),n},t.remove=function(e,t){const n=r(e);n.callbacksMatch.delete(t),n.callbacksUnmatch.delete(t),n.callbacksSetup.delete(t)},t.is=o,t.scrollDisable=function(){if(0===c){d=document.body.scrollTop,l="body",d||(d=document.documentElement.scrollTop,l="documentElement");const e=document.getElementById("pageContainer");o("screen-md-down")&&(e.style.setProperty("position","relative",""),e.style.setProperty("top",`-${d}px`,"")),document.documentElement.classList.add("disableScrolling")}c++},t.scrollEnable=function(){if(c&&(c--,0===c)){document.documentElement.classList.remove("disableScrolling");const e=document.getElementById("pageContainer");o("screen-md-down")&&(e.style.removeProperty("position"),e.style.removeProperty("top")),d&&(document[l].scrollTop=~~d)}},t.pageOverlayOpen=function(){0===u&&document.documentElement.classList.add("pageOverlayActive"),u++},t.pageOverlayClose=function(){u&&(u--,0===u&&document.documentElement.classList.remove("pageOverlayActive"))},t.pageOverlayIsActive=function(){return u>0},t.setDialogContainer=function(e){}})),define("WoltLabSuite/Core/Element/woltlab-core-dialog",["require","exports","tslib","../Dom/Util","../Helper/PageOverlay","../Language","../Ui/Screen"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WoltlabCoreDialogElement=void 0,i=n.__importDefault(i),r=n.__importStar(r);const s=document.createElement("div");class l extends HTMLElement{#l;#e;#c;#d;constructor(){super(),this.#l=document.createElement("div"),this.#e=document.createElement("dialog"),this.#d=document.createElement("div")}show(e){if(0===e.trim().length)throw new Error("Cannot open the modal dialog without a title.");this.#d.textContent=e,this.open||(null===s.parentElement&&document.getElementById("content").append(s),this.parentElement!==s&&s.append(this),this.#e.showModal(),(0,o.adoptPageOverlayContainer)(this.#e),(0,a.scrollDisable)())}close(){this.#e.close(),this.#u()}#u(){const e=new CustomEvent("afterClose");this.dispatchEvent(e),(0,o.releasePageOverlayContainer)(this.#e),(0,a.scrollEnable)(),this.remove()}get dialog(){return this.#e}get content(){return this.#l}get open(){return this.#e.open}get incomplete(){return this.hasAttribute("incomplete")}set incomplete(e){e?this.setAttribute("incomplete",""):this.removeAttribute("incomplete")}attachControls(e){if(void 0!==this.#c)throw new Error("There is already a form control attached to this dialog.");void 0!==e.extra&&void 0===e.cancel&&(e.cancel="");const t=document.createElement("woltlab-core-dialog-control");t.primary=e.primary,void 0!==e.cancel&&(t.cancel=e.cancel),void 0!==e.extra&&(t.extra=e.extra),this.#c=document.createElement("form"),this.#c.method="dialog",this.#c.classList.add("dialog__form"),this.#l.insertAdjacentElement("beforebegin",this.#c),this.#c.append(this.#l,t),e.isAlert&&(void 0===e.cancel?this.#e.setAttribute("role","alert"):this.#e.setAttribute("role","alertdialog")),this.#c.addEventListener("submit",(e=>{if(this.incomplete)return void e.preventDefault();const t=new CustomEvent("validate",{cancelable:!0,detail:[]});this.dispatchEvent(t),t.defaultPrevented&&e.preventDefault(),t.detail.length>0&&(e.preventDefault(),this.incomplete=!0,Promise.all(t.detail).then((e=>{this.incomplete=!1,e.some((e=>!1===e))||(this.#p(),this.close())})))})),this.#e.addEventListener("close",(()=>{""!==this.#e.returnValue&&(this.#p(),this.#u())})),t.addEventListener("cancel",(()=>{const e=new CustomEvent("cancel",{cancelable:!0});this.dispatchEvent(e),e.defaultPrevented||this.close()})),void 0!==e.extra&&t.addEventListener("extra",(()=>{const e=new CustomEvent("extra");this.dispatchEvent(e)}))}#p(){const e=new CustomEvent("primary");this.dispatchEvent(e)}connectedCallback(){if(null!==this.#e.parentElement)return;let e;const t=this.#e.getAttribute("role");"alert"!==t&&"alertdialog"!==t&&(e=document.createElement("button"),e.innerHTML='<fa-icon size="24" name="xmark"></fa-icon>',e.classList.add("dialog__closeButton","jsTooltip"),e.title=r.get("wcf.dialog.button.close"),e.addEventListener("click",(()=>{this.close()})));const n=document.createElement("div");n.classList.add("dialog__header"),this.#d.classList.add("dialog__title"),n.append(this.#d),e&&n.append(e);const o=document.createElement("div");o.classList.add("dialog__document"),o.setAttribute("role","document"),o.append(n),this.#l.classList.add("dialog__content"),this.#c?o.append(this.#c):o.append(this.#l),this.#e.append(o),this.#e.classList.add("dialog"),this.#e.setAttribute("aria-labelledby",i.default.identify(this.#d)),this.#e.addEventListener("cancel",(e=>{this.#m()?this.#u():e.preventDefault()})),this.#e.addEventListener("mousedown",(e=>{if(e.target===this.#e){const e=new CustomEvent("backdrop",{cancelable:!0});if(this.dispatchEvent(e),e.defaultPrevented)return;this.#m()&&this.close()}})),this.append(this.#e)}#m(){const e=new CustomEvent("close");return this.dispatchEvent(e),!1===e.defaultPrevented}}t.WoltlabCoreDialogElement=l,window.customElements.define("woltlab-core-dialog",l),t.default=l})),define("WoltLabSuite/Core/Element/woltlab-core-dialog-control",["require","exports","tslib","../Language"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WoltlabCoreDialogControlElement=void 0,i=n.__importStar(i);class o extends HTMLElement{#h;#f;#g;set primary(e){this.setAttribute("primary",e)}get primary(){let e=this.getAttribute("primary");return e||(e=i.get("wcf.dialog.button.primary")),e}set cancel(e){void 0===e?this.removeAttribute("cancel"):this.setAttribute("cancel",e)}get cancel(){let e=this.getAttribute("cancel");if(null!==e)return""===e&&(e=i.get("wcf.global.confirmation.cancel")),e}set extra(e){void 0===e?this.removeAttribute("extra"):this.setAttribute("extra",e)}get extra(){const e=this.getAttribute("extra");if(null!==e)return e}connectedCallback(){const e=this.closest("woltlab-core-dialog");this.classList.add("dialog__control"),this.hasAttribute("primary")||this.setAttribute("primary",""),void 0===this.#g&&(this.#g=document.createElement("button"),this.#g.type="submit",this.#g.value="primary",this.#g.autofocus=!0,this.#g.classList.add("button","buttonPrimary","dialog__control__button","dialog__control__button--primary"),this.#g.textContent=this.primary,this.append(this.#g),new MutationObserver((()=>{this.#g.disabled=e.incomplete})).observe(e,{attributeFilter:["incomplete"]}),e.incomplete&&(this.#g.disabled=!0)),void 0===this.#h&&void 0!==this.cancel&&(this.#h=document.createElement("button"),this.#h.type="button",this.#h.value="cancel",this.#h.classList.add("button","dialog__control__button","dialog__control__button--cancel"),this.#h.textContent=this.cancel,this.#h.addEventListener("click",(()=>{const e=new CustomEvent("cancel");this.dispatchEvent(e)})),this.append(this.#h),e.addEventListener("backdrop",(e=>{e.preventDefault(),this.#h.click()}))),void 0===this.#f&&void 0!==this.extra&&(this.#f=document.createElement("button"),this.#f.type="button",this.#f.value="extra",this.#f.classList.add("button","dialog__control__button","dialog__control__button--extra"),this.#f.textContent=this.extra,this.#f.addEventListener("click",(()=>{const e=new CustomEvent("extra");this.dispatchEvent(e)})),this.append(this.#f))}}t.WoltlabCoreDialogControlElement=o,window.customElements.define("woltlab-core-dialog-control",o),t.default=o})),define("WoltLabSuite/Core/Component/Dialog",["require","exports","./Dialog/Setup","../Element/woltlab-core-dialog","../Element/woltlab-core-dialog-control"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dialogFactory=void 0,t.dialogFactory=function(){return new n.DialogSetup}})),define("WoltLabSuite/Core/Ajax/Request",["require","exports","tslib","./Status","../Core","../Dom/Change/Listener","../Language","../Component/Dialog","../StringUtil"],(function(e,t,n,i,o,r,a,s,l){"use strict";i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a);let c=!1,d=!1;return class{_options;_data;_previousXhr;_xhr;constructor(e){this._options=o.extend({data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",responseType:"application/json",type:"POST",url:"",withCredentials:!1,autoAbort:!1,ignoreError:!1,pinData:!1,silent:!1,includeRequestedWith:!0,failure:null,finalize:null,success:null,progress:null,uploadProgress:null,callbackObject:null},e),"object"==typeof e.callbackObject&&(this._options.callbackObject=e.callbackObject),this._options.url=o.convertLegacyUrl(this._options.url),0===this._options.url.indexOf("index.php")&&(this._options.url=window.WSC_API_URL+this._options.url),0===this._options.url.indexOf(window.WSC_API_URL)&&(this._options.includeRequestedWith=!0,this._options.withCredentials=!0),this._options.pinData&&(this._data=this._options.data),this._options.callbackObject&&("function"==typeof this._options.callbackObject._ajaxFailure&&(this._options.failure=this._options.callbackObject._ajaxFailure.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxFinalize&&(this._options.finalize=this._options.callbackObject._ajaxFinalize.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxSuccess&&(this._options.success=this._options.callbackObject._ajaxSuccess.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxProgress&&(this._options.progress=this._options.callbackObject._ajaxProgress.bind(this._options.callbackObject)),"function"==typeof this._options.callbackObject._ajaxUploadProgress&&(this._options.uploadProgress=this._options.callbackObject._ajaxUploadProgress.bind(this._options.callbackObject))),c||(c=!0,window.addEventListener("beforeunload",(()=>d=!0)))}sendRequest(e){(e||this._options.autoAbort)&&this.abortPrevious(),this._options.silent||i.show(),this._xhr instanceof XMLHttpRequest&&(this._previousXhr=this._xhr),this._xhr=new XMLHttpRequest,this._xhr.open(this._options.type,this._options.url,!0),this._options.contentType&&this._xhr.setRequestHeader("Content-Type",this._options.contentType),(this._options.withCredentials||this._options.includeRequestedWith)&&this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._options.responseType&&this._xhr.setRequestHeader("Accept",this._options.responseType),this._options.withCredentials&&(this._xhr.withCredentials=!0);const t=o.clone(this._options),n=this._xhr;if(n.onload=()=>{n.readyState===XMLHttpRequest.DONE&&(n.status>=200&&n.status<300||304===n.status?204===n.status?this._success(n,t):t.responseType&&this.getContentType(n)!==t.responseType?this._failure(n,t):this._success(n,t):this._failure(n,t))},n.onerror=()=>{this._failure(n,t)},this._options.progress&&(n.onprogress=this._options.progress),this._options.uploadProgress&&(n.upload.onprogress=this._options.uploadProgress),"POST"===this._options.type){let e=this._options.data;"object"==typeof e&&"FormData"!==o.getType(e)&&(e=o.serialize(e)),n.send(e)}else n.send()}abortPrevious(){this._previousXhr&&(this._previousXhr.abort(),this._previousXhr=void 0,this._options.silent||i.hide())}setOption(e,t){this._options[e]=t}getOption(e){return Object.prototype.hasOwnProperty.call(this._options,e)?this._options[e]:null}setData(e){null!==this._data&&"FormData"!==o.getType(e)&&(e=o.extend(this._data,e)),this._options.data=e}_success(t,o){if(o.silent||i.hide(),"function"==typeof o.success){let i=null;if("application/json"===this.getContentType(t)){try{i=JSON.parse(t.responseText)}catch(e){return void this._failure(t,o)}i&&i.returnValues&&void 0!==i.returnValues.template&&(i.returnValues.template=i.returnValues.template.trim()),"yes"===t.getResponseHeader("woltlab-background-queue-check")&&new Promise(((t,n)=>{e(["../BackgroundQueue"],t,n)})).then(n.__importStar).then((e=>e.invoke()))}o.success(i||{},t.responseText,t,o.data)}this._finalize(o)}_failure(e,t){if(d)return;t.silent||i.hide();let n=null;try{n=JSON.parse(e.responseText)}catch(e){}let o=!0;if("function"==typeof t.failure&&(o=!1!==t.failure(n||{},e.responseText||"",e,t.data)),!0!==t.ignoreError&&o){const t=this.getErrorHtml(n,e);if(t instanceof HTMLIFrameElement){const e=(0,s.dialogFactory)().fromHtml(`<div class="dialog__iframeContainer">${t.outerHTML}</div>`).asAlert();e.show(a.get("wcf.global.error.title")),e.querySelector("dialog").classList.add("dialog--iframe")}else t&&(0,s.dialogFactory)().fromHtml(t).asAlert().show(a.get("wcf.global.error.title"))}this._finalize(t)}getErrorHtml(e,t){let n,i="";if(null!==e&&Object.keys(e).length>0)e.returnValues&&e.returnValues.description&&(i+=`<br><p>Description:</p><p>${e.returnValues.description}</p>`),e.file&&e.line&&(i+=`<br><p>File:</p><p>${e.file} in line ${e.line}</p>`),e.exception?i+=`<br>Exception: <div style="white-space: pre;">${(0,l.escapeHTML)(e.exception)}</div>`:e.stacktrace?i+=`<br><p>Stacktrace:</p><p>${e.stacktrace}</p>`:e.exceptionID&&(i+=`<br><p>Exception ID: <code>${e.exceptionID}</code></p>`),n=e.message,e.previous&&e.previous.forEach((e=>{i+=`<hr><p>${e.message}</p>`,i+=`<br><p>Stacktrace</p><p>${e.stacktrace}</p>`}));else{if(t.getResponseHeader("content-type")?.startsWith("text/html")){const e=document.createElement("iframe");return e.classList.add("dialog__iframe"),e.srcdoc=t.responseText,e}n=t.responseText}if(!n||"undefined"===n){if(!window.ENABLE_DEBUG_MODE)return null;n="XMLHttpRequest failed without a responseText. Check your browser console."}return`<div class="ajaxDebugMessage"><p>${n}</p>${i}</div>`}_finalize(e){"function"==typeof e.finalize&&e.finalize(this._xhr),this._previousXhr=void 0,r.default.trigger(),document.querySelectorAll('a[href*="#"]').forEach((e=>{let t=e.href;-1===t.indexOf("AJAXProxy")&&-1===t.indexOf("ajax-proxy")||(t=t.substr(t.indexOf("#")),e.href=document.location.toString().replace(/#.*/,"")+t)}))}getContentType(e){const t=e.getResponseHeader("content-type");return null===t?null:t.split(";",1)[0].trim()}}})),define("WoltLabSuite/Core/Ajax/DboAction",["require","exports","tslib","./Error","./Status","../Core"],(function(e,t,n,i,o,r){"use strict";async function a(e){const t=e.headers.get("content-type");if(!t||!t.includes("application/json"))throw new i.ExpectedJson(e);let n;try{n=await e.json()}catch(t){throw new i.InvalidJson(e)}return n}let s;Object.defineProperty(t,"__esModule",{value:!0}),t.handleValidationErrors=t.DboAction=void 0,o=n.__importStar(o),r=n.__importStar(r);class l{#b;#v;#y=[];#i={};#r=!0;#_;constructor(e,t){this.#b=e,this.#v=t}static prepare(e,t){return void 0===s&&(s=!1,window.addEventListener("beforeunload",(()=>{s=!0}))),new l(e,t)}getAbortController(){return void 0===this.#_&&(this.#_=new AbortController),this.#_}objectIds(e){return this.#y=e,this}payload(e){return this.#i=e,this}disableLoadingIndicator(){return this.#r=!1,this}async dispatch(){(0,i.registerGlobalRejectionHandler)();const t=window.WSC_API_URL+"index.php?ajax-proxy/&t="+r.getXsrfToken(),l={actionName:this.#b,className:this.#v};this.#y&&(l.objectIDs=this.#y),this.#i&&(l.parameters=this.#i);const c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest","X-XSRF-TOKEN":r.getXsrfToken(),Accept:"application/json"},body:r.serialize(l),mode:"same-origin",credentials:"same-origin",cache:"no-store",redirect:"error"};this.#_&&(c.signal=this.#_.signal);const d=this.#r;d&&o.show();try{const o=await fetch(t,c);if(!o.ok)throw new i.StatusNotOk(o);const r=await a(o);return"yes"===o.headers.get("woltlab-background-queue-check")&&new Promise(((t,n)=>{e(["../BackgroundQueue"],t,n)})).then(n.__importStar).then((e=>e.invoke())),r.returnValues}catch(e){if(e instanceof i.ApiError)throw e;if(e instanceof DOMException&&"AbortError"===e.name)return;if(!s)throw new i.ConnectionError(e)}finally{d&&o.hide()}}}t.DboAction=l,t.default=l,t.handleValidationErrors=async function(e,t){if(!(e instanceof i.StatusNotOk))throw e;const n=e.response.clone();try{const e=await a(n);if(function(e){return"code"in e&&"returnValues"in e}(e)&&412===e.code&&!0===t(e.returnValues))return}catch{}throw e}})),define("WoltLabSuite/Core/Ajax",["require","exports","tslib","./Ajax/Request","./Core","./Ajax/DboAction","./Ajax/DboAction"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleValidationErrors=t.dboAction=t.getRequestObject=t.apiOnce=t.api=void 0,i=n.__importDefault(i),o=n.__importStar(o),r=n.__importDefault(r);const s=new WeakMap;t.api=function(e,t,n,r){"object"!=typeof t&&(t={});let a=s.get(e);if(void 0===a){if("function"!=typeof e._ajaxSetup)throw new TypeError("Callback object must implement at least _ajaxSetup().");const t=e._ajaxSetup();t.pinData=!0,t.callbackObject=e,t.url||(t.url="index.php?ajax-proxy/&t="+o.getXsrfToken(),t.withCredentials=!0),a=new i.default(t),s.set(e,a)}let l=null,c=null;return"function"==typeof n&&(l=a.getOption("success"),a.setOption("success",n)),"function"==typeof r&&(c=a.getOption("failure"),a.setOption("failure",r)),a.setData(t),a.sendRequest(),null!==l&&a.setOption("success",l),null!==c&&a.setOption("failure",c),a},t.apiOnce=function(e){e.pinData=!1,e.callbackObject=null,e.url||(e.url="index.php?ajax-proxy/&t="+o.getXsrfToken(),e.withCredentials=!0),new i.default(e).sendRequest(!1)},t.getRequestObject=function(e){if(!s.has(e))throw new Error("Expected a previously used callback object, provided object is unknown.");return s.get(e)},t.dboAction=function(e,t){return r.default.prepare(e,t)},Object.defineProperty(t,"handleValidationErrors",{enumerable:!0,get:function(){return a.handleValidationErrors}})})),define("WoltLabSuite/Core/BackgroundQueue",["require","exports","tslib","./Ajax"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=t.setUrl=void 0,i=n.__importStar(i);class o{_invocations=0;_isBusy=!1;_url;constructor(e){this._url=e}invoke(){this._isBusy||(this._isBusy=!0,i.api(this))}_ajaxSuccess(e){this._invocations++,e>0&&this._invocations<5?window.setTimeout((()=>{this._isBusy=!1,this.invoke()}),1e3):(this._isBusy=!1,this._invocations=0)}_ajaxSetup(){return{url:this._url,ignoreError:!0,silent:!0}}}let r;t.setUrl=function(e){r||(r=new o(e))},t.invoke=function(){r?r.invoke():console.error("The background queue has not been initialized yet.")}})),define("WoltLabSuite/Core/Date/Util",["require","exports","tslib","../Language"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimezoneDate=t.getTimeElement=t.gmdate=t.format=t.formatDateTime=t.formatTime=t.formatDate=void 0,i=n.__importStar(i);const o=document.documentElement.lang,r=new Intl.DateTimeFormat(o,{dateStyle:"long"}),a=new Intl.DateTimeFormat(o,{hour:"numeric",minute:"numeric",second:"numeric"}),s=new Intl.DateTimeFormat(o,{year:"numeric",day:"numeric",month:"long",hour:"numeric",minute:"numeric",second:"numeric"});t.formatDate=function(e){return r.format(e)},t.formatTime=function(e){return a.format(e)},t.formatDateTime=function(e){return s.format(e)},t.format=function(e,t){"c"===t&&(t="Y-m-dTH:i:sP");let n="";for(let o=0,r=t.length;o<r;o++){let a;switch(t[o]){case"s":a=e.getSeconds().toString().padStart(2,"0");break;case"i":a=e.getMinutes().toString().padStart(2,"0");break;case"a":a=e.getHours()>11?"pm":"am";break;case"g":{const t=e.getHours();a=0===t?"12":t>12?(t-12).toString():t.toString();break}case"h":{const t=e.getHours();a=0===t?"12":t>12?(t-12).toString():t.toString(),a=a.padStart(2,"0");break}case"A":a=e.getHours()>11?"PM":"AM";break;case"G":a=e.getHours().toString();break;case"H":a=e.getHours().toString().padStart(2,"0");break;case"d":a=e.getDate().toString().padStart(2,"0");break;case"j":a=e.getDate().toString();break;case"l":a=i.get("__days")[e.getDay()];break;case"D":a=i.get("__daysShort")[e.getDay()];break;case"S":a="";break;case"m":a=(e.getMonth()+1).toString().padStart(2,"0");break;case"n":a=(e.getMonth()+1).toString();break;case"F":a=i.get("__months")[e.getMonth()];break;case"M":a=i.get("__monthsShort")[e.getMonth()];break;case"y":a=e.getFullYear().toString().slice(-2);break;case"Y":a=e.getFullYear().toString();break;case"P":{let t=e.getTimezoneOffset();a=t>0?"-":"+",t=Math.abs(t),a+=(~~(t/60)).toString().padStart(2,"0"),a+=":",a+=(t%60).toString().padStart(2,"0");break}case"r":a=e.toString();break;case"U":a=Math.round(e.getTime()/1e3).toString();break;case"\\":a="",o+1<r&&(a=t[++o]);break;default:a=t[o]}n+=a}return n},t.gmdate=function(e){return e instanceof Date||(e=new Date),Math.round(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDay(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())/1e3)},t.getTimeElement=function(e){const t=document.createElement("woltlab-core-date-time");return t.date=e,e.getTime()>Date.now()&&(t.static=!0),t},t.getTimezoneDate=function(e,t){const n=6e4*new Date(e).getTimezoneOffset();return new Date(e+n+t)}})),define("WoltLabSuite/Core/Dom/Traverse",["require","exports"],(function(e,t){"use strict";function n(e,t,n){if(!(e instanceof Element))throw new TypeError("Expected a valid element as first argument.");const i=[];for(let o=0;o<e.childElementCount;o++)r.get(t)(e.children[o],n)&&i.push(e.children[o]);return i}function i(e,t,n,i){if(!(e instanceof Element))throw new TypeError("Expected a valid element as first argument.");let o=e.parentNode;for(;o instanceof Element;){if(o===i)return null;if(r.get(t)(o,n))return o;o=o.parentNode}return null}function o(e,t,n,i){if(!(e instanceof Element))throw new TypeError("Expected a valid element as first argument.");return e instanceof Element&&null!==e[t]&&r.get(n)(e[t],i)?e[t]:null}Object.defineProperty(t,"__esModule",{value:!0}),t.prevByTag=t.prevByClass=t.prevBySel=t.prev=t.nextByTag=t.nextByClass=t.nextBySel=t.next=t.parentByTag=t.parentByClass=t.parentBySel=t.childrenByTag=t.childrenByClass=t.childrenBySel=t.childByTag=t.childByClass=t.childBySel=void 0;const r=new Map([[0,()=>!0],[1,(e,t)=>e.matches(t)],[2,(e,t)=>e.classList.contains(t)],[3,(e,t)=>e.nodeName===t]]);t.childBySel=function(e,t){return n(e,1,t)[0]||null},t.childByClass=function(e,t){return n(e,2,t)[0]||null},t.childByTag=function(e,t){return n(e,3,t)[0]||null},t.childrenBySel=function(e,t){return n(e,1,t)},t.childrenByClass=function(e,t){return n(e,2,t)},t.childrenByTag=function(e,t){return n(e,3,t)},t.parentBySel=function(e,t,n){return i(e,1,t,n)},t.parentByClass=function(e,t,n){return i(e,2,t,n)},t.parentByTag=function(e,t,n){return i(e,3,t,n)},t.next=function(e){return o(e,"nextElementSibling",0,"")},t.nextBySel=function(e,t){return o(e,"nextElementSibling",1,t)},t.nextByClass=function(e,t){return o(e,"nextElementSibling",2,t)},t.nextByTag=function(e,t){return o(e,"nextElementSibling",3,t)},t.prev=function(e){return o(e,"previousElementSibling",0,"")},t.prevBySel=function(e,t){return o(e,"previousElementSibling",1,t)},t.prevByClass=function(e,t){return o(e,"previousElementSibling",2,t)},t.prevByTag=function(e,t){return o(e,"previousElementSibling",3,t)}})),define("WoltLabSuite/Core/Environment",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.touch=t.platform=t.browser=t.setup=void 0;let n="other",i="desktop",o=!1;t.setup=function(){if("object"==typeof window.chrome)n="chrome";else{const e=window.getComputedStyle(document.documentElement);for(let t=0,i=e.length;t<i;t++){const i=e[t];0===i.indexOf("-ms-")?n="microsoft":0===i.indexOf("-moz-")?n="firefox":"firefox"!==n&&0===i.indexOf("-webkit-")&&(n="safari")}}const e=window.navigator.userAgent.toLowerCase();-1!==e.indexOf("crios")?(n="chrome",i="ios"):/(?:iphone|ipad|ipod)/.test(e)?(n="safari",i="ios"):-1!==e.indexOf("android")?i="android":-1!==e.indexOf("iemobile")&&(n="microsoft",i="windows"),"desktop"!==i||-1===e.indexOf("mobile")&&-1===e.indexOf("tablet")||(i="mobile"),o="ontouchstart"in window||"msMaxTouchPoints"in window.navigator&&window.navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch,"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1&&(n="safari",i="ios")},t.browser=function(){return n},t.platform=function(){return i},t.touch=function(){return o}})),define("WoltLabSuite/Core/Ui/Alignment",["require","exports","tslib","../Core","../Dom/Traverse","../Dom/Util","../Language","../Environment"],(function(e,t,n,i,o,r,a,s){"use strict";function l(e,t,n,i,o,r,a){let s="auto",l="auto",c=!0,d=50;const u=document.getElementById("pageHeaderPanel");if(null!==u){const e=window.getComputedStyle(u).position;d="fixed"===e||"static"===e?u.offsetHeight:0}if(a)if("top"===e){const e=i.top-r;s=o-e,e-t.height<d&&(c=!1)}else l=i.top+n.height+r,l+t.height>o&&(c=!1);else{const a=i.top+window.scrollY;if("top"===e){const{clientHeight:e}=document.body;s=e-a+r,e-(s+t.height)<window.scrollY+d&&(c=!1)}else l=a+n.height+r,l+t.height-window.scrollY>o&&(c=!1)}return{align:e,bottom:s,top:l,result:c}}function c(e,t,n,i,o){let r="auto",a="auto",s=!0;return"left"===e?(r=i.left,r+t.width>o&&(s=!1)):"right"===e?i.left+n.width<t.width?s=!1:(a=o-(i.left+n.width),a<0&&(s=!1)):(r=i.left+n.width/2-t.width/2,r=~~r,(r<0||r+t.width>o)&&(s=!1)),{align:e,left:r,right:a,result:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.set=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a),s=n.__importStar(s),t.set=function(e,t,n){let d;n=i.extend({verticalOffset:0,pointer:!1,pointerClassNames:[],refDimensionsElement:null,horizontal:"left",vertical:"bottom",allowFlip:"both"},n||{}),Array.isArray(n.pointerClassNames)&&n.pointerClassNames.length===(n.pointer?1:2)||(n.pointerClassNames=[]),-1===["left","right","center"].indexOf(n.horizontal)&&(n.horizontal="left"),"bottom"!==n.vertical&&(n.vertical="top"),-1===["both","horizontal","vertical","none"].indexOf(n.allowFlip)&&(n.allowFlip="both"),"none"===window.getComputedStyle(e).display&&(d=e.style.getPropertyValue("display"),e.style.setProperty("display","block")),r.default.setStyles(e,{bottom:"auto !important",left:"0 !important",right:"auto !important",top:"0 !important",visibility:"hidden !important"});const u=r.default.outerDimensions(e),p=r.default.outerDimensions(n.refDimensionsElement instanceof HTMLElement?n.refDimensionsElement:t),m=t.getBoundingClientRect(),h=window.innerHeight,f=document.body.clientWidth;let g=null,b=!1;if("center"===n.horizontal&&(b=!0,g=c(n.horizontal,u,p,m,f),g.result||("both"===n.allowFlip||"horizontal"===n.allowFlip?n.horizontal="left":g.result=!0)),"rtl"===a.get("wcf.global.pageDirection")&&(n.horizontal="left"===n.horizontal?"right":"left"),null===g||!g.result){const e=g;if(g=c(n.horizontal,u,p,m,f),!g.result&&("both"===n.allowFlip||"horizontal"===n.allowFlip)){const t=c("left"===n.horizontal?"right":"left",u,p,m,f);if(t.result)g=t;else if(b)g=e;else if(u.width===f)g={align:"left",left:0,result:!0,right:0};else if(u.width<f){const e=f-(m.left+p.width),t=m.left<=e;g={align:t?"left":"right",left:t?0:"auto",result:!0,right:t?"auto":0}}}}const v="fixed"===window.getComputedStyle(e).position,y=g.left,_=g.right;let w=l(n.vertical,u,p,m,h,n.verticalOffset,v);if(!w.result&&("both"===n.allowFlip||"vertical"===n.allowFlip)){const e=l("top"===n.vertical?"bottom":"top",u,p,m,h,n.verticalOffset,v);if(e.result)w=e;else if("desktop"!==s.platform())if(u.height===h)w={align:"top",bottom:0,result:!0,top:0};else if(u.height<h){const e=h-(m.top+p.height),t=m.top<=e;w={align:t?"top":"bottom",bottom:t?0:"auto",result:!0,top:t?"auto":0}}}const E=w.bottom,S=w.top;if(n.pointer){const t=o.childrenByClass(e,"elementPointer")[0]||null;if(null===t)throw new Error("Expected the .elementPointer element to be a direct children.");"center"===g.align?(t.classList.add("center"),t.classList.remove("left","right")):(t.classList.add(g.align),t.classList.remove("center"),t.classList.remove("left"===g.align?"right":"left")),"top"===w.align?t.classList.add("flipVertical"):t.classList.remove("flipVertical")}else 2===n.pointerClassNames.length&&(e.classList["auto"===S?"add":"remove"](n.pointerClassNames[0]),e.classList["auto"===y?"add":"remove"](n.pointerClassNames[1]));r.default.setStyles(e,{bottom:"auto"===E?E:Math.round(E).toString()+"px",left:"auto"===y?y:Math.ceil(y).toString()+"px",right:"auto"===_?_:Math.floor(_).toString()+"px",top:"auto"===S?S:Math.round(S).toString()+"px"}),r.default.show(e),e.style.removeProperty("visibility"),void 0!==d&&(""===d?e.style.removeProperty("display"):e.style.setProperty("display",d))}})),define("WoltLabSuite/Core/Ui/CloseOverlay",["require","exports","tslib","../CallbackList"],(function(e,t,n,i){"use strict";function o(e,t){s.add(e,t),c||(document.body.addEventListener("click",(()=>{a(l.Document)})),c=!0)}function r(e){s.remove(e)}function a(e,t){s.forEach(null,(n=>n(e,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.remove=t.add=t.Origin=void 0;const s=new((i=n.__importDefault(i)).default);var l;!function(e){e.Document="document",e.DropDown="dropdown",e.Search="search"}(l||(t.Origin=l={}));let c=!1;t.add=o,t.remove=r,t.execute=a;const d={add:o,remove:r,execute:a};t.default=d})),function(e,t){var n,i;"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("tabbable",["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e.tabbable,t(i=e.tabbable={}),i.noConflict=function(){return e.tabbable=n,i})}(this,(function(e){"use strict";var t=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],n=t.join(","),i="undefined"==typeof Element,o=i?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,r=!i&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},a=function e(t,n){var i,o;return void 0===n&&(n=!0),""===(o=null==t||null===(i=t.getAttribute)||void 0===i?void 0:i.call(t,"inert"))||"true"===o||n&&t&&e(t.parentNode)},s=function(e,t,i){if(a(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(n));return t&&o.call(e,n)&&r.unshift(e),r.filter(i)},l=function e(t,i,r){var s,l,c,d,u,p,m,h;for(s=[],l=Array.from(t);l.length;)c=l.shift(),a(c,!1)||("SLOT"===c.tagName?(u=e((d=c.assignedElements()).length?d:c.children,!0,r),r.flatten?s.push.apply(s,u):s.push({scopeParent:c,candidates:u})):(o.call(c,n)&&r.filter(c)&&(i||!t.includes(c))&&s.push(c),p=c.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(c),m=!a(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(c)),p&&m?(h=e(!0===p?c.children:p.children,!0,r),r.flatten?s.push.apply(s,h):s.push({scopeParent:c,candidates:h})):l.unshift.apply(l,c.children)));return s},c=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},d=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!c(e)?0:e.tabIndex},u=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},p=function(e){return"INPUT"===e.tagName},m=function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return 0===n&&0===i},h=function(e,t){return!(t.disabled||a(t)||function(e){return p(e)&&"hidden"===e.type}(t)||function(e,t){var n,i,a,s,l=t.displayCheck,c=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;if(n=o.call(e,"details>summary:first-of-type")?e.parentElement:e,o.call(n,"details:not([open]) *"))return!0;if(l&&"full"!==l&&"legacy-full"!==l){if("non-zero-area"===l)return m(e)}else{if("function"==typeof c){for(i=e;e;){if(a=e.parentElement,s=r(e),a&&!a.shadowRoot&&!0===c(a))return m(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=i}if(function(e){var t,n,i,o,a,s,l,c=e&&r(e),d=null===(t=c)||void 0===t?void 0:t.host,u=!1;if(c&&c!==e)for(u=!!(null!==(n=d)&&void 0!==n&&null!==(i=n.ownerDocument)&&void 0!==i&&i.contains(d)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!u&&d;)u=!(null===(s=d=null===(a=c=r(d))||void 0===a?void 0:a.host)||void 0===s||null===(l=s.ownerDocument)||void 0===l||!l.contains(d));return u}(e))return!e.getClientRects().length;if("legacy-full"!==l)return!0}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){var t,n,i;if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(n=0;n<t.children.length;n++)if("LEGEND"===(i=t.children.item(n)).tagName)return!!o.call(t,"fieldset[disabled] *")||!i.contains(e);return!0}t=t.parentElement}return!1}(t))},f=function(e,t){return!(function(e){return function(e){return p(e)&&"radio"===e.type}(e)&&!function(e){var t,n,i,o;if(!e.name)return!0;if(n=e.form||r(e),i=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')},"undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=i(window.CSS.escape(e.name));else try{t=i(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}return o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form),!o||o===e}(e)}(t)||d(t)<0||!h(e,t))},g=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},b=function e(t){var n=[],i=[];return t.forEach((function(t,o){var r=!!t.scopeParent,a=r?t.scopeParent:t,s=function(e,t){var n=d(e);return n<0&&t&&!c(e)?0:n}(a,r),l=r?e(t.candidates):a;0===s?r?n.push.apply(n,l):n.push(a):i.push({documentOrder:o,tabIndex:s,item:t,isScope:r,content:l})})),i.sort(u).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},v=t.concat("iframe").join(",");e.focusable=function(e,t){return(t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:h.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):s(e,t.includeContainer,h.bind(null,t))},e.getTabIndex=d,e.isFocusable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==o.call(e,v)&&h(t,e)},e.isTabbable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==o.call(e,n)&&f(t,e)},e.tabbable=function(e,t){var n;return n=(t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:f.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:g}):s(e,t.includeContainer,f.bind(null,t)),b(n)},Object.defineProperty(e,"__esModule",{value:!0})})),function(e,t){var n,i;"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tabbable")):"function"==typeof define&&define.amd?define("focus-trap",["exports","tabbable"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e.focusTrap,t(i=e.focusTrap={},e.tabbable),i.noConflict=function(){return e.focusTrap=n,i})}(this,(function(e,t){"use strict";function n(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function i(e){var t,i;for(t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}));return e}function o(e,t,n){return(t=function(e){var t=function(e,t){var n,i;if("object"!=typeof e||null===e)return e;if(void 0!==(n=e[Symbol.toPrimitive])){if("object"!=typeof(i=n.call(e,"string")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(e){return"Tab"===(null==e?void 0:e.key)||9===(null==e?void 0:e.keyCode)},a=function(e){return r(e)&&!e.shiftKey},s=function(e){return r(e)&&e.shiftKey},l=function(e){return setTimeout(e,0)},c=function(e,t){var n=-1;return e.every((function(e,i){return!t(e)||(n=i,!1)})),n},d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return"function"==typeof e?e.apply(void 0,n):e},u=function(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target},p=[];e.createFocusTrap=function(e,n){var o,m=(null==n?void 0:n.document)||document,h=(null==n?void 0:n.trapStack)||p,f=i({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:a,isKeyBackward:s},n),g={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},b=function(e,t,n){return e&&void 0!==e[t]?e[t]:f[n||t]},v=function(e,t){var n="function"==typeof(null==t?void 0:t.composedPath)?t.composedPath():void 0;return g.containerGroups.findIndex((function(t){var i=t.container,o=t.tabbableNodes;return i.contains(e)||(null==n?void 0:n.includes(i))||o.find((function(t){return t===e}))}))},y=function(e){var t,n,i,o,r=f[e];if("function"==typeof r){for(t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r=r.apply(void 0,n)}if(!0===r&&(r=void 0),!r){if(void 0===r||!1===r)return r;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}if(o=r,"string"==typeof r&&!(o=m.querySelector(r)))throw new Error("`".concat(e,"` as selector refers to no known node"));return o},_=function(){var e,n=y("initialFocus");if(!1===n)return!1;if(void 0!==n&&t.isFocusable(n,f.tabbableOptions)||(n=v(m.activeElement)>=0?m.activeElement:(e=g.tabbableGroups[0])&&e.firstTabbableNode||y("fallbackFocus")),!n)throw new Error("Your focus-trap needs to have at least one focusable element");return n},w=function(){if(g.containerGroups=g.containers.map((function(e){var n=t.tabbable(e,f.tabbableOptions),i=t.focusable(e,f.tabbableOptions),o=n.length>0?n[0]:void 0,r=n.length>0?n[n.length-1]:void 0,a=i.find((function(e){return t.isTabbable(e)})),s=i.slice().reverse().find((function(e){return t.isTabbable(e)})),l=!!n.find((function(e){return t.getTabIndex(e)>0}));return{container:e,tabbableNodes:n,focusableNodes:i,posTabIndexesFound:l,firstTabbableNode:o,lastTabbableNode:r,firstDomTabbableNode:a,lastDomTabbableNode:s,nextTabbableNode:function(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.indexOf(e);return r<0?o?i.slice(i.indexOf(e)+1).find((function(e){return t.isTabbable(e)})):i.slice(0,i.indexOf(e)).reverse().find((function(e){return t.isTabbable(e)})):n[r+(o?1:-1)]}}})),g.tabbableGroups=g.containerGroups.filter((function(e){return e.tabbableNodes.length>0})),g.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(g.containerGroups.find((function(e){return e.posTabIndexesFound}))&&g.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},E=function e(t){!1!==t&&t!==m.activeElement&&(t&&t.focus?(t.focus({preventScroll:!!f.preventScroll}),g.mostRecentlyFocusedNode=t,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(t)&&t.select()):e(_()))},S=function(e){var t=y("setReturnFocus",e);return t||!1!==t&&e},C=function(e){var n,i,o,a,s,l,d,p,m,h=e.target,b=e.event,_=e.isBackward,E=void 0!==_&&_;return h=h||u(b),w(),n=null,g.tabbableGroups.length>0?(o=(i=v(h,b))>=0?g.containerGroups[i]:void 0,i<0?n=E?g.tabbableGroups[g.tabbableGroups.length-1].lastTabbableNode:g.tabbableGroups[0].firstTabbableNode:E?(a=c(g.tabbableGroups,(function(e){var t=e.firstTabbableNode;return h===t})),a<0&&(o.container===h||t.isFocusable(h,f.tabbableOptions)&&!t.isTabbable(h,f.tabbableOptions)&&!o.nextTabbableNode(h,!1))&&(a=i),a>=0?(s=0===a?g.tabbableGroups.length-1:a-1,l=g.tabbableGroups[s],n=t.getTabIndex(h)>=0?l.lastTabbableNode:l.lastDomTabbableNode):r(b)||(n=o.nextTabbableNode(h,!1))):(d=c(g.tabbableGroups,(function(e){var t=e.lastTabbableNode;return h===t})),d<0&&(o.container===h||t.isFocusable(h,f.tabbableOptions)&&!t.isTabbable(h,f.tabbableOptions)&&!o.nextTabbableNode(h))&&(d=i),d>=0?(p=d===g.tabbableGroups.length-1?0:d+1,m=g.tabbableGroups[p],n=t.getTabIndex(h)>=0?m.firstTabbableNode:m.firstDomTabbableNode):r(b)||(n=o.nextTabbableNode(h)))):n=y("fallbackFocus"),n},L=function(e){var t=u(e);v(t,e)>=0||(d(f.clickOutsideDeactivates,e)?o.deactivate({returnFocus:f.returnFocusOnDeactivate}):d(f.allowOutsideClick,e)||e.preventDefault())},k=function(e){var n,i,o,r,a,s=u(e),l=v(s,e)>=0;l||s instanceof Document?l&&(g.mostRecentlyFocusedNode=s):(e.stopImmediatePropagation(),i=!0,g.mostRecentlyFocusedNode?t.getTabIndex(g.mostRecentlyFocusedNode)>0?(o=v(g.mostRecentlyFocusedNode),(r=g.containerGroups[o].tabbableNodes).length>0&&(a=r.findIndex((function(e){return e===g.mostRecentlyFocusedNode})),a>=0&&(f.isKeyForward(g.recentNavEvent)?a+1<r.length&&(n=r[a+1],i=!1):a-1>=0&&(n=r[a-1],i=!1)))):g.containerGroups.some((function(e){return e.tabbableNodes.some((function(e){return t.getTabIndex(e)>0}))}))||(i=!1):i=!1,i&&(n=C({target:g.mostRecentlyFocusedNode,isBackward:f.isKeyBackward(g.recentNavEvent)})),E(n||g.mostRecentlyFocusedNode||_())),g.recentNavEvent=void 0},x=function(e){if(("Escape"===(null==(t=e)?void 0:t.key)||"Esc"===(null==t?void 0:t.key)||27===(null==t?void 0:t.keyCode))&&!1!==d(f.escapeDeactivates,e))return e.preventDefault(),void o.deactivate();var t;(f.isKeyForward(e)||f.isKeyBackward(e))&&function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g.recentNavEvent=e,(t=C({event:e,isBackward:n}))&&(r(e)&&e.preventDefault(),E(t))}(e,f.isKeyBackward(e))},M=function(e){var t=u(e);v(t,e)>=0||d(f.clickOutsideDeactivates,e)||d(f.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},I=function(){if(g.active)return function(e,t){var n,i;e.length>0&&(n=e[e.length-1])!==t&&n.pause(),-1===(i=e.indexOf(t))||e.splice(i,1),e.push(t)}(h,o),g.delayInitialFocusTimer=f.delayInitialFocus?l((function(){E(_())})):E(_()),m.addEventListener("focusin",k,!0),m.addEventListener("mousedown",L,{capture:!0,passive:!1}),m.addEventListener("touchstart",L,{capture:!0,passive:!1}),m.addEventListener("click",M,{capture:!0,passive:!1}),m.addEventListener("keydown",x,{capture:!0,passive:!1}),o},T=function(){if(g.active)return m.removeEventListener("focusin",k,!0),m.removeEventListener("mousedown",L,!0),m.removeEventListener("touchstart",L,!0),m.removeEventListener("click",M,!0),m.removeEventListener("keydown",x,!0),o},D="undefined"!=typeof window&&"MutationObserver"in window?new MutationObserver((function(e){e.some((function(e){return Array.from(e.removedNodes).some((function(e){return e===g.mostRecentlyFocusedNode}))}))&&E(_())})):void 0,A=function(){D&&(D.disconnect(),g.active&&!g.paused&&g.containers.map((function(e){D.observe(e,{subtree:!0,childList:!0})})))};return(o={get active(){return g.active},get paused(){return g.paused},activate:function(e){var t,n,i,o;return g.active?this:(t=b(e,"onActivate"),n=b(e,"onPostActivate"),(i=b(e,"checkCanFocusTrap"))||w(),g.active=!0,g.paused=!1,g.nodeFocusedBeforeActivation=m.activeElement,null==t||t(),o=function(){i&&w(),I(),A(),null==n||n()},i?(i(g.containers.concat()).then(o,o),this):(o(),this))},deactivate:function(e){var t,n,r,a,s,c;return g.active?(t=i({onDeactivate:f.onDeactivate,onPostDeactivate:f.onPostDeactivate,checkCanReturnFocus:f.checkCanReturnFocus},e),clearTimeout(g.delayInitialFocusTimer),g.delayInitialFocusTimer=void 0,T(),g.active=!1,g.paused=!1,A(),function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}(h,o),n=b(t,"onDeactivate"),r=b(t,"onPostDeactivate"),a=b(t,"checkCanReturnFocus"),s=b(t,"returnFocus","returnFocusOnDeactivate"),null==n||n(),c=function(){l((function(){s&&E(S(g.nodeFocusedBeforeActivation)),null==r||r()}))},s&&a?(a(S(g.nodeFocusedBeforeActivation)).then(c,c),this):(c(),this)):this},pause:function(e){if(g.paused||!g.active)return this;var t=b(e,"onPause"),n=b(e,"onPostPause");return g.paused=!0,null==t||t(),T(),A(),null==n||n(),this},unpause:function(e){if(!g.paused||!g.active)return this;var t=b(e,"onUnpause"),n=b(e,"onPostUnpause");return g.paused=!1,null==t||t(),w(),I(),A(),null==n||n(),this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return g.containers=t.map((function(e){return"string"==typeof e?m.querySelector(e):e})),g.active&&w(),A(),this}}).updateContainerElements(e),o},Object.defineProperty(e,"__esModule",{value:!0})})),define("WoltLabSuite/Core/Date/Picker",["require","exports","tslib","../Core","./Util","../Dom/Change/Listener","../Event/Handler","../Language","../Ui/Alignment","../Ui/CloseOverlay","../Dom/Util","../Helper/PageOverlay","focus-trap"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p){"use strict";function m(e,t,n){const i=n?"minDate":"maxDate";let o=(e.dataset[i]||"").trim();if(/^(\d{4})-(\d{2})-(\d{2})$/.exec(o))o=new Date(o).getTime().toString();else if("now"===o)o=t.getTime().toString();else if(/^\d{1,3}$/.exec(o)){const e=new Date(t.getTime());e.setFullYear(e.getFullYear()+~~o*(n?-1:1)),o=e.getTime().toString()}else if(/^datePicker-(.+)$/.exec(o)){if(o=RegExp.$1,null===document.getElementById(o))throw new Error("Reference date picker identified by '"+o+"' does not exists (element id: '"+e.id+"').")}else o=/^\d{4}-\d{2}-\d{2}T/.test(o)?new Date(o).getTime().toString():new Date(n?1902:2038,0,1).getTime().toString();e.dataset[i]=o}function h(e){let t=D.dataset[e]||"";if(/^datePicker-(.+)$/.exec(t)){const e=document.getElementById(RegExp.$1);if(null===e)throw new Error(`Unable to find an element with the id '${RegExp.$1}'.`);t=e.dataset.value||""}return new Date(parseInt(t,10))}function f(e){e.stopPropagation(),function(){if(null!==R)return;R=document.createElement("div"),R.className="datePicker",R.addEventListener("click",(e=>{e.stopPropagation()}));const e=document.createElement("header");R.appendChild(e),B=document.createElement("button"),B.type="button",B.className="previous jsTooltip",B.title=s.get("wcf.date.datePicker.previousMonth"),B.setAttribute("aria-label",s.get("wcf.date.datePicker.previousMonth")),B.innerHTML='<fa-icon name="arrow-left" solid></fa-icon>',B.addEventListener("click",(()=>H.previousMonth())),e.appendChild(B);const t=document.createElement("span");e.appendChild(t),q=document.createElement("select"),q.className="month jsTooltip",q.title=s.get("wcf.date.datePicker.month"),q.setAttribute("aria-label",s.get("wcf.date.datePicker.month")),q.addEventListener("change",_),t.appendChild(q);let n="";const i=new Intl.DateTimeFormat(document.documentElement.lang,{month:"long"});for(let e=0;e<12;e++)n+=`<option value="${e}">${i.format(new Date(2e3,e,15))}</option>`;q.innerHTML=n,U=document.createElement("select"),U.className="year jsTooltip",U.title=s.get("wcf.date.datePicker.year"),U.setAttribute("aria-label",s.get("wcf.date.datePicker.year")),U.addEventListener("change",w),t.appendChild(U),N=document.createElement("button"),N.type="button",N.className="next jsTooltip",N.title=s.get("wcf.date.datePicker.nextMonth"),N.setAttribute("aria-label",s.get("wcf.date.datePicker.nextMonth")),N.innerHTML='<fa-icon name="arrow-right" solid></fa-icon>',N.addEventListener("click",(()=>H.nextMonth())),e.appendChild(N),P=document.createElement("ul"),R.appendChild(P);const o=document.createElement("li");o.className="weekdays",P.appendChild(o);const r=new Intl.DateTimeFormat(document.documentElement.lang,{weekday:"short"}),a=new Date,l=a.getDay()-x;for(let e=0;e<7;e++){const t=e-l,n=new Date((new Date).setDate(a.getDate()+t)),i=document.createElement("span");i.textContent=r.format(n),o.appendChild(i)}for(let e=0;e<6;e++){const e=document.createElement("li");P.appendChild(e);for(let t=0;t<7;t++){const t=document.createElement("a");t.addEventListener("click",E),A.push(t),e.appendChild(t)}}F=document.createElement("footer"),R.appendChild(F),j=document.createElement("select"),j.className="hour",j.title=s.get("wcf.date.datePicker.hour"),j.setAttribute("aria-label",s.get("wcf.date.datePicker.hour")),j.addEventListener("change",y);const c=new Date(2e3,0,1),d=new Intl.DateTimeFormat(document.documentElement.lang,{hour:"numeric"});let m="";for(let e=0;e<24;e++){c.setHours(e);let t=d.formatToParts(c);const n=t.some((e=>"dayPeriod"===e.type));2!==t.length||n||(t=t.filter((e=>"literal"!==e.type))),m+=`<option value="${e}">${t.map((e=>e.value)).join("")}</option>`}j.innerHTML=m,F.appendChild(j),F.appendChild(document.createTextNode(" : ")),O=document.createElement("select"),O.className="minute",O.title=s.get("wcf.date.datePicker.minute"),O.setAttribute("aria-label",s.get("wcf.date.datePicker.minute")),O.addEventListener("change",y),m="";for(let e=0;e<60;e++){const t=e<10?"0"+e.toString():e;m+=`<option value="${e}">${t}</option>`}O.innerHTML=m,F.appendChild(O),(0,u.getPageOverlayContainer)().appendChild(R),C=(0,p.createFocusTrap)(R,{allowOutsideClick:!0,escapeDeactivates:()=>(g(),!1)})}();const t=e.currentTarget,n="INPUT"===t.nodeName?t:t.previousElementSibling;if(n===D)return void g();const o=n.closest(".dialogContent");null!==o&&(i.stringToBool(o.dataset.hasDatepickerScrollListener||"")||(o.addEventListener("scroll",b),o.dataset.hasDatepickerScrollListener="1")),D=n;const r=M.get(D),a=D.dataset.value;let c;a?(c=new Date(parseInt(a,10)),"Invalid Date"===c.toString()&&(c=new Date)):c=new Date,T=h("minDate"),T.getTime()>c.getTime()&&(c=T),I=h("maxDate"),D.dataset.maxDate&&I.getTime()<c.getTime()&&(c=I),r.isDateTime?(j.value=c.getHours().toString(),O.value=c.getMinutes().toString(),R.classList.add("datePickerTime")):R.classList.remove("datePickerTime"),R.classList[r.isTimeOnly?"add":"remove"]("datePickerTimeOnly"),function(e,t,n){v(e,t,n);let i="";for(let e=T.getFullYear(),t=I.getFullYear();e<=t;e++)i+=`<option value="${e}">${e}</option>`;U.innerHTML=i,U.value=n.toString(),q.value=t.toString(),R.classList.add("active")}(c.getDate(),c.getMonth(),c.getFullYear()),L=()=>{l.set(R,D)},L(),window.addEventListener("scroll",L,{passive:!1}),D.nextElementSibling.setAttribute("aria-expanded","true"),C.activate()}function g(){if(null===R||!R.classList.contains("active"))return;R.classList.remove("active");const e=M.get(D);"function"==typeof e.onClose&&e.onClose(),a.fire("WoltLabSuite/Core/Date/Picker","close",{element:D}),void 0!==L&&(window.removeEventListener("scroll",L),L=void 0),D.nextElementSibling.setAttribute("aria-expanded","false"),D=null,C.deactivate()}function b(e){if(null===D)return;const t=e.currentTarget,n=d.default.offset(D),i=d.default.offset(t);n.top+D.clientHeight<=i.top||n.top>=i.top+t.offsetHeight||n.left<=i.left||n.left>=i.left+t.offsetWidth?g():l.set(R,D)}function v(e,t,n){const i=void 0!==e,r=void 0!==t;if("number"!=typeof e&&(e=parseInt(e||P.dataset.day||"0",10)),"number"!=typeof t&&(t=parseInt(t||"0",10)),"number"!=typeof n&&(n=parseInt(n||"0",10)),r||n){let a=0!==n;const s=document.createDocumentFragment();s.appendChild(P),r||(t=parseInt(P.dataset.month,10)),n||(n=parseInt(P.dataset.year,10));let l=new Date(n.toString()+"-"+("0"+(t+1).toString()).slice(-2)+"-"+("0"+e.toString()).slice(-2));for(l<T?(n=T.getFullYear(),t=T.getMonth(),e=T.getDate(),q.value=t.toString(),U.value=n.toString(),a=!0):l>I&&(n=I.getFullYear(),t=I.getMonth(),e=I.getDate(),q.value=t.toString(),U.value=n.toString(),a=!0),l=new Date(n.toString()+"-"+("0"+(t+1).toString()).slice(-2)+"-01");l.getDay()!==x;)l.setDate(l.getDate()-1);d.default.show(A[35].parentNode);const c=new Date(T.getFullYear(),T.getMonth(),T.getDate());for(let e=0;e<42;e++){if(35===e&&l.getMonth()!==t){d.default.hide(A[35].parentNode);break}const n=A[e];n.textContent=l.getDate().toString();const i=l.getMonth()===t;i?n.classList.remove("otherMonth"):n.classList.add("otherMonth");let r=!0;(l<c||l>I)&&(r=!1),r?n.classList.remove("disabled"):n.classList.add("disabled"),i&&r&&(n.href="#",n.setAttribute("role","button"),n.tabIndex=0,n.title=o.formatDate(l),n.setAttribute("aria-label",o.formatDate(l))),l.setDate(l.getDate()+1)}if(P.dataset.month=t.toString(),P.dataset.year=n.toString(),R.insertBefore(s,F),!i&&(l=new Date(n,t,e),l.getDate()!==e)){for(;l.getMonth()!==t;)l.setDate(l.getDate()-1);e=l.getDate()}if(a){for(let e=0;e<12;e++){const t=q.children[e];t.disabled=n===T.getFullYear()&&+t.value<T.getMonth()||n===I.getFullYear()&&+t.value>I.getMonth()}const e=new Date(n.toString()+"-"+("0"+(t+1).toString()).slice(-2)+"-01");e.setMonth(e.getMonth()+1),N.classList[e<I?"add":"remove"]("active");const i=new Date(n.toString()+"-"+("0"+(t+1).toString()).slice(-2)+"-01");i.setDate(i.getDate()-1),B.classList[i>T?"add":"remove"]("active")}}if(e){for(let t=0;t<37;t++){const n=A[t];let i=+n.textContent===e;(n.classList.contains("otherMonth")||n.classList.contains("disabled"))&&(i=!1),i?n.classList.add("active"):n.classList.remove("active")}P.dataset.day=e.toString()}y()}function y(){const e=M.get(D);let t;i.stringToBool(D.dataset.empty||"")||(t=e.isDateTime?new Date(+P.dataset.year,+P.dataset.month,+P.dataset.day,+j.value,+O.value):new Date(+P.dataset.year,+P.dataset.month,+P.dataset.day),H.setDate(D,t))}function _(e){v(void 0,+e.currentTarget.value)}function w(e){v(void 0,void 0,+e.currentTarget.value)}function E(e){e.preventDefault();const t=e.currentTarget;t.classList.contains("otherMonth")||t.classList.contains("disabled")||(D.dataset.empty="false",v(+t.textContent),M.get(D).isDateTime||g())}function S(e){if("string"==typeof e&&(e=document.getElementById(e)),!(e instanceof HTMLInputElement&&e.classList.contains("inputDatePicker")&&M.has(e)))throw new Error("Expected a valid date picker input element or id.");return e}i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importDefault(c),d=n.__importDefault(d);let C,L,k=!1,x=0;const M=new Map;let I,T,D=null;const A=[];let P,j,O,q,N,B,F,U,R=null;const H={init(){k||(k=!0,x=parseInt(s.get("wcf.date.firstDayOfTheWeek"),10),r.default.add("WoltLabSuite/Core/Date/Picker",(()=>H.init())),c.default.add("WoltLabSuite/Core/Date/Picker",(()=>g())));const e=new Date;document.querySelectorAll('input[type="date"]:not(.inputDatePicker), input[type="datetime"]:not(.inputDatePicker)').forEach((t=>{t.classList.add("inputDatePicker"),t.readOnly=!0;const n="datetime"===t.getAttribute("type"),r=n&&i.stringToBool(t.dataset.timeOnly||""),a=i.stringToBool(t.dataset.disableClear||""),l=n&&i.stringToBool(t.dataset.ignoreTimezone||""),c=t.classList.contains("birthday");t.dataset.isDateTime=n?"true":"false",t.dataset.isTimeOnly=r?"true":"false";let d=null,u=t.value;u||(u=t.getAttribute("value")||"");const p=/^\d+-\d+-\d+$/.test(u);if(u){if(r){d=new Date;const e=u.split(":");d.setHours(+e[0],+e[1])}else{if(l||c||p){let e=new Date(u).getTimezoneOffset(),t=e>0?"-":"+";e=Math.abs(e);const n=Math.floor(e/60).toString(),i=(e%60).toString();t+=2===n.length?n:"0"+n,t+=":",t+=2===i.length?i:"0"+i,c||p?u+="T00:00:00"+t:u=u.replace(/[+-][0-9]{2}:[0-9]{2}$/,t)}d=new Date(u)}const e=d.getTime();isNaN(e)?u="":(t.dataset.value=e.toString(),u=r?o.formatTime(d):n?o.formatDateTime(d):o.formatDate(d))}const h=0===u.length;if(c?(t.dataset.minDate="120",t.dataset.maxDate=(new Date).getFullYear().toString()+"-12-31"):(t.min&&(t.dataset.minDate=t.min),t.max&&(t.dataset.maxDate=t.max)),m(t,e,!0),m(t,e,!1),(t.dataset.minDate||"")===(t.dataset.maxDate||""))throw new Error("Minimum and maximum date cannot be the same (element id '"+t.id+"').");t.type="text",t.value=u,t.dataset.empty=h?"true":"false";const g=t.dataset.placeholder||"";g&&(t.placeholder=g);const b=document.createElement("input");b.id=t.id+"DatePicker",b.name=t.name,b.type="hidden",null!==d&&(b.value=r?o.format(d,"H:i"):l?o.format(d,"Y-m-dTH:i:s"):o.format(d,n?"c":"Y-m-d")),t.parentNode.insertBefore(b,t),t.removeAttribute("name"),t.addEventListener("click",f);const v=document.createElement("div");v.className="inputAddon";const y=document.createElement("button");y.type="button",y.className="inputSuffix button jsTooltip",y.title=s.get("wcf.date.datePicker"),y.setAttribute("aria-haspopup","true"),y.setAttribute("aria-expanded","false"),y.addEventListener("click",(e=>{t.disabled||f(e)})),v.appendChild(y);let _=document.createElement("fa-icon");r?_.setIcon("clock"):_.setIcon("calendar"),y.appendChild(_),t.parentNode.insertBefore(v,t),v.insertBefore(t,y);let w=null;a||(w=document.createElement("button"),w.type="button",w.className="inputSuffix button jsTooltip",w.title=s.get("wcf.date.datePicker.clear"),w.addEventListener("click",(()=>{t.disabled||this.clear(t)})),h&&(w.hidden=!0),v.appendChild(w),_=document.createElement("fa-icon"),_.setIcon("xmark"),w.appendChild(_));const E=["tiny","short","medium","long"];let S=!1;for(let e=0;e<4;e++)t.classList.contains(E[e])&&(S=!0);S||t.classList.add("short"),new MutationObserver((()=>{t.disabled?(y.classList.add("disabled"),w?.classList.add("disabled")):(y.classList.remove("disabled"),w?.classList.remove("disabled"))})).observe(t,{attributeFilter:["disabled"]}),t.disabled&&(y.classList.add("disabled"),w?.classList.add("disabled")),M.set(t,{clearButton:w,shadow:b,disableClear:a,isDateTime:n,isEmpty:h,isTimeOnly:r,ignoreTimezone:l,onClose:null})}))},previousMonth(){"0"===q.value?(q.value="11",U.value=(+U.value-1).toString()):q.value=(+q.value-1).toString(),v(void 0,+q.value,+U.value)},nextMonth(){"11"===q.value?(q.value="0",U.value=(+U.value+1).toString()):q.value=(+q.value+1).toString(),v(void 0,+q.value,+U.value)},getDate(e){const t=(e=S(e)).dataset.value||"";return t?new Date(+t):null},setDate(e,t){e=S(e);const n=M.get(e);e.dataset.value=t.getTime().toString();let i,r="";n.isDateTime?n.isTimeOnly?(i=o.formatTime(t),r="H:i"):n.ignoreTimezone?(i=o.formatDateTime(t),r="Y-m-dTH:i:s"):(i=o.formatDateTime(t),r="c"):(i=o.formatDate(t),r="Y-m-d"),e.value=i,n.shadow.value=o.format(t,r),n.disableClear||(n.clearButton.hidden=!1)},getValue(e){e=S(e);const t=M.get(e);return t?t.shadow.value:""},clear(e){e=S(e);const t=M.get(e);e.removeAttribute("data-value"),e.value="",t.disableClear||(t.clearButton.hidden=!0),t.isEmpty=!0,t.shadow.value=""},destroy(e){e=S(e);const t=M.get(e),n=e.parentNode;n.parentNode.insertBefore(e,n),n.remove(),e.setAttribute("type","date"+(t.isDateTime?"time":"")),e.name=t.shadow.name,e.value=t.shadow.value,e.removeAttribute("data-value"),e.removeEventListener("click",f),t.shadow.remove(),e.classList.remove("inputDatePicker"),e.readOnly=!1,M.delete(e)},setCloseCallback(e,t){e=S(e),M.get(e).onClose=t}};return window.__wcf_bc_datePicker=H,H})),define("WoltLabSuite/Core/Helper/Selector",["require","exports"],(function(e,t){"use strict";function n(e){for(const[t,n]of a.entries()){e.matches(t)&&i(e,n);const o=e.querySelectorAll(t);for(const e of o)i(e,n)}}function i(e,t){for(const n of t)n(e)}function o(e,t){a.has(e)||a.set(e,[]),a.get(e).push(t),n(document.body),void 0===r&&(r=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&n(e)})),r.observe(document,{subtree:!0,childList:!0}))}let r;Object.defineProperty(t,"__esModule",{value:!0}),t.wheneverFirstSeen=t.wheneverSeen=void 0;const a=new Map;t.wheneverSeen=o,t.wheneverFirstSeen=function(e,t){const n=new WeakSet;o(e,(e=>{n.has(e)||(n.add(e),t(e))}))}})),define("WoltLabSuite/Core/Form/XsrfToken",["require","exports","../Core","../Helper/Selector"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(){const e=(0,n.getXsrfToken)();(0,i.wheneverFirstSeen)(".xsrfTokenInput",(t=>{(function(e){return"INPUT"===e.nodeName})(t)&&(t.value=e,t.classList.add("xsrfTokenInputHandled"))}))}})),define("WoltLabSuite/Core/Ui/Dialog",["require","exports","tslib","../Core","../Dom/Change/Listener","./Screen","../Dom/Util","../Language","../Environment","../Event/Handler","./CloseOverlay","focus-trap","../Helper/PageOverlay"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p){"use strict";i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importStar(c),d=n.__importDefault(d);let m,h=null;const f=new Map;let g=!1;const b=new WeakMap,v=new Map;let y;const _=["onBeforeClose","onClose","onShow"],w=["number","password","search","tel","text","url"],E={setup(){m=document.createElement("div"),m.classList.add("dialogOverlay"),m.setAttribute("aria-hidden","true"),m.addEventListener("mousedown",(e=>this._closeOnBackdrop(e))),m.addEventListener("wheel",(e=>{e.target===m&&e.preventDefault()}),{passive:!1}),document.getElementById("content").appendChild(m),y=e=>{if("Escape"===e.key){const t=e.target;if("INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName){const e=f.get(h);return!e.closable||("function"==typeof e.onBeforeClose?(e.onBeforeClose(h),!1):(this.close(h),!1))}}return!0},r.on("screen-xs",{match(){g=!0},unmatch(){g=!1},setup(){g=!0}}),this._initStaticDialogs(),o.default.add("Ui/Dialog",(()=>{this._initStaticDialogs()})),window.addEventListener("resize",(()=>{f.forEach((e=>{i.stringToBool(e.dialog.getAttribute("aria-hidden"))||this.rebuild(e.dialog.dataset.id||"")}))}))},_initStaticDialogs(){document.querySelectorAll(".jsStaticDialog").forEach((e=>{e.classList.remove("jsStaticDialog");const t=e.dataset.dialogId||"";if(t){const n=document.getElementById(t);null!==n&&(n.classList.remove("jsStaticDialogContent"),n.dataset.isStaticDialog="true",a.default.hide(n),e.addEventListener("click",(e=>{e.preventDefault(),this.openStatic(n.id,null,{title:n.dataset.title||""})})))}}))},open(t,o){let r=b.get(t);if(r&&i.isPlainObject(r))return this.openStatic(r.id,void 0===o?null:o);if("function"!=typeof t._dialogSetup)throw new Error("Callback object does not implement the method '_dialogSetup()'.");const s=t._dialogSetup();if(!i.isPlainObject(s))throw new Error("Expected an object literal as return value of '_dialogSetup()'.");const l=s.id;let c;if(r={id:l},void 0===s.source){if(c=document.getElementById(l),null===c)throw new Error("Element id '"+l+"' is invalid and no source attribute was given. If you want to use the `html` argument instead, please add `source: null` to your dialog configuration.");s.source=document.createDocumentFragment(),s.source.appendChild(c),c.removeAttribute("id"),a.default.show(c)}else if(null===s.source)s.source=o;else if("function"==typeof s.source)s.source();else if(i.isPlainObject(s.source)){if("string"!=typeof o||""===o.trim())return new Promise(((t,n)=>{e(["../Ajax"],t,n)})).then(n.__importStar).then((e=>{const n=s.source;e.api(this,n.data,(e=>{e.returnValues&&"string"==typeof e.returnValues.template&&(this.open(t,e.returnValues.template),"function"==typeof n.after&&n.after(f.get(l).content,e))}))})),{};s.source=o}else if("string"==typeof s.source&&(c=document.createElement("div"),c.id=l,a.default.setInnerHtml(c,s.source),s.source=document.createDocumentFragment(),s.source.appendChild(c)),!s.source.nodeType||s.source.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)throw new Error("Expected at least a document fragment as 'source' attribute.");return b.set(t,r),v.set(l,t),this.openStatic(l,s.source,s.options)},openStatic(t,o,a){this.isOpen(t)||r.pageOverlayOpen(),"desktop"!==l.platform()&&(this.isOpen(t)||r.scrollDisable()),f.has(t)?this._updateDialog(t,o):((a=i.extend({backdropCloseOnClick:!0,closable:!0,closeButtonLabel:s.get("wcf.global.button.close"),closeConfirmMessage:"",disableContentPadding:!1,title:"",onBeforeClose:null,onClose:null,onShow:null},a||{})).closable||(a.backdropCloseOnClick=!1),a.closeConfirmMessage&&(a.onBeforeClose=t=>{new Promise(((t,n)=>{e(["./Confirmation"],t,n)})).then(n.__importStar).then((e=>{e.show({confirm:this.close.bind(this,t),message:a.closeConfirmMessage||""})}))}),this._createDialog(t,o,a));const c=f.get(t);return"ios"===l.platform()&&window.setTimeout((()=>{c.content.querySelector("input, textarea")?.focus()}),200),(0,p.adoptPageOverlayContainer)(m),c},setTitle(e,t){e=this._getDialogId(e);const n=f.get(e);if(void 0===n)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");const i=n.dialog.querySelector(".dialogTitle");i&&(i.textContent=t)},setCallback(e,t,n){if("object"==typeof e){const t=b.get(e);void 0!==t&&(e=t.id)}const i=f.get(e);if(void 0===i)throw new Error(`Expected a valid dialog id, '${e}' does not match any active dialog.`);if(-1===_.indexOf(t))throw new Error("Invalid callback identifier, '"+t+"' is not recognized.");if("function"!=typeof n&&null!==n)throw new Error("Only functions or the 'null' value are acceptable callback values ('"+typeof n+"' given).");i[t]=n},removeCallback(e,t){if("object"==typeof e){const t=b.get(e);void 0!==t&&(e=t.id)}const n=f.get(e);if(void 0===n)throw new Error(`Expected a valid dialog id, '${e}' does not match any active dialog.`);if(-1===_.indexOf(t))throw new Error("Invalid callback identifier, '"+t+"' is not recognized.");n[t]=void 0},_createDialog(e,t,n){let i=null;if(null===t&&(i=document.getElementById(e),null===i))throw new Error("Expected either a HTML string or an existing element id.");const o=document.createElement("div");o.classList.add("dialogContainer"),o.setAttribute("aria-hidden","true"),o.setAttribute("role","dialog"),o.dataset.id=e;const r=document.createElement("header");o.appendChild(r);const s=a.default.getUniqueId();o.setAttribute("aria-labelledby",s);const l=document.createElement("span");if(l.classList.add("dialogTitle"),l.textContent=n.title,l.id=s,r.appendChild(l),n.closable){const e=document.createElement("button");e.type="button",e.innerHTML='<fa-icon size="24" name="xmark"></fa-icon>',e.classList.add("dialogCloseButton","jsTooltip"),e.title=n.closeButtonLabel,e.setAttribute("aria-label",n.closeButtonLabel),e.addEventListener("click",(()=>this._close())),r.appendChild(e)}new ResizeObserver((()=>{if("false"===o.getAttribute("aria-hidden")){const e=Math.floor(o.getBoundingClientRect().width/2);o.style.setProperty("--translate-x",`-${e}px`)}})).observe(o);const c=document.createElement("div");let d;if(c.classList.add("dialogContent"),n.disableContentPadding&&c.classList.add("dialogContentNoPadding"),o.appendChild(c),c.addEventListener("wheel",(e=>{let t,n,i,o=!1,r=e.target;for(;;){if(t=r.clientHeight,n=r.scrollHeight,t<n){if(i=r.scrollTop,e.deltaY<0&&i>0){o=!0;break}if(e.deltaY>0&&i+t<n){o=!0;break}}if(!r||r===c)break;r=r.parentNode}o||e.preventDefault()}),{passive:!1}),null===i)if("string"==typeof t)d=document.createElement("div"),d.id=e,a.default.setInnerHtml(d,t);else{if(!(t instanceof DocumentFragment))throw new TypeError("'html' must either be a string or a DocumentFragment");{const n=[];let i;for(let e=0,o=t.childNodes.length;e<o;e++)i=t.childNodes[e],i.nodeType===Node.ELEMENT_NODE&&n.push(i);"DIV"!==n[0].nodeName||n.length>1?(d=document.createElement("div"),d.id=e,d.appendChild(t)):d=n[0]}}else d=i;c.appendChild(d),"none"===d.style.getPropertyValue("display")&&a.default.show(d);const p=(0,u.createFocusTrap)(o,{allowOutsideClick:!0,escapeDeactivates:()=>(f.get(e).closable&&E.close(e),!1),fallbackFocus:o});f.set(e,{backdropCloseOnClick:n.backdropCloseOnClick,closable:n.closable,content:d,dialog:o,focusTrap:p,header:r,onBeforeClose:n.onBeforeClose,onClose:n.onClose,onShow:n.onShow,submitButton:null,inputFields:new Set}),m.insertBefore(o,m.firstChild),"function"==typeof n.onSetup&&n.onSetup(d),this._updateDialog(e,null)},_updateDialog(e,t){const n=f.get(e);if(void 0===n)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");if("string"==typeof t&&a.default.setInnerHtml(n.content,t),i.stringToBool(n.dialog.getAttribute("aria-hidden"))){d.default.execute(),n.closable&&i.stringToBool(m.getAttribute("aria-hidden"))&&window.addEventListener("keyup",y),n.dialog.parentNode.insertBefore(n.dialog,n.dialog.parentNode.firstChild),n.dialog.setAttribute("aria-hidden","false"),m.setAttribute("aria-hidden","false"),m.setAttribute("close-on-click",n.backdropCloseOnClick?"true":"false"),h=e;const t=n.header.querySelector(".dialogCloseButton");t&&t.setAttribute("inert","true"),t&&t.removeAttribute("inert"),"function"==typeof n.onShow&&n.onShow(n.content),i.stringToBool(n.content.dataset.isStaticDialog||"")&&c.fire("com.woltlab.wcf.dialog","openStatic",{content:n.content,id:e})}this.rebuild(e),o.default.trigger(),n.focusTrap.activate()},rebuild(e){const t=this._getDialogId(e),n=f.get(t);if(void 0===n)throw new Error("Expected a valid dialog id, '"+t+"' does not match any active dialog.");if(i.stringToBool(n.dialog.getAttribute("aria-hidden")))return;const o=n.content.parentNode,r=n.content.querySelector(".formSubmit");let s=0;null!==r?(o.classList.add("dialogForm"),r.classList.add("dialogFormSubmit"),s+=a.default.outerHeight(r),s-=1,o.style.setProperty("margin-bottom",`${s}px`,"")):(o.classList.remove("dialogForm"),o.style.removeProperty("margin-bottom")),s+=a.default.outerHeight(n.header);const l=window.innerHeight*(g?1:.8)-s;if(o.style.setProperty("max-height",~~l+"px",""),""===n.dialog.style.getPropertyValue("--translate-x")){const e=Math.floor(n.dialog.getBoundingClientRect().width/2);n.dialog.style.setProperty("--translate-x",`-${e}px`)}const c=v.get(t);if(void 0!==c&&"function"==typeof c._dialogSubmit){const e=n.content.querySelectorAll('input[data-dialog-submit-on-enter="true"]'),i=n.content.querySelector('.formSubmit > input[type="submit"], .formSubmit > button[data-type="submit"]');if(null===i)return void(0===e.length&&console.warn("Broken dialog, expected a submit button.",n.content));if(n.submitButton!==i){n.submitButton=i,i.addEventListener("click",(e=>{e.preventDefault(),this._submit(t)}));const o=e=>{"Enter"===e.key&&(e.preventDefault(),this._submit(t))};let r;for(let t=0,i=e.length;t<i;t++)r=e[t],n.inputFields.has(r)||(-1!==w.indexOf(r.type)?(n.inputFields.add(r),r.addEventListener("keydown",o)):console.warn("Unsupported input type.",r))}}},_submit(e){const t=f.get(e);let n=!0;if(t.inputFields.forEach((e=>{e.required&&(""===e.value.trim()?(a.default.innerError(e,s.get("wcf.global.form.error.empty")),e.closest("dl")?.classList.add("formError"),n=!1):(a.default.innerError(e,!1),e.closest("dl")?.classList.remove("formError")))})),n){const t=v.get(e);"function"==typeof t._dialogSubmit&&t._dialogSubmit()}},submit(e){this._submit(e)},_close(){const e=f.get(h);return void 0===e||!e.closable||("function"==typeof e.onBeforeClose?(e.onBeforeClose(h),!1):(this.close(h),!0))},_closeOnBackdrop(e){e.target===m&&(i.stringToBool(m.getAttribute("close-on-click"))?(e.preventDefault(),this._close()):e.preventDefault())},close(e){e=this._getDialogId(e);let t=f.get(e);if(void 0===t)throw new Error("Expected a valid dialog id, '"+e+"' does not match any active dialog.");try{t.focusTrap.deactivate()}catch(e){const t="Your focus-trap must have at least one container with at least one tabbable node in it at all times";if(e.message!==t)throw e}t.dialog.setAttribute("aria-hidden","true");const n=document.activeElement;n.closest(".dialogContainer")===t.dialog&&n.blur(),"function"==typeof t.onClose&&t.onClose(e),h=null;for(let e=0;e<m.childElementCount;e++){const t=m.children[e];if(t.classList.contains("dialogContainer")&&!i.stringToBool(t.getAttribute("aria-hidden"))){h=t.dataset.id||"";break}}(0,p.releasePageOverlayContainer)(m),r.pageOverlayClose(),null===h?(m.setAttribute("aria-hidden","true"),m.dataset.closeOnClick="false",t.closable&&window.removeEventListener("keyup",y)):(t=f.get(h),m.dataset.closeOnClick=t.backdropCloseOnClick?"true":"false"),"desktop"!==l.platform()&&r.scrollEnable()},getDialog(e){return f.get(this._getDialogId(e))},isOpen(e){const t=this.getDialog(e);return void 0!==t&&"false"===t.dialog.getAttribute("aria-hidden")},destroy(e){if("object"!=typeof e)throw new TypeError("Expected the callback object as parameter.");if(b.has(e)){const t=b.get(e).id;this.isOpen(t)&&this.close(t),f.has(t)&&(f.get(t).dialog.remove(),f.delete(t)),b.delete(e)}},_getDialogId(e){if("object"==typeof e){const t=b.get(e);if(void 0!==t)return t.id}return e.toString()},_ajaxSetup:()=>({})};return E})),define("WoltLabSuite/Core/Ui/Dropdown/Simple",["require","exports","tslib","../../CallbackList","../../Core","../../Dom/Traverse","../../Dom/Util","../Alignment","../CloseOverlay","../../Helper/PageOverlay","../../Helper/Selector"],(function(e,t,n,i,o,r,a,s,l,c,d){"use strict";function u(e){const t=e.currentTarget,n=t.querySelectorAll(".dropdown.dropdownOpen");for(let e=0,i=n.length;e<i;e++){const i=n[e],o=a.default.identify(i),r=a.default.offset(i),s=a.default.offset(t);r.top+i.clientHeight<=s.top||r.top>=s.top+t.offsetHeight||r.left<=s.left||r.left>=s.left+t.offsetWidth?C.toggleDropdown(o):C.setAlignment(y.get(o),_.get(o))}}function p(){y.forEach(((e,t)=>{if(e.classList.contains("dropdownOpen"))if(o.stringToBool(e.dataset.isOverlayDropdownButton||""))C.setAlignment(e,_.get(t));else{const n=_.get(e.id);o.stringToBool(n.dataset.dropdownIgnorePageScroll||"")||C.close(t)}}))}function m(e,t){b.forEach(e,(n=>{n(e,t)}))}function h(e,t,n,i){if(null!==e){e.preventDefault(),e.stopPropagation();const n=e.currentTarget;t=n.dataset.target,void 0===i&&e instanceof MouseEvent&&(o.stringToBool(n.dataset.isKeyboardClick||"")?delete n.dataset.isKeyboardClick:i=!0)}S=!0;try{l.default.execute(l.Origin.DropDown,t)}finally{S=!1}let a=y.get(t),s=!1;if(void 0!==a){let n,l;if(e&&(n=e.currentTarget,l=n.parentNode,l!==a&&(l.classList.add("dropdown"),l.id=a.id,a.classList.remove("dropdown"),a.id="",a=l,y.set(t,l))),void 0===i&&(n=a.closest(".dropdownToggle"),n||(n=a.querySelector(".dropdownToggle"),!n&&a.id&&(n=document.querySelector('[data-target="'+a.id+'"]'))),n&&o.stringToBool(n.dataset.dropdownLazyInit||"")&&(i=!0)),o.stringToBool(a.dataset.dropdownPreventToggle||"")&&a.classList.contains("dropdownOpen")&&(s=!0),""===a.dataset.isOverlayDropdownButton){const e=r.parentByClass(a,"dialogContent");a.dataset.isOverlayDropdownButton=null!==e?"true":"false",null!==e&&e.addEventListener("scroll",u)}}return E="",y.forEach(((e,r)=>{const a=_.get(r);if(e.classList.contains("dropdownOpen"))if(s)E=t;else{e.classList.remove("dropdownOpen"),a.classList.remove("dropdownOpen");const t=e.querySelector(".dropdownToggle");t&&t.setAttribute("aria-expanded","false"),m(r,"close")}else if(r===t&&a.childElementCount>0){E=t,e.classList.add("dropdownOpen"),a.classList.add("dropdownOpen");const s=e.querySelector(".dropdownToggle");s&&s.setAttribute("aria-expanded","true");const l=a.childElementCount>0?a.children[0]:null;if(l&&o.stringToBool(l.dataset.scrollToActive||"")){delete l.dataset.scrollToActive;let e=null;for(let t=0,n=l.childElementCount;t<n;t++)if(l.children[t].classList.contains("active")){e=l.children[t];break}e&&(l.scrollTop=Math.max(e.offsetTop+e.clientHeight-a.clientHeight,0))}const c=a.querySelector(".scrollableDropdownMenu");null!==c&&c.classList[c.scrollHeight>c.clientHeight?"add":"remove"]("forceScrollbar"),m(r,"open");let d=null;if(!i){a.setAttribute("role","menu"),a.tabIndex=-1,a.removeEventListener("keydown",g),a.addEventListener("keydown",g);const e=Array.from(a.querySelectorAll("li")).filter((e=>e.clientHeight>0));d=e.find((e=>e.classList.contains("active")))||e[0]||null,e.forEach((e=>{e.setAttribute("role","menuitem"),e.tabIndex=-1}))}C.setAlignment(e,a,n),null!==d&&d.focus()}})),null===e}function f(e){const t=e.currentTarget;"INPUT"!==t.nodeName&&("Enter"!==e.key&&"Space"!==e.key||(e.preventDefault(),t.dataset.requiresSynthethicClick?(t.dataset.isKeyboardClick="true",t.click()):h(e)))}function g(e){const t=document.activeElement;if("LI"===t.nodeName)if("ArrowDown"===e.key||"ArrowUp"===e.key||"End"===e.key||"Home"===e.key){e.preventDefault();const n=Array.from(t.closest(".dropdownMenu").querySelectorAll("li"));"ArrowUp"!==e.key&&"End"!==e.key||n.reverse();let i=null;const o=e=>!e.classList.contains("dropdownDivider")&&e.clientHeight>0;let r=n.indexOf(t);"End"!==e.key&&"Home"!==e.key||(r=-1);for(let e=r+1;e<n.length;e++)if(o(n[e])){i=n[e];break}null===i&&(i=n.find(o)||null),null!==i&&i.focus()}else if("Enter"===e.key||"Space"===e.key){e.preventDefault();let n=t;1!==n.childElementCount||"SPAN"!==n.children[0].nodeName&&"A"!==n.children[0].nodeName||(n=n.children[0]);const i=y.get(E),r=i.querySelector(".dropdownToggle"),a=i.dataset.a11yMouseEvent||"click";o.triggerEvent(n,a),r&&r.focus()}else if("Escape"===e.key||"Tab"===e.key){e.preventDefault();const t=y.get(E);let n=t.querySelector(".dropdownToggle");null!==n||t.classList.contains("dropdown")||(n=t),h(null,E),n&&n.focus()}}i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l);const b=new i.default;let v=!1;const y=new Map,_=new Map;let w,E="",S=!1;const C={setup(){v||(v=!0,w=document.createElement("div"),w.className="dropdownMenuContainer",(0,c.getPageOverlayContainer)().append(w),l.default.add("WoltLabSuite/Core/Ui/Dropdown/Simple",(()=>C.closeAll())),(0,d.wheneverFirstSeen)(".dropdownToggle",(e=>C.init(e,!1))),document.addEventListener("scroll",p),window.bc_wcfSimpleDropdown=this)},init(e,t){if(C.setup(),e.setAttribute("role","button"),e.tabIndex=0,e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.classList.contains("jsDropdownEnabled")||e.dataset.target)return!1;const n=r.parentByClass(e,"dropdown");if(null===n)throw new Error("Invalid dropdown passed, button '"+a.default.identify(e)+"' does not have a parent with .dropdown.");const i=r.nextByClass(e,"dropdownMenu");if(null===i)throw new Error("Invalid dropdown passed, button '"+a.default.identify(e)+"' does not have a menu as next sibling.");w.appendChild(i);const s=a.default.identify(n);if(!y.has(s)&&(e.classList.add("jsDropdownEnabled"),e.addEventListener("click",h),e.addEventListener("keydown",f),y.set(s,n),_.set(s,i),/^wcf\d+$/.test(s)||(i.dataset.source=s),i.childElementCount&&i.children[0].classList.contains("scrollableDropdownMenu"))){const e=i.children[0];e.dataset.scrollToActive="true";let t=null,n=null;e.addEventListener("wheel",(i=>{null===t&&(t=e.clientHeight),null===n&&(n=e.scrollHeight),(i.deltaY<0&&0===e.scrollTop||i.deltaY>0&&e.scrollTop+t===n)&&i.preventDefault()}),{passive:!1})}return e.dataset.target=s,t&&setTimeout((()=>{e.dataset.dropdownLazyInit=t instanceof MouseEvent?"true":"false",o.triggerEvent(e,"click"),setTimeout((()=>{delete e.dataset.dropdownLazyInit}),10)}),10),!0},initFragment(e,t){C.setup();const n=a.default.identify(e);y.has(n)||(y.set(n,e),w.appendChild(t),_.set(n,t))},registerCallback(e,t){b.add(e,t)},getDropdown:e=>y.get(e),getDropdownMenu:e=>_.get(e),toggleDropdown(e,t,n){h(null,e,t,n)},setAlignment(e,t,n){const i=e.querySelector(".dropdownToggle"),o=null!==i?i.parentNode:null;let r;o&&o.classList.contains("inputAddonTextarea")&&(r=i),s.set(t,n||e,{pointerClassNames:["dropdownArrowBottom","dropdownArrowRight"],refDimensionsElement:r||null,horizontal:"right"===t.dataset.dropdownAlignmentHorizontal?"right":"left",vertical:"top"===t.dataset.dropdownAlignmentVertical?"top":"bottom",allowFlip:t.dataset.dropdownAllowFlip||"both"})},setAlignmentById(e){const t=y.get(e);if(void 0===t)throw new Error("Unknown dropdown identifier '"+e+"'.");const n=_.get(e);C.setAlignment(t,n)},isOpen(e){const t=_.get(e);return void 0!==t&&t.classList.contains("dropdownOpen")},open(e,t,n){const i=_.get(e);void 0===i||i.classList.contains("dropdownOpen")||C.toggleDropdown(e,n,t)},close(e){const t=y.get(e);void 0!==t&&(t.classList.remove("dropdownOpen"),_.get(e).classList.remove("dropdownOpen"))},closeAll(){S||y.forEach(((e,t)=>{if(e.classList.contains("dropdownOpen")){e.classList.remove("dropdownOpen"),_.get(t).classList.remove("dropdownOpen");const n=e.querySelector(".dropdownToggle");n&&n.setAttribute("aria-expanded","false"),m(t,"close")}}))},destroy(e){if(!y.has(e))return!1;try{C.close(e),_.get(e)?.remove()}catch(e){}return _.delete(e),y.delete(e),!0},_toggle:(e,t,n,i)=>h(e,t,n,i)};return C})),define("WoltLabSuite/Core/Ui/Dropdown/Reusable",["require","exports","tslib","./Simple"],(function(e,t,n,i){"use strict";function o(e){if(!r.has(e))throw new Error("Unknown dropdown identifier '"+e+"'");return r.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDropdown=t.registerCallback=t.getDropdownMenu=t.init=void 0,i=n.__importDefault(i);const r=new Map;let a=0;t.init=function(e,t){if(r.has(e))return;const n=document.createElement("div");n.id="reusableDropdownGhost"+a++,i.default.initFragment(n,t),r.set(e,n.id)},t.getDropdownMenu=function(e){return i.default.getDropdownMenu(o(e))},t.registerCallback=function(e,t){i.default.registerCallback(o(e),t)},t.toggleDropdown=function(e,t){i.default.toggleDropdown(o(e),t)}})),define("WoltLabSuite/Core/Ui/Page/Menu/Container",["require","exports","tslib","focus-trap","../../Screen","../../CloseOverlay","../../../Dom/Util"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageMenuContainer=void 0,r=n.__importDefault(r),a=n.__importDefault(a);class s{container=document.createElement("div");content=document.createElement("div");focusTrap=void 0;provider;constructor(e){this.provider=e,this.container.hidden=!0;const t=a.default.identify(this.provider.getMenuButton());r.default.add(`WoltLabSuite/Core/Ui/PageMenu/Container-${t}`,(()=>{this.container.hidden||this.close()}))}open(){r.default.execute(),this.buildElements(),0===this.content.childElementCount&&this.content.append(this.provider.getContent()),this.provider.getMenuButton().setAttribute("aria-expanded","true"),(0,o.pageOverlayOpen)(),(0,o.scrollDisable)(),this.container.hidden=!1,this.provider.wakeup(),this.getFocusTrap().activate()}close(){this.provider.getMenuButton().setAttribute("aria-expanded","false"),(0,o.pageOverlayClose)(),(0,o.scrollEnable)(),this.container.hidden=!0,this.getFocusTrap().deactivate(),this.provider.sleep()}toggle(){this.container.hidden?this.open():this.close()}getContent(){return this.content}buildElements(){this.container.classList.contains("pageMenuContainer")||(this.container.classList.add("pageMenuContainer"),this.container.hidden=!0,this.container.addEventListener("click",(e=>{e.target===this.container&&this.close()})),this.content.classList.add("pageMenuContent"),this.content.addEventListener("click",(e=>{e.stopPropagation()})),this.container.append(this.content),document.body.append(this.container))}getFocusTrap(){return void 0===this.focusTrap&&(this.focusTrap=(0,i.createFocusTrap)(this.content,{allowOutsideClick:!0})),this.focusTrap}}t.PageMenuContainer=s,t.default=s})),define("WoltLabSuite/Core/Ui/Page/Menu/Main",["require","exports","tslib","./Container","../../../Language","../../../Dom/Util","../../Dropdown/Simple"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageMenuMain=void 0,i=n.__importDefault(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a);class s{container;mainMenu;mainMenuButton;menuItemBadges=new Map;menuItemProvider;observer;constructor(e){this.mainMenu=document.querySelector(".mainMenu"),this.menuItemProvider=e,this.mainMenuButton=document.querySelector(".pageHeaderMenuMobile"),this.mainMenuButton.addEventListener("click",(e=>{e.stopPropagation(),this.container.toggle()})),this.container=new i.default(this),this.observer=new MutationObserver((e=>{let t=!1;e.forEach((e=>{(e.addedNodes.length>0||e.removedNodes.length>0||"characterData"===e.type)&&(t=!0)})),t&&this.refreshUnreadIndicator()})),this.watchForChanges()}enable(){this.mainMenuButton.setAttribute("aria-expanded","false"),this.mainMenuButton.querySelector("fa-icon").setIcon("bars"),this.refreshUnreadIndicator()}disable(){this.container.close(),this.mainMenuButton.setAttribute("aria-expanded","false"),this.mainMenuButton.querySelector("fa-icon").setIcon("bars")}getContent(){const e=document.createElement("div");e.classList.add("pageMenuMainContainer"),e.addEventListener("scroll",(()=>this.updateOverflowIndicator(e)),{passive:!0}),e.append(this.buildMainMenu());const t=this.buildLanguageMenu();t&&e.append(t);const n=this.buildFooterMenu();n&&e.append(n);const i=new ResizeObserver((()=>this.updateOverflowIndicator(e)));Array.from(e.children).forEach((e=>{i.observe(e)}));const o=document.createDocumentFragment();return o.append(e),o}getMenuButton(){return this.mainMenuButton}sleep(){this.watchForChanges()}wakeup(){this.observer.disconnect(),this.refreshUnreadIndicator()}watchForChanges(){this.observer.observe(this.mainMenu,{childList:!0,subtree:!0})}buildMainMenu(){const e=this.mainMenu.querySelector(".boxMenu"),t=this.buildMenu(e);return t.setAttribute("aria-label",window.PAGE_TITLE),t.setAttribute("role","navigation"),this.showActiveMenuItem(t),t}showActiveMenuItem(e){const t=e.querySelector('.pageMenuMainItemLink[aria-current="page"]');if(t){let e=t;for(;e&&e.parentElement;)if(e=e.parentElement.closest(".pageMenuMainItemList"),e){e.hidden=!1;const t=e.previousElementSibling;t?.setAttribute("aria-expanded","true")}const n=t.nextElementSibling;n&&(n.setAttribute("aria-expanded","true"),n.nextElementSibling.hidden=!1)}}buildLanguageMenu(){const e=a.getDropdownMenu("pageLanguageContainer");if(void 0===e)return null;const t=[],n=new Map;Array.from(e.children).forEach((e=>{const i=e.dataset.languageCode,o=e.querySelector("span").textContent.trim(),r=e.querySelector("img.iconFlag")||void 0;n.set(i,e.querySelector("a")),t.push({active:!1,children:[],counter:0,depth:1,identifier:i,title:o,icon:r})}));const i=document.createElement("fa-icon");i.setIcon("language"),i.size=24;const r=[{active:!1,children:t,counter:0,depth:0,identifier:"language",title:o.get("wcf.user.language"),icon:i}],s=document.createElement("nav");return s.classList.add("pageMenuMainNavigation","pageMenuMainNavigationLanguage"),s.append(this.buildMenuItemList(r,!0)),s.querySelectorAll(".pageMenuMainItemList .pageMenuMainItemLabel[data-identifier]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const i=e.dataset.identifier;n.get(i)?.click()}))})),s}buildFooterMenu(){const e=document.querySelector('.box[data-box-identifier="com.woltlab.wcf.FooterMenu"]');if(null===e)return null;const t=e.querySelector(".boxMenu"),n=this.buildMenu(t);n.classList.add("pageMenuMainNavigationFooter");const i=e.querySelector("nav").getAttribute("aria-label");return n.setAttribute("aria-label",i),n}buildMenu(e){const t=this.menuItemProvider.getMenuItems(e),n=document.createElement("nav");return n.classList.add("pageMenuMainNavigation"),n.append(this.buildMenuItemList(t,!1)),n}buildMenuItemList(e,t){const n=document.createElement("ul");return n.classList.add("pageMenuMainItemList"),e.filter((e=>!(!t&&!e.link&&0===e.children.length))).forEach((e=>{n.append(this.buildMenuItem(e,t))})),n}buildMenuItem(e,t){const n=document.createElement("li");if(n.dataset.depth=e.depth.toString(),n.classList.add("pageMenuMainItem"),e.link){const t=document.createElement("a");if(t.classList.add("pageMenuMainItemLink"),t.href=e.link,t.textContent=e.title,e.active&&t.setAttribute("aria-current","page"),e.identifier&&(t.dataset.identifier=e.identifier),e.openInNewWindow&&(t.target="_blank"),e.counter>0){const n=document.createElement("span");n.classList.add("pageMenuMainItemCounter","badge","badgeUpdate"),n.setAttribute("aria-hidden","true"),n.textContent=e.counter.toString(),null!==e.identifier&&this.menuItemBadges.set(e.identifier,n),t.append(n)}n.append(t)}else{const i=document.createElement("a");if(i.classList.add("pageMenuMainItemLabel"),i.href="#",e.icon){i.append(e.icon);const t=document.createElement("span");t.textContent=e.title,i.append(t)}else i.textContent=e.title;e.identifier&&(i.dataset.identifier=e.identifier),t&&"language"!==e.identifier||(i.addEventListener("click",(e=>{e.preventDefault(),i.nextElementSibling.click()})),i.setAttribute("aria-hidden","true")),n.append(i)}if(e.children.length){n.classList.add("pageMenuMainItemExpandable");const i=r.default.getUniqueId(),a=document.createElement("button");a.type="button",a.classList.add("pageMenuMainItemToggle"),a.setAttribute("aria-expanded","false"),a.setAttribute("aria-controls",i),a.innerHTML='<fa-icon size="24" name="angle-down"></fa-icon>';let s=e.title;e.link&&(s=o.get("wcf.menu.page.button.toggle",{title:e.title})),a.setAttribute("aria-label",s);const l=this.buildMenuItemList(e.children,t);l.id=i,l.hidden=!0,a.addEventListener("click",(()=>{this.toggleList(a,l)})),l.addEventListener("keydown",(e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),this.toggleList(a,l))})),n.append(a,l)}return n}toggleList(e,t){t.hidden?(e.setAttribute("aria-expanded","true"),t.hidden=!1):(e.setAttribute("aria-expanded","false"),t.hidden=!0,document.activeElement!==e&&e.focus())}refreshUnreadIndicator(){null!==this.mainMenu.querySelector(".boxMenuLinkOutstandingItems")?this.mainMenu.classList.add("pageMenuMobileButtonHasContent"):this.mainMenu.classList.remove("pageMenuMobileButtonHasContent"),this.menuItemProvider.getMenuItems(this.mainMenu).forEach((e=>this.refreshUnreadBage(e)))}refreshUnreadBage(e){if(null!==e.identifier){const t=this.menuItemBadges.get(e.identifier);t&&(0===e.counter?(t.remove(),this.menuItemBadges.delete(e.identifier)):parseInt(t.textContent,10)!==e.counter&&(t.textContent=e.counter.toString()))}e.children.forEach((e=>this.refreshUnreadBage(e)))}updateOverflowIndicator(e){e.clientHeight<e.scrollHeight?(e.scrollTop>0?e.classList.add("pageMenuMainContainerOverflowTop"):e.classList.remove("pageMenuMainContainerOverflowTop"),e.clientHeight+e.scrollTop<e.scrollHeight?e.classList.add("pageMenuMainContainerOverflowBottom"):e.classList.remove("pageMenuMainContainerOverflowBottom")):e.classList.remove("pageMenuMainContainerOverflowTop","pageMenuMainContainerOverflowBottom")}}t.PageMenuMain=s,t.default=s})),define("WoltLabSuite/Core/Ui/User/Menu/Manager",["require","exports","tslib","../../Alignment","../../CloseOverlay","../../../Event/Handler","../../../Dom/Util","../../Screen","../../../Helper/PageOverlay"],(function(e,t,n,i,o,r,a,s,l){"use strict";function c(e){o.default.execute();const t=p(e);t.open();const n=e.getPanelButton();n.querySelector("a").setAttribute("aria-expanded","true"),n.classList.add("open"),d(t.getElement(),n)}function d(e,t){if(i.set(e,t,{horizontal:"right"}),"fixed"===window.getComputedStyle(e).position&&null!==a.default.getFixedParent(t)){const{top:n,height:i}=t.getBoundingClientRect();e.style.setProperty("top",`${n+i}px`)}}function u(e){if(!g.has(e))return;const t=e.getPanelButton();t.classList.contains("open")&&(p(e).close(),t.classList.remove("open"),t.querySelector("a").setAttribute("aria-expanded","false"))}function p(e){if(!g.has(e)){const t=e.getView(),n=t.getElement();m().append(n),n.addEventListener("shouldClose",(()=>u(e))),g.set(e,t)}return g.get(e)}function m(){return void 0===h&&(h=document.createElement("div"),h.classList.add("dropdownMenuContainer"),(0,l.getPageOverlayContainer)().append(h)),h}let h;Object.defineProperty(t,"__esModule",{value:!0}),t.registerProvider=t.getContainer=t.getUserMenuProviders=void 0,i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importStar(s);const f=new Set,g=new Map;t.getUserMenuProviders=function(){return f},t.getContainer=m,t.registerProvider=function(e){0===f.size&&(o.default.add("WoltLabSuite/Ui/User/Menu",(()=>{f.forEach((e=>u(e)))})),r.add("com.woltlab.wcf.UserMenuMobile","more",(e=>{f.forEach((t=>{e.identifier===t.getIdentifier()&&c(t)}))})),window.addEventListener("resize",(()=>{f.forEach((e=>{const t=e.getPanelButton();t.classList.contains("open")&&d(p(e).getElement(),t)}))}),{passive:!0}),s.on("screen-md-down",{match(){f.forEach((e=>{e.getPanelButton().classList.contains("open")&&u(e)}))},setup(){f.forEach((e=>{e.getPanelButton().classList.contains("open")&&u(e)}))}})),function(e){f.add(e);const t=e.getPanelButton();t.addEventListener("click",(n=>{n.preventDefault(),n.stopPropagation(),t.classList.contains("open")?u(e):c(e)}))}(e)}})),define("WoltLabSuite/Core/Ui/User/Menu/ControlPanel",["require","exports","tslib","../../CloseOverlay","./Manager","focus-trap","../../Alignment","../../../Dom/Util"],(function(e,t,n,i,o,r,a,s){"use strict";function l(){u.deactivate(),d.hidden=!0,c.classList.remove("open"),p.setAttribute("aria-expanded","false")}let c,d,u,p;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getElement=void 0,i=n.__importDefault(i),a=n.__importStar(a),s=n.__importDefault(s),t.getElement=function(){return d};let m=!1;t.setup=function(){m||(c=document.getElementById("userMenu"),d=c.querySelector(".userMenu"),p=c.querySelector("a"),i.default.add("WoltLabSuite/Core/Ui/User/Menu/ControlPanel",(()=>l())),(0,o.getContainer)().append(d),d.addEventListener("click",(e=>e.stopPropagation())),c.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),d.hidden?d.hidden&&(i.default.execute(),d.hidden=!1,c.classList.add("open"),p.setAttribute("aria-expanded","true"),u.activate(),function(e,t){if(a.set(e,t,{horizontal:"right"}),"fixed"===window.getComputedStyle(e).position&&null!==s.default.getFixedParent(t)){const{top:n,height:i}=t.getBoundingClientRect();e.style.setProperty("top",`${n+i}px`)}}(d,c)):l()})),u=(0,r.createFocusTrap)(d,{allowOutsideClick:!0,escapeDeactivates:()=>(l(),!1),fallbackFocus:d}),m=!0)}})),define("WoltLabSuite/Core/Ui/Page/Menu/User",["require","exports","tslib","./Container","../../../Language","../../User/Menu/Manager","../../../Dom/Util","../../User/Menu/ControlPanel","../../../Event/Handler","../../Screen"],(function(e,t,n,i,o,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasValidUserMenu=t.PageMenuUser=void 0,i=n.__importDefault(i),o=n.__importStar(o),a=n.__importDefault(a),l=n.__importStar(l);class d{activeTab=void 0;container;legacyUserPanels=new Map;observer;userMenuProviders=new Map;tabOrigins=new Map;tabPanels=new Map;tabs=[];userMenu;userMenuButton;constructor(){this.userMenu=document.querySelector(".userPanel"),this.userMenuButton=document.querySelector(".pageHeaderUserMobile"),this.userMenuButton.addEventListener("click",(t=>{t.stopPropagation(),e.then((()=>this.container.toggle()))})),this.container=new i.default(this);const e=new Promise((e=>{"complete"===document.readyState?e():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&e()}))}));(0,c.on)("screen-lg",{match:()=>this.detachViewsFromPanel(),unmatch:()=>this.detachViewsFromPanel()}),this.observer=new MutationObserver((()=>{this.refreshTabUnreadIndicators()}))}enable(){this.userMenuButton.setAttribute("aria-expanded","false"),this.refreshUnreadIndicator()}disable(){this.container.close(),this.userMenuButton.setAttribute("aria-expanded","false")}getContent(){const e=document.createDocumentFragment();return e.append(this.buildTabMenu()),e}getMenuButton(){return this.userMenuButton}sleep(){this.activeTab&&this.closeTab(this.activeTab),this.detachViewsFromPanel(),this.refreshUnreadIndicator()}wakeup(){this.activeTab?this.openTab(this.activeTab):this.isInMaintenanceMode()?this.openTab(this.tabs[0]):this.openNotifications(),this.refreshTabUnreadIndicators(),this.refreshUnreadIndicator()}isInMaintenanceMode(){return"wcf"===document.body.dataset.application&&"offline"===document.body.dataset.template}openNotifications(){const e=this.tabs.find((e=>"userNotifications"===e.dataset.origin));if(!e)throw new Error("Unable to find the notifications tab.");this.openTab(e)}openTab(e){this.closeActiveTab(),e.setAttribute("aria-selected","true"),e.tabIndex=0;const t=this.tabPanels.get(e);t.hidden=!1,document.activeElement!==e&&e.focus(),this.attachViewToPanel(e),this.activeTab=e,this.observer.observe(t,{attributeFilter:["data-is-unread"],childList:!0,subtree:!0})}closeActiveTab(){this.activeTab&&(this.closeTab(this.activeTab),this.activeTab=void 0)}closeTab(e){e.setAttribute("aria-selected","false"),e.tabIndex=-1,this.tabPanels.get(e).hidden=!0;const t=this.legacyUserPanels.get(e);t&&t.close(),this.observer.disconnect(),this.refreshTabUnreadIndicators()}attachViewToPanel(e){const t=e.dataset.origin,n=this.tabPanels.get(e);if("userMenu"===t){const e=(0,s.getElement)();e.hidden=!1,0===n.childElementCount&&(this.tabOrigins.set(n,e.parentElement),n.append(e))}else if(0===n.childElementCount){const t=this.userMenuProviders.get(e);if(t){const e=t.getView(),i=e.getElement();this.tabOrigins.set(n,i.parentElement),n.append(i),e.open()}else{const t=this.legacyUserPanels.get(e);t.open();const{top:i}=n.getBoundingClientRect();t.getDropdown().getContainer()[0].style.setProperty("--offset-top",`${i}px`)}}}detachViewsFromPanel(){this.tabPanels.forEach(((e,t)=>{if(e.childElementCount){const n=this.tabOrigins.get(e);if(n)if("userMenu"===t.dataset.origin){const t=e.children[0];t.hidden=!0,n.append(t)}else{const e=this.userMenuProviders.get(t);if(e){const t=e.getView().getElement();t.hidden=!0,n.append(t)}}}}))}keydown(e){const t=e.currentTarget;if("Enter"===e.key||" "===e.key)return e.preventDefault(),void this.openTab(t);if(!["ArrowLeft","ArrowRight","End","Home"].includes(e.key))return;e.preventDefault();const n=this.tabs.indexOf(t),i=this.tabs.length-1;let o;o="ArrowLeft"===e.key?0===n?i:n-1:"ArrowRight"===e.key?n===i?0:n+1:"End"===e.key?i:0,this.tabs[o].focus()}buildTabMenu(){const e=document.createElement("div");e.classList.add("pageMenuUserTabContainer");const t=document.createElement("div");return t.classList.add("pageMenuUserTabList"),t.setAttribute("role","tablist"),t.setAttribute("aria-label",o.get("wcf.menu.user")),e.append(t),this.buildControlPanelTab(t,e),(0,r.getUserMenuProviders)().forEach((n=>{const[i,o]=this.buildTab(n);t.append(i),e.append(o),this.tabs.push(i),this.tabPanels.set(i,o),this.userMenuProviders.set(i,n)})),this.buildLegacyTabs(t,e),e}buildTab(e){const t=e.getPanelButton(),n=t.querySelector("a");let i=n.querySelector("fa-icon")?.outerHTML;void 0===i&&(i='<fa-icon size="32" name="question"></fa-icon>');const o={icon:i,label:n.dataset.title||n.title,origin:t.id};return this.buildTabComponents(o)}buildControlPanelTab(e,t){const n=document.getElementById("userMenu"),i=n.querySelector("a"),o={icon:this.userMenuButton.querySelector(".userAvatarImage").outerHTML,label:i.dataset.title||i.title,origin:n.id},[r,a]=this.buildTabComponents(o);e.append(r),t.append(a),this.tabs.push(r),this.tabPanels.set(r,a)}buildLegacyTabs(e,t){const n=document.querySelector(".userPanelItems"),i={panels:[]};l.fire("com.woltlab.wcf.pageMenu","legacyMenu",i),Array.from(n.children).filter((e=>void 0!==i.panels.find((t=>t.element===e)))).map((e=>{const t=e.querySelector("a");return{icon:t.querySelector(".icon").outerHTML,label:t.dataset.title||t.title,origin:e.id}})).forEach((n=>{const[o,r]=this.buildTabComponents(n);e.append(o),t.append(r),this.tabs.push(o),this.tabPanels.set(o,r);const a=i.panels.find((e=>e.element.id===n.origin));this.legacyUserPanels.set(o,a.api)}))}buildTabComponents(e){const t=a.default.getUniqueId(),n=a.default.getUniqueId(),i=document.createElement("button");i.type="button",i.classList.add("pageMenuUserTab"),i.dataset.hasUnreadContent="false",i.dataset.origin=e.origin,i.id=t,i.setAttribute("aria-controls",n),i.setAttribute("aria-selected","false"),i.setAttribute("role","tab"),i.tabIndex=-1,i.setAttribute("aria-label",e.label),i.innerHTML=e.icon,i.addEventListener("click",(e=>{e.preventDefault(),this.openTab(i)})),i.addEventListener("keydown",(e=>this.keydown(e)));const o=document.createElement("div");return o.classList.add("pageMenuUserTabPanel"),o.id=n,o.hidden=!0,o.setAttribute("aria-labelledby",t),o.setAttribute("role","tabpanel"),o.tabIndex=0,[i,o]}refreshUnreadIndicator(){null!==this.userMenu.querySelector(".badge.badgeUpdate")?this.userMenu.classList.add("pageMenuMobileButtonHasContent"):this.userMenu.classList.remove("pageMenuMobileButtonHasContent")}refreshTabUnreadIndicators(){this.userMenuProviders.forEach(((e,t)=>{e.hasUnreadContent()?t.dataset.hasUnreadContent="true":t.dataset.hasUnreadContent="false"}))}}t.PageMenuUser=d,t.hasValidUserMenu=function(){return document.getElementById("topMenu").classList.contains("userPanelLoggedIn")},t.default=d})),define("WoltLabSuite/Core/Ui/Mobile",["require","exports","tslib","focus-trap","../Core","../Dom/Change/Listener","../Dom/Util","../Environment","./Alignment","./CloseOverlay","./Dropdown/Reusable","./Page/Menu/Main","./Page/Menu/User","./Screen","../Language"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h){"use strict";function f(){N=!0,g(),b(),F&&(R=new u.PageMenuMain(W),R.enable(),(0,p.hasValidUserMenu)()&&(H=new p.PageMenuUser,H.enable())),c.default.add("WoltLabSuite/Core/Ui/Mobile",v),r.default.add("WoltLabSuite/Core/Ui/Mobile",(()=>{g(),b()})),document.addEventListener("scroll",(()=>E()),{passive:!0})}function g(){document.querySelectorAll(".buttonGroupNavigation").forEach((e=>{if(e.classList.contains("jsMobileButtonGroupNavigation"))return;e.classList.add("jsMobileButtonGroupNavigation");const t=e.querySelector(".buttonList");if(0===t.childElementCount)return;e.parentElement.classList.add("hasMobileNavigation");const n=document.createElement("button");n.type="button",n.innerHTML='<fa-icon size="24" name="ellipsis-vertical"></fa-icon>',n.classList.add("dropdownLabel"),n.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.classList.toggle("open")})),t.addEventListener("click",(function(t){t.stopPropagation(),e.classList.remove("open")})),e.insertBefore(n,e.firstChild)}))}function b(){document.querySelectorAll(".message").forEach((e=>{if(U.has(e))return;const t=e.querySelector(".jsMobileNavigation");if(t){t.addEventListener("click",(e=>{e.stopPropagation(),window.setTimeout((()=>{t.classList.remove("open")}),10)}));const n=e.querySelector(".messageQuickOptions");if(n&&t.childElementCount){n.classList.add("active");let i=n.querySelector(".messageQuickOptionsMobile");null===i&&(i=document.createElement("li"),i.innerHTML=`\n            <button type="button" aria-label="${h.get("wcf.global.button.more")}">\n              <fa-icon name="ellipsis-vertical"></fa-icon>\n            </button>\n          `,i.classList.add("messageQuickOptionsMobile"),n.append(i)),i.querySelector("button").addEventListener("click",(i=>{i.stopPropagation(),S(e,n,t)}))}}U.add(e)}))}function v(){document.querySelectorAll(".jsMobileButtonGroupNavigation.open, .jsMobileNavigation.open").forEach((e=>{e.classList.remove("open")})),N&&O&&E()}function y(){V=!0}function _(){V=!1,z.forEach((function(e){e.classList.remove("open")}))}function w(){z.forEach((function(e){e.addEventListener("mousedown",(function(t){V&&t.target===e&&(t.preventDefault(),e.classList.toggle("open"))}))})),V=!0}function E(){O?.classList.remove("dropdownOpen")}function S(e,t,n){if(null===O)O=document.createElement("ul"),O.className="dropdownMenu",d.init("com.woltlab.wcf.jsMobileNavigation",O);else if(O.classList.contains("dropdownOpen")&&(E(),j.deactivate(),j=void 0,q===e))return;O.innerHTML="",c.default.execute(),x(n);const o=n.previousElementSibling;if(o&&o.classList.contains("messageFooterButtonsExtra")){const e=document.createElement("li");e.className="dropdownDivider",O.appendChild(e),x(o)}l.set(O,t,{horizontal:"right",allowFlip:"vertical"}),O.classList.add("dropdownOpen"),q=e,j=(0,i.createFocusTrap)(O,{allowOutsideClick:!0,escapeDeactivates:()=>(S(e,t,n),!1),setReturnFocus:t}),j.activate()}function C(){B=!0,document.querySelectorAll(".boxMenuHasChildren > a").forEach((e=>{e.addEventListener("touchstart",(t=>{B&&"false"===e.getAttribute("aria-expanded")&&(t.preventDefault(),e.setAttribute("aria-expanded","true"),e.addEventListener("touchend",(()=>{document.body.addEventListener("touchstart",(()=>{document.body.addEventListener("touchend",(t=>{const n=e.parentElement,i=t.target;n.contains(i)||i===n||e.setAttribute("aria-expanded","false")}),{once:!0})}),{once:!0})}),{once:!0}))}),{passive:!1})}))}function L(){B=!0}function k(){B=!1}function x(e){e.querySelectorAll(".button").forEach((e=>{if(e.classList.contains("ignoreMobileNavigation")||e.classList.contains("reactButton"))return;const t=document.createElement("li");e.classList.contains("active")&&(t.className="active");const n=e.querySelector("span:not(.icon)");t.innerHTML=`<a href="#">${n.textContent}</a>`,t.children[0].addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),"A"===e.nodeName?e.click():o.triggerEvent(e,"click"),E()})),O.appendChild(t)}))}function M(){c.default.execute(),N=!0,F&&(R.enable(),H?.enable())}function I(){$&&A($,".messageGroupLink")}function T(){c.default.execute(),N=!1,F&&(R.disable(),H?.disable())}function D(){$&&P($),O&&E()}function A(e,t){Array.from(e).forEach((e=>{const n=e.parentElement;let i=n.querySelector(".mobileLinkShadow");if(null===i){const o=e.querySelector(t);o.href&&(i=document.createElement("a"),i.className="mobileLinkShadow",i.href=o.href,i.setAttribute("aria-labelledby",a.default.identify(o)),n.appendChild(i),n.classList.add("mobileLinkShadowContainer"))}}))}function P(e){Array.from(e).forEach((e=>{const t=e.parentElement;if(t.classList.contains("mobileLinkShadowContainer")){const e=t.querySelector(".mobileLinkShadow");null!==e&&e.remove(),t.classList.remove("mobileLinkShadowContainer")}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.removeShadow=t.rebuildShadow=t.disableShadow=t.disable=t.enableShadow=t.enable=t.setup=void 0,o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importDefault(c),d=n.__importStar(d),m=n.__importStar(m),h=n.__importStar(h);let j,O=null,q=null,N=!1,B=!1,F=!1;const U=new WeakSet;let R,H,W,V=!1,$=null;const z=[];t.setup=function(e,t){F=e,W=t,document.querySelectorAll(".boxesSidebarLeft").forEach((e=>{z.push(e)})),s.touch()&&document.documentElement.classList.add("touch"),"desktop"!==s.platform()&&document.documentElement.classList.add("mobile");const n=document.querySelector(".messageGroupList");n&&($=n.getElementsByClassName("messageGroup")),m.on("screen-md-down",{match:M,unmatch:T,setup:f}),m.on("screen-sm-down",{match:I,unmatch:D,setup:I}),m.on("screen-md-down",{match:y,unmatch:_,setup:w}),!s.touch()||"ios"!==s.platform()&&"android"!==s.platform()||m.on("screen-lg",{match:L,unmatch:k,setup:C})},t.enable=M,t.enableShadow=I,t.disable=T,t.disableShadow=D,t.rebuildShadow=A,t.removeShadow=P})),define("WoltLabSuite/Core/Ui/Page/Action",["require","exports","tslib","../../Core","../../Language","../../Ui/Screen"],(function(e,t,n,i,o,r){"use strict";function a(){if(document.documentElement.classList.contains("disableScrolling"))return;const e=window.pageYOffset;e!==g?(e>=b?(m.classList.contains("initiallyHidden")&&m.classList.remove("initiallyHidden"),m.setAttribute("aria-hidden","false")):m.setAttribute("aria-hidden","true"),l(),-1!==g&&h.classList[e<g?"remove":"add"]("scrolledDown"),g=-1):v()}function s(e){e.preventDefault(),document.getElementById("top").scrollIntoView({behavior:"smooth"})}function l(){const e=Array.from(p.children).find((e=>"false"===e.getAttribute("aria-hidden")));p.classList[e?"add":"remove"]("active"),e?h.classList.add("pageActionHasContextButtons"):h.classList.remove("pageActionHasContextButtons")}function c(){if(f)return;f=!0,h=document.createElement("div"),h.className="pageAction",p=document.createElement("div"),p.className="pageActionButtons",h.appendChild(p),m=function(){const e=document.createElement("button");return e.type="button",e.classList.add("button","buttonPrimary","pageActionButtonToTop","initiallyHidden","jsTooltip"),e.title=o.get("wcf.global.scrollUp"),e.setAttribute("aria-hidden","true"),e.innerHTML='<fa-icon size="32" name="angle-up" solid></fa-icon>',e.addEventListener("click",s),e}(),h.appendChild(m),document.body.appendChild(h);const e=i.debounce(a,100);window.addEventListener("scroll",(()=>{-1===g&&(g=window.pageYOffset,window.setTimeout((()=>{a(),g=window.pageYOffset}),60)),e()}),{passive:!0}),window.addEventListener("touchstart",(()=>{-1!==g&&(g=-1)}),{passive:!0}),r.on("screen-sm-down",{match(){b=50},unmatch(){b=300},setup(){b=50}}),a()}function d(e){const t=u.get(e);t&&(t.parentElement.setAttribute("aria-hidden","true"),l())}Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=t.remove=t.get=t.has=t.add=t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r);const u=new Map;let p,m,h,f=!1,g=-1,b=300;const v=i.debounce((()=>{g=-1}),50);t.setup=c,t.add=function(e,t,n){c();const i=document.createElement("div");i.className="pageActionButton",i.dataset.name=e,i.setAttribute("aria-hidden","true"),t.classList.add("button"),t.classList.add("buttonPrimary"),i.appendChild(t);let o=null;n&&(o=u.get(n)||null,o&&(o=o.parentElement)),!o&&p.childElementCount&&(o=p.children[0]),o||(o=p.firstChild),p.insertBefore(i,o),h.classList.remove("scrolledDown"),u.set(e,t),i.offsetParent,i.setAttribute("aria-hidden","false"),l()},t.has=function(e){return u.has(e)},t.get=function(e){return u.get(e)},t.remove=function(e){const t=u.get(e);if(void 0!==t){const n=t.parentElement,o=()=>{try{i.stringToBool(n.getAttribute("aria-hidden"))&&(p.removeChild(n),u.delete(e)),n.removeEventListener("transitionend",o)}catch(e){}};n.addEventListener("transitionend",o),d(e)}},t.hide=d,t.show=function(e){const t=u.get(e);if(t){const e=t.parentElement;e.classList.contains("initiallyHidden")&&e.classList.remove("initiallyHidden"),e.setAttribute("aria-hidden","false"),h.classList.remove("scrolledDown"),l()}}})),define("WoltLabSuite/Core/Ui/TabMenu/Simple",["require","exports","tslib","../../Dom/Traverse","../../Dom/Util","../../Environment","../../Event/Handler"],(function(e,t,n,i,o,r,a){"use strict";i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importStar(a);class s{container;containers=new Map;isLegacy=!1;store=null;tabs=new Map;constructor(e){this.container=e}validate(){if(!this.container.classList.contains("tabMenuContainer"))return!1;const e=i.childByTag(this.container,"NAV");if(null===e)return!1;const t=e.querySelectorAll("li");if(0===t.length)return!1;i.childrenByTag(this.container,"DIV").forEach((e=>{let t=e.dataset.name;t||(t=o.default.identify(e),e.dataset.name=t),this.containers.set(t,e)}));const n=this.container.id;if(t.forEach((e=>{const t=this._getTabName(e);if(!t)return;if(this.tabs.has(t))throw new Error("Tab names must be unique, li[data-name='"+t+"'] (tab menu id: '"+n+"') exists more than once.");const i=this.containers.get(t);if(void 0===i)throw new Error("Expected content element for li[data-name='"+t+"'] (tab menu id: '"+n+"').");if(i.parentNode!==this.container)throw new Error("Expected content element '"+t+"' (tab menu id: '"+n+"') to be a direct children.");if(1!==e.childElementCount||"A"!==e.children[0].nodeName)throw new Error("Expected exactly one <a> as children for li[data-name='"+t+"'] (tab menu id: '"+n+"').");this.tabs.set(t,e)})),!this.tabs.size)throw new Error("Expected at least one tab (tab menu id: '"+n+"').");return this.isLegacy&&(this.container.dataset.isLegacy="true",this.tabs.forEach((function(e,t){e.setAttribute("aria-controls",t)}))),!0}init(){this.tabs.forEach((e=>{const t=e.children[0];if(t.addEventListener("click",(e=>this._onClick(e))),"ios"===r.platform()){let e=!1;t.addEventListener("touchstart",(()=>{e=!0})),t.addEventListener("touchmove",(()=>{e=!1})),t.addEventListener("touchend",(t=>{e&&(e=!1,t.preventDefault(),this._onClick(t))}))}}));let e=null;const t=s.getIdentifierFromHash();let n;if(""!==t&&(n=this.tabs.get(t),n)){const t=this.container.parentElement;t?.classList.contains("tabMenuContainer")&&(e=this.container)}if(!n){let e=this.container.dataset.preselect||this.container.dataset.active;"true"!==e&&e||(e=!0),!0===e?this.tabs.forEach((function(e){n||o.default.isHidden(e)||e.previousElementSibling&&!o.default.isHidden(e.previousElementSibling)||(n=e)})):"string"==typeof e&&"false"!==e&&(n=this.tabs.get(e))}n&&(this.containers.forEach((e=>{e.classList.add("hidden")})),this.select(null,n,!0));const i=this.container.dataset.store;if(i){const e=document.createElement("input");e.type="hidden",e.name=i,e.value=this.getActiveTab().dataset.name||"",this.container.appendChild(e),this.store=e}return e}select(t,i,o){if(t=t?t.toString():"",!(i=i||this.tabs.get(t))){if(~~t==+t){t=~~t;let e=0;this.tabs.forEach((n=>{e===t&&(i=n),e++}))}if(!i)throw new Error(`Expected a valid tab name, '${t}' given (tab menu id: '${this.container.id}').`)}t=t||i.dataset.name||"";const r=this.getActiveTab();let l=null;if(r){const e=r.dataset.name;if(e===t)return;o||a.fire("com.woltlab.wcf.simpleTabMenu_"+this.container.id,"beforeSelect",{tab:r,tabName:e}),r.classList.remove("active"),l=this.containers.get(r.dataset.name||""),l.classList.remove("active"),l.classList.add("hidden"),this.isLegacy&&(r.classList.remove("ui-state-active"),l.classList.remove("ui-state-active"))}i.classList.add("active");const c=this.containers.get(t);if(c.classList.add("active"),c.classList.remove("hidden"),this.isLegacy&&(i.classList.add("ui-state-active"),c.classList.add("ui-state-active")),this.store&&(this.store.value=t),!o){a.fire("com.woltlab.wcf.simpleTabMenu_"+this.container.id,"select",{active:i,activeName:t,previous:r,previousName:r?r.dataset.name:null});const e=this.isLegacy&&"function"==typeof window.jQuery?window.jQuery:null;e&&e(this.container).trigger("wcftabsbeforeactivate",{newTab:e(i),oldTab:e(r),newPanel:e(c),oldPanel:e(l)});let n=window.location.href.replace(/#+[^#]*$/,"");s.getIdentifierFromHash()===t?n+=window.location.hash:n+="#"+t,window.history.replaceState(void 0,"",n)}new Promise(((t,n)=>{e(["../TabMenu"],t,n)})).then(n.__importStar).then((e=>{e.scrollToTab(i)}))}selectFirstVisible(){let e=null;return this.tabs.forEach((t=>{e||o.default.isHidden(t)||(e=t)})),e&&this.select(null,e,!1),null!==e}hasTab(e){return this.tabs.has(e)}_onClick(e){e.preventDefault();const t=e.currentTarget;this.select(null,t.parentNode)}_getTabName(e){let t=e.dataset.name||null;if(!t&&1===e.childElementCount&&"A"===e.children[0].nodeName){const n=e.children[0];/#([^#]+)$/.exec(n.href)&&(t=RegExp.$1,null===document.getElementById(t)?t=null:(this.isLegacy=!0,e.dataset.name=t))}return t}getActiveTab(){return document.querySelector("#"+this.container.id+" > nav > ul > li.active")}getContainers(){return this.containers}getTabs(){return this.tabs}static getIdentifierFromHash(){return/^#+([^/]+)+(?:\/.+)?/.exec(window.location.hash)?RegExp.$1:""}}return s})),define("WoltLabSuite/Core/Ui/Scroll",["require","exports","tslib","../Dom/Util"],(function(e,t,n,i){"use strict";function o(){null!==l&&window.clearTimeout(l),l=window.setTimeout((()=>{for(const e of a)e();window.removeEventListener("scroll",o),a=[],r=void 0,l=null}),100)}Object.defineProperty(t,"__esModule",{value:!0}),t.element=void 0,i=n.__importDefault(i);let r,a=[],s=null,l=null;t.element=function(e,t,n="smooth"){if(!(e instanceof HTMLElement))throw new TypeError("Expected a valid DOM element.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("Expected a valid callback function.");if(!document.body.contains(e))throw new Error("Element must be part of the visible DOM.");if(a.length>0&&e!==r)throw new Error("Cannot scroll to element, a concurrent request is running.");if(t&&(a.push(t),1===a.length&&window.addEventListener("scroll",o)),void 0!==r)return;r=e;let l=i.default.offset(e).top;if(null===s){s=50;const e=document.getElementById("pageHeaderPanel");if(null!==e){const t=window.getComputedStyle(e).position;s="fixed"===t||"static"===t?e.offsetHeight:0}}s>0&&(l<=s?l=0:l-=s);const c=window.pageYOffset;window.scrollTo({left:0,top:l,behavior:n}),window.setTimeout((()=>{c===window.pageYOffset&&o()}),100)}})),define("WoltLabSuite/Core/Ui/TabMenu",["require","exports","tslib","../Dom/Change/Listener","../Dom/Util","./TabMenu/Simple","./CloseOverlay","./Screen","./Scroll"],(function(e,t,n,i,o,r,a,s,l){"use strict";function c(){document.querySelectorAll(".tabMenuContainer:not(.staticTabMenuContainer)").forEach((e=>{const t=o.default.identify(e);if(y.has(t))return;let n=new r.default(e);if(!n.validate())return;const i=n.init();if(y.set(t,n),i instanceof HTMLElement){const e=f(i.parentNode.id);e&&(n=e,n.select(i.id,void 0,!0))}const a=document.querySelector("#"+t+" > nav > ul");a.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),e.target===a?(a.classList.add("active"),b=a):(a.classList.remove("active"),b=null)})),e.querySelectorAll(".tabMenu, .menu").forEach((e=>{function t(){n=null,h(e)}let n=null;e.querySelector("ul").addEventListener("scroll",(()=>{null!==n&&window.clearTimeout(n),n=window.setTimeout(t,10)}),{passive:!0})}));const s=e.closest("form");if(null!==s){const t=s.querySelector('input[type="submit"]');null!==t&&t.addEventListener("click",(t=>{if(!t.defaultPrevented)for(const n of e.querySelectorAll("input, select, textarea"))if(!n.checkValidity()){t.preventDefault();const e=f(n.closest(".tabMenuContainer").id),i=n.closest(".tabMenuContent");return e.select(i.dataset.name||""),void l.element(n,(()=>{n.reportValidity()}))}}))}}))}function d(){y.forEach((e=>{let t=!1;e.getContainers().forEach((n=>{t||null===n.querySelector(".formError")||(t=!0,e.select(n.id))}))}))}function u(e){v=!0,y.forEach((t=>{const n=t.getActiveTab();e?h(n.closest(".menu, .tabMenu")):g(n)}))}function p(){v=!1}function m(e,t,n,i,o,r){(r||t>0)&&(t-=15),n!==(t=t<0?0:Math.min(t,i-o))&&(e.classList.add("enableAnimation"),n<t?e.firstElementChild.style.setProperty("margin-left",n-t+"px",""):e.style.setProperty("padding-left",n-t+"px",""),setTimeout((()=>{e.classList.remove("enableAnimation"),e.firstElementChild.style.removeProperty("margin-left"),e.style.removeProperty("padding-left"),e.scrollLeft=t}),300))}function h(e){if(!v)return;const t=e.clientWidth,n=e.querySelector("ul"),i=n.scrollLeft,o=n.scrollWidth,r=i>0;let a=e.querySelector(".tabMenuOverlayLeft");r?(null===a&&(a=document.createElement("button"),a.type="button",a.innerHTML='<fa-icon size="24" name="angle-left"></fa-icon>',a.className="tabMenuOverlayLeft",a.addEventListener("click",(()=>{const e=n.clientWidth;m(n,n.scrollLeft-~~(e/2),n.scrollLeft,n.scrollWidth,e,!1)})),e.insertBefore(a,e.firstChild)),a.classList.add("active")):null!==a&&a.classList.remove("active");const s=t+i<o;let l=e.querySelector(".tabMenuOverlayRight");s?(null===l&&(l=document.createElement("button"),l.type="button",l.innerHTML='<fa-icon size="24" name="angle-right"></fa-icon>',l.className="tabMenuOverlayRight",l.addEventListener("click",(()=>{const e=n.clientWidth;m(n,n.scrollLeft+~~(e/2),n.scrollLeft,n.scrollWidth,e,!1)})),e.appendChild(l)),l.classList.add("active")):null!==l&&l.classList.remove("active")}function f(e){return y.get(e)}function g(e){if(!v)return;const t=e.closest("ul"),n=t.clientWidth,i=t.scrollLeft,o=t.scrollWidth;if(n===o)return;const r=e.offsetLeft;let a=!1;r<i&&(a=!0);let s=!1;if(!a){const t=n-(r-i);let o=e.clientWidth;null!==e.nextElementSibling&&(s=!0,o+=20),t<o&&(a=!0)}a&&m(t,r,i,o,n,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToTab=t.getTabMenu=t.setup=t.selectErroneousTabs=void 0,i=n.__importDefault(i),o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l);let b=null,v=!1;const y=new Map;t.selectErroneousTabs=d,t.setup=function(){c(),d(),i.default.add("WoltLabSuite/Core/Ui/TabMenu",c),a.default.add("WoltLabSuite/Core/Ui/TabMenu",(()=>{b&&(b.classList.remove("active"),b=null)})),s.on("screen-sm-down",{match(){u(!1)},unmatch:p,setup(){u(!0)}}),window.addEventListener("hashchange",(()=>{const e=r.default.getIdentifierFromHash(),t=e?document.getElementById(e):null;null!==t&&t.classList.contains("tabMenuContent")&&y.forEach((t=>{t.hasTab(e)&&t.select(e)}))}));const e=r.default.getIdentifierFromHash();e&&window.setTimeout((()=>{const t=document.getElementById(e);if(t&&t.classList.contains("tabMenuContent")){const e=window.scrollY||window.pageYOffset;if(e>0){const n=t.parentNode;let i=n.offsetTop-50;if(i<0&&(i=0),e>i){let e=o.default.offset(n).top;e<=50?e=0:e-=50,window.scrollTo(0,e)}}}}),100)},t.getTabMenu=f,t.scrollToTab=g})),define("WoltLabSuite/Core/Ui/Tooltip",["require","exports","tslib","../Environment","../Helper/PageOverlay","../Helper/Selector","./Alignment"],(function(e,t,n,i,o,r,a){"use strict";function s(e){const t=e.currentTarget;let n=t.title.trim();""!==n&&(t.dataset.tooltip=n,t.setAttribute("aria-label",n),t.removeAttribute("title")),n=t.dataset.tooltip||"",u.style.removeProperty("top"),u.style.removeProperty("left"),n.length?(u.classList.add("active"),d.textContent=n,a.set(u,t,{horizontal:"center",verticalOffset:4,pointer:!0,pointerClassNames:["inverse"],vertical:"top"})):u.classList.remove("active")}function l(){u.classList.remove("active")}let c,d,u;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),a=n.__importStar(a),t.setup=function(){"desktop"===i.platform()&&(u=document.createElement("div"),u.id="balloonTooltip",u.classList.add("balloonTooltip"),u.addEventListener("transitionend",(()=>{u.classList.contains("active")||["bottom","left","right","top"].forEach((e=>{u.style.removeProperty(e)}))})),d=document.createElement("span"),d.id="balloonTooltipText",u.appendChild(d),c=document.createElement("span"),c.classList.add("elementPointer"),c.appendChild(document.createElement("span")),u.appendChild(c),(0,o.getPageOverlayContainer)().append(u),(0,r.wheneverSeen)(".jsTooltip",(e=>{e.classList.remove("jsTooltip");const t=e.title.trim();t.length&&(e.dataset.tooltip=t,e.removeAttribute("title"),e.setAttribute("aria-label",t),e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",l),e.addEventListener("click",l))})),window.addEventListener("scroll",l))}})),define("WoltLabSuite/Core/Ui/Page/JumpTo",["require","exports","tslib","../../Language","../Dialog"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importDefault(o);class r{activeElement;description;elements=new Map;input;submitButton;init(e,t){if(t){if("function"!=typeof t)throw new TypeError("Expected a valid function for parameter 'callback'.")}else{const n=e.dataset.link;t=n?e=>{window.location.href=n.replace(/pageNo=%d/,`pageNo=${e}`)}:()=>{}}this.elements.has(e)||e.querySelectorAll(".jumpTo").forEach((n=>{n.addEventListener("click",(t=>this.click(e,t))),this.elements.set(e,t)}))}click(e,t){t.preventDefault(),this.activeElement=e,o.default.open(this);const n=e.dataset.pages||"0";this.input.value=n,this.input.max=n,this.input.select(),this.description.textContent=i.get("wcf.page.jumpTo.description").replace(/#pages#/,n)}_keyUp(e){if("Enter"===e.key&&!this.submitButton.disabled)return void this.submit();const t=+this.input.value;this.submitButton.disabled=t<1||t>+this.input.max}submit(){this.elements.get(this.activeElement)(+this.input.value),o.default.close(this)}_dialogSetup(){const e=`<dl>\n        <dt><label for="jsPaginationPageNo">${i.get("wcf.page.jumpTo")}</label></dt>\n                <dd>\n          <input type="number" id="jsPaginationPageNo" value="1" min="1" max="1" class="tiny">\n          <small></small>\n        </dd>\n      </dl>\n      <div class="formSubmit">\n        <button type="button" class="button buttonPrimary">${i.get("wcf.global.button.submit")}</button>\n      </div>`;return{id:"paginationOverlay",options:{onSetup:e=>{this.input=e.querySelector("input"),this.input.addEventListener("keyup",(e=>this._keyUp(e))),this.description=e.querySelector("small"),this.submitButton=e.querySelector("button"),this.submitButton.addEventListener("click",(()=>this.submit()))},title:i.get("wcf.global.page.pagination")},source:e}}}let a=null;t.init=function(e,t){(null===a&&(a=new r),a).init(e,t)}})),define("WoltLabSuite/Core/Ui/Password",["require","exports","tslib","../Dom/Change/Listener","../Language"],(function(e,t,n,i,o){"use strict";function r(){document.querySelectorAll("input[type=password]").forEach((e=>{s.has(e)||function(e){s.add(e);const t=document.activeElement,n=document.createElement("div");n.classList.add("inputAddon"),e.insertAdjacentElement("beforebegin",n),n.appendChild(e);const i=document.createElement("button");i.type="button",i.title=o.get("wcf.global.form.password.button.show"),i.classList.add("button","inputSuffix","jsTooltip"),i.setAttribute("aria-hidden","true"),n.appendChild(i);const r=document.createElement("fa-icon");r.setIcon("eye"),i.appendChild(r),i.addEventListener("click",(()=>{a(e,i,r)})),e.form?.addEventListener("submit",(()=>{"password"!==e.type&&a(e,i,r)})),t===e&&e.focus()}(e)}))}function a(e,t,n){"password"===e.type?(n.setIcon("eye-slash"),t.dataset.tooltip=o.get("wcf.global.form.password.button.hide"),e.type="text"):(n.setIcon("eye"),t.dataset.tooltip=o.get("wcf.global.form.password.button.show"),e.type="password")}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importDefault(i),o=n.__importStar(o);const s=new WeakSet;t.setup=function(){r(),i.default.add("WoltLabSuite/Core/Ui/Password",(()=>r()))}})),define("WoltLabSuite/Core/Ui/Empty",["require","exports","tslib","../Dom/Change/Listener"],(function(e,t,n,i){"use strict";function o(){document.querySelectorAll(".jsReloadPageWhenEmpty").forEach((e=>{e.classList.remove("jsReloadPageWhenEmpty"),r.observe(e,{childList:!0})}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importDefault(i);const r=new MutationObserver((e=>{e.forEach((e=>{const t=e.target;(0===t.childElementCount||Array.from(t.children).every((e=>"ignore"===e.dataset.reloadPageWhenEmpty)))&&window.location.reload()}))}));t.setup=function(){o(),i.default.add("WoltLabSuite/Core/Ui/Empty",(()=>o()))}})),define("WoltLabSuite/Core/Ui/Confirmation",["require","exports","tslib","../Core","../Language","./Dialog"],(function(e,t,n,i,o,r){"use strict";function a(){return l||(l=new s),l}Object.defineProperty(t,"__esModule",{value:!0}),t.getContentElement=t.show=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r);class s{_active=!1;parameters;confirmButton;_content;dialog;text;callbackCancel;callbackConfirm;constructor(){this.dialog=document.createElement("div"),this.dialog.id="wcfSystemConfirmation",this.dialog.classList.add("systemConfirmation"),this.text=document.createElement("p"),this.dialog.appendChild(this.text),this._content=document.createElement("div"),this._content.id="wcfSystemConfirmationContent",this.dialog.appendChild(this._content);const e=document.createElement("div");e.classList.add("formSubmit"),this.dialog.appendChild(e),this.confirmButton=document.createElement("button"),this.confirmButton.type="button",this.confirmButton.dataset.type="submit",this.confirmButton.classList.add("button","buttonPrimary"),this.confirmButton.textContent=o.get("wcf.global.confirmation.confirm"),e.appendChild(this.confirmButton);const t=document.createElement("button");t.type="button",t.classList.add("button"),t.textContent=o.get("wcf.global.confirmation.cancel"),t.addEventListener("click",(()=>{r.default.close(this)})),e.appendChild(t),document.body.appendChild(this.dialog)}open(e){this.parameters=e.parameters||{},this._content.innerHTML="string"==typeof e.template?e.template.trim():"",this.text[e.messageIsHtml?"innerHTML":"textContent"]=e.message,"function"==typeof e.legacyCallback?(this.callbackCancel=t=>{e.legacyCallback("cancel",t,this.content)},this.callbackConfirm=t=>{e.legacyCallback("confirm",t,this.content)}):("function"!=typeof e.cancel&&(e.cancel=()=>{}),this.callbackCancel=e.cancel,this.callbackConfirm=e.confirm),this._active=!0,r.default.open(this)}get active(){return this._active}get content(){return this._content}_confirm(){this.callbackConfirm(this.parameters,this.content),this._active=!1,r.default.close("wcfSystemConfirmation")}_onClose(){this.active&&(this.confirmButton.blur(),this._active=!1,this.callbackCancel(this.parameters))}_onShow(){window.setTimeout((()=>{this.confirmButton.blur(),this.confirmButton.focus()}),1)}_dialogSetup(){return{id:"wcfSystemConfirmation",options:{onClose:this._onClose.bind(this),onShow:this._onShow.bind(this),title:o.get("wcf.global.confirmation.title")}}}_dialogSubmit(){this._confirm()}}let l;t.show=function(e){if(!a().active){if((e=i.extend({cancel:null,confirm:null,legacyCallback:null,message:"",messageIsHtml:!1,parameters:{},template:""},e)).message="string"==typeof e.message?e.message.trim():"",!e.message)throw new Error("Expected a non-empty string for option 'message'.");if("function"!=typeof e.confirm&&"function"!=typeof e.legacyCallback)throw new TypeError("Expected a valid callback for option 'confirm'.");a().open(e)}},t.getContentElement=function(){return a().content}})),define("WoltLabSuite/Core/Ui/Object/Action",["require","exports","tslib","../../Ajax","../../Event/Handler","../Confirmation","../../Language","../../StringUtil","../../Dom/Change/Listener"],(function(e,t,n,i,o,r,a,s,l){"use strict";function c(){document.querySelectorAll(`${d} ${u} ${p}`).forEach((e=>{m.has(e)||(e.addEventListener("click",(e=>function(e){function t(){i.apiOnce({data:{actionName:l,className:c,objectIDs:[p],parameters:m},success:e=>function(e,t){"reload"===e.dataset.objectActionSuccess?window.location.reload():o.fire("WoltLabSuite/Core/Ui/Object/Action",e.dataset.objectAction,{containerElement:e.closest(d),data:t,objectElement:e.closest(u)})}(n,e)})}e.preventDefault();const n=e.currentTarget,l=n.dataset.objectAction;let c=n.closest(d).dataset.objectActionClassName;n.dataset.objectActionClassName&&(c=n.dataset.objectActionClassName);let p=n.closest(u).dataset.objectId;n.dataset.objectId&&(p=n.dataset.objectId);const m={};Object.entries(n.dataset).forEach((([e,t])=>{let n=/^objectActionParameterData(.+)/.exec(e);if(n)Object.prototype.hasOwnProperty.call(m,"data")||(m.data={}),m.data[s.lcfirst(n[1])]=t;else if(n=/^objectActionParameter(.+)/.exec(e),n){const e=s.lcfirst(n[1]);if("data"===e)throw new Error("Additional object action parameters may not use 'data' as key.");m[e]=t}})),n.dataset.confirmMessage?r.show({confirm:t,message:a.get(n.dataset.confirmMessage),messageIsHtml:!0}):t()}(e))),m.add(e))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importDefault(l);const d=".jsObjectActionContainer[data-object-action-class-name]",u=".jsObjectActionObject[data-object-id]",p=".jsObjectAction[data-object-action]",m=new Set;t.setup=function(){c(),l.default.add("WoltLabSuite/Core/Ui/Action",(()=>c()))}})),define("WoltLabSuite/Core/Controller/Clipboard",["require","exports","tslib","../Ajax","../Core","../Dom/Change/Listener","../Dom/Util","../Event/Handler","../Language","../Ui/Confirmation","../Ui/Dropdown/Simple","../Ui/Page/Action","../Ui/Screen"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p){"use strict";function m(){return f||(f=new h),f}Object.defineProperty(t,"__esModule",{value:!0}),t.unmark=t.showEditor=t.hideEditor=t.reload=t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importStar(c),d=n.__importDefault(d),u=n.__importStar(u),p=n.__importStar(p);class h{containers=new Map;editors=new Map;editorDropdowns=new Map;itemData=new WeakMap;knownCheckboxes=new WeakSet;pageClassNames=[];pageObjectId=0;reloadPageOnSuccess=new Map;setup(e){if(!e.pageClassName)throw new Error("Expected a non-empty string for parameter 'pageClassName'.");let t=!1;0===this.pageClassNames.length&&(t=e.hasMarkedItems,this.pageObjectId=e.pageObjectId),this.pageClassNames.push(e.pageClassName),this.initContainers(),t&&this.containers.size&&this.loadMarkedItems(),r.default.add("WoltLabSuite/Core/Controller/Clipboard",(()=>this.initContainers()))}reload(){this.containers.size&&this.loadMarkedItems()}initContainers(){document.querySelectorAll(".jsClipboardContainer").forEach((e=>{const t=a.default.identify(e);let n=this.containers.get(t);if(void 0===n){const i=e.querySelector(".jsClipboardMarkAll");null!==i&&(i.dataset.containerId=t,i.addEventListener("click",(e=>this.markAll(e)))),n={checkboxes:e.getElementsByClassName("jsClipboardItem"),element:e,markAll:i,markedObjectIds:new Set},this.containers.set(t,n)}Array.from(n.checkboxes).forEach((e=>{this.knownCheckboxes.has(e)||(e.dataset.containerId=t,null===e.closest("a")?e.addEventListener("click",(e=>this.mark(e))):e.addEventListener("click",(t=>{t.preventDefault(),window.setTimeout((()=>{e.checked=!e.checked,this.mark(e)}),10)})),this.knownCheckboxes.add(e))}))}))}loadMarkedItems(){i.api(this,{actionName:"getMarkedItems",parameters:{pageClassNames:this.pageClassNames,pageObjectID:this.pageObjectId}})}markAll(e){const t=e.currentTarget,n="INPUT"!==t.nodeName||t.checked;this.setParentAsMarked(t,n);const i=[],o=t.dataset.containerId,r=this.containers.get(o),a=r.element.dataset.type;Array.from(r.checkboxes).forEach((e=>{const o=~~e.dataset.objectId;n?e.checked||(e.checked=!0,r.markedObjectIds.add(o),i.push(o)):e.checked&&(e.checked=!1,r.markedObjectIds.delete(o),i.push(o)),this.setParentAsMarked(e,n);const a=t.closest(".jsClipboardObject");null!==a&&(n?a.classList.add("jsMarked"):a.classList.remove("jsMarked"))})),this.saveState(a,i,n)}mark(e){const t=e instanceof Event?e.currentTarget:e,n=~~t.dataset.objectId,i=t.checked,o=t.dataset.containerId,r=this.containers.get(o),a=r.element.dataset.type,s=t.closest(".jsClipboardObject");i?(r.markedObjectIds.add(n),s.classList.add("jsMarked")):(r.markedObjectIds.delete(n),s.classList.remove("jsMarked")),null!==r.markAll&&(r.markAll.checked=!Array.from(r.checkboxes).some((e=>!e.checked)),this.setParentAsMarked(r.markAll,i)),this.setParentAsMarked(t,t.checked),this.saveState(a,[n],i)}saveState(e,t,n){i.api(this,{actionName:n?"mark":"unmark",parameters:{pageClassNames:this.pageClassNames,pageObjectID:this.pageObjectId,objectIDs:t,objectType:e}})}executeAction(e){function t(){const e=n.dataset.type;s.fire("com.woltlab.wcf.clipboard",e,{data:i,listItem:n,responseData:null})}const n=e.currentTarget,i=this.itemData.get(n);if(i.url)return void(window.location.href=i.url);const r="string"==typeof i.internalData.confirmMessage?i.internalData.confirmMessage:"";let a=!0;if(o.isPlainObject(i.parameters)&&i.parameters.actionName&&i.parameters.className){if("unmarkAll"===i.parameters.actionName||Array.isArray(i.parameters.objectIDs))if(r.length){const e="string"==typeof i.internalData.template?i.internalData.template:"";c.show({confirm:()=>{const t={};e.length&&c.getContentElement().querySelectorAll("input, select, textarea").forEach((e=>{const n=e.name;switch(e.nodeName){case"INPUT":("checkbox"!==e.type&&"radio"!==e.type||e.checked)&&(t[n]=e.value);break;case"SELECT":t[n]=e.value;break;case"TEXTAREA":t[n]=e.value.trim()}})),this.executeProxyAction(n,i,t)},message:r,template:e})}else this.executeProxyAction(n,i)}else r.length&&(a=!1,c.show({confirm:t,message:r}));a&&t()}executeProxyAction(e,t,n={}){const r="unmarkAll"!==t.parameters.actionName?t.parameters.objectIDs:[],a={data:n};o.isPlainObject(t.internalData.parameters)&&Object.entries(t.internalData.parameters).forEach((([e,t])=>{a[e]=t})),i.api(this,{actionName:t.parameters.actionName,className:t.parameters.className,objectIDs:r,parameters:a},(n=>{if("unmarkAll"!==t.actionName){const i=e.dataset.type;s.fire("com.woltlab.wcf.clipboard",i,{data:t,listItem:e,responseData:n});const o=this.reloadPageOnSuccess.get(i);if(o&&o.includes(n.actionName))return void window.location.reload()}this.loadMarkedItems()}))}unmarkAll(e){const t=e.currentTarget;i.api(this,{actionName:"unmarkAll",parameters:{objectType:t.dataset.type}})}_ajaxSetup(){return{data:{className:"wcf\\data\\clipboard\\item\\ClipboardItemAction"}}}_ajaxSuccess(e){if("unmarkAll"===e.actionName){const t=e.returnValues.objectType;return void this.containers.forEach((e=>{e.element.dataset.type===t&&(e.element.querySelectorAll(".jsMarked").forEach((e=>e.classList.remove("jsMarked"))),null!==e.markAll&&(e.markAll.checked=!1,this.setParentAsMarked(e.markAll,!1)),Array.from(e.checkboxes).forEach((e=>{e.checked=!1,this.setParentAsMarked(e,!1)})),u.remove(`wcfClipboard-${t}`))}))}this.itemData=new WeakMap,this.reloadPageOnSuccess.clear();const t=o.isPlainObject(e.returnValues.markedItems)?e.returnValues.markedItems:{};this.containers.forEach((e=>{const n=e.element.dataset.type,i=Array.isArray(t[n])?t[n]:[];this.rebuildMarkings(e,i)}));const n=Object.keys(e.returnValues.items||{});this.editors.forEach(((e,t)=>{n.includes(t)||(u.remove(`wcfClipboard-${t}`),this.editorDropdowns.get(t).innerHTML="")})),e.returnValues.items&&Object.entries(e.returnValues.items).forEach((([e,t])=>{this.reloadPageOnSuccess.set(e,t.reloadPageOnSuccess);let i=!1,o=this.editors.get(e),r=this.editorDropdowns.get(e);void 0===o?(i=!0,o=document.createElement("a"),o.className="dropdownToggle",o.textContent=t.label,this.editors.set(e,o),r=document.createElement("ol"),r.className="dropdownMenu",this.editorDropdowns.set(e,r)):(o.textContent=t.label,r.innerHTML=""),Object.values(t.items).forEach((t=>{const n=document.createElement("li"),i=document.createElement("span");i.textContent=t.label,n.appendChild(i),r.appendChild(n),n.dataset.type=e,n.addEventListener("click",(e=>this.executeAction(e))),this.itemData.set(n,t)}));const a=document.createElement("li");a.classList.add("dropdownDivider"),r.appendChild(a);const s=document.createElement("li");s.dataset.type=e;const c=document.createElement("span");if(c.textContent=l.get("wcf.clipboard.item.unmarkAll"),s.appendChild(c),s.addEventListener("click",(e=>this.unmarkAll(e))),r.appendChild(s),-1!==n.indexOf(e)){const t=`wcfClipboard-${e}`;u.has(t)?u.show(t):u.add(t,o)}if(i){const e=o.parentElement;e.classList.add("dropdown"),e.appendChild(r),d.default.init(o)}}))}rebuildMarkings(e,t){let n=!0;if(Array.from(e.checkboxes).forEach((e=>{const i=e.closest(".jsClipboardObject"),o=t.includes(~~e.dataset.objectId);o||(n=!1),e.checked=o,o?i.classList.add("jsMarked"):i.classList.remove("jsMarked"),this.setParentAsMarked(e,o)})),null!==e.markAll){e.markAll.checked=n,this.setParentAsMarked(e.markAll,n);const t=e.markAll.closest(".columnMark")?.parentNode;t&&(n?t.classList.add("jsMarked"):t.classList.remove("jsMarked"))}}setParentAsMarked(e,t){const n=e.parentElement;"checkbox"===n.getAttribute("role")&&n.setAttribute("aria-checked",t?"true":"false")}hideEditor(e){u.remove("wcfClipboard-"+e),p.pageOverlayOpen()}showEditor(){this.loadMarkedItems(),p.pageOverlayClose()}unmark(e,t){this.saveState(e,t,!1)}}let f;t.setup=function(e){m().setup(e)},t.reload=function(){m().reload()},t.hideEditor=function(e){m().hideEditor(e)},t.showEditor=function(){m().showEditor()},t.unmark=function(e,t){m().unmark(e,t)}})),define("WoltLabSuite/Core/Ui/Object/Action/Handler",["require","exports","tslib","../../../Event/Handler","../../../Controller/Clipboard"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),o=n.__importStar(o),t.default=class{objectAction;constructor(e,t,n){this.objectAction=n,i.add("WoltLabSuite/Core/Ui/Object/Action",e,(e=>this.handleObjectAction(e))),document.querySelectorAll(".jsClipboardContainer[data-type]").forEach((e=>{i.add("com.woltlab.wcf.clipboard",e.dataset.type,(e=>{null!==e.responseData&&-1!==t.indexOf(e.responseData.actionName)&&this.handleClipboardAction(e)}))}))}handleClipboardAction(e){const t=e.listItem.dataset.type;document.querySelectorAll(`.jsClipboardContainer[data-type="${t}"] .jsClipboardObject`).forEach((t=>{const n=t.dataset.objectId;e.responseData.objectIDs.forEach((i=>{~~i==~~n&&this.objectAction({containerElement:t.closest(".jsObjectActionContainer"),data:e.responseData,objectElement:t})}))}))}handleObjectAction(e){this.objectAction(e),o.reload()}}})),define("WoltLabSuite/Core/Ui/Object/Action/Delete",["require","exports","tslib","./Handler"],(function(e,t,n,i){"use strict";function o(e){const t=e.objectElement.querySelector('.jsObjectAction[data-object-action="delete"]');if(!t||t.dataset.objectActionHandler)return;const n=e.objectElement.querySelector(".jsObjectActionObjectChildren");n&&Array.from(n.children).forEach((t=>{e.objectElement.insertAdjacentElement("beforebegin",t)})),e.objectElement.remove()}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importDefault(i),t.setup=function(){new i.default("delete",["delete"],o)}})),define("WoltLabSuite/Core/Ui/Object/Action/Toggle",["require","exports","tslib","../../../Language","./Handler"],(function(e,t,n,i,o){"use strict";function r(e){const t=e.objectElement.querySelector('.jsObjectAction[data-object-action="toggle"]');if(!t||t.dataset.objectActionHandler)return;const n="FA-ICON"===t.nodeName?t:t.querySelector("fa-icon");if(n)if("square"===n.name){n.setIcon("square-check");const e=t.dataset.disableTitle||i.get("wcf.global.button.disable");t.title=e}else{n.setIcon("square");const e=t.dataset.enableTitle||i.get("wcf.global.button.enable");t.title=e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),o=n.__importDefault(o),t.setup=function(){new o.default("toggle",["enable","disable"],r)}})),define("WoltLabSuite/Core/Ui/Search",["require","exports","tslib","../Event/Handler","./Alignment","./CloseOverlay","./Dropdown/Simple","./Screen","../Environment","../Dom/Util"],(function(e,t,n,i,o,r,a,s,l,c){"use strict";function d(){r.default.execute(r.Origin.Search),f.classList.add("searchBarOpen"),w?.parentElement.classList.add("open"),m||o.set(b,_,{horizontal:"right"}),b.style.setProperty("top",`${g.clientHeight}px`,""),y.focus(),window.setTimeout((()=>{const e=y.value.length;y.selectionStart=e,y.selectionEnd=e}),1)}function u(){if(!f.classList.contains("searchBarOpen")&&!b.classList.contains("open"))return;f.classList.remove("searchBarOpen"),b.classList.remove("open"),w?.parentElement.classList.remove("open"),["bottom","left","right","top"].forEach((e=>{b.style.removeProperty(e)})),"ios"===l.platform()&&(s.scrollEnable(),void 0!==p&&(document.body.scrollTop=p,p=void 0)),m&&y.blur();const e=document.getElementById("pageHeaderSearchMobile");e&&(e.setAttribute("aria-expanded","false"),e.querySelector("fa-icon").setIcon("magnifying-glass"));const t=b.querySelector(".pageHeaderSearchType");a.default.close(t.id)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l);let p,m=!1;const h=document.body.classList.contains("wcfAcp"),f=document.getElementById("pageHeader"),g=document.getElementById("pageHeaderPanel"),b=document.getElementById("pageHeaderSearch");let v;const y=document.getElementById("pageHeaderSearchInput"),_=document.getElementById("topMenu"),w=document.getElementById("userPanelSearchButton");t.init=function(){h&&null===b||(function(){b.addEventListener("click",(e=>e.stopPropagation()));const e=document.querySelector(".pageHeaderSearchType"),t=(0,c.identify)(e);a.default.getDropdownMenu(t).addEventListener("click",(e=>{e.stopPropagation(),a.default.close(t)})),w?.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),f.classList.contains("searchBarOpen")?u():d()})),r.default.add("WoltLabSuite/Core/Ui/Search",((e,t)=>{if(e!==r.Origin.Search){if(e===r.Origin.DropDown){if(document.getElementById("pageHeaderSearchTypeSelect").dataset.target===t)return;if(y.parentElement.id===t)return}u(),v?.setAttribute("aria-expanded","false")}}))}(),s.on("screen-md-down",{match(){m=!0},unmatch(){m=!1,p=void 0},setup(){m=!0,function(){const e=document.getElementById("pageHeaderSearchMobile");v=e,e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),"true"===e.getAttribute("aria-expanded")?u():("ios"===l.platform()&&(p=document.body.scrollTop,s.scrollDisable()),d(),b.style.setProperty("top",`${f.offsetHeight}px`,""),b.classList.add("open"),y.focus(),"ios"===l.platform()&&(document.body.scrollTop=0),e.setAttribute("aria-expanded","true"),e.querySelector("fa-icon").setIcon("xmark"))})),b.addEventListener("click",(e=>{e.stopPropagation(),e.target===b&&(e.preventDefault(),u())}))}()}}),i.add("com.woltlab.wcf.Search","close",(()=>u())))}})),define("WoltLabSuite/Core/LazyLoader",["require","exports"],(function(e,t){"use strict";function n(e){void 0!==r.get(e)&&window.cancelAnimationFrame(r.get(e)),r.set(e,window.requestAnimationFrame((()=>{for(const t of o.keys())if(e.matches(t)||null!==e.querySelector(t)){for(const e of o.get(t))a.then((()=>e()));o.delete(t)}r.delete(e)})))}let i;Object.defineProperty(t,"__esModule",{value:!0}),t.whenFirstSeen=void 0;const o=new Map,r=new Map,a=new Promise((e=>{"loading"===document.readyState?document.addEventListener("readystatechange",(()=>e()),{once:!0}):e()}));t.whenFirstSeen=function(e,t){o.has(e)||o.set(e,[]),o.get(e).push(t),n(document.body),void 0===i&&(i=new MutationObserver((e=>{if(0!==o.size)for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&n(e)}))),i.observe(document,{subtree:!0,childList:!0})}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("perfect-scrollbar",t):(e=e||self).PerfectScrollbar=t()}(this,(function(){"use strict";function e(e){return getComputedStyle(e)}function t(e,t){var n,i;for(n in t)"number"==typeof(i=t[n])&&(i+="px"),e.style[n]=i;return e}function n(e){var t=document.createElement("div");return t.className=e,t}function i(e,t){if(!v)throw new Error("No element matching method supported");return v.call(e,t)}function o(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function r(e,t){return Array.prototype.filter.call(e.children,(function(e){return i(e,t)}))}function a(e,t){var n=e.element.classList,i=y.state.scrolling(t);n.contains(i)?clearTimeout(_[t]):n.add(i)}function s(e,t){_[t]=setTimeout((function(){return e.isAlive&&e.element.classList.remove(y.state.scrolling(t))}),e.settings.scrollingThreshold)}function l(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function c(e,t,n,i,o){var r;if(void 0===i&&(i=!0),void 0===o&&(o=!1),"top"===t)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,n,i,o){var r,c=n[0],d=n[1],u=n[2],p=n[3],m=n[4],h=n[5];void 0===i&&(i=!0),void 0===o&&(o=!1),r=e.element,e.reach[p]=null,r[u]<1&&(e.reach[p]="start"),r[u]>e[c]-e[d]-1&&(e.reach[p]="end"),t&&(r.dispatchEvent(l("ps-scroll-"+p)),t<0?r.dispatchEvent(l("ps-scroll-"+m)):t>0&&r.dispatchEvent(l("ps-scroll-"+h)),i&&function(e,t){a(e,t),s(e,t)}(e,p)),e.reach[p]&&(t||o)&&r.dispatchEvent(l("ps-"+p+"-reach-"+e.reach[p]))}(e,n,r,i,o)}function d(e){return parseInt(e,10)||0}function u(e){var n=e.element,i=Math.floor(n.scrollTop),a=n.getBoundingClientRect();e.containerWidth=Math.round(a.width),e.containerHeight=Math.round(a.height),e.contentWidth=n.scrollWidth,e.contentHeight=n.scrollHeight,n.contains(e.scrollbarXRail)||(r(n,y.element.rail("x")).forEach((function(e){return o(e)})),n.appendChild(e.scrollbarXRail)),n.contains(e.scrollbarYRail)||(r(n,y.element.rail("y")).forEach((function(e){return o(e)})),n.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=p(e,d(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=d((e.negativeScrollAdjustment+n.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=p(e,d(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=d(i*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,n){var i,o={width:n.railXWidth},r=Math.floor(e.scrollTop);n.isRtl?o.left=n.negativeScrollAdjustment+e.scrollLeft+n.containerWidth-n.contentWidth:o.left=e.scrollLeft,n.isScrollbarXUsingBottom?o.bottom=n.scrollbarXBottom-r:o.top=n.scrollbarXTop+r,t(n.scrollbarXRail,o),i={top:r,height:n.railYHeight},n.isScrollbarYUsingRight?n.isRtl?i.right=n.contentWidth-(n.negativeScrollAdjustment+e.scrollLeft)-n.scrollbarYRight-n.scrollbarYOuterWidth-9:i.right=n.scrollbarYRight-e.scrollLeft:n.isRtl?i.left=n.negativeScrollAdjustment+e.scrollLeft+2*n.containerWidth-n.contentWidth-n.scrollbarYLeft-n.scrollbarYOuterWidth:i.left=n.scrollbarYLeft+e.scrollLeft,t(n.scrollbarYRail,i),t(n.scrollbarX,{left:n.scrollbarXLeft,width:n.scrollbarXWidth-n.railBorderXWidth}),t(n.scrollbarY,{top:n.scrollbarYTop,height:n.scrollbarYHeight-n.railBorderYWidth})}(n,e),e.scrollbarXActive?n.classList.add(y.state.active("x")):(n.classList.remove(y.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,n.scrollLeft=!0===e.isRtl?e.contentWidth:0),e.scrollbarYActive?n.classList.add(y.state.active("y")):(n.classList.remove(y.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,n.scrollTop=0)}function p(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function m(e,t){function n(t){t.touches&&t.touches[0]&&(t[c]=t.touches[0].pageY),b[h]=v+w*(t[c]-_),a(e,f),u(e),t.stopPropagation(),t.type.startsWith("touch")&&t.changedTouches.length>1&&t.preventDefault()}function i(){s(e,f),e[g].classList.remove(y.state.clicking),e.event.unbind(e.ownerDocument,"mousemove",n)}function o(t,o){v=b[h],o&&t.touches&&(t[c]=t.touches[0].pageY),_=t[c],w=(e[l]-e[r])/(e[d]-e[m]),o?e.event.bind(e.ownerDocument,"touchmove",n):(e.event.bind(e.ownerDocument,"mousemove",n),e.event.once(e.ownerDocument,"mouseup",i),t.preventDefault()),e[g].classList.add(y.state.clicking),t.stopPropagation()}var r=t[0],l=t[1],c=t[2],d=t[3],p=t[4],m=t[5],h=t[6],f=t[7],g=t[8],b=e.element,v=null,_=null,w=null;e.event.bind(e[p],"mousedown",(function(e){o(e)})),e.event.bind(e[p],"touchstart",(function(e){o(e,!0)}))}var h,f,g,b,v="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),y={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},_={x:null,y:null},w=function(e){this.element=e,this.handlers={}},E={isEmpty:{configurable:!0}};return w.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,{passive:!1})},w.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter((function(i){return!(!t||i===t)||(n.element.removeEventListener(e,i,!1),!1)}))},w.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},E.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every((function(t){return 0===e.handlers[t].length}))},Object.defineProperties(w.prototype,E),(h=function(){this.eventElements=[]}).prototype.eventElement=function(e){var t=this.eventElements.filter((function(t){return t.element===e}))[0];return t||(t=new w(e),this.eventElements.push(t)),t},h.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},h.prototype.unbind=function(e,t,n){var i=this.eventElement(e);i.unbind(t,n),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)},h.prototype.unbindAll=function(){this.eventElements.forEach((function(e){return e.unbindAll()})),this.eventElements=[]},h.prototype.once=function(e,t,n){var i=this.eventElement(e),o=function(e){i.unbind(t,o),n(e)};i.bind(t,o)},f={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},g={"click-rail":function(e){e.element,e.event.bind(e.scrollbarY,"mousedown",(function(e){return e.stopPropagation()})),e.event.bind(e.scrollbarYRail,"mousedown",(function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight,u(e),t.stopPropagation()})),e.event.bind(e.scrollbarX,"mousedown",(function(e){return e.stopPropagation()})),e.event.bind(e.scrollbarXRail,"mousedown",(function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth,u(e),t.stopPropagation()}))},"drag-thumb":function(e){m(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),m(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",(function(n){var o,r,a,s;if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(i(t,":hover")||i(e.scrollbarX,":focus")||i(e.scrollbarY,":focus"))){if(o=document.activeElement?document.activeElement:e.ownerDocument.activeElement){if("IFRAME"===o.tagName)o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(i(s=o,"input,[contenteditable]")||i(s,"select,[contenteditable]")||i(s,"textarea,[contenteditable]")||i(s,"button,[contenteditable]"))return}switch(r=0,a=0,n.which){case 37:r=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:a=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:r=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:a=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 32:a=n.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==r||e.settings.suppressScrollY&&0!==a||(t.scrollTop-=a,t.scrollLeft+=r,u(e),function(n,i){var o,r=Math.floor(t.scrollTop);if(0===n){if(!e.scrollbarYActive)return!1;if(0===r&&i>0||r>=e.contentHeight-e.containerHeight&&i<0)return!e.settings.wheelPropagation}if(o=t.scrollLeft,0===i){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}(r,a)&&n.preventDefault())}}))},wheel:function(t){function n(n){var o,r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),a=r[0],s=r[1];(function(t,n,o){var r,a,s,l;if(!f.isWebKit&&i.querySelector("select:focus"))return!0;if(!i.contains(t))return!1;for(r=t;r&&r!==i;){if(r.classList.contains(y.element.consuming))return!0;if(a=e(r),o&&a.overflowY.match(/(scroll|auto)/)&&(s=r.scrollHeight-r.clientHeight)>0&&(r.scrollTop>0&&o<0||r.scrollTop<s&&o>0))return!0;if(n&&a.overflowX.match(/(scroll|auto)/)&&(l=r.scrollWidth-r.clientWidth)>0&&(r.scrollLeft>0&&n<0||r.scrollLeft<l&&n>0))return!0;r=r.parentNode}return!1})(n.target,a,s)||(o=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(s?i.scrollTop-=s*t.settings.wheelSpeed:i.scrollTop+=a*t.settings.wheelSpeed,o=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a?i.scrollLeft+=a*t.settings.wheelSpeed:i.scrollLeft-=s*t.settings.wheelSpeed,o=!0):(i.scrollTop-=s*t.settings.wheelSpeed,i.scrollLeft+=a*t.settings.wheelSpeed),u(t),o=o||function(e,n){var o=Math.floor(i.scrollTop),r=0===i.scrollTop,a=o+i.offsetHeight===i.scrollHeight,s=0===i.scrollLeft,l=i.scrollLeft+i.offsetWidth===i.scrollWidth;return!(Math.abs(n)>=Math.abs(e)?r&&n>0||a&&n<0:s&&e>0||l&&e<0)||!t.settings.wheelPropagation}(a,s),o&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault()))}var i=t.element;void 0!==window.onwheel?t.event.bind(i,"wheel",n):void 0!==window.onmousewheel&&t.event.bind(i,"mousewheel",n)},touch:function(t){function n(e,n){l.scrollTop-=n,l.scrollLeft-=e,u(t)}function i(e){return e.targetTouches?e.targetTouches[0]:e}function o(e){return!(e.pointerType&&"pen"===e.pointerType&&0===e.buttons||(!e.targetTouches||1!==e.targetTouches.length)&&(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function r(e){if(o(e)){var t=i(e);c.pageX=t.pageX,c.pageY=t.pageY,d=(new Date).getTime(),null!==m&&clearInterval(m)}}function a(r){var a,s,u,m,h,g;if(o(r)){if(u=(s={pageX:(a=i(r)).pageX,pageY:a.pageY}).pageX-c.pageX,m=s.pageY-c.pageY,function(t,n,i){var o,r,a,s;if(!l.contains(t))return!1;for(o=t;o&&o!==l;){if(o.classList.contains(y.element.consuming))return!0;if(r=e(o),i&&r.overflowY.match(/(scroll|auto)/)&&(a=o.scrollHeight-o.clientHeight)>0&&(o.scrollTop>0&&i<0||o.scrollTop<a&&i>0))return!0;if(n&&r.overflowX.match(/(scroll|auto)/)&&(s=o.scrollWidth-o.clientWidth)>0&&(o.scrollLeft>0&&n<0||o.scrollLeft<s&&n>0))return!0;o=o.parentNode}return!1}(r.target,u,m))return;n(u,m),c=s,(g=(h=(new Date).getTime())-d)>0&&(p.x=u/g,p.y=m/g,d=h),function(e,n){var i=Math.floor(l.scrollTop),o=l.scrollLeft,r=Math.abs(e),a=Math.abs(n);if(a>r){if(n<0&&i===t.contentHeight-t.containerHeight||n>0&&0===i)return 0===window.scrollY&&n>0&&f.isChrome}else if(r>a&&(e<0&&o===t.contentWidth-t.containerWidth||e>0&&0===o))return!0;return!0}(u,m)&&r.preventDefault()}}function s(){t.settings.swipeEasing&&(clearInterval(m),m=setInterval((function(){t.isInitialized?clearInterval(m):p.x||p.y?Math.abs(p.x)<.01&&Math.abs(p.y)<.01?clearInterval(m):t.element?(n(30*p.x,30*p.y),p.x*=.8,p.y*=.8):clearInterval(m):clearInterval(m)}),10))}var l,c,d,p,m;(f.supportsTouch||f.supportsIePointer)&&(l=t.element,c={},d=0,p={},m=null,f.supportsTouch?(t.event.bind(l,"touchstart",r),t.event.bind(l,"touchmove",a),t.event.bind(l,"touchend",s)):f.supportsIePointer&&(window.PointerEvent?(t.event.bind(l,"pointerdown",r),t.event.bind(l,"pointermove",a),t.event.bind(l,"pointerup",s)):window.MSPointerEvent&&(t.event.bind(l,"MSPointerDown",r),t.event.bind(l,"MSPointerMove",a),t.event.bind(l,"MSPointerUp",s))))}},(b=function(i,o){var r,a,s,l,c,p,m,f=this;if(void 0===o&&(o={}),"string"==typeof i&&(i=document.querySelector(i)),!i||!i.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(r in this.element=i,i.classList.add(y.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},o)this.settings[r]=o[r];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,a=function(){return i.classList.add(y.state.focus)},s=function(){return i.classList.remove(y.state.focus)},this.isRtl="rtl"===e(i).direction,!0===this.isRtl&&i.classList.add(y.rtl),this.isNegativeScroll=(p=i.scrollLeft,null,i.scrollLeft=-1,m=i.scrollLeft<0,i.scrollLeft=p,m),this.negativeScrollAdjustment=this.isNegativeScroll?i.scrollWidth-i.clientWidth:0,this.event=new h,this.ownerDocument=i.ownerDocument||document,this.scrollbarXRail=n(y.element.rail("x")),i.appendChild(this.scrollbarXRail),this.scrollbarX=n(y.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",a),this.event.bind(this.scrollbarX,"blur",s),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null,l=e(this.scrollbarXRail),this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=d(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=d(l.borderLeftWidth)+d(l.borderRightWidth),t(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=d(l.marginLeft)+d(l.marginRight),t(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=n(y.element.rail("y")),i.appendChild(this.scrollbarYRail),this.scrollbarY=n(y.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",a),this.event.bind(this.scrollbarY,"blur",s),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,c=e(this.scrollbarYRail),this.scrollbarYRight=parseInt(c.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=d(c.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var n=e(t);return d(n.width)+d(n.paddingLeft)+d(n.paddingRight)+d(n.borderLeftWidth)+d(n.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=d(c.borderTopWidth)+d(c.borderBottomWidth),t(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=d(c.marginTop)+d(c.marginBottom),t(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:i.scrollLeft<=0?"start":i.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:i.scrollTop<=0?"start":i.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(e){return g[e](f)})),this.lastScrollTop=Math.floor(i.scrollTop),this.lastScrollLeft=i.scrollLeft,this.event.bind(this.element,"scroll",(function(e){return f.onScroll(e)})),u(this)}).prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,t(this.scrollbarXRail,{display:"block"}),t(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=d(e(this.scrollbarXRail).marginLeft)+d(e(this.scrollbarXRail).marginRight),this.railYMarginHeight=d(e(this.scrollbarYRail).marginTop)+d(e(this.scrollbarYRail).marginBottom),t(this.scrollbarXRail,{display:"none"}),t(this.scrollbarYRail,{display:"none"}),u(this),c(this,"top",0,!1,!0),c(this,"left",0,!1,!0),t(this.scrollbarXRail,{display:""}),t(this.scrollbarYRail,{display:""}))},b.prototype.onScroll=function(e){this.isAlive&&(u(this),c(this,"top",this.element.scrollTop-this.lastScrollTop),c(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},b.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),o(this.scrollbarX),o(this.scrollbarY),o(this.scrollbarXRail),o(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},b.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(e){return!e.match(/^ps([-_].+|)$/)})).join(" ")},b})),define("WoltLabSuite/Core/Bootstrap",["require","exports","tslib","./Core","./Date/Picker","./Devtools","./Dom/Change/Listener","./Environment","./Event/Handler","./Form/XsrfToken","./Language","./Ui/Dialog","./Ui/Dropdown/Simple","./Ui/Mobile","./Ui/Page/Action","./Ui/TabMenu","./Ui/Tooltip","./Ui/Page/JumpTo","./Ui/Password","./Ui/Empty","./Ui/Object/Action","./Ui/Object/Action/Delete","./Ui/Object/Action/Toggle","./Ui/Search","./LazyLoader","./Helper/PageOverlay","perfect-scrollbar"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h,f,g,b,v,y,_,w,E,S,C,L){"use strict";function k(){document.querySelectorAll("nav:not([aria-label]):not([aria-labelledby]):not([role])").forEach((e=>{e.setAttribute("role","presentation")})),document.querySelectorAll("article:not([aria-label]):not([aria-labelledby]):not([role])").forEach((e=>{e.setAttribute("role","presentation")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importStar(c),d=n.__importStar(d),u=n.__importDefault(u),p=n.__importDefault(p),m=n.__importStar(m),h=n.__importStar(h),f=n.__importStar(f),g=n.__importStar(g),b=n.__importStar(b),v=n.__importStar(v),y=n.__importStar(y),_=n.__importStar(_),w=n.__importStar(w),E=n.__importStar(E),null==window.WCF&&(window.WCF={}),null==window.WCF.Language&&(window.WCF.Language={}),window.WCF.Language.get=d.get,window.WCF.Language.add=d.add,window.WCF.Language.addObject=d.addObject,window.__wcf_bc_eventHandler=l,t.setup=function(t){t=i.extend({colorScheme:"light",enableMobileMenu:!0,pageMenuMainProvider:void 0},t),c.setup(),window.ENABLE_DEVELOPER_TOOLS&&r.default._internal_.enable(),(0,L.adoptPageOverlayContainer)(document.body),s.setup(),o.default.init(),p.default.setup(),m.setup(t.enableMobileMenu,t.pageMenuMainProvider),f.setup(),u.default.setup(),g.setup(),v.setup(),y.setup(),_.setup(),w.setup(),E.setup(),(0,S.init)(),document.querySelectorAll("form[method=get]").forEach((e=>{e.method="post"})),"microsoft"===s.browser()&&(window.onbeforeunload=()=>{});let l=0;l=window.setInterval((()=>{if("function"==typeof window.jQuery){window.clearInterval(l),window.jQuery((()=>{h.setup()}));const e=window.jQuery;e.browser=e.browser||{},e.browser.mobile="desktop"!==s.platform(),window.jQuery.holdReady(!1)}}),20),document.querySelectorAll(".pagination").forEach((e=>b.init(e))),window.requestAnimationFrame((()=>{const e=window.innerWidth-document.documentElement.clientWidth;document.documentElement.style.setProperty("--scrollbar-width",`${e}px`)})),k(),a.default.add("WoltLabSuite/Core/Bootstrap",(()=>k)),t.dynamicColorScheme&&new Promise(((t,n)=>{e(["./Controller/Style/ColorScheme"],t,n)})).then(n.__importStar).then((({setup:e})=>{e()})),(0,C.whenFirstSeen)("[data-report-content]",(()=>{new Promise(((t,n)=>{e(["./Ui/Moderation/Report"],t,n)})).then(n.__importStar).then((({setup:e})=>e()))})),(0,C.whenFirstSeen)("woltlab-core-pagination",(()=>{new Promise(((t,n)=>{e(["./Ui/Pagination/JumpToPage"],t,n)})).then(n.__importStar).then((({setup:e})=>e()))})),(0,C.whenFirstSeen)("woltlab-core-google-maps",(()=>{new Promise(((t,n)=>{e(["./Component/GoogleMaps/woltlab-core-google-maps"],t,n)})).then(n.__importStar)})),(0,C.whenFirstSeen)("[data-google-maps-geocoding]",(()=>{new Promise(((t,n)=>{e(["./Component/GoogleMaps/Geocoding"],t,n)})).then(n.__importStar).then((({setup:e})=>e()))}))}})),define("WoltLabSuite/Core/Controller/Popover",["require","exports","tslib","../Ajax","../Dom/Change/Listener","../Dom/Util","../Environment","../Ui/Alignment"],(function(e,t,n,i,o,r,a,s){"use strict";function l(){return d||(d=new c),d}Object.defineProperty(t,"__esModule",{value:!0}),t.resetCache=t.ajaxApi=t.setContent=t.init=void 0,i=n.__importStar(i),o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importStar(a),s=n.__importStar(s);class c{activeId="";cache=new Map;elements=new Map;handlers=new Map;hoverId="";popover;popoverContent;suspended=!1;timerEnter=void 0;timerLeave=void 0;constructor(){this.popover=document.createElement("div"),this.popover.className="popover forceHide",this.popoverContent=document.createElement("div"),this.popoverContent.className="popoverContent",this.popover.appendChild(this.popoverContent);const e=document.createElement("span");e.className="elementPointer",e.appendChild(document.createElement("span")),this.popover.appendChild(e),document.body.append(this.popover),this.popover.addEventListener("mouseenter",(()=>this.popoverMouseEnter())),this.popover.addEventListener("mouseleave",(()=>this.mouseLeave())),this.popover.addEventListener("animationend",(()=>this.clearContent())),window.addEventListener("beforeunload",(()=>{this.suspended=!0,this.timerEnter&&(window.clearTimeout(this.timerEnter),this.timerEnter=void 0),this.hidePopover()})),o.default.add("WoltLabSuite/Core/Controller/Popover",(e=>this.initHandler(e)))}init(e){if("desktop"!==a.platform())return;if(e.attributeName=e.attributeName||"data-object-id",e.legacy=!0===e.legacy,this.handlers.has(e.identifier))return;const t=e.legacy?e.className:`.${e.className}`;this.handlers.set(e.identifier,{attributeName:e.attributeName,dboAction:e.dboAction,legacy:e.legacy,loadCallback:e.loadCallback,selector:t}),this.initHandler(e.identifier)}initHandler(e){"string"==typeof e&&e.length?this.initElements(this.handlers.get(e),e):this.handlers.forEach(((e,t)=>{this.initElements(e,t)}))}initElements(e,t){document.querySelectorAll(e.selector).forEach((n=>{const i=r.default.identify(n);if(this.cache.has(i))return;if(null!==n.closest(".popover"))return void this.cache.set(i,{content:null,state:0});const o=e.legacy?i:~~n.getAttribute(e.attributeName);if(0===o)return;n.addEventListener("mouseenter",(e=>this.mouseEnter(e))),n.addEventListener("mouseleave",(()=>this.mouseLeave())),n instanceof HTMLAnchorElement&&n.href&&n.addEventListener("click",(()=>this.hidePopover()));const a=`${t}-${o}`;n.dataset.cacheId=a,this.elements.set(i,{element:n,identifier:t,objectId:o.toString()}),this.cache.has(a)||this.cache.set(a,{content:null,state:0})}))}setContent(e,t,n){const i=`${e}-${t}`,o=this.cache.get(i);if(void 0===o)throw new Error(`Unable to find element for object id '${t}' (identifier: '${e}').`);let a=r.default.createFragmentFromHtml(n);a.childElementCount||(a=r.default.createFragmentFromHtml("<p>"+n+"</p>")),o.content=a,o.state=2,this.activeId&&this.elements.get(this.activeId).element.dataset.cacheId===i&&this.show()}resetCache(e,t){const n=`${e}-${t}`;this.cache.has(n)&&this.cache.set(n,{content:null,state:0})}mouseEnter(e){if(this.suspended)return;this.timerEnter&&(window.clearTimeout(this.timerEnter),this.timerEnter=void 0);const t=r.default.identify(e.currentTarget);this.activeId===t&&this.timerLeave&&(window.clearTimeout(this.timerLeave),this.timerLeave=void 0),this.hoverId=t,this.timerEnter=window.setTimeout((()=>{this.timerEnter=void 0,this.hoverId===t&&this.show()}),800)}mouseLeave(){this.hoverId="",this.timerLeave||(this.timerLeave=window.setTimeout((()=>this.hidePopover()),500))}popoverMouseEnter(){this.timerLeave&&(window.clearTimeout(this.timerLeave),this.timerLeave=void 0)}show(){this.timerLeave&&(window.clearTimeout(this.timerLeave),this.timerLeave=void 0);let e=!1;this.popover.classList.contains("active")?this.activeId!==this.hoverId&&(this.hidePopover(),e=!0):this.popoverContent.childElementCount&&(e=!0),e&&(this.popover.classList.add("forceHide"),this.popover.offsetTop,this.clearContent(),this.popover.classList.remove("forceHide")),this.activeId=this.hoverId;const t=this.elements.get(this.activeId);if(void 0===t)return;const n=t.element.dataset.cacheId,i=this.cache.get(n);switch(i.state){case 2:this.popoverContent.appendChild(i.content),this.rebuild();break;case 0:{i.state=1;const e=this.handlers.get(t.identifier);if(e.loadCallback)e.loadCallback(t.objectId,this,t.element);else if(e.dboAction){const n=e=>(this.setContent(t.identifier,t.objectId,e.returnValues.template),!0);this.ajaxApi({actionName:"getPopover",className:e.dboAction,interfaceName:"wcf\\data\\IPopoverAction",objectIDs:[t.objectId]},n,n)}break}}}hidePopover(){this.timerLeave&&(window.clearTimeout(this.timerLeave),this.timerLeave=void 0),this.popover.classList.remove("active")}clearContent(){if(this.activeId&&this.popoverContent.childElementCount&&!this.popover.classList.contains("active")){const e=this.elements.get(this.activeId).element.dataset.cacheId,t=this.cache.get(e);for(;this.popoverContent.childNodes.length;)t.content.appendChild(this.popoverContent.childNodes[0])}}rebuild(){this.popover.classList.contains("active")||(this.popover.classList.remove("forceHide"),this.popover.classList.add("active"),s.set(this.popover,this.elements.get(this.activeId).element,{pointer:!0,vertical:"top"}))}_ajaxSuccess(){}_ajaxSetup(){return{ignoreError:!0,silent:!0}}ajaxApi(e,t,n){if("function"!=typeof t)throw new TypeError("Expected a valid callback for parameter 'success'.");i.api(this,e,t,n)}}let d;t.init=function(e){l().init(e)},t.setContent=function(e,t,n){l().setContent(e,t,n)},t.ajaxApi=function(e,t,n){l().ajaxApi(e,t,n)},t.resetCache=function(e,t){l().resetCache(e,t)}})),define("WoltLabSuite/Core/Ui/User/Ignore",["require","exports","tslib","../../Dom/Change/Listener"],(function(e,t,n,i){"use strict";function o(){for(let e=0,t=a.length;e<t;e++){const t=a[e];s.has(t)||(t.addEventListener("click",r,{once:!0}),s.add(t))}}function r(e){e.preventDefault();const t=e.currentTarget;t.classList.remove("ignoredUserMessage"),s.delete(t),window.getSelection().removeAllRanges()}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importDefault(i);const a=document.getElementsByClassName("ignoredUserMessage"),s=new Set;t.init=function(){o(),i.default.add("WoltLabSuite/Core/Ui/User/Ignore",o)}})),define("WoltLabSuite/Core/Ui/Page/Header/Menu",["require","exports","tslib","../../../Environment","../../../Language","../../Screen"],(function(e,t,n,i,o,r){"use strict";function a(){f=!0,"safari"===i.browser()?window.setTimeout(c,1e3):window.requestAnimationFrame((()=>c()))}function s(){f=!1}function l(e){g=Math.min(g+e,0),m.style.setProperty("margin-left",`${g}px`,"")}function c(){if(!f)return;b=[],v=[];const e=h.clientWidth,t=h.scrollWidth;!p&&t>e&&(u=document.createElement("a"),u.className="mainMenuShowNext",u.href="#",u.innerHTML='<fa-icon size="32" name="angle-right" solid></fa-icon>',u.setAttribute("aria-hidden","true"),u.addEventListener("click",(e=>{e.preventDefault(),function(){if(v.length){const e=v.slice(0,3).pop();l(h.clientWidth-(e.offsetLeft+e.clientWidth)),h.lastElementChild===e&&u.classList.remove("active"),p.classList.add("active")}}()})),h.insertAdjacentElement("beforebegin",u),p=document.createElement("a"),p.className="mainMenuShowPrevious",p.href="#",p.innerHTML='<fa-icon size="32" name="angle-left" solid></fa-icon>',p.setAttribute("aria-hidden","true"),p.addEventListener("click",(e=>{e.preventDefault(),function(){if(b.length){const e=b.slice(-3)[0];l(-1*e.offsetLeft),h.firstElementChild===e&&p.classList.remove("active"),u.classList.add("active")}}()})),h.insertAdjacentElement("afterend",p)),(t>e||g<0)&&Array.from(h.children).forEach((t=>{const n=t.offsetLeft;n<0?b.push(t):n+t.clientWidth>e&&v.push(t)})),p?.classList[b.length?"add":"remove"]("active"),u?.classList[v.length?"add":"remove"]("active")}function d(){m.addEventListener("transitionend",c),window.addEventListener("resize",(()=>{m.style.setProperty("margin-left","0px",""),g=0,c()})),a(),h.querySelectorAll(".boxMenuHasChildren").forEach((e=>{const t=e.querySelector(".boxMenuLink");t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false");const n=document.createElement("button");n.type="button",n.className="visuallyHidden",n.setAttribute("aria-label",o.get("wcf.global.button.showMenu")),e.insertBefore(n,t.nextSibling);let i=!1;n.addEventListener("click",(()=>{i=!i,t.setAttribute("aria-expanded",i?"true":"false"),n.setAttribute("aria-label",o.get(i?"wcf.global.button.hideMenu":"wcf.global.button.showMenu"))}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r);let u,p,m,h,f=!1,g=0,b=[],v=[];t.init=function(){const e=document.querySelector(".mainMenu .boxMenu"),t=e&&e.childElementCount?e.children[0]:null;if(null===t)throw new Error("Unable to find the main menu.");h=e,m=t,r.on("screen-lg",{match:a,unmatch:s,setup:d})}})),define("WoltLabSuite/Core/User",["require","exports"],(function(e,t){"use strict";class n{userId;username;link;constructor(e,t,n){this.userId=e,this.username=t,this.link=n}}let i;return{getLink:()=>i.link,init(e,t,o){if(i)throw new Error("User has already been initialized.");i=new n(e,t,o)},get userId(){return i.userId},get username(){return i.username}}})),define("WoltLabSuite/Core/Ui/Message/UserConsent",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Change/Listener","../../Dom/Util","../../User"],(function(e,t,n,i,o,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importDefault(s);class l{enableAll=!1;knownButtons=new WeakSet;constructor(){"all"===window.sessionStorage.getItem(`${o.getStoragePrefix()}user-consent`)&&(this.enableAll=!0),this.registerEventListeners(),r.default.add("WoltLabSuite/Core/Ui/Message/UserConsent",(()=>this.registerEventListeners()))}registerEventListeners(){this.enableAll?this.enableAllExternalMedia():document.querySelectorAll(".jsButtonMessageUserConsentEnable").forEach((e=>{this.knownButtons.has(e)||(this.knownButtons.add(e),e.addEventListener("click",(e=>this.click(e))))}))}click(e){e.preventDefault(),this.enableAll=!0,this.enableAllExternalMedia(),s.default.userId?i.apiOnce({data:{actionName:"saveUserConsent",className:"wcf\\data\\user\\UserAction"},silent:!0}):window.sessionStorage.setItem(`${o.getStoragePrefix()}user-consent`,"all")}enableExternalMedia(e){if(e.dataset.target)document.getElementById(e.dataset.target).hidden=!1;else{const t=atob(e.dataset.payload);a.default.insertHtml(t,e,"before")}e.remove()}enableAllExternalMedia(){document.querySelectorAll(".messageUserConsent").forEach((e=>this.enableExternalMedia(e)))}}let c;t.init=function(){c||(c=new l)}})),define("WoltLabSuite/Core/Clipboard",["require","exports"],(function(e,t){"use strict";async function n(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);throw new Error("navigator.clipboard is not supported.")}Object.defineProperty(t,"__esModule",{value:!0}),t.copyElementTextToClipboard=t.copyTextToClipboard=void 0,t.copyTextToClipboard=n,t.copyElementTextToClipboard=async function(e){return n(e.textContent.replace(/\u200B/g,"").replace(/\u00A0/g," "))}})),define("WoltLabSuite/Core/Ui/Notification",["require","exports","../Helper/PageOverlay","../Language"],(function(e,t,n,i){"use strict";function o(){clearTimeout(s),a.classList.remove("active"),null!==c&&c(),l=!1}Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;let r,a,s,l=!1,c=null,d=!1;t.show=function(e,t,u){l||(l=!0,d||(d=!0,a=document.createElement("div"),a.id="systemNotification",r=document.createElement("p"),r.addEventListener("click",o),a.appendChild(r),(0,n.getPageOverlayContainer)().appendChild(a)),c="function"==typeof t?t:null,r.className=u||"success",r.textContent=(0,i.getPhrase)(e||"wcf.global.success"),a.classList.add("active"),s=setTimeout(o,2e3))}})),define("WoltLabSuite/Core/Ui/Message/Share/Providers",["require","exports"],(function(e,t){"use strict";function n(e){i.add(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getShareProviders=t.addShareProviders=t.addShareProvider=void 0;const i=new Set;t.addShareProvider=n,t.addShareProviders=function(e){e.forEach((e=>n(e)))},t.getShareProviders=function(){return i}})),define("WoltLabSuite/Core/Ui/Message/Share/Dialog",["require","exports","tslib","../../../Dom/Traverse","../../../Clipboard","../../Notification","../../../StringUtil","../../../Dom/Change/Listener","./Providers","../../../Component/Dialog","WoltLabSuite/Core/Language","../../../Event/Handler"],(function(e,t,n,i,o,r,a,s,l,c,d,u){"use strict";function p(e,t){return`\n    <dl>\n      <dt>${(0,d.getPhrase)(e)}</dt>\n      <dd>\n        <div class="inputAddon">\n          <input type="text" class="long" readonly value="${a.escapeHTML(t)}">\n          <button type="button" class="inputSuffix button jsTooltip shareDialogCopyButton" title="${(0,d.getPhrase)("wcf.message.share.copy")}">\n            <fa-icon name="copy"></fa-icon>\n          </button>\n        </div>\n      </dd>\n    </dl>\n  `}function m(e){e.preventDefault();const t=e.currentTarget,n=f(t);if(void 0===_){const e=function(){const e=Array.from((0,l.getShareProviders)()).map((e=>{const[t,n,i]=e;return`\n      <li>\n        <button type="button" class="button small messageShareProvider" title="${n}" aria-label="${n}" data-identifier="${t}">\n          ${i}\n          <span>${n}</span>\n        </button>\n      </li>\n    `})).join("\n");return e?`<ul class="inlineList">${e}</ul>`:""}();let s="";e&&(s=`\n        <dl class="messageShareButtons jsMessageShareButtons" data-url="${a.escapeHTML(n)}">\n          <dt>${(0,d.getPhrase)("wcf.message.share.socialMedia")}</dt>\n          <dd>${e}</dd>\n        </dl>\n      `);let m="";y&&(m=`\n        <dl>\n          <dt></dt>\n          <dd>\n              <button type="button" class="button shareDialogNativeButton" data-url="${a.escapeHTML(n)}" data-title="${a.escapeHTML(t.dataset.linkTitle||"")}">\n                ${(0,d.getPhrase)("wcf.message.share.nativeShare")}\n              </button>\n          </dd>\n        </dl>\n      `);const h=`\n      <div class="shareContentDialog">\n        ${function(e){let t=p("wcf.message.share.permalink",f(e));return function(e){const t={bbcodes:[]},n=new CustomEvent("share:bbcodes",{cancelable:!0,detail:t}),i=f(e);return e.dispatchEvent(n),n.defaultPrevented?t.bbcodes:e.dataset.bbcode?[["wcf.message.share.permalink.bbcode",e.dataset.bbcode]]:i&&e.dataset.linkTitle?[["wcf.message.share.permalink.bbcode",`[url='${i}']${e.dataset.linkTitle}[/url]`]]:[]}(e).forEach((([e,n])=>{t+=p(e,n)})),function(e){const t={permalinkHtml:[]},n=new CustomEvent("share:permalink-html",{cancelable:!0,detail:t}),i=f(e);return e.dispatchEvent(n),n.defaultPrevented?t.permalinkHtml:i&&e.dataset.linkTitle?[["wcf.message.share.permalink.html",`<a href="${a.escapeHTML(i)}">${a.escapeHTML(e.dataset.linkTitle)}</a>`]]:[]}(e).forEach((([e,n])=>{t+=p(e,n)})),t}(t)}\n        ${s}\n        ${m}\n      </div>\n    `;_=(0,c.dialogFactory)().fromHtml(h).withoutControls(),_.content.querySelectorAll(".shareDialogCopyButton").forEach((e=>e.addEventListener("click",(e=>async function(e){e.preventDefault();const t=e.currentTarget,n=i.prevBySel(t,'input[type="text"]');await o.copyTextToClipboard(n.value),r.show((0,d.getPhrase)("wcf.message.share.copy.success"))}(e))))),y&&_.content.querySelector(".shareDialogNativeButton").addEventListener("click",(e=>async function(e){e.preventDefault();const t=e.currentTarget,n={url:t.dataset.url};t.dataset.title&&(n.title=t.dataset.title),await window.navigator.share(n)}(e))),e&&function(e,t){const n={facebook:{selector:'.messageShareProvider[data-identifier="Facebook"]',share(){g("facebook","https://www.facebook.com/sharer.php?u={pageURL}&t={text}",!0,t)}},reddit:{selector:'.messageShareProvider[data-identifier="Reddit"]',share(){g("reddit","https://ssl.reddit.com/submit?url={pageURL}",!1,t)}},twitter:{selector:'.messageShareProvider[data-identifier="Twitter"]',share(){g("twitter","https://twitter.com/share?url={pageURL}&text={text}",!1,t)}},linkedIn:{selector:'.messageShareProvider[data-identifier="LinkedIn"]',share(){g("linkedIn","https://www.linkedin.com/cws/share?url={pageURL}",!1,t)}},pinterest:{selector:'.messageShareProvider[data-identifier="Pinterest"]',share(){g("pinterest","https://www.pinterest.com/pin/create/link/?url={pageURL}&description={text}",!1,t)}},xing:{selector:'.messageShareProvider[data-identifier="XING"]',share(){g("xing","https://www.xing.com/social_plugins/share?url={pageURL}",!1,t)}},whatsApp:{selector:'.messageShareProvider[data-identifier="WhatsApp"]',share(){window.location.href="https://api.whatsapp.com/send?text="+b()+"%20"+t}}};u.fire("com.woltlab.wcf.message.share","shareProvider",{container:e,providers:n,pageDescription:b(),pageUrl:t}),Object.values(n).forEach((t=>{e.querySelector(t.selector)?.addEventListener("click",(()=>t.share()))}))}(_.content,n)}_.show((0,d.getPhrase)("wcf.message.share"))}function h(){document.querySelectorAll(".shareButton, .wsShareButton").forEach((e=>{v.has(e)||(e.addEventListener("click",(e=>m(e))),v.add(e))}))}function f(e){return e instanceof HTMLAnchorElement?e.href:e.dataset.link}function g(e,t,n,i){window.open(t.replace("{pageURL}",i).replace("{text}",b()+(n?`%20${i}`:"")),e,"height=600,width=600")}function b(){const e=document.querySelector('meta[property="og:title"]');return null!==e?encodeURIComponent(e.content):""}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importDefault(s),u=n.__importStar(u);const v=new WeakSet,y=void 0!==window.navigator.share;let _;t.setup=function(){h(),s.default.add("WoltLabSuite/Core/Ui/Message/Share/Dialog",(()=>h()))}})),define("WoltLabSuite/Core/Ui/Feed/Dialog",["require","exports","tslib","../Dialog","../../StringUtil","../../Language","../../Clipboard","../Notification"],(function(e,t,n,i,o,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),t.setup=function(){document.querySelectorAll("a.rssFeed").forEach((e=>{e.addEventListener("click",(e=>function(e){e.preventDefault();const t=e.currentTarget,n=t.href,l=n.replace(/(\\?|&)at=[^&]*&?/,"$1").replace(/(\?|&)$/,"");i.default.openStatic("feedLinkDialog",`\n<p class="info">${r.get("wcf.global.rss.accessToken.info")}</p>\n<dl>\n  <dt>${r.get("wcf.global.rss.withoutAccessToken")}</dt>\n  <dd>\n    <div class="inputAddon">\n      <input type="text" class="long" readonly value="${o.escapeHTML(l)}">\n      <button type="button" class="inputSuffix button jsTooltip feedLinkDialogCopyButton" title="${r.get("wcf.global.rss.copy")}">\n        <fa-icon name="copy"></fa-icon>\n      </button>\n    </div>\n  </dd>\n</dl>\n<dl>\n  <dt>${r.get("wcf.global.rss.withAccessToken")}</dt>\n  <dd>\n    <div class="inputAddon">\n      <input type="text" class="long" readonly value="${o.escapeHTML(n)}">\n      <button type="button" class="inputSuffix button jsTooltip feedLinkDialogCopyButton" title="${r.get("wcf.global.rss.copy")}">\n        <fa-icon name="copy"></fa-icon>\n      </a>\n    </div>\n  </dd>\n</dl>\n`,{onShow(e){e.querySelectorAll(".feedLinkDialogCopyButton").forEach((e=>e.addEventListener("click",(e=>async function(e){e.preventDefault();const t=e.currentTarget.parentNode.querySelector('input[type="text"]');await a.copyTextToClipboard(t.value),s.show(r.get("wcf.global.rss.copy.success"))}(e)))))},title:t.title||r.get("wcf.global.button.rss")})}(e)))}))}})),define("WoltLabSuite/Core/Ui/Page/Menu/Main/Frontend",["require","exports"],(function(e,t){"use strict";function n(e,t){const i=e.querySelector(".boxMenuLink"),o=i.querySelector(".boxMenuLinkTitle").textContent;let r=0;const a=i.querySelector(".boxMenuLinkOutstandingItems");a&&(r=parseInt(a.textContent.replace(/[^0-9]/,""),10));const s=e.querySelector("ol");let l=[];if(s instanceof HTMLOListElement){let e=t;e<3&&(e=t+1),l=Array.from(s.children).map((t=>n(t,e)))}const c=i.getAttribute("href");let d,u;return c&&"#"!==c&&(d=i.href,"_blank"===i.target&&(u=!0)),{active:e.classList.contains("active"),children:l,counter:r,depth:t,identifier:i.parentElement.dataset.identifier,link:d,openInNewWindow:u,title:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.UiPageMenuMainFrontend=void 0;class i{getMenuItems(e){return Array.from(e.children).map((e=>n(e,0)))}}t.UiPageMenuMainFrontend=i,t.default=i})),define("WoltLabSuite/Core/BootstrapFrontend",["require","exports","tslib","./BackgroundQueue","./Bootstrap","./Controller/Popover","./Ui/User/Ignore","./Ui/Page/Header/Menu","./Ui/Message/UserConsent","./Ui/Message/Share/Dialog","./Ui/Message/Share/Providers","./Ui/Feed/Dialog","./User","./Ui/Page/Menu/Main/Frontend","./LazyLoader","./Ajax/Backend"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importStar(c),u=n.__importStar(u),p=n.__importDefault(p),m=n.__importDefault(m),t.setup=function(t){t.backgroundQueue.url=window.WSC_API_URL+t.backgroundQueue.url.substr(window.WCF_PATH.length),o.setup({dynamicColorScheme:t.dynamicColorScheme,enableMobileMenu:!0,pageMenuMainProvider:new m.default}),s.init(),t.styleChanger&&new Promise(((t,n)=>{e(["./Controller/Style/Changer"],t,n)})).then(n.__importStar).then((e=>{e.setup()})),t.enableUserPopover&&(r.init({className:"userLink",dboAction:"wcf\\data\\user\\UserProfileAction",identifier:"com.woltlab.wcf.user"}),r.init({attributeName:"data-user-id",className:"userLink",dboAction:"wcf\\data\\user\\UserProfileAction",identifier:"com.woltlab.wcf.user.deprecated"})),void 0!==t.executeCronjobs&&(0,f.prepareRequest)(t.executeCronjobs).get().disableLoadingIndicator().fetchAsResponse().catch((()=>{})),i.setUrl(t.backgroundQueue.url),(Math.random()<.1||t.backgroundQueue.force)&&i.invoke(),a.init(),l.init(),t.shareButtonProviders&&(0,d.addShareProviders)(t.shareButtonProviders),c.setup(),p.default.userId&&u.setup(),(0,h.whenFirstSeen)("woltlab-core-reaction-summary",(()=>{new Promise(((t,n)=>{e(["./Ui/Reaction/SummaryDetails"],t,n)})).then(n.__importStar).then((({setup:e})=>e()))})),(0,h.whenFirstSeen)("woltlab-core-comment",(()=>{new Promise(((t,n)=>{e(["./Component/Comment/woltlab-core-comment"],t,n)})).then(n.__importStar)})),(0,h.whenFirstSeen)("woltlab-core-comment-response",(()=>{new Promise(((t,n)=>{e(["./Component/Comment/Response/woltlab-core-comment-response"],t,n)})).then(n.__importStar)}))}})),define("WoltLabSuite/Core/ColorUtil",["require","exports"],(function(e,t){"use strict";function n(e,t,n){if(e>359)throw new TypeError("Hue cannot be larger than 359°");t/=100,n/=100;const i=(1-Math.abs(2*n-1))*t,o=i*(1-Math.abs(e/60%2-1)),r=n-i/2,[a,s,l]=0<=e&&e<60&&[i,o,0]||60<=e&&e<120&&[o,i,0]||120<=e&&e<180&&[0,i,o]||180<=e&&e<240&&[0,o,i]||240<=e&&e<300&&[o,0,i]||300<=e&&e<360&&[i,0,o];return{r:Math.round(255*(a+r)),g:Math.round(255*(s+r)),b:Math.round(255*(l+r))}}function i(e,t,n){const i={r:0,g:0,b:0},o=Math.floor(e/60),r=e/60-o,a=(n/=100)*(1-(t/=100)),s=n*(1-t*r),l=n*(1-t*(1-r));if(0==t)i.r=i.g=i.b=n;else switch(o){case 1:i.r=s,i.g=n,i.b=a;break;case 2:i.r=a,i.g=n,i.b=l;break;case 3:i.r=a,i.g=s,i.b=n;break;case 4:i.r=l,i.g=a,i.b=n;break;case 5:i.r=n,i.g=a,i.b=s;break;case 0:case 6:i.r=n,i.g=l,i.b=a}return{r:Math.round(255*i.r),g:Math.round(255*i.g),b:Math.round(255*i.b)}}function o(e,t,n){let i,o;e/=255,t/=255,n/=255;const r=Math.max(e,t,n),a=Math.min(e,t,n),s=r-a;if(i=0,r!==a){switch(r){case e:i=(t-n)/s*60;break;case t:i=60*(2+(n-e)/s);break;case n:i=60*(4+(e-t)/s)}i<0&&(i+=360)}const l=(r+a)/2;return o=0===r?0:s/(1-Math.abs(2*l-1)),{h:Math.round(i),s:Math.round(100*o),l:Math.round(100*l)}}function r(e,t,n){let i,o;e/=255,t/=255,n/=255;const r=Math.max(Math.max(e,t),n),a=Math.min(Math.min(e,t),n),s=r-a;if(i=0,r!==a){switch(r){case e:i=(t-n)/s*60;break;case t:i=60*(2+(n-e)/s);break;case n:i=60*(4+(e-t)/s)}i<0&&(i+=360)}return o=0===r?0:s/r,{h:Math.round(i),s:Math.round(100*o),v:Math.round(100*r)}}function a(e){if(/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)){const t=e.split("");return"#"===t[0]&&t.shift(),3===t.length?{r:parseInt(t[0]+""+t[0],16),g:parseInt(t[1]+""+t[1],16),b:parseInt(t[2]+""+t[2],16)}:{r:parseInt(t[0]+""+t[1],16),g:parseInt(t[2]+""+t[3],16),b:parseInt(t[4]+""+t[5],16)}}return Number.NaN}function s(e){if(e<0||e>255)throw new Error(`Invalid RGB component value '${e}' given.`);return e.toString(16).padStart(2,"0").toUpperCase()}function l(e,t,n){if(void 0===t){const i=/^rgba?\((\d+), ?(\d+), ?(\d+)(?:, ?[0-9.]+)?\)$/.exec(e.toString());if(!i)throw new Error("Invalid RGB data given.");e=+i[1],t=+i[2],n=+i[3]}return s(e)+s(t)+s(n)}function c(e){if(e<0||e>1)throw new Error(`Invalid alpha value '${e}' given.`);return Math.round(255*e).toString(16).padStart(2,"0").toUpperCase()}function d(e,t,n,i){if(void 0===t){const t=e;return l(t.r,t.g,t.b)+c(t.a)}return l(e,t,n)+c(i)}function u(e){return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}function p(){let e=document.getElementById("jsColorUtilColorChecker");return null===e&&(e=document.createElement("span"),e.id="jsColorUtilColorChecker",document.body.appendChild(e)),e}function m(e){const t=p();return t.style.color="",t.style.color=e,""!==t.style.color}function h(e){if(!m(e))throw new Error(`Given string '${e}' is no valid color.`);const t=p();t.style.color=e;const n=window.getComputedStyle(t).color,i=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/.exec(n);if(i)return{r:+i[1],g:+i[2],b:+i[3],a:1};{const e=/^rgba\((\d+), ?(\d+), ?(\d+), ?([0-9.]+)\)$/.exec(n);if(e)return{r:+e[1],g:+e[2],b:+e[3],a:+e[4]}}throw new Error(`Cannot process color '${e}'.`)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringToRgba=t.isValidColor=t.rgbaToString=t.rgbaToHex=t.rgbToHex=t.hexToRgb=t.rgbToHsv=t.rgbToHsl=t.hsvToRgb=t.hslToRgb=void 0,t.hslToRgb=n,t.hsvToRgb=i,t.rgbToHsl=o,t.rgbToHsv=r,t.hexToRgb=a,t.rgbToHex=l,t.rgbaToHex=d,t.rgbaToString=u,t.isValidColor=m,t.stringToRgba=h,window.__wcf_bc_colorUtil={hexToRgb:a,hslToRgb:n,hsvToRgb:i,isValidColor:m,rgbaToHex:d,rgbaToString:u,rgbToHex:l,rgbToHsv:r,rgbToHsl:o,stringToRgba:h}})),define("WoltLabSuite/Core/Dictionary",["require","exports"],(function(e,t){"use strict";class n{_dictionary=new Map;set(e,t){this._dictionary.set(e.toString(),t)}delete(e){return this._dictionary.delete(e.toString())}has(e){return this._dictionary.has(e.toString())}get(e){return this._dictionary.get(e.toString())}forEach(e){if("function"!=typeof e)throw new TypeError("forEach() expects a callback as first parameter.");this._dictionary.forEach(e)}merge(...e){for(let t=0,n=e.length;t<n;t++)e[t].forEach(((e,t)=>this.set(t,e)))}toObject(){const e={};return this._dictionary.forEach(((t,n)=>e[n]=t)),e}static fromObject(e){const t=new n;return Object.keys(e).forEach((n=>{t.set(n,e[n])})),t}get size(){return this._dictionary.size}}return n})),define("WoltLabSuite/Core/FileUtil",["require","exports","tslib","./StringUtil"],(function(e,t,n,i){"use strict";function o(e){return a.has(e)?"."+a.get(e):""}Object.defineProperty(t,"__esModule",{value:!0}),t.blobToFile=t.getExtensionByMimeType=t.getIconNameByFilename=t.formatFilesize=void 0,i=n.__importStar(i);const r=new Map(Object.entries({zip:"zipper",rar:"zipper",tar:"zipper",gz:"zipper",mp3:"audio",ogg:"audio",wav:"audio",php:"code",html:"code",htm:"code",tpl:"code",js:"code",xls:"excel",ods:"excel",xlsx:"excel",gif:"image",jpg:"image",jpeg:"image",png:"image",bmp:"image",webp:"image",avi:"video",wmv:"video",mov:"video",mp4:"video",mpg:"video",mpeg:"video",flv:"video",pdf:"pdf",ppt:"powerpoint",pptx:"powerpoint",txt:"lines",doc:"word",docx:"word",odt:"word"})),a=new Map(Object.entries({"application/zip":"zip","application/x-zip-compressed":"zip","application/rar":"rar","application/vnd.rar":"rar","application/x-rar-compressed":"rar","application/x-tar":"tar","application/x-gzip":"gz","application/gzip":"gz","audio/mpeg":"mp3","audio/mp3":"mp3","audio/ogg":"ogg","audio/x-wav":"wav","application/x-php":"php","text/html":"html","application/javascript":"js","application/vnd.ms-excel":"xls","application/vnd.oasis.opendocument.spreadsheet":"ods","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","image/gif":"gif","image/jpeg":"jpg","image/png":"png","image/x-ms-bmp":"bmp","image/bmp":"bmp","image/webp":"webp","video/x-msvideo":"avi","video/x-ms-wmv":"wmv","video/quicktime":"mov","video/mp4":"mp4","video/mpeg":"mpg","video/x-flv":"flv","application/pdf":"pdf","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","text/plain":"txt","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.oasis.opendocument.text":"odt","public.jpeg":"jpeg","public.png":"png","com.compuserve.gif":"gif","org.webmproject.webp":"webp"}));t.formatFilesize=function(e,t=2){let n="Byte";return e>=1e3&&(e/=1e3,n="kB"),e>=1e3&&(e/=1e3,n="MB"),e>=1e3&&(e/=1e3,n="GB"),e>=1e3&&(e/=1e3,n="TB"),i.formatNumeric(e,-t)+" "+n},t.getIconNameByFilename=function(e){const t=e.lastIndexOf(".");if(-1!==t){const n=e.substr(t+1);if(r.has(n))return r.get(n)}return""},t.getExtensionByMimeType=o,t.blobToFile=function(e,t){const n=o(e.type);return new File([e],t+n,{type:e.type})}})),define("WoltLabSuite/Core/List",["require","exports"],(function(e,t){"use strict";return class{_set=new Set;add(e){this._set.add(e)}clear(){this._set.clear()}delete(e){return this._set.delete(e)}forEach(e){this._set.forEach(e)}has(e){return this._set.has(e)}get size(){return this._set.size}}})),define("WoltLabSuite/Core/NumberUtil",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.round=void 0,t.round=function(e,t){if(void 0===t||0==+t)return Math.round(e);if(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!=0)return NaN;let n=e.toString().split("e"),i=n[1]?+n[1]-t:-t;return n=(e=Math.round(+`${n[0]}e${i}`)).toString().split("e"),i=n[1]?+n[1]+t:t,+`${n[0]}e${i}`}})),define("WoltLabSuite/Core/ObjectMap",["require","exports"],(function(e,t){"use strict";return class{_map=new WeakMap;set(e,t){if("object"!=typeof e||null===e)throw new TypeError("Only objects can be used as key");if("object"!=typeof t||null===t)throw new TypeError("Only objects can be used as value");this._map.set(e,t)}delete(e){this._map.delete(e)}has(e){return this._map.has(e)}get(e){return this._map.get(e)}}})),define("WoltLabSuite/Core/Permission",["require","exports"],(function(e,t){"use strict";function n(e,t){if("boolean"!=typeof t)throw new TypeError("The permission value has to be boolean.");i.set(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.addObject=t.add=void 0;const i=new Map;t.add=n,t.addObject=function(e){Object.keys(e).forEach((t=>n(t,e[t])))},t.get=function(e){return!!i.has(e)&&i.get(e)}})),_self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(e){function t(e,t,n,i){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length}function n(e,t,n,i){var o,r;return e.lastIndex=t,(o=e.exec(n))&&i&&o[1]&&(r=o[1].length,o.index+=r,o[0]=o[0].slice(r)),o}function i(e,o,s,l,c,d){var u,p,h,f,g,b,v,y,_,w,E,S,C,L,k,x,M,I,T,D,A,P,j,O,q;for(u in s)if(s.hasOwnProperty(u)&&s[u])for(p=s[u],p=Array.isArray(p)?p:[p],h=0;h<p.length;++h){if(d&&d.cause==u+","+h)return;for(g=(f=p[h]).inside,b=!!f.lookbehind,v=!!f.greedy,y=f.alias,v&&!f.pattern.global&&(_=f.pattern.toString().match(/[imsuy]*$/)[0],f.pattern=RegExp(f.pattern.source,_+"g")),w=f.pattern||f,E=l.next,S=c;E!==o.tail&&!(d&&S>=d.reach);S+=E.value.length,E=E.next){if(C=E.value,o.length>e.length)return;if(!(C instanceof t)){if(L=1,v){if(!(k=n(w,S,e,b))||k.index>=e.length)break;for(x=k.index,M=k.index+k[0].length,I=S,I+=E.value.length;x>=I;)I+=(E=E.next).value.length;if(S=I-=E.value.length,E.value instanceof t)continue;for(T=E;T!==o.tail&&(I<M||"string"==typeof T.value);T=T.next)L++,I+=T.value.length;L--,C=e.slice(S,I),k.index-=S}else if(!(k=n(w,0,C,b)))continue;x=k.index,D=k[0],A=C.slice(0,x),P=C.slice(x+D.length),j=S+C.length,d&&j>d.reach&&(d.reach=j),O=E.prev,A&&(O=r(o,O,A),S+=A.length),a(o,O,L),E=r(o,O,new t(u,g?m.tokenize(D,g):D,y,D)),P&&r(o,E,P),L>1&&(q={cause:u+","+h,reach:j},i(e,o,s,E.prev,S,q),d&&q.reach>d.reach&&(d.reach=q.reach))}}}}function o(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function r(e,t,n){var i=t.next,o={value:n,prev:t,next:i};return t.next=o,i.prev=o,e.length++,o}function a(e,t,n){var i,o=t.next;for(i=0;i<n&&o!==e.tail;i++)o=o.next;t.next=o,o.prev=t,e.length-=i}function s(){m.manual||m.highlightAll()}var l,c,d=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,u=0,p={},m={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(n){return n instanceof t?new t(n.type,e(n.content),n.alias):Array.isArray(n)?n.map(e):n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++u}),e.__id},clone:function e(t,n){var i,o,r;switch(n=n||{},m.util.type(t)){case"Object":if(o=m.util.objId(t),n[o])return n[o];for(r in i={},n[o]=i,t)t.hasOwnProperty(r)&&(i[r]=e(t[r],n));return i;case"Array":return o=m.util.objId(t),n[o]?n[o]:(i=[],n[o]=i,t.forEach((function(t,o){i[o]=e(t,n)})),i);default:return t}},getLanguage:function(e){for(;e;){var t=d.exec(e.className);if(t)return t[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,t){e.className=e.className.replace(RegExp(d,"gi"),""),e.classList.add("language-"+t)},currentScript:function(){var e,t,n;if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(i){if(e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(i.stack)||[])[1])for(n in t=document.getElementsByTagName("script"))if(t[n].src==e)return t[n];return null}},isActive:function(e,t,n){for(var i,o="no-"+t;e;){if((i=e.classList).contains(t))return!0;if(i.contains(o))return!1;e=e.parentElement}return!!n}},languages:{plain:p,plaintext:p,text:p,txt:p,extend:function(e,t){var n,i=m.util.clone(m.languages[e]);for(n in t)i[n]=t[n];return i},insertBefore:function(e,t,n,i){var o,r,a,s,l;for(a in o=(i=i||m.languages)[e],r={},o)if(o.hasOwnProperty(a)){if(a==t)for(s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);n.hasOwnProperty(a)||(r[a]=o[a])}return l=i[e],i[e]=r,m.languages.DFS(m.languages,(function(t,n){n===l&&t!=e&&(this[t]=r)})),r},DFS:function e(t,n,i,o){var r,a,s,l;for(a in o=o||{},r=m.util.objId,t)t.hasOwnProperty(a)&&(n.call(t,a,t[a],i||a),s=t[a],"Object"!==(l=m.util.type(s))||o[r(s)]?"Array"!==l||o[r(s)]||(o[r(s)]=!0,e(s,n,a,o)):(o[r(s)]=!0,e(s,n,null,o)))}},plugins:{},highlightAll:function(e,t){m.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var i,o,r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};for(m.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),m.hooks.run("before-all-elements-highlight",r),i=0;o=r.elements[i++];)m.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,i){function o(e){s.highlightedCode=e,m.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,m.hooks.run("after-highlight",s),m.hooks.run("complete",s),i&&i.call(s.element)}var r,a,s,l,c=m.util.getLanguage(t),d=m.languages[c];if(m.util.setLanguage(t,c),(r=t.parentElement)&&"pre"===r.nodeName.toLowerCase()&&m.util.setLanguage(r,c),a=t.textContent,s={element:t,language:c,grammar:d,code:a},m.hooks.run("before-sanity-check",s),(r=s.element.parentElement)&&"pre"===r.nodeName.toLowerCase()&&!r.hasAttribute("tabindex")&&r.setAttribute("tabindex","0"),!s.code)return m.hooks.run("complete",s),void(i&&i.call(s.element));m.hooks.run("before-highlight",s),s.grammar?n&&e.Worker?((l=new Worker(m.filename)).onmessage=function(e){o(e.data)},l.postMessage(JSON.stringify({language:s.language,code:s.code,immediateClose:!0}))):o(m.highlight(s.code,s.grammar,s.language)):o(m.util.encode(s.code))},highlight:function(e,n,i){var o={code:e,grammar:n,language:i};if(m.hooks.run("before-tokenize",o),!o.grammar)throw new Error('The language "'+o.language+'" has no grammar.');return o.tokens=m.tokenize(o.code,o.grammar),m.hooks.run("after-tokenize",o),t.stringify(m.util.encode(o.tokens),o.language)},tokenize:function(e,t){var n,a,s=t.rest;if(s){for(n in s)t[n]=s[n];delete t.rest}return r(a=new o,a.head,e),i(e,a,t,a.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(a)},hooks:{all:{},add:function(e,t){var n=m.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n,i,o=m.hooks.all[e];if(o&&o.length)for(n=0;i=o[n++];)i(t)}},Token:t};return e.Prism=m,t.stringify=function e(t,n){var i,o,r,a,s;if("string"==typeof t)return t;if(Array.isArray(t))return i="",t.forEach((function(t){i+=e(t,n)})),i;for(s in o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},(r=t.alias)&&(Array.isArray(r)?Array.prototype.push.apply(o.classes,r):o.classes.push(r)),m.hooks.run("wrap",o),a="",o.attributes)a+=" "+s+'="'+(o.attributes[s]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+a+">"+o.content+"</"+o.tag+">"},e.document?((l=m.util.currentScript())&&(m.filename=l.src,l.hasAttribute("data-manual")&&(m.manual=!0)),m.manual||("loading"===(c=document.readyState)||"interactive"===c&&l&&l.defer?document.addEventListener("DOMContentLoaded",s):window.requestAnimationFrame?window.requestAnimationFrame(s):window.setTimeout(s,16)),m):e.addEventListener?(m.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),i=n.language,o=n.code,r=n.immediateClose;e.postMessage(m.highlight(o,m.languages[i],i)),r&&e.close()}),!1),m):m}(_self),"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),define("prism/prism",(function(){})),window.Prism=window.Prism||{},window.Prism.manual=!0,define("WoltLabSuite/Core/Prism",["prism/prism"],(function(){return window.Prism.hooks.add("wrap",(e=>{e.classes=e.classes.map((e=>`prism-${e}`))})),Prism})),define("WoltLabSuite/Core/Template",["require","exports"],(function(e,t){"use strict";return window.WoltLabTemplate})),define("WoltLabSuite/Core/Upload",["require","exports","tslib","./Ajax/Request","./Core","./Dom/Change/Listener","./Language"],(function(e,t,n,i,o,r,a){"use strict";return i=n.__importDefault(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a),class{_button=document.createElement("p");_buttonContainer;_fileElements=[];_fileUpload=document.createElement("input");_internalFileId=0;_multiFileUploadIds=[];_options;_target;constructor(e,t,n){if(!(n=n||{}).className)throw new Error("Missing class name.");this._options=o.extend({action:"upload",multiple:!1,acceptableFiles:null,name:"__files[]",singleFileRequests:!1,url:`index.php?ajax-upload/&t=${o.getXsrfToken()}`},n),this._options.url=o.convertLegacyUrl(this._options.url),0===this._options.url.indexOf("index.php")&&(this._options.url=window.WSC_API_URL+this._options.url);const i=document.getElementById(e);if(null===i)throw new Error(`Element id '${e}' is unknown.`);this._buttonContainer=i;const r=document.getElementById(t);if(null===r)throw new Error(`Element id '${t}' is unknown.`);if(this._target=r,n.multiple&&"UL"!==this._target.nodeName&&"OL"!==this._target.nodeName&&"TBODY"!==this._target.nodeName)throw new Error("Target element has to be list or table body if uploading multiple files is supported.");this._createButton()}_createButton(){this._fileUpload=document.createElement("input"),this._fileUpload.type="file",this._fileUpload.name=this._options.name,this._options.multiple&&(this._fileUpload.multiple=!0),null!==this._options.acceptableFiles&&(this._fileUpload.accept=this._options.acceptableFiles.join(",")),this._fileUpload.addEventListener("change",(e=>this._upload(e))),this._button=document.createElement("p"),this._button.className="button uploadButton",this._button.setAttribute("role","button"),this._fileUpload.addEventListener("focus",(()=>{this._fileUpload.matches(":focus-visible")&&this._button.classList.add("active")})),this._fileUpload.addEventListener("blur",(()=>{this._button.classList.remove("active")}));const e=document.createElement("span");e.textContent=a.get("wcf.global.button.upload"),this._button.appendChild(e),this._button.insertAdjacentElement("afterbegin",this._fileUpload),this._insertButton(),r.default.trigger()}_createFileElement(e){const t=document.createElement("progress");let n;switch(t.max=100,this._target.nodeName){case"OL":case"UL":return n=document.createElement("li"),n.innerText=e.name,n.appendChild(t),this._target.appendChild(n),n;case"TBODY":return this._createFileTableRow(e);default:return n=document.createElement("p"),n.appendChild(t),this._target.appendChild(n),n}}_createFileElements(e){if(!e.length)return null;const t=[];Array.from(e).forEach((e=>{const n=this._createFileElement(e);n.classList.contains("uploadFailed")||(n.dataset.filename=e.name,n.dataset.internalFileId=(this._internalFileId++).toString(),t.push(n))}));const n=this._fileElements.length;return this._fileElements.push(t),r.default.trigger(),n}_createFileTableRow(e){throw new Error("Has to be implemented in subclass.")}_failure(e,t,n,i,o){return!0}_getParameters(){return{}}_getFormData(){return{}}_insertButton(){this._buttonContainer.insertAdjacentElement("afterbegin",this._button)}_progress(e,t){const n=Math.round(t.loaded/t.total*100);this._fileElements[e].forEach((e=>{const t=e.querySelector("progress");t&&(t.value=n)}))}_removeButton(){this._button.remove(),r.default.trigger()}_success(e,t,n,i,o){}_upload(e,t,n){this._target.querySelectorAll(".uploadFailed").forEach((e=>e.remove()));let i=null,o=[];if(t)o.push(t);else if(n){let e="";switch(n.type){case"image/jpeg":e="jpg";break;case"image/gif":e="gif";break;case"image/png":e="png";break;case"image/webp":e="webp"}o.push({name:`pasted-from-clipboard.${e}`})}else o=Array.from(this._fileUpload.files);return o.length&&this.validateUpload(o)&&(this._options.singleFileRequests?(i=[],o.forEach((e=>{const t=this._uploadFiles([e],n);1!==o.length&&this._multiFileUploadIds.push(t),i.push(t)}))):i=this._uploadFiles(o,n)),this._removeButton(),this._createButton(),i}validateUpload(e){return!0}_uploadFiles(e,t){function n(e,t){null!==e&&(t=t||"",Object.entries(e).forEach((([e,i])=>{if("object"==typeof i)n(i,0===t.length?e:`${t}[${e}]`);else{const n=0===t.length?e:`${t}[${e}]`;r.append(n,i)}})))}const o=this._createFileElements(e);if(!this._fileElements[o].length)return null;const r=new FormData;for(let n=0,i=e.length;n<i;n++)if(this._fileElements[o][n]){const i=this._fileElements[o][n].dataset.internalFileId;t?r.append(`__files[${i}]`,t,e[n].name):r.append(`__files[${i}]`,e[n])}return r.append("actionName",this._options.action),r.append("className",this._options.className),"upload"===this._options.action&&r.append("interfaceName","wcf\\data\\IUploadAction"),n(this._getParameters(),"parameters"),n(this._getFormData()),new i.default({data:r,contentType:!1,failure:this._failure.bind(this,o),silent:!0,success:this._success.bind(this,o),uploadProgress:this._progress.bind(this,o),url:this._options.url,withCredentials:!0}).sendRequest(),o}hasPendingUploads(){return void 0!==this._fileElements.find((e=>e.find((e=>null!==e.querySelector("progress")))))}uploadBlob(e){return this._upload(null,null,e)}uploadFile(e){return this._upload(null,e)}}})),define("WoltLabSuite/Core/prism-meta",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={markup:{title:"Markup",file:"markup"},html:{title:"HTML",file:"markup"},xml:{title:"XML",file:"markup"},svg:{title:"SVG",file:"markup"},mathml:{title:"MathML",file:"markup"},ssml:{title:"SSML",file:"markup"},atom:{title:"Atom",file:"markup"},rss:{title:"RSS",file:"markup"},css:{title:"CSS",file:"css"},clike:{title:"C-like",file:"clike"},javascript:{title:"JavaScript",file:"javascript"},abap:{title:"ABAP",file:"abap"},abnf:{title:"ABNF",file:"abnf"},actionscript:{title:"ActionScript",file:"actionscript"},ada:{title:"Ada",file:"ada"},agda:{title:"Agda",file:"agda"},al:{title:"AL",file:"al"},antlr4:{title:"ANTLR4",file:"antlr4"},apacheconf:{title:"Apache Configuration",file:"apacheconf"},apex:{title:"Apex",file:"apex"},apl:{title:"APL",file:"apl"},applescript:{title:"AppleScript",file:"applescript"},aql:{title:"AQL",file:"aql"},arduino:{title:"Arduino",file:"arduino"},arff:{title:"ARFF",file:"arff"},armasm:{title:"ARM Assembly",file:"armasm"},arturo:{title:"Arturo",file:"arturo"},asciidoc:{title:"AsciiDoc",file:"asciidoc"},aspnet:{title:"ASP.NET (C#)",file:"aspnet"},asm6502:{title:"6502 Assembly",file:"asm6502"},asmatmel:{title:"Atmel AVR Assembly",file:"asmatmel"},autohotkey:{title:"AutoHotkey",file:"autohotkey"},autoit:{title:"AutoIt",file:"autoit"},avisynth:{title:"AviSynth",file:"avisynth"},"avro-idl":{title:"Avro IDL",file:"avro-idl"},awk:{title:"AWK",file:"awk"},bash:{title:"Bash",file:"bash"},sh:{title:"Shell",file:"bash"},shell:{title:"Shell",file:"bash"},basic:{title:"BASIC",file:"basic"},batch:{title:"Batch",file:"batch"},bbcode:{title:"BBcode",file:"bbcode"},bbj:{title:"BBj",file:"bbj"},bicep:{title:"Bicep",file:"bicep"},birb:{title:"Birb",file:"birb"},bison:{title:"Bison",file:"bison"},bnf:{title:"BNF",file:"bnf"},bqn:{title:"BQN",file:"bqn"},brainfuck:{title:"Brainfuck",file:"brainfuck"},brightscript:{title:"BrightScript",file:"brightscript"},bro:{title:"Bro",file:"bro"},bsl:{title:"BSL (1C:Enterprise)",file:"bsl"},c:{title:"C",file:"c"},csharp:{title:"C#",file:"csharp"},cpp:{title:"C++",file:"cpp"},cfscript:{title:"CFScript",file:"cfscript"},chaiscript:{title:"ChaiScript",file:"chaiscript"},cil:{title:"CIL",file:"cil"},cilkc:{title:"Cilk/C",file:"cilkc"},cilkcpp:{title:"Cilk/C++",file:"cilkcpp"},clojure:{title:"Clojure",file:"clojure"},cmake:{title:"CMake",file:"cmake"},cobol:{title:"COBOL",file:"cobol"},coffeescript:{title:"CoffeeScript",file:"coffeescript"},concurnas:{title:"Concurnas",file:"concurnas"},csp:{title:"Content-Security-Policy",file:"csp"},cooklang:{title:"Cooklang",file:"cooklang"},coq:{title:"Coq",file:"coq"},crystal:{title:"Crystal",file:"crystal"},"css-extras":{title:"CSS Extras",file:"css-extras"},csv:{title:"CSV",file:"csv"},cue:{title:"CUE",file:"cue"},cypher:{title:"Cypher",file:"cypher"},d:{title:"D",file:"d"},dart:{title:"Dart",file:"dart"},dataweave:{title:"DataWeave",file:"dataweave"},dax:{title:"DAX",file:"dax"},dhall:{title:"Dhall",file:"dhall"},diff:{title:"Diff",file:"diff"},django:{title:"Django/Jinja2",file:"django"},"dns-zone-file":{title:"DNS zone file",file:"dns-zone-file"},docker:{title:"Docker",file:"docker"},dot:{title:"DOT (Graphviz)",file:"dot"},ebnf:{title:"EBNF",file:"ebnf"},editorconfig:{title:"EditorConfig",file:"editorconfig"},eiffel:{title:"Eiffel",file:"eiffel"},ejs:{title:"EJS",file:"ejs"},elixir:{title:"Elixir",file:"elixir"},elm:{title:"Elm",file:"elm"},etlua:{title:"Embedded Lua templating",file:"etlua"},erb:{title:"ERB",file:"erb"},erlang:{title:"Erlang",file:"erlang"},"excel-formula":{title:"Excel Formula",file:"excel-formula"},fsharp:{title:"F#",file:"fsharp"},factor:{title:"Factor",file:"factor"},false:{title:"False",file:"false"},"firestore-security-rules":{title:"Firestore security rules",file:"firestore-security-rules"},flow:{title:"Flow",file:"flow"},fortran:{title:"Fortran",file:"fortran"},ftl:{title:"FreeMarker Template Language",file:"ftl"},gml:{title:"GameMaker Language",file:"gml"},gap:{title:"GAP (CAS)",file:"gap"},gcode:{title:"G-code",file:"gcode"},gdscript:{title:"GDScript",file:"gdscript"},gedcom:{title:"GEDCOM",file:"gedcom"},gettext:{title:"gettext",file:"gettext"},gherkin:{title:"Gherkin",file:"gherkin"},git:{title:"Git",file:"git"},glsl:{title:"GLSL",file:"glsl"},gn:{title:"GN",file:"gn"},"linker-script":{title:"GNU Linker Script",file:"linker-script"},go:{title:"Go",file:"go"},"go-module":{title:"Go module",file:"go-module"},gradle:{title:"Gradle",file:"gradle"},graphql:{title:"GraphQL",file:"graphql"},groovy:{title:"Groovy",file:"groovy"},haml:{title:"Haml",file:"haml"},handlebars:{title:"Handlebars",file:"handlebars"},mustache:{title:"Mustache",file:"handlebars"},haskell:{title:"Haskell",file:"haskell"},haxe:{title:"Haxe",file:"haxe"},hcl:{title:"HCL",file:"hcl"},hlsl:{title:"HLSL",file:"hlsl"},hoon:{title:"Hoon",file:"hoon"},http:{title:"HTTP",file:"http"},hpkp:{title:"HTTP Public-Key-Pins",file:"hpkp"},hsts:{title:"HTTP Strict-Transport-Security",file:"hsts"},ichigojam:{title:"IchigoJam",file:"ichigojam"},icon:{title:"Icon",file:"icon"},"icu-message-format":{title:"ICU Message Format",file:"icu-message-format"},idris:{title:"Idris",file:"idris"},ignore:{title:".ignore",file:"ignore"},gitignore:{title:".gitignore",file:"ignore"},hgignore:{title:".hgignore",file:"ignore"},npmignore:{title:".npmignore",file:"ignore"},inform7:{title:"Inform 7",file:"inform7"},ini:{title:"Ini",file:"ini"},io:{title:"Io",file:"io"},j:{title:"J",file:"j"},java:{title:"Java",file:"java"},javadoc:{title:"JavaDoc",file:"javadoc"},javadoclike:{title:"JavaDoc-like",file:"javadoclike"},javastacktrace:{title:"Java stack trace",file:"javastacktrace"},jexl:{title:"Jexl",file:"jexl"},jolie:{title:"Jolie",file:"jolie"},jq:{title:"JQ",file:"jq"},jsdoc:{title:"JSDoc",file:"jsdoc"},"js-extras":{title:"JS Extras",file:"js-extras"},json:{title:"JSON",file:"json"},json5:{title:"JSON5",file:"json5"},jsonp:{title:"JSONP",file:"jsonp"},jsstacktrace:{title:"JS stack trace",file:"jsstacktrace"},"js-templates":{title:"JS Templates",file:"js-templates"},julia:{title:"Julia",file:"julia"},keepalived:{title:"Keepalived Configure",file:"keepalived"},keyman:{title:"Keyman",file:"keyman"},kotlin:{title:"Kotlin",file:"kotlin"},kts:{title:"Kotlin Script",file:"kotlin"},kumir:{title:"KuMir (КуМир)",file:"kumir"},kusto:{title:"Kusto",file:"kusto"},latex:{title:"LaTeX",file:"latex"},tex:{title:"TeX",file:"latex"},context:{title:"ConTeXt",file:"latex"},latte:{title:"Latte",file:"latte"},less:{title:"Less",file:"less"},lilypond:{title:"LilyPond",file:"lilypond"},liquid:{title:"Liquid",file:"liquid"},lisp:{title:"Lisp",file:"lisp"},livescript:{title:"LiveScript",file:"livescript"},llvm:{title:"LLVM IR",file:"llvm"},log:{title:"Log file",file:"log"},lolcode:{title:"LOLCODE",file:"lolcode"},lua:{title:"Lua",file:"lua"},magma:{title:"Magma (CAS)",file:"magma"},makefile:{title:"Makefile",file:"makefile"},markdown:{title:"Markdown",file:"markdown"},"markup-templating":{title:"Markup templating",file:"markup-templating"},mata:{title:"Mata",file:"mata"},matlab:{title:"MATLAB",file:"matlab"},maxscript:{title:"MAXScript",file:"maxscript"},mel:{title:"MEL",file:"mel"},mermaid:{title:"Mermaid",file:"mermaid"},metafont:{title:"METAFONT",file:"metafont"},mizar:{title:"Mizar",file:"mizar"},mongodb:{title:"MongoDB",file:"mongodb"},monkey:{title:"Monkey",file:"monkey"},moonscript:{title:"MoonScript",file:"moonscript"},n1ql:{title:"N1QL",file:"n1ql"},n4js:{title:"N4JS",file:"n4js"},"nand2tetris-hdl":{title:"Nand To Tetris HDL",file:"nand2tetris-hdl"},naniscript:{title:"Naninovel Script",file:"naniscript"},nasm:{title:"NASM",file:"nasm"},neon:{title:"NEON",file:"neon"},nevod:{title:"Nevod",file:"nevod"},nginx:{title:"nginx",file:"nginx"},nim:{title:"Nim",file:"nim"},nix:{title:"Nix",file:"nix"},nsis:{title:"NSIS",file:"nsis"},objectivec:{title:"Objective-C",file:"objectivec"},ocaml:{title:"OCaml",file:"ocaml"},odin:{title:"Odin",file:"odin"},opencl:{title:"OpenCL",file:"opencl"},openqasm:{title:"OpenQasm",file:"openqasm"},oz:{title:"Oz",file:"oz"},parigp:{title:"PARI/GP",file:"parigp"},parser:{title:"Parser",file:"parser"},pascal:{title:"Pascal",file:"pascal"},pascaligo:{title:"Pascaligo",file:"pascaligo"},psl:{title:"PATROL Scripting Language",file:"psl"},pcaxis:{title:"PC-Axis",file:"pcaxis"},peoplecode:{title:"PeopleCode",file:"peoplecode"},perl:{title:"Perl",file:"perl"},php:{title:"PHP",file:"php"},phpdoc:{title:"PHPDoc",file:"phpdoc"},"php-extras":{title:"PHP Extras",file:"php-extras"},"plant-uml":{title:"PlantUML",file:"plant-uml"},plsql:{title:"PL/SQL",file:"plsql"},powerquery:{title:"PowerQuery",file:"powerquery"},powershell:{title:"PowerShell",file:"powershell"},processing:{title:"Processing",file:"processing"},prolog:{title:"Prolog",file:"prolog"},promql:{title:"PromQL",file:"promql"},properties:{title:".properties",file:"properties"},protobuf:{title:"Protocol Buffers",file:"protobuf"},pug:{title:"Pug",file:"pug"},puppet:{title:"Puppet",file:"puppet"},pure:{title:"Pure",file:"pure"},purebasic:{title:"PureBasic",file:"purebasic"},purescript:{title:"PureScript",file:"purescript"},python:{title:"Python",file:"python"},qsharp:{title:"Q#",file:"qsharp"},q:{title:"Q (kdb+ database)",file:"q"},qml:{title:"QML",file:"qml"},qore:{title:"Qore",file:"qore"},r:{title:"R",file:"r"},racket:{title:"Racket",file:"racket"},cshtml:{title:"Razor C#",file:"cshtml"},jsx:{title:"React JSX",file:"jsx"},tsx:{title:"React TSX",file:"tsx"},reason:{title:"Reason",file:"reason"},regex:{title:"Regex",file:"regex"},rego:{title:"Rego",file:"rego"},renpy:{title:"Ren'py",file:"renpy"},rescript:{title:"ReScript",file:"rescript"},rest:{title:"reST (reStructuredText)",file:"rest"},rip:{title:"Rip",file:"rip"},roboconf:{title:"Roboconf",file:"roboconf"},robotframework:{title:"Robot Framework",file:"robotframework"},ruby:{title:"Ruby",file:"ruby"},rust:{title:"Rust",file:"rust"},sas:{title:"SAS",file:"sas"},sass:{title:"Sass (Sass)",file:"sass"},scss:{title:"Sass (SCSS)",file:"scss"},scala:{title:"Scala",file:"scala"},scheme:{title:"Scheme",file:"scheme"},"shell-session":{title:"Shell session",file:"shell-session"},smali:{title:"Smali",file:"smali"},smalltalk:{title:"Smalltalk",file:"smalltalk"},smarty:{title:"Smarty",file:"smarty"},sml:{title:"SML",file:"sml"},solidity:{title:"Solidity (Ethereum)",file:"solidity"},"solution-file":{title:"Solution file",file:"solution-file"},soy:{title:"Soy (Closure Template)",file:"soy"},sparql:{title:"SPARQL",file:"sparql"},"splunk-spl":{title:"Splunk SPL",file:"splunk-spl"},sqf:{title:"SQF: Status Quo Function (Arma 3)",file:"sqf"},sql:{title:"SQL",file:"sql"},squirrel:{title:"Squirrel",file:"squirrel"},stan:{title:"Stan",file:"stan"},stata:{title:"Stata Ado",file:"stata"},iecst:{title:"Structured Text (IEC 61131-3)",file:"iecst"},stylus:{title:"Stylus",file:"stylus"},supercollider:{title:"SuperCollider",file:"supercollider"},swift:{title:"Swift",file:"swift"},systemd:{title:"Systemd configuration file",file:"systemd"},"t4-templating":{title:"T4 templating",file:"t4-templating"},"t4-cs":{title:"T4 Text Templates (C#)",file:"t4-cs"},"t4-vb":{title:"T4 Text Templates (VB)",file:"t4-vb"},tap:{title:"TAP",file:"tap"},tcl:{title:"Tcl",file:"tcl"},tt2:{title:"Template Toolkit 2",file:"tt2"},textile:{title:"Textile",file:"textile"},toml:{title:"TOML",file:"toml"},tremor:{title:"Tremor",file:"tremor"},trickle:{title:"trickle",file:"tremor"},troy:{title:"troy",file:"tremor"},turtle:{title:"Turtle",file:"turtle"},twig:{title:"Twig",file:"twig"},typescript:{title:"TypeScript",file:"typescript"},typoscript:{title:"TypoScript",file:"typoscript"},unrealscript:{title:"UnrealScript",file:"unrealscript"},uorazor:{title:"UO Razor Script",file:"uorazor"},uri:{title:"URI",file:"uri"},v:{title:"V",file:"v"},vala:{title:"Vala",file:"vala"},vbnet:{title:"VB.Net",file:"vbnet"},velocity:{title:"Velocity",file:"velocity"},verilog:{title:"Verilog",file:"verilog"},vhdl:{title:"VHDL",file:"vhdl"},vim:{title:"vim",file:"vim"},"visual-basic":{title:"Visual Basic",file:"visual-basic"},vba:{title:"VBA",file:"visual-basic"},warpscript:{title:"WarpScript",file:"warpscript"},wasm:{title:"WebAssembly",file:"wasm"},"web-idl":{title:"Web IDL",file:"web-idl"},wgsl:{title:"WGSL",file:"wgsl"},wiki:{title:"Wiki markup",file:"wiki"},wolfram:{title:"Wolfram language",file:"wolfram"},mathematica:{title:"Mathematica",file:"wolfram"},nb:{title:"Mathematica Notebook",file:"wolfram"},wren:{title:"Wren",file:"wren"},xeora:{title:"Xeora",file:"xeora"},"xml-doc":{title:"XML doc (.net)",file:"xml-doc"},xojo:{title:"Xojo (REALbasic)",file:"xojo"},xquery:{title:"XQuery",file:"xquery"},yaml:{title:"YAML",file:"yaml"},yang:{title:"YANG",file:"yang"},zig:{title:"Zig",file:"zig"}}})),define("WoltLabSuite/Core/Prism/Helper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitIntoLines=void 0,t.splitIntoLines=function*(e){const t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});let n,i=document.createElement("span");for(;n=t.nextNode();){const t=n,o=t.data.split(/\r?\n/);for(let n=0,r=o.length;n<r;n++){const r=o[n];n>=1&&(i.appendChild(document.createTextNode("\n")),yield i,i=document.createElement("span"));let a=document.createTextNode(r),s=t.parentNode;for(;s&&s!==e;){const e=s.cloneNode(!1);e.appendChild(a),a=e,s=s.parentNode}i.appendChild(a)}}yield i}})),define("WoltLabSuite/Core/Bbcode/Code",["require","exports","tslib","../Language","../Clipboard","../Ui/Notification","../Prism","../Prism/Helper"],(function(e,t,n,i,o,r,a,s){"use strict";async function l(){return new Promise(((e,t)=>{window.requestIdleCallback?window.requestIdleCallback(e,{timeout:5e3}):setTimeout(e,0)}))}i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importStar(s);class c{static chunkSize=50;container;codeContainer;language;constructor(e){this.container=e,this.codeContainer=this.container.querySelector(".codeBoxCode > code"),this.language=Array.from(this.codeContainer.classList).find((e=>/^language-([a-z0-9_-]+)$/.test(e)))?.replace(/^language-/,"")}static processAll(){document.querySelectorAll(".codeBox:not([data-processed])").forEach((e=>{e.dataset.processed="1";const t=new c(e);t.language&&t.highlight(),t.createCopyButton()}))}createCopyButton(){const e=this.container.querySelector(".codeBoxHeader");if(!e)return;const t=document.createElement("button");t.type="button",t.innerHTML='<fa-icon size="24" name="copy"></fa-icon>',t.classList.add("jsTooltip"),t.title=i.get("wcf.message.bbcode.code.copy");const n=async()=>{await o.copyElementTextToClipboard(this.codeContainer),r.show(i.get("wcf.message.bbcode.code.copy.success"))};t.addEventListener("click",(()=>n())),e.appendChild(t)}async highlight(){if(!this.language)throw new Error("No language detected");const t=(await new Promise(((t,n)=>{e(["../prism-meta"],t,n)})).then(n.__importStar)).default;if(!t[this.language])throw new Error(`Unknown language '${this.language}'`);this.container.classList.add("highlighting"),await new Promise(((n,i)=>{e(["prism/components/prism-"+t[this.language].file],n,i)})).then(n.__importStar),await l();const i=a.default.languages[this.language];if(!i)throw new Error(`Invalid language '${this.language}' given.`);const o=document.createElement("div");o.innerHTML=a.default.highlight(this.codeContainer.textContent,i,this.language),await l();const r=this.codeContainer.querySelectorAll(".codeBoxLine > span"),d=s.splitIntoLines(o);for(let e=0,t=r.length;e<t;e+=c.chunkSize){await l();const n=Math.min(e+c.chunkSize,t);for(let t=e;t<n;t++){const e=r[t],n=d.next().value;e.parentNode.replaceChild(n,e)}}this.container.classList.remove("highlighting"),this.container.classList.add("highlighted")}}return c})),define("WoltLabSuite/Core/Bbcode/Collapsible",["require","exports"],(function(e,t){"use strict";function n(e,t,n){if(e.classList.toggle("collapsed")){if(t.forEach((e=>{const t=e.dataset.titleExpand,n=e.querySelector("fa-icon");n?(n.setIcon("up-right-and-down-left-from-center"),e.title=t):e.textContent=t})),n instanceof Event){const t=e.getBoundingClientRect().top;if(t<0){let e=window.pageYOffset+(t-100);e<0&&(e=0),window.scrollTo(window.pageXOffset,e)}}}else t.forEach((e=>{const t=e.dataset.titleCollapse,n=e.querySelector("fa-icon");n?(n.setIcon("down-left-and-up-right-to-center"),e.title=t):e.textContent=t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=void 0,t.observe=function(){document.querySelectorAll(".jsCollapsibleBbcode").forEach((e=>{const t=Array.from(e.querySelectorAll(".toggleButton:not(.jsToggleButtonEnabled)")).filter((t=>t.closest(".jsCollapsibleBbcode")===e)),i=e.querySelector(".collapsibleBbcodeOverflow")||e;t.length>0&&function(e,t,i){t.forEach((i=>{i.classList.add("jsToggleButtonEnabled"),i.addEventListener("click",(i=>n(e,t,i))),i.addEventListener("keydown",(i=>{"Enter"!==i.key&&" "!==i.key||(i.preventDefault(),n(e,t))}))})),0!==i.scrollTop&&(i.scrollTop=0,n(e,t)),i.addEventListener("scroll",(()=>{i.scrollTop=0,e.classList.contains("collapsed")&&n(e,t)}))}(e,t,i),e.classList.remove("jsCollapsibleBbcode")}))}})),define("WoltLabSuite/Core/Component/Ckeditor/Event",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenToCkeditor=t.dispatchToCkeditor=void 0;class n{#w;constructor(e){this.#w=e}collectMetaData(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:collect-meta-data",{detail:e}))}destroy(){this.#w.dispatchEvent(new CustomEvent("ckeditor5:destroy"))}discardRecoveredData(){this.#w.dispatchEvent(new CustomEvent("ckeditor5:discard-recovered-data"))}insertAttachment(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:insert-attachment",{detail:e}))}insertQuote(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:insert-quote",{detail:e}))}ready(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:ready",{detail:e}))}removeAttachment(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:remove-attachment",{detail:e}))}reset(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:reset",{detail:e}))}setupConfiguration(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:setup-configuration",{detail:e}))}setupFeatures(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:setup-features",{detail:e}))}submitOnEnter(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:submit-on-enter",{detail:e}))}uploadAttachment(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:upload-attachment",{detail:e}))}uploadMedia(e){this.#w.dispatchEvent(new CustomEvent("ckeditor5:upload-media",{detail:e}))}}class i{#w;constructor(e){this.#w=e}bbcode(e){return this.#w.addEventListener("ckeditor5:bbcode",(t=>{const n=e(t.detail);if(!0===n)t.preventDefault();else if(!1!==n)throw new Error("An event listener for the bbcode event did not return a boolean to indicate if the BBCode is handled.")})),this}collectMetaData(e){return this.#w.addEventListener("ckeditor5:collect-meta-data",(t=>{e(t.detail)})),this}destroy(e){return this.#w.addEventListener("ckeditor5:destroy",(()=>{e()})),this}discardRecoveredData(e){return this.#w.addEventListener("ckeditor5:discard-recovered-data",(()=>{e()}),{once:!0}),this}insertAttachment(e){return this.#w.addEventListener("ckeditor5:insert-attachment",(t=>{e(t.detail)})),this}insertQuote(e){return this.#w.addEventListener("ckeditor5:insert-quote",(t=>{e(t.detail)})),this}ready(e){return this.#w.addEventListener("ckeditor5:ready",(t=>{e(t.detail)}),{once:!0}),this}removeAttachment(e){return this.#w.addEventListener("ckeditor5:remove-attachment",(t=>{e(t.detail)})),this}reset(e){return this.#w.addEventListener("ckeditor5:reset",(t=>{e(t.detail)})),this}setupConfiguration(e){return this.#w.addEventListener("ckeditor5:setup-configuration",(t=>{e(t.detail)}),{once:!0}),this}setupFeatures(e){return this.#w.addEventListener("ckeditor5:setup-features",(t=>{e(t.detail)}),{once:!0}),this}submitOnEnter(e){return this.#w.addEventListener("ckeditor5:submit-on-enter",(t=>{e(t.detail)})),this}uploadAttachment(e){return this.#w.addEventListener("ckeditor5:upload-attachment",(t=>{e(t.detail)})),this}uploadMedia(e){return this.#w.addEventListener("ckeditor5:upload-media",(t=>{e(t.detail)})),this}}t.dispatchToCkeditor=function(e){return new n(e)},t.listenToCkeditor=function(e){return new i(e)}})),define("WoltLabSuite/Core/Component/Ckeditor/Attachment",["require","exports","./Event"],(function(e,t,n){"use strict";function i(e,t,i){const o={abortController:i,file:t};return(0,n.dispatchToCkeditor)(e).uploadAttachment(o),new Promise((e=>{o.promise.then((({attachmentId:t,url:n})=>{e({"data-attachment-id":t.toString(),urls:{default:n}})}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(e){(0,n.listenToCkeditor)(e).setupConfiguration((({configuration:t,features:o})=>{if(!o.attachment)return;const r=function(e){const t=document.querySelector(`.messageTabMenu[data-wysiwyg-container-id="${e.id}"]`);if(!t)return[];const n=t.querySelector(".formAttachmentContent > .formAttachmentList");return n?Array.from(n.querySelectorAll('.formAttachmentListItem[data-is-image="1"]')).map((e=>parseInt(e.dataset.objectId))):[]}(e);t.woltlabAttachment={inlineImageIds:r,resolveAttachmentUrl(e,t){let n="";return t&&(n="&thumbnail=1"),`${window.WSC_API_URL}index.php?attachment/${e}/${n}`}},t.woltlabUpload={uploadImage:(t,n)=>i(e,t,n),uploadOther:t=>i(e,t)},(0,n.listenToCkeditor)(e).ready((({ckeditor:e})=>{!function(e){(0,n.listenToCkeditor)(e.sourceElement).insertAttachment((({attachmentId:t,url:n})=>{""===n?e.insertText(`[attach=${t}][/attach]`):e.insertHtml(`<img src="${n}" class="woltlabAttachment" data-attachment-id="${t.toString()}">`)}))}(e),function(e){(0,n.listenToCkeditor)(e.sourceElement).removeAttachment((({attachmentId:t})=>{e.removeAll("imageBlock",{attachmentId:t}),e.removeAll("imageInline",{attachmentId:t})}))}(e)}))}))}})),__createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){var t,n;if(e&&e.__esModule)return e;if(t={},null!=e)for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},define("WoltLabSuite/Core/Component/Ckeditor/Media",["require","exports","./Event"],(function(e,t,n){"use strict";function i(e,t,i){const o={abortController:i,file:t};return(0,n.dispatchToCkeditor)(e).uploadMedia(o),Promise.reject()}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(t){(0,n.listenToCkeditor)(t).setupConfiguration((({configuration:e,features:n})=>{e.woltlabMedia={resolveMediaUrl(e,t){let n="";return"original"!==t&&(n=`&thumbnail=${t}`),`${window.WSC_API_URL}index.php?media/${e}/${n}`}},!n.attachment&&n.media&&(e.woltlabUpload={uploadImage:(e,n)=>i(t,e,n),uploadOther:e=>i(t,e)})})).ready((({ckeditor:t})=>{t.features.media&&new Promise(((t,n)=>{e(["../../Media/Manager/Editor"],t,n)})).then(__importStar).then((({MediaManagerEditor:e})=>{new e({ckeditor:t})}))}))}})),define("WoltLabSuite/Core/Component/Ckeditor/Mention",["require","exports","../../Ajax/Backend","../../Dom/Util","./Event"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(e){(0,o.listenToCkeditor)(e).setupConfiguration((({configuration:e,features:t})=>{t.mention&&(e.mention={feeds:[{feed:e=>async function(e){if(e.length>24)return[];const t=new URL(window.WSC_API_URL+"index.php?editor-get-mention-suggestions/");return t.searchParams.set("query",e),(await(0,n.prepareRequest)(t.toString()).get().allowCaching().disableLoadingIndicator().fetchAsJson()).map((e=>"user"===e.type?{id:`@${e.username}`,text:`@${e.username}`,icon:e.avatarTag,objectId:e.userID,type:e.type}:{id:`@${e.name}`,text:`@${e.name}`,icon:'<fa-icon name="users"></fa-icon>',objectId:e.groupID,type:e.type}))}(e),itemRenderer:e=>(0,i.createFragmentFromHtml)(`\n            <span class="ckeditor5__mention">${e.icon} ${e.text}</span>\n          `).firstElementChild,marker:"@",minimumCharacters:3}]})}))}})),define("WoltLabSuite/Core/Component/Ckeditor/Quote",["require","exports","../../StringUtil","./Event"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(e){(0,i.listenToCkeditor)(e).ready((({ckeditor:t})=>{(0,i.listenToCkeditor)(e).insertQuote((e=>{!function(e,t){let{author:i,content:o,link:r}=t;var a;t.isText&&(a=o,o=(a=(a=(0,n.escapeHTML)(a)).replaceAll("\n\n\n\n\n",'</p><p><br data-cke-filler="true"></p><p>')).split("\n\n").map((e=>`<p>${e=e.replaceAll("\n","<br>")}</p>`)).join("")),i=(0,n.escapeHTML)(i),r=(0,n.escapeHTML)(r),e.insertHtml(`<woltlab-quote data-author="${i}" data-link="${r}">${o}</woltlab-quote>\n    <p><br data-cke-filler="true"></p>`)}(t,e)}))}))}})),define("WoltLabSuite/Core/Component/Ckeditor/Autosave",["require","exports","../../Core","../../Language","../../StringUtil","./Event"],(function(e,t,n,i,o,r){"use strict";function a(e){return`${(0,n.getStoragePrefix)()}ckeditor5-${e}`}function s(e){try{window.localStorage.removeItem(a(e))}catch{}}Object.defineProperty(t,"__esModule",{value:!0}),t.initializeAutosave=t.setupRestoreDraft=t.deleteDraft=void 0,t.deleteDraft=s,t.setupRestoreDraft=function(e,t){let n;try{const e=window.localStorage.getItem(a(t));null!==e&&(n=JSON.parse(e))}catch{return void s(t)}if(void 0===n)return;const l=parseInt(e.sourceElement.dataset.autosaveLastEditTime)||0;if(l&&1e3*l>=n.timestamp)return;const c=e.data.get();if(c===n.html)return;e.data.set(n.html);const d=document.createElement("div");d.classList.add("ckeditor5__restoreDraft");const u=function(){const e=document.createElement("div");return e.classList.add("ckeditor5__restoreDraft__dialog"),e.setAttribute("role","alertdialog"),e.tabIndex=0,e.innerHTML=`\n    <div class="ckeditor5__restoreDraft__question">\n      ${(0,o.escapeHTML)((0,i.getPhrase)("wcf.editor.restoreDraft"))}\n    </div>\n    <div class="ckeditor5__restoreDraft__buttons">\n      <button type="button" class="button buttonPrimary small" data-type="submit">\n        ${(0,o.escapeHTML)((0,i.getPhrase)("wcf.dialog.button.primary.restore"))}\n      </button>\n      <button type="button" class="button small" data-type="cancel">\n        ${(0,o.escapeHTML)((0,i.getPhrase)("wcf.dialog.button.cancel"))}\n      </button>\n      <button type="button" class="button small" data-type="preview">\n        ${(0,o.escapeHTML)((0,i.getPhrase)("wcf.editor.restoreDraft.preview"))}\n      </button>\n    </div>\n  `,e}(),p=document.createElement("div");p.classList.add("ckeditor5_restoreDraft__wrapper"),p.append(u),e.ui.element.insertAdjacentElement("beforebegin",d),d.append(e.ui.element,p);const m=(e,t,n)=>{n&&u.focus()};e.ui.focusTracker.on("change:isFocused",m);const h=()=>{e.ui.focusTracker.off("change:isFocused",m),d.insertAdjacentElement("beforebegin",e.ui.element),d.remove()};u.querySelector('button[data-type="submit"]').addEventListener("click",(()=>{h()})),u.querySelector('button[data-type="cancel"]').addEventListener("click",(()=>{e.data.set(c),s(t),""===c&&(0,r.dispatchToCkeditor)(e.sourceElement).discardRecoveredData(),h()}));const f=Symbol("autosave");u.querySelector('button[data-type="preview"]').addEventListener("click",(()=>{e.enableReadOnlyMode(f);const t=function(){const e=document.createElement("div");return e.classList.add("ck","ck-toolbar__items"),e.innerHTML=`\n    <button type="button" class="ck ck-button">\n      ${(0,o.escapeHTML)((0,i.getPhrase)("wcf.editor.restoreDraft.restoreOrDiscard"))}\n    </button>\n  `,e}(),n=e.ui.view.toolbar.element,r=Array.from(n.children);r.forEach((e=>e.hidden=!0)),n.append(t),p.hidden=!0;const a=t.querySelector("button");a.addEventListener("click",(()=>{e.disableReadOnlyMode(f),p.hidden=!1,t.remove(),r.forEach((e=>e.hidden=!1))})),a.focus()}))},t.initializeAutosave=function(e,t,n){!function(){const e=Date.now()-604800;Object.keys(localStorage).filter((e=>e.startsWith("ckeditor5-"))).forEach((t=>{let n,i;try{n=window.localStorage.getItem(t)}catch{return}if(null!==n){try{i=JSON.parse(n)}catch{}if(void 0===i||i.timestamp<e)try{localStorage.removeItem(t)}catch{}}}))}(),t.autosave={save:e=>(function(e,t){if(""===t)return void s(e);const n={html:t,timestamp:Date.now()};try{window.localStorage.setItem(a(e),JSON.stringify(n))}catch(e){console.warn("Unable to write to the local storage.",e)}}(n,e.data.get()),Promise.resolve()),waitingTime:15e3},(0,r.listenToCkeditor)(e).reset((()=>s(n))),e instanceof HTMLTextAreaElement&&e.form&&e.form.addEventListener("submit",(()=>s(n)))}})),define("WoltLabSuite/Core/Component/Ckeditor/Configuration",["require","exports","../../Language"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigurationFor=void 0;class i{#E;#S="|";#C=[];#L=[];#k={};constructor(e){this.#E=e}#x(){this.#E.undo?this.#L.push("undo","redo"):this.#C.push("Undo")}#M(){this.#L.push("bold","italic")}#I(){const e=[];this.#E.heading?e.push("heading"):this.#C.push("Heading"),this.#E.underline?e.push("underline"):this.#C.push("Underline"),this.#E.strikethrough?e.push("strikethrough"):this.#C.push("Strikethrough"),e.push(this.#S),this.#E.mark?e.push("highlight"):this.#C.push("Highlight"),this.#E.fontColor?e.push("fontColor"):this.#C.push("FontColor"),this.#E.fontFamily?e.push("fontFamily"):this.#C.push("FontFamily"),this.#E.fontSize?e.push("fontSize"):this.#C.push("FontSize"),e.push(this.#S),this.#E.subscript?e.push("subscript"):this.#C.push("Subscript"),this.#E.superscript?e.push("superscript"):this.#C.push("Superscript"),0!==e.length&&e.push(this.#S,"removeFormat"),e.length>0&&(this.#L.push({label:"woltlabToolbarGroup_format",items:e}),this.#k.format={icon:"ellipsis;false",label:(0,n.getPhrase)("wcf.editor.button.group.format")})}#T(){this.#E.list?(this.#L.push({label:"woltlabToolbarGroup_list",items:["bulletedList","numberedList","outdent","indent"]}),this.#k.list={icon:"list;false",label:(0,n.getPhrase)("wcf.editor.button.group.list")}):this.#C.push("List")}#D(){this.#E.alignment?this.#L.push("alignment"):this.#C.push("Alignment")}#A(){this.#E.link?this.#L.push("link"):this.#C.push("Link","LinkImage")}#P(){this.#E.image?(this.#L.push("insertImage"),this.#E.attachment||this.#C.push("ImageUpload","ImageUploadUI","WoltlabAttachment")):(this.#C.push("ImageInsertUI"),this.#E.link&&this.#C.push("LinkImage"))}#j(){this.#E.code?this.#L.push("code"):this.#C.push("Code","WoltlabCode"),this.#E.codeBlock?this.#L.push("codeBlock"):this.#C.push("CodeBlock","WoltlabCodeBlock")}#O(){this.#E.table?this.#L.push("insertTable"):this.#C.push("Table","TableToolbar"),this.#E.quoteBlock?this.#L.push("blockQuote"):this.#C.push("BlockQuote","WoltlabBlockQuote"),this.#E.spoiler?this.#L.push("spoiler"):this.#C.push("WoltlabSpoiler"),this.#E.html?this.#L.push("htmlEmbed"):this.#C.push("HtmlEmbed","WoltlabHtmlEmbed")}#q(){this.#L.push(this.#S)}#N(){this.#E.media||this.#C.push("WoltlabMedia")}#B(){this.#E.mention||this.#C.push("Mention","WoltlabMention")}#F(){let e=!1;return this.#L.filter((t=>"string"==typeof t&&t===this.#S?!!e&&(e=!1,!0):(e=!0,!0)))}build(){if(this.#C.length>0||this.#L.length>0)throw new Error("Cannot build the configuration twice.");this.#x(),this.#q(),this.#q(),this.#M(),this.#A(),this.#I(),this.#q(),this.#T(),this.#D(),this.#q(),this.#P(),this.#j(),this.#O(),this.#q(),this.#N(),this.#B()}toConfig(){const e=Object.keys(window.CKEDITOR_TRANSLATIONS).find((e=>"en"!==e)),t=e||"en",{dictionary:i}=window.CKEDITOR_TRANSLATIONS[t];return i.Author=(0,n.getPhrase)("wcf.ckeditor.quote.author"),i.Filename=(0,n.getPhrase)("wcf.ckeditor.code.fileName"),i["Line number"]=(0,n.getPhrase)("wcf.ckeditor.code.lineNumber"),i.Quote=(0,n.getPhrase)("wcf.ckeditor.quote"),i["Quote from %0"]=(0,n.getPhrase)("wcf.ckeditor.quoteFrom"),i.Spoiler=(0,n.getPhrase)("wcf.editor.button.spoiler"),{alignment:{options:[{name:"left",className:"text-left"},{name:"center",className:"text-center"},{name:"right",className:"text-right"},{name:"justify",className:"text-justify"}]},highlight:{options:[{model:"markerWarning",class:"marker-warning",title:(0,n.getPhrase)("wcf.ckeditor.marker.warning"),color:"var(--marker-warning)",type:"marker"},{model:"markerError",class:"marker-error",title:(0,n.getPhrase)("wcf.ckeditor.marker.error"),color:"var(--marker-error)",type:"marker"},{model:"markerInfo",class:"marker-info",title:(0,n.getPhrase)("wcf.ckeditor.marker.info"),color:"var(--marker-info)",type:"marker"},{model:"markerSuccess",class:"marker-success",title:(0,n.getPhrase)("wcf.ckeditor.marker.success"),color:"var(--marker-success)",type:"marker"}]},language:e,link:{defaultProtocol:"https://"},removePlugins:this.#C,fontFamily:{options:["default","Arial, Helvetica, sans-serif","Comic Sans MS, Marker Felt, cursive","Consolas, Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif",'Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif"]},fontSize:{options:[8,10,12,"default",18,24,36]},toolbar:this.#F(),ui:{poweredBy:{label:null},viewportOffset:{top:50}},woltlabToolbarGroup:this.#k}}}t.createConfigurationFor=function(e){const t=new i(e);return t.build(),t.toConfig()}})),define("WoltLabSuite/Core/Component/Ckeditor/SubmitOnEnter",["require","exports","./Event"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(e,t){e.editing.view.document.on("enter",((e,i)=>{if(i.isSoft)return;i.preventDefault(),e.stop();const o=t.getHtml();""!==o&&(0,n.dispatchToCkeditor)(t.sourceElement).submitOnEnter({ckeditor:t,html:o})}),{priority:"high"})}})),define("WoltLabSuite/Core/Component/Ckeditor/Normalizer",["require","exports","tslib","../../Dom/Util"],(function(e,t,n,i){"use strict";function o(e,t){const n=e.closest("p");if(null===n)return;const i=document.createElement("figure");i.classList.add("image",t),i.append(e),n.insertAdjacentElement("beforebegin",i),""===n.innerHTML&&n.remove()}function r(e){const t=document.createElement("div");t.innerHTML=e,function(e){e.querySelectorAll("br").forEach((e=>{!function(e){for(;;){if(e.previousSibling||e.nextSibling)return;const t=e.parentElement;switch(t.tagName){case"B":case"DEL":case"EM":case"I":case"STRONG":case"SUB":case"SUP":case"SPAN":case"U":t.insertAdjacentElement("afterend",e),t.remove();break;default:return}}}(e),function(e){if("true"===e.dataset.ckeFiller)return;const t=e.closest("p, td");null!==t&&i.default.isAtNodeEnd(e,t)&&("TD"===t.tagName||t.childNodes.length>1)&&e.remove()}(e)}))}(t);const n=function(e){const t=[];return e.querySelectorAll("p").forEach((e=>{if(e.normalize(),1===e.childNodes.length){const n=e.childNodes[0];n instanceof HTMLBRElement&&"true"!==n.dataset.ckeFiller&&t.push(e)}})),t}(t);return function(e){if(0!==e.length)for(let t=0,n=e.length;t<n;t++){const i=e[t];let o=0;for(;t+o+1<n;){const n=e[t+o+1];if(i.nextElementSibling!==n)break;o++}if(0===o)i.remove();else{const n=o+1,i=Math.ceil(n/2);e.slice(t,t+i).forEach((e=>{e.remove()})),t+=o}}}(n),function(e){e.querySelectorAll("img").forEach((e=>{e.classList.contains("messageFloatObjectRight")?o(e,"image-style-side"):e.classList.contains("messageFloatObjectLeft")&&o(e,"image-style-side-left")}))}(t),t.innerHTML}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeLegacyMessage=t.normalizeLegacyHtml=void 0,i=n.__importDefault(i),t.normalizeLegacyHtml=r,t.normalizeLegacyMessage=function(e){if(!(e instanceof HTMLTextAreaElement))throw new TypeError("Expected the element to be a <textarea>.");e.value=r(e.value)}})),define("WoltLabSuite/Core/Component/Ckeditor/Keyboard",["require","exports","./Event"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubmitShortcut=void 0,t.setupSubmitShortcut=function(e){const t=e.element.closest("form, .message, .jsOuterEditorContainer");if(null===t)return;const i=t.querySelector(".formSubmit");if(null===i)return;const o=i.querySelector('input[type="submit"], button[data-type="save"], button[accesskey="s"]');if(null===o)return;o.removeAttribute("accesskey");const r=function(e){return t=>{if("KeyS"!==t.code)return;let n;n=window.navigator.platform.startsWith("Mac")?t.ctrlKey&&t.altKey:t.altKey&&!t.ctrlKey,n&&(t.preventDefault(),t.stopPropagation(),e.click())}}(o);t.addEventListener("keydown",r),(0,n.listenToCkeditor)(e.element).destroy((()=>{t.removeEventListener("keydown",r)}))}})),define("WoltLabSuite/Core/Component/Ckeditor/Layer",["require","exports","../../Helper/PageOverlay"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const i=["ck-body-wrapper","ck-inspector-wrapper","ck-inspector-portal"];let o=!1;t.setup=function(){o||(o=!0,new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)if(e instanceof HTMLElement)for(const t of i)e.classList.contains(t)&&(0,n.getPageOverlayContainer)().append(e)})).observe(document.body,{childList:!0}))}})),define("WoltLabSuite/Core/Component/Ckeditor",["require","exports","tslib","./Ckeditor/Attachment","./Ckeditor/Media","./Ckeditor/Mention","./Ckeditor/Quote","./Ckeditor/Autosave","./Ckeditor/Configuration","./Ckeditor/Event","./Ckeditor/SubmitOnEnter","./Ckeditor/Normalizer","../Ui/Scroll","../Devtools","./Ckeditor/Keyboard","./Ckeditor/Layer","../Environment"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h,f,g){"use strict";function*b(e,t,n){if(e.is("element",t)&&Object.entries(n).every((([t,n])=>!!e.hasAttribute(t)&&String(e.getAttribute(t))===n.toString())))yield e;else for(const i of e.getChildren())i.is("element")&&(yield*b(i,t,n))}function v(e){return y.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCkeditorById=t.getCkeditor=t.setupCkeditor=void 0,m=n.__importDefault(m);const y=new WeakMap;class _{#U;#E;constructor(e,t){this.#U=e,this.#E=t}async destroy(){(0,c.dispatchToCkeditor)(this.sourceElement).destroy(),await this.#U.destroy()}discardDraft(){this.#E.autosave&&(0,s.deleteDraft)(this.#E.autosave)}focus(){const e=this.#U.ui.element,{bottom:t,top:n}=e.getBoundingClientRect(),i=window.innerHeight;let o=!1;(n>0&&n<i||t>0&&t<i)&&(o=!0),o?this.#U.editing.view.focus():(0,p.element)(e,(()=>{this.#U.editing.view.focus()}))}getHtml(){return this.#U.data.get()}insertHtml(e){e=(0,u.normalizeLegacyHtml)(e),this.#U.model.change((t=>{const n=this.#U.data.processor.toView(e),i=this.#U.data.toModel(n),o=this.#U.model.insertContent(i);t.setSelection(o.end),this.focus()}))}insertText(e){const t=document.createElement("div");t.textContent=e,this.insertHtml(t.innerHTML)}isVisible(){return 0!==this.#U.ui.element.clientWidth}setHtml(e){this.#U.data.set(e)}removeAll(e,t){this.#U.model.change((n=>{const i=b(this.#U.model.document.getRoot(),e,t);for(const e of i)n.remove(e)}))}reset(){if(this.setHtml(""),(0,c.dispatchToCkeditor)(this.sourceElement).reset({ckeditor:this}),"safari"===(0,g.browser)()&&!(0,g.touch)()){const e=this.#U.ui.element;e.focus(),window.setTimeout((()=>{e.blur()}),0)}}get element(){return this.#U.ui.element}get features(){return this.#E}get sourceElement(){return this.#U.sourceElement}}t.setupCkeditor=async function(t,p,g,b){if(y.has(t))throw new TypeError(`Cannot initialize the editor for '${t.id}' twice.`);(0,f.setup)(),await new Promise(((t,n)=>{e(["ckeditor5-bundle"],t,n)})).then(n.__importStar),await new Promise((e=>{window.requestAnimationFrame(e)})),function(e,t){(0,c.dispatchToCkeditor)(e).setupFeatures({features:t}),t.autosave&&!1===m.default._internal_.editorAutosave()&&(t.autosave=""),Object.freeze(t)}(t,p),p.attachment&&(0,i.setup)(t),p.media&&(0,o.setup)(t),(0,r.setup)(t),p.quoteBlock&&(0,a.setup)(t);const v=function(e,t,n,i){const o=(0,l.createConfigurationFor)(t);o.codeBlock={languages:i},o.woltlabBbcode=n,""!==t.autosave&&(0,s.initializeAutosave)(e,o,t.autosave),(0,c.dispatchToCkeditor)(e).setupConfiguration({configuration:o,features:t});for(const{name:e}of n)o.toolbar.push(`woltlabBbcode_${e}`);return o}(t,p,g,b);(0,u.normalizeLegacyMessage)(t);const w=await window.CKEditor5.create(t,v),E=new _(w,p);return p.autosave&&(0,s.setupRestoreDraft)(w,p.autosave),y.set(t,E),(0,c.dispatchToCkeditor)(t).ready({ckeditor:E}),p.submitOnEnter&&(0,d.setup)(w,E),""===E.getHtml()&&(0,c.dispatchToCkeditor)(t).discardRecoveredData(),(0,h.setupSubmitShortcut)(E),window.ENABLE_DEBUG_MODE&&window.ENABLE_DEVELOPER_TOOLS&&m.default._internal_.editorInspector()&&new Promise(((t,n)=>{e(["@ckeditor/ckeditor5-inspector"],t,n)})).then(n.__importStar).then((e=>{e.default.attach(w)})),E},t.getCkeditor=v,t.getCkeditorById=function(e,t=!0){const n=document.getElementById(e);if(null!==n)return v(n);if(t)throw new Error(`Unable to find an element with the id '${e}'.`)}})),define("WoltLabSuite/Core/Component/Confirmation/Custom",["require","exports","tslib","../Dialog","../../Language"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmationCustom=void 0,o=n.__importStar(o),t.ConfirmationCustom=class{#R;constructor(e){this.#R=e}async message(e){if(""===e.trim())throw new Error("An empty message for the delete confirmation was provided. Please use `defaultMessage()` if you do not want to provide a custom message.");const t=(0,i.dialogFactory)().fromHtml(`<p>${e}</p>`).asConfirmation({primary:o.get("wcf.dialog.button.primary.confirm")});return t.show(this.#R),new Promise((e=>{t.addEventListener("primary",(()=>e(!0))),t.addEventListener("cancel",(()=>e(!1)))}))}async withFormElements(e){const t=(0,i.dialogFactory)().withoutContent().asConfirmation({primary:o.get("wcf.dialog.button.primary.confirm")});return e(t),t.show(this.#R),new Promise((e=>{t.addEventListener("primary",(()=>{e({result:!0,dialog:t})})),t.addEventListener("cancel",(()=>{e({result:!1,dialog:t})}))}))}async withoutMessage(){const e=(0,i.dialogFactory)().withoutContent().asConfirmation({primary:o.get("wcf.dialog.button.primary.confirm")});return e.show(this.#R),new Promise((t=>{e.addEventListener("primary",(()=>t(!0))),e.addEventListener("cancel",(()=>t(!1)))}))}}})),define("WoltLabSuite/Core/Component/Confirmation",["require","exports","tslib","./Dialog","../Language","../Dom/Util","./Confirmation/Custom"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmationFactory=void 0,r=n.__importStar(r);class s{custom(e){return new a.ConfirmationCustom(e)}async delete(e){const t=`<p>${(0,o.getPhrase)("wcf.dialog.confirmation.cannotBeUndone")}</p>`,n=(0,i.dialogFactory)().fromHtml(t).asConfirmation({primary:(0,o.getPhrase)("wcf.dialog.button.primary.delete")});let r;return r=void 0===e?(0,o.getPhrase)("wcf.dialog.confirmation.delete.indeterminate"):(0,o.getPhrase)("wcf.dialog.confirmation.delete",{title:e}),n.show(r),new Promise((e=>{n.addEventListener("primary",(()=>e(!0))),n.addEventListener("cancel",(()=>e(!1)))}))}async restore(e){const t=(0,i.dialogFactory)().withoutContent().asConfirmation();let n;return n=void 0===e?(0,o.getPhrase)("wcf.dialog.confirmation.restore.indeterminate"):(0,o.getPhrase)("wcf.dialog.confirmation.restore",{title:e}),t.show(n),new Promise((e=>{t.addEventListener("primary",(()=>e(!0))),t.addEventListener("cancel",(()=>e(!1)))}))}async softDelete(e,t=!1){let n;if(n=void 0===e?(0,o.getPhrase)("wcf.dialog.confirmation.softDelete.indeterminate"):(0,o.getPhrase)("wcf.dialog.confirmation.softDelete",{title:e}),t)return this.withReason(n,!0);const r=(0,i.dialogFactory)().withoutContent().asConfirmation();return r.show(n),new Promise((e=>{r.addEventListener("primary",(()=>{e({result:!0})})),r.addEventListener("cancel",(()=>{e({result:!1})}))}))}async withReason(e,t){const n=(0,i.dialogFactory)().withoutContent().asConfirmation(),a=r.getUniqueId(),s=(0,o.getPhrase)(t?"wcf.dialog.confirmation.reason.optional":"wcf.dialog.confirmation.reason"),l=document.createElement("dl");l.innerHTML=`\n      <dt><label for="${a}">${s}</label></dt>\n      <dd><textarea id="${a}" cols="40" rows="3"></textarea></dd>\n    `;const c=l.querySelector("textarea");return n.content.append(l),n.show(e),new Promise((e=>{n.addEventListener("primary",(()=>{e({result:!0,reason:c.value.trim()})})),n.addEventListener("cancel",(()=>{e({result:!1,reason:""})}))}))}}t.confirmationFactory=function(){return new s}})),define("WoltLabSuite/Core/Controller/Captcha",["require","exports"],(function(e,t){"use strict";const n=new Map,i={add(e,t){if(n.has(e))throw new Error(`Captcha with id '${e}' is already registered.`);if("function"!=typeof t)throw new TypeError("Expected a valid callback for parameter 'callback'.");n.set(e,t)},delete(e){if(!n.has(e))throw new Error(`Unknown captcha with id '${e}'.`);n.delete(e)},has:e=>n.has(e),getData(e){if(!n.has(e))throw new Error(`Unknown captcha with id '${e}'.`);return n.get(e)()},setupDialog(e,t){let n;return e.addEventListener("validate",(e=>{i.has(t)&&(n=i.getData(t),i.delete(t),n instanceof Promise&&(e.detail.push(new Promise((e=>{n.then((()=>{e(!0)})).catch((()=>{e(!1)}))}))),e.preventDefault()))})),new Promise((t=>{e.addEventListener("primary",(()=>{void 0!==n?n instanceof Promise?n.then((e=>{t(e)})):t(n):t({})}))}))}};return i})),define("WoltLabSuite/Core/Event/Key",["require","exports"],(function(e,t){"use strict";function n(e,t,n){if(!(e instanceof Event))throw new TypeError("Expected a valid event when testing for key '"+t+"'.");return e.key===t||e.which===n}Object.defineProperty(t,"__esModule",{value:!0}),t.Tab=t.Space=t.Home=t.Escape=t.Enter=t.End=t.Comma=t.ArrowUp=t.ArrowRight=t.ArrowLeft=t.ArrowDown=void 0,t.ArrowDown=function(e){return n(e,"ArrowDown",40)},t.ArrowLeft=function(e){return n(e,"ArrowLeft",37)},t.ArrowRight=function(e){return n(e,"ArrowRight",39)},t.ArrowUp=function(e){return n(e,"ArrowUp",38)},t.Comma=function(e){return n(e,",",44)},t.End=function(e){return n(e,"End",35)},t.Enter=function(e){return n(e,"Enter",13)},t.Escape=function(e){return n(e,"Escape",27)},t.Home=function(e){return n(e,"Home",36)},t.Space=function(e){return n(e,"Space",32)},t.Tab=function(e){return n(e,"Tab",9)}})),define("WoltLabSuite/Core/Image/ExifUtil",["require","exports"],(function(e,t){"use strict";function n(e){return e===s||e===l||e===c}function i(...e){let t=0;const n=e.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);return e.forEach((e=>{i.set(e,t),t+=e.length})),i}async function o(e){return new Promise(((t,n)=>{const i=new FileReader;i.addEventListener("error",(()=>{i.abort(),n(i.error)})),i.addEventListener("load",(()=>{t(new Uint8Array(i.result))})),i.readAsArrayBuffer(e)}))}async function r(e){if(!(e instanceof Blob||e instanceof File))throw new TypeError("The argument must be a Blob or a File");const t=await o(e);if(255!==t[0]&&t[1]!==a.SOI)throw new Error("Not a JPEG");let r=t;for(let e=2;e<r.length&&255===r[e];){const t=2+(r[e+2]<<8|r[e+3]);if(r[e+1]===a.APP1){let o="";for(let t=e+4;0!==r[t]&&t<r.length;t++)o+=String.fromCharCode(r[t]);if(n(o)){const n=r.slice(0,e),o=r.slice(e+t);r=i(n,o)}else e+=t}else e+=t}return new Blob([r],{type:e.type})}Object.defineProperty(t,"__esModule",{value:!0}),t.setExifData=t.removeExifData=t.getExifBytesFromJpeg=void 0;const a={SOI:216,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,COM:254},s="Exif",l="http://ns.adobe.com/xap/1.0/",c="http://ns.adobe.com/xmp/extension/";t.getExifBytesFromJpeg=async function(e){if(!(e instanceof Blob||e instanceof File))throw new TypeError("The argument must be a Blob or a File");const t=await o(e);let r=new Uint8Array(0);if(255!==t[0]&&t[1]!==a.SOI)throw new Error("Not a JPEG");for(let e=2;e<t.length&&255===t[e];){const o=2+(t[e+2]<<8|t[e+3]);if(t[e+1]===a.APP1){let a="";for(let n=e+4;0!==t[n]&&n<t.length;n++)a+=String.fromCharCode(t[n]);n(a)&&(r=i(r,t.slice(e,o+e)))}e+=o}return r},t.removeExifData=r,t.setExifData=async function(e,t){e=await r(e);const n=await o(e);let s=2;255===n[2]&&n[3]===a.APP0&&(s+=2+(n[4]<<8|n[5]));const l=i(n.slice(0,s),t,n.slice(s));return new Blob([l],{type:e.type})}})),define("WoltLabSuite/Core/Image/ImageUtil",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.containsTransparentPixels=void 0,t.containsTransparentPixels=function(e){const t=e.getContext("2d");if(!t)throw new Error("Unable to get canvas context.");const n=t.getImageData(0,0,e.width,e.height);for(let e=3,t=n.data.length;e<t;e+=4)if(255!==n.data[e])return!0;return!1}})),define("WoltLabSuite/Core/Image/Resizer",["require","exports","tslib","../FileUtil","./ExifUtil","pica"],(function(e,t,n,i,o,r){"use strict";i=n.__importStar(i),o=n.__importStar(o);const a=new((r=n.__importDefault(r)).default)({features:["js","wasm","ww"]}),s="image/jpeg";return class{maxWidth=800;maxHeight=600;quality=.8;fileType=s;setMaxWidth(e){return null==e&&(e=800),this.maxWidth=e,this}setMaxHeight(e){return null==e&&(e=600),this.maxHeight=e,this}setQuality(e){return null==e&&(e=.8),this.quality=e,this}setFileType(e){return null==e&&(e=s),this.fileType=e,this}async saveFile(e,t,n=this.fileType,r=this.quality){const s=/(.+)(\..+?)$/.exec(t);let l=await a.toBlob(e.image,n,r);return"image/jpeg"===n&&void 0!==e.exif&&(l=await o.setExifData(l,e.exif)),i.blobToFile(l,s[1])}async loadFile(e){let t=Promise.resolve(void 0),n=e;"image/jpeg"===e.type&&(t=o.getExifBytesFromJpeg(e),n=await o.removeExifData(n));const i=new Promise(((e,t)=>{const i=new FileReader,o=new Image;i.addEventListener("load",(()=>{o.src=i.result})),i.addEventListener("error",(()=>{i.abort(),t(i.error)})),o.addEventListener("error",t),o.addEventListener("load",(()=>{e(o)})),i.readAsDataURL(n)})),[r,a]=await Promise.all([t,i]);return{exif:r,image:a}}async resize(e,t=this.maxWidth,n=this.maxHeight,i=this.quality,o=!1,r){const s=document.createElement("canvas");if(window.createImageBitmap&&(await createImageBitmap(e)).height!=e.height)throw new Error("Chrome Bug #1069965");const l=Math.min(t,e.width),c=Math.min(n,e.height);if(e.width<=l&&e.height<=c&&!o)return;const d=Math.min(l/e.width,c/e.height);s.width=Math.floor(e.width*d),s.height=Math.floor(e.height*d);let u=1;i>=.8?u=3:i>=.4&&(u=2);const p={quality:u,cancelToken:r,alpha:!0};return a.resize(e,s,p)}}})),define("WoltLabSuite/Core/Language/Chooser",["require","exports","tslib","../Core","../Language","../Dom/Util","../Ui/Dropdown/Simple"],(function(e,t,n,i,o,r,a){"use strict";function s(e,t,n){const o=u.get(e);if(void 0===n&&void 0===(n=Array.from(o.dropdownMenu.children).find((e=>~~e.dataset.languageId===t))))throw new Error(`The language id '${t}' is unknown`);o.element.value=t.toString(),i.triggerEvent(o.element,"change"),o.dropdownToggle.innerHTML=n.children[0].innerHTML;const r=document.createElement("fa-icon");r.setIcon("caret-down",!0),o.dropdownToggle.append(r),u.set(e,o),"function"==typeof o.callback&&o.callback(n)}function l(e){const t=e.currentTarget;p.get(t).forEach((e=>{const n=document.createElement("input");n.type="hidden",n.name=e,n.value=d(e).toString(),t.appendChild(n)}))}function c(e){const t=u.get(e);if(void 0===t)throw new Error(`Expected a valid language chooser input element, '${e}' is not i18n input field.`);return t}function d(e){return~~c(e).element.value}Object.defineProperty(t,"__esModule",{value:!0}),t.setLanguageId=t.removeChooser=t.getLanguageId=t.getChooser=t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a);const u=new Map,p=new WeakMap;t.init=function(e,t,n,i,c,d){if(u.has(t))return;const m=document.getElementById(e);if(null===m)throw new Error(`Expected a valid container id, cannot find '${t}'.`);let h=document.getElementById(t);null===h&&(h=document.createElement("input"),h.type="hidden",h.id=t,h.name=t,h.value=n.toString(),m.appendChild(h)),function(e,t,n,i,c,d){function m(t){const n=t.currentTarget,i=~~n.dataset.languageId,o=b.querySelector(".active");null!==o&&o.classList.remove("active"),i&&n.classList.add("active"),s(e,i,n)}let h;const f=t.parentElement;"DD"===f.nodeName?(h=document.createElement("div"),h.className="dropdown",f.insertAdjacentElement("afterbegin",h)):(h=f,h.classList.add("dropdown")),r.default.hide(t);const g=document.createElement("a");g.className="dropdownToggle boxFlag box24 inputPrefix","DD"===f.nodeName&&g.classList.add("button"),h.appendChild(g);const b=document.createElement("ul");b.className="dropdownMenu",h.appendChild(b);const v=document.createElement("fa-icon");if(v.setIcon("caret-down",!0),Object.entries(i).forEach((([e,t])=>{const i=document.createElement("li");i.className="boxFlag",i.addEventListener("click",m),i.dataset.languageId=e,void 0!==t.languageCode&&(i.dataset.languageCode=t.languageCode),b.appendChild(i);const o=document.createElement("a");o.className="box24",o.href="#",o.addEventListener("click",(e=>e.preventDefault())),i.appendChild(o);const r=document.createElement("img");r.src=t.iconPath,r.alt="",r.className="iconFlag",r.height=15,r.width=24,r.loading="eager",o.appendChild(r);const a=document.createElement("span");a.textContent=t.languageName,o.appendChild(a),+e===n&&(g.innerHTML=o.innerHTML,g.append(v))})),d){const e=document.createElement("li");e.className="dropdownDivider",b.appendChild(e);const t=document.createElement("li");t.dataset.languageId="0",t.addEventListener("click",m),b.appendChild(t);const i=document.createElement("a");i.textContent=o.get("wcf.global.language.noSelection"),t.appendChild(i),0===n&&(g.innerHTML=i.innerHTML,g.append(v)),t.addEventListener("click",m)}else if(0===n){g.innerHTML="";const e=document.createElement("div");g.appendChild(e);const t=document.createElement("fa-icon");t.size=24,t.setIcon("question"),e.appendChild(t);const n=document.createElement("span");n.textContent=o.get("wcf.global.language.noSelection"),n.append(t),e.appendChild(n)}a.default.init(g),u.set(e,{callback:c,dropdownMenu:b,dropdownToggle:g,element:t});const y=t.closest("form");if(null!==y){y.addEventListener("submit",l);let t=p.get(y);void 0===t&&(t=[],p.set(y,t)),t.push(e)}}(t,h,n,i,c,d)},t.getChooser=c,t.getLanguageId=d,t.removeChooser=function(e){u.delete(e)},t.setLanguageId=function(e,t){if(void 0===u.get(e))throw new Error(`Expected a valid  input element, '${e}' is not i18n input field.`);s(e,t)}})),define("WoltLabSuite/Core/Language/Input",["require","exports","tslib","../Dom/Util","../Language","../Ui/Dropdown/Simple","../StringUtil"],(function(e,t,n,i,o,r,a){"use strict";function s(e,t,n){const i=d.get(e),o=r.default.getDropdownMenu(i.element.closest(".inputAddon").id).querySelector(`[data-language-id="${t}"]`),a=o?o.textContent:"";if(i.languageId!==t){const o=p.get(e);if(i.languageId&&o.set(i.languageId,i.element.value),0===t?p.set(e,new Map):(i.buttonLabel.classList.contains("active")||n)&&(i.element.value=o.get(t)||""),i.buttonLabel.textContent=a,i.buttonLabel.querySelector("fa-icon")?.remove(),t){i.buttonLabel.classList.add("active");const e=document.createElement("fa-icon");e.setIcon("caret-down",!0),i.buttonLabel.append(e)}else i.buttonLabel.classList.remove("active");i.languageId=t}n||(i.element.blur(),i.element.focus()),i.callbacks.has("select")&&i.callbacks.get("select")(i.element)}function l(e,t){if("open"!==t)return;const n=r.default.getDropdownMenu(e),i=document.getElementById(e).dataset.inputId,o=d.get(i),a=p.get(i);Array.from(n.children).forEach((e=>{const t=~~(e.dataset.languageId||"");if(t){let n=!1;o.languageId&&(n=t===o.languageId?""===o.element.value.trim():!a.get(t));const i=e.querySelector("span");if(i.querySelector("fa-icon")?.remove(),n){e.classList.add("missingValue");const t=document.createElement("fa-icon");t.setIcon("triangle-exclamation"),i.append(t)}else e.classList.remove("missingValue")}}))}function c(e){const t=e.currentTarget;u.get(t).forEach((e=>{const n=d.get(e);if(!n.isEnabled)return;const i=p.get(e);n.callbacks.has("submit")&&n.callbacks.get("submit")(n.element),n.languageId&&i.set(n.languageId,n.element.value),i.size&&(i.forEach((function(n,i){const o=document.createElement("input");o.type="hidden",o.name=`${e}_i18n[${i}]`,o.value=n,t.appendChild(o)})),n.element.removeAttribute("name"))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.validate=t.isEnabled=t.enable=t.disable=t.setValues=t.getValues=t.unregister=t.registerCallback=t.init=void 0,i=n.__importDefault(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a);const d=new Map,u=new WeakMap,p=new Map;t.init=function(e,t,n,i){if(p.has(e))return;const m=document.getElementById(e);if(null===m)throw new Error(`Expected a valid element id, cannot find '${e}'.`);const h=new Map;Object.entries(t).forEach((([e,t])=>{h.set(+e,a.unescapeHTML(t))})),p.set(e,h),function(e,t,n,i,a){let p=t.parentElement;if(!p.classList.contains("inputAddon")){p=document.createElement("div"),p.className="inputAddon","TEXTAREA"===t.nodeName&&p.classList.add("inputAddonTextarea"),p.dataset.inputId=e;const n=document.activeElement===t;t.insertAdjacentElement("beforebegin",p),p.appendChild(t),n&&t.focus()}p.classList.add("dropdown");const m=document.createElement("span");m.className="button dropdownToggle inputPrefix";const h=document.createElement("span");h.textContent=o.get("wcf.global.button.disabledI18n"),m.appendChild(h),p.insertBefore(m,t);const f=document.createElement("ul");f.className="dropdownMenu",m.insertAdjacentElement("afterend",f);const g=t=>{let n;n=t instanceof HTMLElement?t:t.currentTarget;const i=~~n.dataset.languageId,o=f.querySelector(".active");null!==o&&o.classList.remove("active"),i&&n.classList.add("active");const r=t instanceof HTMLElement;s(e,i,r)};if(Object.entries(i).forEach((([e,t])=>{const n=document.createElement("li");n.dataset.languageId=e;const i=document.createElement("span");i.textContent=t,n.appendChild(i),n.addEventListener("click",g),f.appendChild(n)})),!a){const e=document.createElement("li");e.className="dropdownDivider",f.appendChild(e);const t=document.createElement("li");t.dataset.languageId="0",t.addEventListener("click",g);const n=document.createElement("span");n.textContent=o.get("wcf.global.button.disabledI18n"),t.appendChild(n),f.appendChild(t)}let b;(a||n.size)&&(b=Array.from(f.children).find((e=>+e.dataset.languageId===window.LANGUAGE_ID))),r.default.init(m),r.default.registerCallback(p.id,l),d.set(e,{buttonLabel:h,callbacks:new Map,element:t,languageId:0,isEnabled:!0,forceSelection:a});const v=t.closest("form");if(null!==v){v.addEventListener("submit",c);let t=u.get(v);void 0===t&&(t=[],u.set(v,t)),t.push(e)}b&&g(b)}(e,m,h,n,i)},t.registerCallback=function(e,t,n){if(!p.has(e))throw new Error(`Unknown element id '${e}'.`);d.get(e).callbacks.set(t,n)},t.unregister=function(e){if(!p.has(e))throw new Error(`Unknown element id '${e}'.`);p.delete(e),d.delete(e)},t.getValues=function(e){const t=d.get(e);if(void 0===t)throw new Error(`Expected a valid i18n input element, '${e}' is not i18n input field.`);const n=p.get(e);return n.set(t.languageId,t.element.value),n},t.setValues=function(e,t){const n=d.get(e);if(void 0===n)throw new Error(`Expected a valid i18n input element, '${e}' is not i18n input field.`);n.element.value="";const i=new Map(Object.entries(t).map((([e,t])=>[+e,t])));if(i.has(0))return n.element.value=i.get(0),i.delete(0),p.set(e,i),void s(e,0,!0);p.set(e,i),n.languageId=0,s(e,window.LANGUAGE_ID,!0)},t.disable=function(e){const t=d.get(e);if(void 0===t)throw new Error(`Expected a valid element, '${e}' is not an i18n input field.`);if(!t.isEnabled)return;t.isEnabled=!1;const n=t.buttonLabel.parentElement;i.default.hide(n),n.parentElement.classList.remove("inputAddon","dropdown")},t.enable=function(e){const t=d.get(e);if(void 0===t)throw new Error(`Expected a valid i18n input element, '${e}' is not i18n input field.`);if(t.isEnabled)return;t.isEnabled=!0;const n=t.buttonLabel.parentElement;i.default.show(n),n.parentElement.classList.add("inputAddon","dropdown")},t.isEnabled=function(e){const t=d.get(e);if(void 0===t)throw new Error(`Expected a valid i18n input element, '${e}' is not i18n input field.`);return t.isEnabled},t.validate=function(e,t){const n=d.get(e);if(void 0===n)throw new Error(`Expected a valid i18n input element, '${e}' is not i18n input field.`);if(!n.isEnabled)return!0;const i=p.get(e),o=r.default.getDropdownMenu(n.element.parentElement.id);n.languageId&&i.set(n.languageId,n.element.value);let a=!1,s=!1;return Array.from(o.children).forEach((e=>{const t=~~e.dataset.languageId;if(t)if(i.has(t)&&0!==i.get(t).length){if(a)return!1;s=!0}else{if(s)return!1;a=!0}})),!a||t}})),define("WoltLabSuite/Core/Language/Text",["require","exports","tslib","./Input","../Component/Ckeditor"],(function(e,t,n,i,o){"use strict";function r(e){(0,o.getCkeditor)(e).setHtml(e.value)}function a(e){e.value=(0,o.getCkeditor)(e).getHtml()}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),t.init=function(e,t,n,o){const s=document.getElementById(e);if(!s||"TEXTAREA"!==s.nodeName||!s.classList.contains("wysiwygTextarea"))throw new Error(`Expected <textarea class="wysiwygTextarea" /> for id '${e}'.`);i.init(e,t,n,o),i.registerCallback(e,"select",r),i.registerCallback(e,"submit",a)}})),define("WoltLabSuite/Core/Media/Clipboard",["require","exports","tslib","../Controller/Clipboard","../Ui/Notification","../Ui/Dialog","../Event/Handler","../Language","../Ajax"],(function(e,t,n,i,o,r,a,s,l){"use strict";let c;Object.defineProperty(t,"__esModule",{value:!0}),t.setMediaManager=t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l);let d=!1;const u=new class{_ajaxSetup(){return{data:{className:"wcf\\data\\media\\MediaAction"}}}_ajaxSuccess(e){switch(e.actionName){case"getSetCategoryDialog":r.open(this,e.returnValues.template);break;case"setCategory":r.close(this),o.show(),i.reload()}}_dialogSetup(){return{id:"mediaSetCategoryDialog",options:{onSetup:e=>{e.querySelector("button").addEventListener("click",(t=>{t.preventDefault();var n;n=~~e.querySelector('select[name="categoryID"]').value,l.api(u,{actionName:"setCategory",objectIDs:p,parameters:{categoryID:n}}),t.currentTarget.disabled=!0}))},title:s.get("wcf.media.setCategory")},source:null}}};let p=[];t.init=function(e,t,n){d||(i.setup({hasMarkedItems:t,pageClassName:e}),a.add("com.woltlab.wcf.clipboard","com.woltlab.wcf.media",(e=>function(e){const t=e.data.parameters.objectIDs;switch(e.data.actionName){case"com.woltlab.wcf.media.delete":null!==e.responseData&&c.clipboardDeleteMedia(t);break;case"com.woltlab.wcf.media.insert":c.clipboardInsertMedia(t);break;case"com.woltlab.wcf.media.setCategory":p=t,l.api(u,{actionName:"getSetCategoryDialog"})}}(e))),d=!0),c=n},t.setMediaManager=function(e){c=e}})),define("WoltLabSuite/Core/Media/Upload",["require","exports","tslib","../Upload","../Core","../Dom/Util","../Language","../User","../Date/Util","../FileUtil","../Dom/Change/Listener","../Event/Handler"],(function(e,t,n,i,o,r,a,s,l,c,d,u){"use strict";i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importDefault(s),l=n.__importStar(l),c=n.__importStar(c),d=n.__importStar(d),u=n.__importStar(u);class p extends i.default{_categoryId=null;_elementTagSize;_mediaManager;constructor(e,t,n){super(e,t,o.extend({className:"wcf\\data\\media\\MediaAction",multiple:!!n.mediaManager,singleFileRequests:!0},n||{})),n=n||{},this._elementTagSize=144,this._options.elementTagSize&&(this._elementTagSize=this._options.elementTagSize),this._mediaManager=null,this._options.mediaManager&&(this._mediaManager=this._options.mediaManager,delete this._options.mediaManager)}_createFileElement(e){let t;if("OL"===this._target.nodeName||"UL"===this._target.nodeName)t=document.createElement("li");else{if("TBODY"===this._target.nodeName){const n=this._target.getElementsByTagName("TR")[0],i=this._target.parentNode.parentNode;return"none"===i.style.getPropertyValue("display")?(t=n,i.style.removeProperty("display"),document.getElementById(this._target.dataset.noItemsInfo).remove()):(t=n.cloneNode(!0),t.removeAttribute("id"),r.identify(t)),Array.from(t.getElementsByTagName("TD")).forEach((t=>{if(t.classList.contains("columnMark"))t.querySelectorAll("[data-object-id]").forEach((e=>r.hide(e)));else if(t.classList.contains("columnIcon"))t.querySelectorAll("[data-object-id]").forEach((e=>r.hide(e))),t.querySelector(".mediaEditButton").classList.add("jsMediaEditButton"),t.querySelector(".jsObjectAction[data-object-action='delete']").dataset.confirmMessage=a.get("wcf.media.delete.confirmMessage",{title:e.name});else if(t.classList.contains("columnFilename")){let n=t.querySelector("img");n||(n=t.querySelector("fa-icon"));const i=document.createElement("span");i.innerHTML='<fa-icon size="48" name="spinner"></fa-icon>',i.classList.add("mediaThumbnail"),r.replaceElement(n,i);const o=t.querySelectorAll(".box48 > div > p");o[0].textContent=e.name;let a=o[1].getElementsByTagName("A")[0];a||(a=document.createElement("a"),o[1].getElementsByTagName("SMALL")[0].appendChild(a)),a.setAttribute("href",s.default.getLink()),a.textContent=s.default.username}else t.classList.contains("columnUploadTime")?(t.innerHTML="",t.appendChild(l.getTimeElement(new Date))):t.classList.contains("columnFilesize")?t.textContent=c.formatFilesize(e.size):t.classList.contains("columnDownloads")?t.textContent="0":t.innerHTML=""})),r.prepend(t,this._target),t}t=document.createElement("p")}const n=document.createElement("div");n.classList.add("mediaThumbnail"),t.appendChild(n);const i=document.createElement("fa-icon");i.size=144,i.setIcon("spinner"),n.appendChild(i);const o=document.createElement("div");o.className="mediaInformation",t.appendChild(o);const u=document.createElement("p");u.className="mediaTitle",u.textContent=e.name,o.appendChild(u);const p=document.createElement("progress");return p.max=100,o.appendChild(p),r.prepend(t,this._target),d.trigger(),t}_getParameters(){const e={elementTagSize:this._elementTagSize};if(this._mediaManager){e.imagesOnly=this._mediaManager.getOption("imagesOnly");const t=this._mediaManager.getCategoryId();t&&(e.categoryID=t)}return o.extend(super._getParameters(),e)}_replaceFileIcon(e,t,n){if(t.elementTag)e.outerHTML=t.elementTag;else if(t.tinyThumbnailType){const i=document.createElement("img");i.src=t.tinyThumbnailLink,i.alt="",i.style.setProperty("width",`${n}px`),i.style.setProperty("height",`${n}px`),r.replaceElement(e,i)}else{let n=c.getIconNameByFilename(t.filename);n=n?`file-${n}`:"file",e.setIcon(n,!1)}}_success(e,t){const n=this._fileElements[e];n.forEach((e=>{const n=e.dataset.internalFileId,i=t.returnValues.media[n];if("TR"===e.tagName)if(i)e.dataset.objectId=i.mediaID.toString(),e.querySelectorAll("[data-object-id]").forEach((e=>{e.dataset.objectId=i.mediaID.toString(),e.style.removeProperty("display")})),e.querySelector(".columnMediaID").textContent=i.mediaID.toString(),this._replaceFileIcon(e.querySelector(".columnFilename fa-icon"),i,48);else{let i=t.returnValues.errors[n];i||(i={errorType:"uploadFailed",filename:e.dataset.filename});const o=document.createElement("button");o.type="button",o.classList.add("jsTooltip"),o.title=a.get("wcf.global.button.delete"),o.addEventListener("click",(()=>{o.closest(".mediaFile").remove(),u.fire("com.woltlab.wcf.media.upload","removedErroneousUploadRow")}));const s=e.querySelector("fa-icon");s.setIcon("xmark"),s.insertAdjacentElement("beforebegin",o),o.append(s),e.classList.add("uploadFailed");const l=e.querySelectorAll(".columnFilename .box48 > div > p")[1];r.innerError(l,a.get(`wcf.media.upload.error.${i.errorType}`,{filename:i.filename})),l.remove()}else if(e.querySelector(".mediaInformation progress").remove(),i){const t=e.querySelector(".mediaThumbnail fa-icon");this._replaceFileIcon(t,i,144),e.classList.add("jsClipboardObject","mediaFile","jsObjectActionObject"),e.dataset.objectId=i.mediaID.toString(),this._mediaManager&&(this._mediaManager.setupMediaElement(i,e),this._mediaManager.addMedia(i,e))}else{let i=t.returnValues.errors[n];i||(i={errorType:"uploadFailed",filename:e.dataset.filename}),e.querySelector(".mediaThumbnail fa-icon").setIcon("xmark"),e.classList.add("uploadFailed","pointer","jsTooltip"),e.title=a.get("wcf.global.button.delete"),e.addEventListener("click",(()=>e.remove())),e.querySelector(".mediaInformation .mediaTitle").textContent=a.get(`wcf.media.upload.error.${i.errorType}`,{filename:i.filename})}d.trigger()})),u.fire("com.woltlab.wcf.media.upload","success",{files:n,isMultiFileUpload:-1!==this._multiFileUploadIds.indexOf(e),media:t.returnValues.media,upload:this,uploadId:e})}}return p})),define("WoltLabSuite/Core/Media/Replace",["require","exports","tslib","../Core","./Upload","../Language","../Dom/Util","../Ui/Notification","../Dom/Change/Listener"],(function(e,t,n,i,o,r,a,s,l){"use strict";i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l);class c extends o.default{_mediaID;constructor(e,t,n,o){super(t,n,i.extend(o,{action:"replaceFile"})),this._mediaID=e}_createButton(){super._createButton(),this._button.classList.add("small"),this._button.querySelector("span").textContent=r.get("wcf.media.button.replaceFile")}_createFileElement(){return this._target}_getFormData(){return{objectIDs:[this._mediaID]}}_success(e,t){this._fileElements[e].forEach((e=>{const n=e.dataset.internalFileId,i=t.returnValues.media[n];if(i)i.isImage&&(this._target.innerHTML=i.smallThumbnailTag),document.getElementById("mediaFilename").textContent=i.filename,document.getElementById("mediaFilesize").textContent=i.formattedFilesize,i.isImage&&(document.getElementById("mediaImageDimensions").textContent=i.imageDimensions),document.getElementById("mediaUploader").innerHTML=i.userLinkElement,this._options.mediaEditor.updateData(i),a.default.innerError(this._buttonContainer,""),s.show();else{let i=t.returnValues.errors[n];i||(i={errorType:"uploadFailed",filename:e.dataset.filename}),a.default.innerError(this._buttonContainer,r.get("wcf.media.upload.error."+i.errorType,{filename:i.filename}))}l.trigger()}))}}return c})),define("WoltLabSuite/Core/Media/Editor",["require","exports","tslib","../Ui/Notification","../Ui/Dialog","../Language/Chooser","../Language/Input","../Dom/Util","../Dom/Traverse","../Dom/Change/Listener","../Language","../Ajax","./Replace"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importDefault(c),d=n.__importStar(d),u=n.__importStar(u),p=n.__importDefault(p),class{_availableLanguageCount=1;_categoryIds=[];_dialogs=new Map;_callbackObject;_media=null;_oldCategoryId=0;constructor(e){if(this._callbackObject=e||{},this._callbackObject._editorClose&&"function"!=typeof this._callbackObject._editorClose)throw new TypeError("Callback object has no function '_editorClose'.");if(this._callbackObject._editorSuccess&&"function"!=typeof this._callbackObject._editorSuccess)throw new TypeError("Callback object has no function '_editorSuccess'.")}_ajaxSetup(){return{data:{actionName:"update",className:"wcf\\data\\media\\MediaAction"}}}_ajaxSuccess(){i.show(),this._callbackObject._editorSuccess&&(this._callbackObject._editorSuccess(this._media,this._oldCategoryId),this._oldCategoryId=0),o.close(`mediaEditor_${this._media.mediaID}`),this._media=null}_close(){this._media=null,this._callbackObject._editorClose&&this._callbackObject._editorClose()}_initEditor(e,t){this._availableLanguageCount=~~t.returnValues.availableLanguageCount,this._categoryIds=t.returnValues.categoryIDs.map((e=>~~e)),t.returnValues.mediaData&&(this._media=t.returnValues.mediaData);const n=this._media,i=n.mediaID;setTimeout((()=>{if(this._availableLanguageCount>1&&r.setLanguageId(`mediaEditor_${i}_languageID`,n.languageID||window.LANGUAGE_ID),this._categoryIds.length){const t=e.querySelector("select[name=categoryID]");n.categoryID?t.value=n.categoryID.toString():t.value="0"}const t=e.querySelector("input[name=title]"),o=e.querySelector("input[name=altText]"),l=e.querySelector("textarea[name=caption]");if(this._availableLanguageCount>1&&n.isMultilingual?(document.getElementById(`altText_${i}`)&&a.setValues(`altText_${i}`,n.altText||{}),document.getElementById(`caption_${i}`)&&a.setValues(`caption_${i}`,n.caption||{}),a.setValues(`title_${i}`,n.title||{})):(t.value=n.title?n.title[n.languageID||window.LANGUAGE_ID]:"",o&&(o.value=n.altText?n.altText[n.languageID||window.LANGUAGE_ID]:""),l&&(l.value=n.caption?n.caption[n.languageID||window.LANGUAGE_ID]:"")),this._availableLanguageCount>1){const t=e.querySelector("input[name=isMultilingual]");t.addEventListener("change",(e=>this._updateLanguageFields(e))),this._updateLanguageFields(null,t)}o&&o.addEventListener("keypress",(e=>this._keyPress(e))),t.addEventListener("keypress",(e=>this._keyPress(e))),e.querySelector("button[data-type=submit]").addEventListener("click",(()=>this._saveData())),document.activeElement.blur(),document.getElementById(`mediaEditor_${i}`).parentNode.scrollTop=0;const d=e.querySelector(".mediaManagerMediaReplaceButton");let u=e.querySelector(".mediaThumbnail");u||(u=document.createElement("div"),e.appendChild(u)),new p.default(i,s.identify(d),s.identify(u),{mediaEditor:this}),c.default.trigger()}),200)}_keyPress(e){"Enter"===e.key&&(e.preventDefault(),this._saveData())}_saveData(){const e=o.getDialog(`mediaEditor_${this._media.mediaID}`).content,t=e.querySelector("select[name=categoryID]"),n=e.querySelector("input[name=altText]"),i=e.querySelector("textarea[name=caption]"),c=e.querySelector("input[name=captionEnableHtml]"),p=e.querySelector("input[name=title]");let m=!1;const h=!!n&&l.childByClass(n.parentNode,"innerError"),f=!!i&&l.childByClass(i.parentNode,"innerError"),g=l.childByClass(p.parentNode,"innerError");if(this._oldCategoryId=this._media.categoryID,this._categoryIds.length&&(this._media.categoryID=~~t.value,-1===this._categoryIds.indexOf(this._media.categoryID)&&(this._media.categoryID=0)),this._availableLanguageCount>1){const t=e.querySelector("input[name=isMultilingual]");this._media.isMultilingual=~~t.checked,this._media.languageID=this._media.isMultilingual?null:r.getLanguageId(`mediaEditor_${this._media.mediaID}_languageID`)}else this._media.languageID=window.LANGUAGE_ID;this._media.altText={},this._media.caption={},this._media.title={},this._availableLanguageCount>1&&this._media.isMultilingual?(n&&!a.validate(n.id,!0)&&(m=!0,h||s.innerError(n,d.get("wcf.global.form.error.multilingual"))),i&&!a.validate(i.id,!0)&&(m=!0,f||s.innerError(i,d.get("wcf.global.form.error.multilingual"))),a.validate(p.id,!0)||(m=!0,g||s.innerError(p,d.get("wcf.global.form.error.multilingual"))),this._media.altText=n?this.mapToI18nValues(a.getValues(n.id)):"",this._media.caption=i?this.mapToI18nValues(a.getValues(i.id)):"",this._media.title=this.mapToI18nValues(a.getValues(p.id))):(this._media.altText[this._media.languageID]=n?n.value:"",this._media.caption[this._media.languageID]=i?i.value:"",this._media.title[this._media.languageID]=p.value),this._media.captionEnableHtml=c?~~c.checked:0;const b={allowAll:~~document.getElementById(`mediaEditor_${this._media.mediaID}_aclAllowAll`).checked,group:Array.from(e.querySelectorAll(`input[name="mediaEditor_${this._media.mediaID}_aclValues[group][]"]`)).map((e=>~~e.value)),user:Array.from(e.querySelectorAll(`input[name="mediaEditor_${this._media.mediaID}_aclValues[user][]"]`)).map((e=>~~e.value))};m||(h&&h.remove(),f&&f.remove(),g&&g.remove(),u.api(this,{actionName:"update",objectIDs:[this._media.mediaID],parameters:{aclValues:b,altText:this._media.altText,caption:this._media.caption,data:{captionEnableHtml:this._media.captionEnableHtml,categoryID:this._media.categoryID,isMultilingual:this._media.isMultilingual,languageID:this._media.languageID},title:this._media.title}}))}mapToI18nValues(e){const t={};return e.forEach(((e,n)=>t[n]=e)),t}_updateLanguageFields(e,t){e&&(t=e.currentTarget);const n=this._media.mediaID,i=document.getElementById(`mediaEditor_${n}_languageIDContainer`).parentNode;t.checked?(a.enable(`title_${n}`),document.getElementById(`caption_${n}`)&&a.enable(`caption_${n}`),document.getElementById(`altText_${n}`)&&a.enable(`altText_${n}`),s.hide(i)):(a.disable(`title_${n}`),document.getElementById(`caption_${n}`)&&a.disable(`caption_${n}`),document.getElementById(`altText_${n}`)&&a.disable(`altText_${n}`),s.show(i))}edit(e){let t,n=0;if("object"==typeof e?(t=e,n=t.mediaID):(t={mediaID:e},n=e),null!==this._media)throw new Error(`Cannot edit media with id ${n} while editing media with id '${this._media.mediaID}'.`);this._media=t,this._dialogs.has(`mediaEditor_${n}`)||this._dialogs.set(`mediaEditor_${n}`,{_dialogSetup:()=>({id:`mediaEditor_${n}`,options:{backdropCloseOnClick:!1,onClose:()=>this._close(),title:d.get("wcf.media.edit")},source:{after:(e,t)=>this._initEditor(e,t),data:{actionName:"getEditorDialog",className:"wcf\\data\\media\\MediaAction",objectIDs:[n]}}})}),o.open(this._dialogs.get(`mediaEditor_${n}`))}updateData(e){this._callbackObject._editorSuccess&&this._callbackObject._editorSuccess(e,void 0,!1)}}})),define("WoltLabSuite/Core/Notification/Handler",["require","exports","tslib","../Ajax","../Core","../Event/Handler"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.poll=t.enableNotifications=t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r);class a{allowNotification;icon;inactiveSince=0;lastRequestTimestamp=window.TIME_NOW;requestTimer=void 0;constructor(e){e=o.extend({icon:""},e),this.icon=e.icon,this.prepareNextRequest(),document.addEventListener("visibilitychange",(e=>this.onVisibilityChange(e))),window.addEventListener("storage",(()=>this.onStorage())),this.onVisibilityChange(),"Notification"in window&&"granted"===Notification.permission&&(this.allowNotification=!0)}enableNotifications(){this.allowNotification=!0}onVisibilityChange(e){e&&!document.hidden&&(Date.now()-this.inactiveSince)/6e4>4&&(this.resetTimer(),this.dispatchRequest()),this.inactiveSince=document.hidden?Date.now():0}getNextDelay(){if(0===this.inactiveSince)return 5;const e=~~((Date.now()-this.inactiveSince)/6e4);return e<15?5:e<30?10:15}resetTimer(){this.requestTimer&&(window.clearTimeout(this.requestTimer),this.requestTimer=void 0)}prepareNextRequest(){this.resetTimer(),this.requestTimer=window.setTimeout((()=>this.dispatchRequest()),6e4*this.getNextDelay())}dispatchRequest(){const e={};r.fire("com.woltlab.wcf.notification","beforePoll",e),e.lastRequestTimestamp=this.lastRequestTimestamp,i.api(this,{parameters:e})}onStorage(){let e,t;this.prepareNextRequest();let n=!1;try{e=window.localStorage.getItem(o.getStoragePrefix()+"notification"),t=window.localStorage.getItem(o.getStoragePrefix()+"keepAliveData"),e=JSON.parse(e),t=JSON.parse(t)}catch(e){n=!0}n||r.fire("com.woltlab.wcf.notification","onStorage",{pollData:e,keepAliveData:t})}_ajaxSuccess(e){const t=e.returnValues.keepAliveData,n=e.returnValues.pollData;window.WCF.System.PushNotification.executeCallbacks({returnValues:t});let i=!1;try{window.localStorage.setItem(o.getStoragePrefix()+"notification",JSON.stringify(n)),window.localStorage.setItem(o.getStoragePrefix()+"keepAliveData",JSON.stringify(t))}catch(e){i=!0,window.console.log(e)}i||this.prepareNextRequest(),this.lastRequestTimestamp=e.returnValues.lastRequestTimestamp,r.fire("com.woltlab.wcf.notification","afterPoll",n),this.showNotification(n)}showNotification(e){if(this.allowNotification&&"object"==typeof e.notification&&"string"==typeof e.notification.message){let t;const n=document.createElement("div");n.innerHTML=e.notification.message,n.querySelectorAll("img").forEach((e=>{e.replaceWith(document.createTextNode(e.alt))}));try{t=new window.Notification(e.notification.title,{body:n.textContent,icon:this.icon})}catch(e){if(e instanceof Error&&"TypeError"===e.name)return;throw e}t.onclick=()=>{window.focus(),t.close(),window.location.href=e.notification.link}}}_ajaxSetup(){return{data:{actionName:"poll",className:"wcf\\data\\session\\SessionAction"},ignoreError:!window.ENABLE_DEBUG_MODE,silent:!window.ENABLE_DEBUG_MODE}}}let s;t.setup=function(e){s||(s=new a(e))},t.enableNotifications=function(){s.enableNotifications()},t.poll=function(){s?.dispatchRequest()}})),define("WoltLabSuite/Core/Timer/Repeating",["require","exports"],(function(e,t){"use strict";return class{_callback;_delta;_timer;constructor(e,t){if("function"!=typeof e)throw new TypeError("Expected a valid callback as first argument.");if(t<0||t>864e5)throw new RangeError(`Invalid delta ${t}. Delta must be in the interval [0, 86400000].`);this._callback=e.bind(void 0,this),this._delta=t,this.restart()}restart(){this.stop(),this._timer=setInterval(this._callback,this._delta)}stop(){void 0!==this._timer&&(clearInterval(this._timer),this._timer=void 0)}setDelta(e){this._delta=e,this.restart()}}})),define("WoltLabSuite/Core/Ui/Suggestion",["require","exports","tslib","../Ajax","../Core","./Dropdown/Simple"],(function(e,t,n,i,o,r){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),class{ajaxPayload;callbackSelect;dropdownMenu=null;excludedSearchValues;element;threshold;value="";constructor(e,t){const n=document.getElementById(e);if(null===n)throw new Error("Expected a valid element id.");if(this.element=n,this.ajaxPayload=o.extend({actionName:"getSearchResultList",className:"",interfaceName:"wcf\\data\\ISearchAction",parameters:{data:{}}},t.ajax),"function"!=typeof t.callbackSelect)throw new Error("Expected a valid callback for option 'callbackSelect'.");this.callbackSelect=t.callbackSelect,this.excludedSearchValues=new Set(Array.isArray(t.excludedSearchValues)?t.excludedSearchValues:[]),this.threshold=void 0===t.threshold?3:t.threshold,this.element.addEventListener("click",(e=>e.preventDefault())),this.element.addEventListener("keydown",(e=>this.keyDown(e))),this.element.addEventListener("keyup",(e=>this.keyUp(e)))}addExcludedValue(e){this.excludedSearchValues.add(e)}removeExcludedValue(e){this.excludedSearchValues.delete(e)}isActive(){return null!==this.dropdownMenu&&r.default.isOpen(this.element.id)}keyDown(e){if(!this.isActive())return!0;if(-1===["ArrowDown","ArrowUp","Enter","Escape"].indexOf(e.key))return!0;let t,n=0;const i=this.dropdownMenu.childElementCount;for(;n<i&&(t=this.dropdownMenu.children[n],!t.classList.contains("active"));)n++;if("Enter"===e.key)r.default.close(this.element.id),this.select(void 0,t);else if("Escape"===e.key){if(!r.default.isOpen(this.element.id))return!0;r.default.close(this.element.id)}else{let o=0;"ArrowUp"===e.key?o=(0===n?i:n)-1:"ArrowDown"===e.key&&(o=n+1,o===i&&(o=0)),o!==n&&(t.classList.remove("active"),this.dropdownMenu.children[o].classList.add("active"))}return e.preventDefault(),!1}select(e,t){e instanceof MouseEvent&&(t=e.currentTarget.parentNode);const n=t.children[0];this.callbackSelect(this.element.id,{objectId:+(n.dataset.objectId||0),value:t.textContent||"",type:n.dataset.type||""}),e instanceof MouseEvent&&this.element.focus()}keyUp(e){const t=e.currentTarget.value.trim();if(this.value!==t){if(t.length<this.threshold)return null!==this.dropdownMenu&&r.default.close(this.element.id),void(this.value=t);this.value=t,i.api(this,{parameters:{data:{excludedSearchValues:Array.from(this.excludedSearchValues),searchString:t}}})}}_ajaxSetup(){return{data:this.ajaxPayload}}_ajaxSuccess(e){null===this.dropdownMenu?(this.dropdownMenu=document.createElement("div"),this.dropdownMenu.className="dropdownMenu",r.default.initFragment(this.element,this.dropdownMenu)):this.dropdownMenu.innerHTML="",Array.isArray(e.returnValues)&&e.returnValues.length>0?(e.returnValues.forEach(((e,t)=>{const n=document.createElement("a");e.icon?(n.className="box16",n.innerHTML=`${e.icon} <span></span>`,n.children[1].textContent=e.label):n.textContent=e.label,n.dataset.objectId=e.objectID.toString(),e.type&&(n.dataset.type=e.type),n.addEventListener("click",(e=>this.select(e)));const i=document.createElement("li");0===t&&(i.className="active"),i.appendChild(n),this.dropdownMenu.appendChild(i)})),r.default.open(this.element.id,!0)):r.default.close(this.element.id)}}})),define("WoltLabSuite/Core/Ui/ItemList",["require","exports","tslib","../Core","../Dom/Traverse","../Language","./Suggestion","./Dropdown/Simple","../Dom/Util"],(function(e,t,n,i,o,r,a,s,l){"use strict";function c(e){const t=w.get(e);return-1===t.options.maxItems||t.list.childElementCount-1<t.options.maxItems}function d(e){const t=w.get(e);c(e)?(l.default.show(t.element),l.default.hide(t.limitReached),t.list.dataset.acceptsNewItems="true"):(l.default.hide(t.element),l.default.show(t.limitReached),t.list.dataset.acceptsNewItems="false")}function u(e){const t=e.currentTarget,n=t.parentElement.previousElementSibling;"Backspace"===e.key?0===t.value.length&&null!==n&&(n.classList.contains("active")?b(n):n.classList.add("active")):"Escape"===e.key&&null!==n&&n.classList.contains("active")&&n.classList.remove("active")}function p(e){if("Enter"===e.key){e.preventDefault();const t=e.currentTarget;if(w.get(t.id).options.restricted)return;const n=t.value.trim();n.length&&g(t.id,{objectId:0,value:n})}}function m(e){const t=e.currentTarget;if(w.get(t.id).options.restricted)return;let n=t.value;n.includes(",")&&(n=n.replace(/,/g,""),n.length?g(t.id,{objectId:0,value:n}):t.value=n)}function h(e){e.preventDefault();const t=e.clipboardData.getData("text/plain"),n=e.currentTarget,i=n.id,o=+n.maxLength;t.split(/,/).forEach((e=>{e=e.trim(),-1!==o&&e.length>o&&(e=e.substr(0,o)),e.length>0&&c(i)&&g(i,{objectId:0,value:e})}))}function f(e){const t=e.currentTarget;if(t.value.length>0){const e=t.parentElement.previousElementSibling;null!==e&&e.classList.remove("active")}}function g(e,t){const n=w.get(e),i=document.createElement("li");i.className="item";const o=document.createElement("span");if(o.className="content",o.dataset.objectId=t.objectId.toString(),t.type&&(o.dataset.type=t.type),o.textContent=t.value,i.appendChild(o),!n.element.disabled){const e=document.createElement("button");e.type="button",e.innerHTML='<fa-icon name="xmark"></fa-icon>',e.addEventListener("click",b),i.appendChild(e)}n.list.insertBefore(i,n.listItem),n.suggestion.addExcludedValue(t.value),n.element.value="",n.element.disabled||d(e);let r=v(n);"function"==typeof n.options.callbackChange&&(null===r&&(r=_(e)),n.options.callbackChange(e,r))}function b(e,t){e instanceof Event&&(e=e.currentTarget.parentElement);const n=e.parentElement.dataset.elementId||"",i=w.get(n);e.children[0].textContent&&i.suggestion.removeExcludedValue(e.children[0].textContent),e.remove(),t||i.element.focus(),d(n);let o=v(i);"function"==typeof i.options.callbackChange&&(null===o&&(o=_(n)),i.options.callbackChange(n,o))}function v(e){if(!e.options.isCSV)return null;if("function"==typeof e.options.callbackSyncShadow)return e.options.callbackSyncShadow(e);const t=_(e.element.id);return e.shadow.value=_(e.element.id).map((e=>e.value)).join(","),t}function y(e){const t=e.currentTarget,n=w.get(t.id);if(n.options.restricted)return;const i=t.value.trim();i.length&&(n.suggestion&&n.suggestion.isActive()||g(t.id,{objectId:0,value:i}))}function _(e){const t=w.get(e);if(!t)throw new Error("Element id '"+e+"' is unknown.");const n=[];return t.list.querySelectorAll(".item > span").forEach((e=>{n.push({objectId:+(e.dataset.objectId||""),value:e.textContent.trim(),type:e.dataset.type})})),n}Object.defineProperty(t,"__esModule",{value:!0}),t.setValues=t.getValues=t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a),s=n.__importDefault(s),l=n.__importDefault(l);const w=new Map;t.init=function(e,t,n){const d=document.getElementById(e);if(null===d)throw new Error("Expected a valid element id, '"+e+"' is invalid.");if(w.has(e)){const t=w.get(e);Object.keys(t).forEach((e=>{const n=t[e];n instanceof Element&&n.parentNode&&n.remove()})),s.default.destroy(e),w.delete(e)}const b=i.extend({ajax:{actionName:"getSearchResultList",className:"",parameters:{}},excludedSearchValues:[],maxItems:-1,maxLength:-1,restricted:!1,isCSV:!1,callbackChange:null,callbackSubmit:null,callbackSyncShadow:null,callbackSetupValues:null,submitFieldName:""},n),v=o.parentByTag(d,"FORM");if(null!==v)if(b.isCSV)v.addEventListener("submit",(()=>{if(c(e)){const t=w.get(e).element.value.trim();t.length&&g(e,{objectId:0,value:t})}}));else{if(!b.submitFieldName.length&&"function"!=typeof b.callbackSubmit)throw new Error("Expected a valid function for option 'callbackSubmit', a non-empty value for option 'submitFieldName' or enabling the option 'submitFieldCSV'.");v.addEventListener("submit",(()=>{if(c(e)){const t=w.get(e).element.value.trim();t.length&&g(e,{objectId:0,value:t})}const t=_(e);b.submitFieldName.length?t.forEach((e=>{const t=document.createElement("input");t.type="hidden",t.name=b.submitFieldName.replace("{$objectId}",e.objectId.toString()),t.value=e.value,v.appendChild(t)})):b.callbackSubmit(v,t)}))}const E=function(e,t){const n=e.parentElement,i=document.createElement("ol");i.className="inputItemList"+(e.disabled?" disabled":""),i.dataset.acceptsNewItems="true",i.dataset.elementId=e.id,i.addEventListener("click",(t=>{t.target===i&&e.focus()}));const o=document.createElement("li");o.className="input",i.appendChild(o),e.addEventListener("input",m),e.addEventListener("keydown",u),e.addEventListener("keypress",p),e.addEventListener("keyup",f),e.addEventListener("paste",h);const a=e===document.activeElement;a&&e.blur(),e.addEventListener("blur",y),n.insertBefore(i,e),o.appendChild(e),a&&window.setTimeout((()=>{e.focus()}),1),-1!==t.maxLength&&(e.maxLength=t.maxLength);const s=document.createElement("span");s.className="inputItemListLimitReached",s.textContent=r.get("wcf.global.form.input.maxItems"),l.default.hide(s),o.appendChild(s);let c=null;const d=[];if(t.isCSV&&(c=document.createElement("input"),c.className="itemListInputShadow",c.type="hidden",c.name=e.name,e.removeAttribute("name"),i.parentNode.insertBefore(c,i),e.value.split(",").forEach((e=>{(e=e.trim())&&d.push(e)})),"TEXTAREA"===e.nodeName)){const t=document.createElement("input");t.type="text",e.parentNode.insertBefore(t,e),t.id=e.id,e.remove(),e=t}return{element:e,limitReached:s,list:i,shadow:c,values:d}}(d,b),S=new a.default(e,{ajax:b.ajax,callbackSelect:g,excludedSearchValues:b.excludedSearchValues});w.set(e,{dropdownMenu:null,element:E.element,limitReached:E.limitReached,list:E.list,listItem:E.element.parentElement,options:b,shadow:E.shadow,suggestion:S}),t=b.callbackSetupValues?b.callbackSetupValues():E.values.length?E.values:t,Array.isArray(t)&&t.forEach((t=>{"string"==typeof t&&(t={objectId:0,value:t}),g(e,t)}))},t.getValues=_,t.setValues=function(e,t){const n=w.get(e);if(!n)throw new Error("Element id '"+e+"' is unknown.");o.childrenByClass(n.list,"item").forEach((e=>{b(e,!0)})),t.forEach((t=>{g(e,t)}))}})),define("WoltLabSuite/Core/Ui/Pagination",["require","exports"],(function(e,t){"use strict";return class{#H;#W;#V;constructor(e,t){"function"==typeof t.callbackSwitch&&(this.#H=t.callbackSwitch),"function"==typeof t.callbackShouldSwitch&&(this.#W=t.callbackShouldSwitch),this.#V=document.createElement("woltlab-core-pagination"),this.#V.count=t.maxPage,this.#V.page=t.activePage,e.append(this.#V),this.#$()}#$(){this.#V.addEventListener("switchPage",(e=>{void 0===this.#W||!1!==this.#W(e.detail)?this.#H&&this.#H(e.detail):e.preventDefault()}))}getActivePage(){return this.#V.page}getElement(){return this.#V.parentElement}getMaxPage(){return this.#V.count}switchPage(e,t){if(t instanceof MouseEvent){t.preventDefault();const e=t.currentTarget;if(e&&e.dataset.tooltip){const t=document.getElementById("balloonTooltip");if(t){const n=new Event("mouseleave",{bubbles:!0,cancelable:!0});e.dispatchEvent(n),t.style.removeProperty("top"),t.style.removeProperty("bottom")}}}if((e=~~e)>0&&this.#V.page!==e&&e<=this.#V.count){if(void 0!==this.#W&&!this.#W(e))return;this.#V.jumpToPage(e),void 0!==this.#H&&this.#H(e)}}}})),define("WoltLabSuite/Core/Wrapper/FacebookSdk",["require","exports","https://connect.facebook.net/en_US/sdk.js"],(function(e,t){"use strict";return FB.init({version:"v7.0"}),FB})),define("WoltLabSuite/Core/Component/Ckeditor/Types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("WoltLabSuite/Core/Component/Comment/GuestDialog",["require","exports","tslib","../../Controller/Captcha","../../Language","../Dialog"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showGuestDialog=void 0,i=n.__importDefault(i),t.showGuestDialog=function(e){const t="commentAdd",n=(0,r.dialogFactory)().fromHtml(e).asPrompt();n.show((0,o.getPhrase)("wcf.comment.guestDialog.title"));const a=n.content.querySelector("input[name=username]");return n.incomplete=""===a.value.trim(),a.addEventListener("input",(()=>{n.incomplete=""===a.value.trim()})),n.addEventListener("afterClose",(()=>{i.default.has(t)&&i.default.delete(t)})),new Promise((e=>{const o=i.default.setupDialog(n,t);n.addEventListener("primary",(()=>{const t={data:{username:a.value}};o.then((n=>{e({...t,...n})}))})),n.addEventListener("cancel",(()=>{e(void 0)}))}))}})),define("WoltLabSuite/Core/Component/Comment/Add",["require","exports","tslib","../../Ajax","../../Ui/Scroll","../../Ui/Notification","../../Language","../../Event/Handler","../../Dom/Util","./GuestDialog","../../Core","../Ckeditor","../Ckeditor/Event"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentAdd=void 0,o=n.__importStar(o),r=n.__importStar(r),s=n.__importStar(s),l=n.__importDefault(l),d=n.__importStar(d),t.CommentAdd=class{#z;#l;#G;#X;#Y;#Q;#K;#J;#U;constructor(e,t,n,i){this.#z=e,this.#l=this.#z.querySelector(".commentAdd__content"),this.#G=this.#z.querySelector(".commentAdd__editor"),this.#X=this.#z.querySelector(".wysiwygTextarea"),this.#Y=t,this.#Q=n,this.#K=this.#z.querySelector(".commentAdd__placeholder"),this.#J=i,this.#Z()}#Z(){this.#K.addEventListener("click",(e=>{this.#l.classList.contains("commentAdd__content--collapsed")&&(e.preventDefault(),this.#l.classList.remove("commentAdd__content--collapsed"),this.#z.classList.remove("commentAdd--collapsed"),this.#K.hidden=!0,this.#G.hidden=!1,this.#ee())})),this.#z.querySelector('button[data-type="save"]').addEventListener("click",(e=>{e.preventDefault(),this.#te()})),(0,p.listenToCkeditor)(this.#X).setupFeatures((({features:e})=>{e.heading=!1,e.quoteBlock=!1,e.spoiler=!1,e.table=!1}))}#ee(){window.setTimeout((()=>{o.element(this.#z,(()=>{this.#ne().focus()}))}),0)}#ie(){this.#z.querySelectorAll(".innerError").forEach((e=>e.remove()));const e=this.#ne().getHtml();if(""===e)return this.#oe(this.#ne().element,(0,a.getPhrase)("wcf.global.form.error.empty")),!1;const t={api:this,editor:this.#ne(),message:e,valid:!0};return s.fire("com.woltlab.wcf.ckeditor5","validate_text",t),t.valid}async#te(e={}){if(!this.#ie())return;this.#re();const t=this.#ae();let n;s.fire("com.woltlab.wcf.ckeditor5","submit_text",t.data);try{n=await(0,i.dboAction)("addComment","wcf\\data\\comment\\CommentAction").payload(d.extend(t,e)).disableLoadingIndicator().dispatch()}catch(e){return void await(0,i.handleValidationErrors)(e,(e=>(this.#oe(this.#ne().element,e.errorType),this.#se(),!0)))}if(n.guestDialog){const e=await(0,c.showGuestDialog)(n.guestDialog);void 0===e?this.#se():this.#te(e)}else this.#J(n.template),r.show((0,a.getPhrase)("wcf.global.success.add")),this.#le(),this.#se()}#ne(){return void 0===this.#U&&(this.#U=(0,u.getCkeditor)(this.#X)),this.#U}#re(){if(this.#l.classList.contains("commentAdd__content--loading"))return;const e=document.createElement("div");e.className="commentAdd__loading",e.innerHTML='<woltlab-core-loading-indicator size="96" hide-text></woltlab-core-loading-indicator>',this.#l.classList.add("commentAdd__content--loading"),this.#l.appendChild(e)}#oe(e,t){l.default.innerError(e,"empty"===t?(0,a.getPhrase)("wcf.global.form.error.empty"):t)}#ae(){return{data:{message:this.#ne().getHtml(),objectID:this.#Q,objectTypeID:this.#Y}}}#le(){this.#ne().reset(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.#l.classList.add("commentAdd__content--collapsed"),this.#z.classList.add("commentAdd--collapsed"),this.#G.hidden=!0,this.#K.hidden=!1}#se(){this.#l.classList.remove("commentAdd__content--loading");const e=this.#l.querySelector(".commentAdd__loading");null!==e&&e.remove()}}})),define("WoltLabSuite/Core/Component/Comment/Response/Add",["require","exports","tslib","../../../Dom/Util","../../../Language","../../../Event/Handler","../../../Ui/Scroll","../../../Ajax","../../../Core","../../../Ui/Notification","../../../Ajax/Error","../GuestDialog","../../Ckeditor","../../Ckeditor/Event"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentResponseAdd=void 0,i=n.__importDefault(i),r=n.__importStar(r),a=n.__importStar(a),l=n.__importStar(l),c=n.__importStar(c),t.CommentResponseAdd=class{container;#l;#X;#J;#ce=new Map;#U;#de;constructor(e,t){this.container=e,this.#l=this.container.querySelector(".commentResponseAdd__content"),this.#X=this.container.querySelector(".wysiwygTextarea"),this.#J=t,this.#Z()}#Z(){this.container.querySelector('button[data-type="save"]').addEventListener("click",(e=>{e.preventDefault(),this.#te()})),(0,m.listenToCkeditor)(this.#X).setupFeatures((({features:e})=>{e.heading=!1,e.quoteBlock=!1,e.spoiler=!1,e.table=!1}))}show(e){this.#de&&this.#ce.set(this.#de,this.#ue()),this.#pe(this.#ce.get(e)||""),this.#de=e,this.container.hidden=!1}#ie(){this.container.querySelectorAll(".innerError").forEach((e=>e.remove()));const e=this.#ne().getHtml();if(""===e)return this.#oe(this.#ne().element,(0,o.getPhrase)("wcf.global.form.error.empty")),!1;const t={api:this,editor:this.#ne(),message:e,valid:!0};return r.fire("com.woltlab.wcf.ckeditor5","validate_text",t),t.valid}async#te(e={}){if(!this.#ie())return;this.#re();const t=this.#ae();let n;r.fire("com.woltlab.wcf.ckeditor","submit_text",t.data);try{n=await(0,s.dboAction)("addResponse","wcf\\data\\comment\\CommentAction").objectIds([this.#de]).payload(l.extend(t,e)).disableLoadingIndicator().dispatch()}catch(e){if(!(e instanceof d.StatusNotOk))throw e;{const t=await e.response.clone().json();412===t.code&&t.returnValues&&this.#oe(this.#ne().element,t.returnValues.errorType)}return void this.#se()}if(n.guestDialog){const e=await(0,u.showGuestDialog)(n.guestDialog);void 0===e?this.#se():this.#te(e)}else this.#J(this.#de,n.template),c.show((0,o.getPhrase)("wcf.global.success.add")),this.#le(),this.#se()}#le(){this.#ne().reset(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.#ce.delete(this.#de),this.container.hidden=!0}#oe(e,t){i.default.innerError(e,"empty"===t?(0,o.getPhrase)("wcf.global.form.error.empty"):t)}#ne(){return void 0===this.#U&&(this.#U=(0,p.getCkeditor)(this.#X)),this.#U}#ue(){return this.#ne().getHtml()}#pe(e){this.#ne().setHtml(e);const t=this.#X.parentElement.querySelector(".innerError");null!==t&&t.remove(),this.#ee()}#ee(){window.setTimeout((()=>{a.element(this.container,(()=>{this.#ne().focus()}))}),0)}#ae(){return{data:{message:this.#ue()}}}#re(){if(this.#l.classList.contains("commentResponseAdd__content--loading"))return;const e=document.createElement("div");e.className="commentResponseAdd__loading",e.innerHTML='<woltlab-core-loading-indicator size="96" hide-text></woltlab-core-loading-indicator>',this.#l.classList.add("commentResponseAdd__content--loading"),this.#l.appendChild(e)}#se(){this.#l.classList.remove("commentResponseAdd__content--loading");const e=this.#l.querySelector(".commentResponseAdd__loading");null!==e&&e.remove()}}})),define("WoltLabSuite/Core/Ui/Reaction/Handler",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Change/Listener","../../Dom/Util","../Alignment","../CloseOverlay","../Screen","focus-trap"],(function(e,t,n,i,o,r,a,s,l,c,d){"use strict";i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importDefault(l),c=n.__importStar(c);const u=Object.values(window.REACTION_TYPES);return class{activeButton=void 0;_cache=new Map;focusTrap=void 0;_containers=new Map;_options;_objects=new Map;_objectType;_popoverCurrentObjectId=0;_popover;_popoverContent;constructor(e,t){if(!t.containerSelector)throw new Error("[WoltLabSuite/Core/Ui/Reaction/Handler] Expected a non-empty string for option 'containerSelector'.");this._objectType=e,this._popover=null,this._popoverContent=null,this._options=o.extend({buttonSelector:".reactButton",containerSelector:"",isButtonGroupNavigation:!1,isSingleItem:!1,parameters:{data:{}}},t),this.initReactButtons(),r.default.add(`WoltLabSuite/Core/Ui/Reaction/Handler-${e}`,(()=>this.initReactButtons())),l.default.add("WoltLabSuite/Core/Ui/Reaction/Handler",(()=>this._closePopover()))}initReactButtons(){let e=!1;document.querySelectorAll(this._options.containerSelector).forEach((t=>{const n=a.default.identify(t);if(this._containers.has(n))return;const i=~~t.dataset.objectId,o={reactButton:null,objectId:i,element:t};this._containers.set(n,o),this._initReactButton(t,o);const r=this._objects.get(i)||[];r.push(o),this._objects.set(i,r),e=!0})),e&&r.default.trigger()}_initReactButton(e,t){if(this._options.isSingleItem?t.reactButton=document.querySelector(this._options.buttonSelector):t.reactButton=e.querySelector(this._options.buttonSelector),null!==t.reactButton){if(1===u.length){const e=u[0];t.reactButton.title=e.title,t.reactButton.querySelector(".invisible").textContent=e.title}t.reactButton.setAttribute("role","button"),u.length>1&&(t.reactButton.setAttribute("aria-haspopup","true"),t.reactButton.setAttribute("aria-expanded","false")),t.reactButton.addEventListener("click",(e=>{this._toggleReactPopover(t.objectId,t.reactButton,e)})),t.reactButton.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._toggleReactPopover(t.objectId,t.reactButton,null))}))}}_updateReactButton(e,t){this._objects.get(e).forEach((e=>{null!==e.reactButton&&(t?(e.reactButton.classList.add("active"),e.reactButton.dataset.reactionTypeId=t.toString()):(e.reactButton.dataset.reactionTypeId="0",e.reactButton.classList.remove("active")))}))}_markReactionAsActive(){let e=null;for(const t of this._objects.get(this._popoverCurrentObjectId))null!==t.reactButton&&(e=~~t.reactButton.dataset.reactionTypeId);if(null===e)throw new Error("Unable to find react button for current popover.");const t=this._getPopover();t.querySelectorAll(".reactionTypeButton.active").forEach((e=>{e.classList.remove("active"),e.removeAttribute("aria-selected")}));const n=t.querySelector(".reactionPopoverContent");if(e){const i=t.querySelector(`.reactionTypeButton[data-reaction-type-id="${e}"]`);i.classList.add("active"),i.setAttribute("aria-selected","true"),0==~~i.dataset.isAssignable&&a.default.show(i),this._scrollReactionIntoView(n,i)}else c.is("screen-xs")&&(t.classList.contains("inverseOrder")?n.scrollTop=0:n.scrollTop=n.scrollHeight-n.clientHeight)}_scrollReactionIntoView(e,t){t.offsetTop<.75*e.clientHeight?e.scrollTop=0:e.scrollTop=t.offsetTop+t.clientHeight/2-e.clientHeight/2}_toggleReactPopover(e,t,n){if(null!==n&&(n.preventDefault(),n.stopPropagation()),1===u.length){const t=u[0];this._popoverCurrentObjectId=e,this._react(t.reactionTypeID)}else 0===this._popoverCurrentObjectId||this._popoverCurrentObjectId!==e?this._openReactPopover(e,t):this._closePopover()}_openReactPopover(e,t){0!==this._popoverCurrentObjectId&&this._closePopover(),this._popoverCurrentObjectId=e,s.set(this._getPopover(),t,{pointer:!0,horizontal:this._options.isButtonGroupNavigation?"left":"center",vertical:c.is("screen-xs")?"bottom":"top"}),this._options.isButtonGroupNavigation&&t.closest("nav").style.setProperty("opacity","1","");const n=this._getPopover();"auto"===n.style.getPropertyValue("bottom")?n.classList.add("inverseOrder"):n.classList.remove("inverseOrder"),this._markReactionAsActive(),this._rebuildOverflowIndicator(),n.classList.remove("forceHide"),n.classList.add("active"),this.activeButton=t,u.length>1&&this.activeButton.setAttribute("aria-expanded","true"),this.getFocusTrap().activate()}_getPopover(){if(null==this._popover){this._popover=document.createElement("div"),this._popover.className="reactionPopover forceHide",this._popoverContent=document.createElement("div"),this._popoverContent.className="reactionPopoverContent";const e=document.createElement("ul");e.className="reactionTypeButtonList",this._getSortedReactionTypes().forEach((t=>{const n=document.createElement("li");n.tabIndex=0,n.setAttribute("role","button"),n.className="reactionTypeButton jsTooltip",n.dataset.reactionTypeId=t.reactionTypeID.toString(),n.dataset.title=t.title,n.dataset.isAssignable=t.isAssignable.toString(),n.title=t.title;const i=document.createElement("span");i.className="reactionTypeButtonTitle",i.innerHTML=t.title,n.innerHTML=t.renderedIcon,n.appendChild(i),n.addEventListener("click",(()=>this._react(t.reactionTypeID))),n.addEventListener("keydown",(e=>this.keydown(e))),t.isAssignable||a.default.hide(n),e.appendChild(n)})),this._popoverContent.appendChild(e),this._popoverContent.addEventListener("scroll",(()=>this._rebuildOverflowIndicator()),{passive:!0}),this._popover.appendChild(this._popoverContent);const t=document.createElement("span");t.className="elementPointer",t.appendChild(document.createElement("span")),this._popover.appendChild(t),document.body.appendChild(this._popover),r.default.trigger()}return this._popover}keydown(e){if("Enter"===e.key||" "===e.key){e.preventDefault();const t=this.activeButton,n=~~e.currentTarget.dataset.reactionTypeId;this._react(n),t.focus()}}_rebuildOverflowIndicator(){const e=this._popoverContent;e.scrollTop>0?e.classList.add("overflowTop"):e.classList.remove("overflowTop"),e.scrollTop+e.clientHeight<e.scrollHeight?e.classList.add("overflowBottom"):e.classList.remove("overflowBottom")}_getSortedReactionTypes(){return u.sort(((e,t)=>e.showOrder-t.showOrder))}_closePopover(){if(0!==this._popoverCurrentObjectId){const e=this._getPopover();e.classList.remove("active"),e.querySelectorAll('.reactionTypeButton[data-is-assignable="0"]').forEach((e=>a.default.hide(e))),this._options.isButtonGroupNavigation&&this._objects.get(this._popoverCurrentObjectId).forEach((e=>{e.reactButton.closest("nav").style.cssText=""})),u.length>1&&this.activeButton.setAttribute("aria-expanded","false"),this.activeButton=void 0,this._popoverCurrentObjectId=0,this.getFocusTrap().deactivate()}}_react(e){0!=~~this._popoverCurrentObjectId&&(this._options.parameters.reactionTypeID=e,this._options.parameters.data.objectID=this._popoverCurrentObjectId,this._options.parameters.data.objectType=this._objectType,i.api(this,{parameters:this._options.parameters}),this._closePopover())}_ajaxSuccess(e){const t=~~e.returnValues.objectID,n=new Map;Object.entries(e.returnValues.reactions).forEach((([e,t])=>{n.set(parseInt(e),t)}));const i=document.querySelector(`woltlab-core-reaction-summary[object-type="${this._objectType}"][object-id="${t}"]`);i?.setData(n,e.returnValues.reactionTypeID),this._updateReactButton(t,e.returnValues.reactionTypeID)}_ajaxSetup(){return{data:{actionName:"react",className:"\\wcf\\data\\reaction\\ReactionAction"}}}getFocusTrap(){return void 0===this.focusTrap&&(this.focusTrap=(0,d.createFocusTrap)(this._popover,{allowOutsideClick:!0,escapeDeactivates:()=>(this._closePopover(),!1)})),this.focusTrap}}})),define("WoltLabSuite/Core/Component/Comment/List",["require","exports","tslib","../../Ajax","../../Dom/Change/Listener","../../Dom/Util","../../Helper/Selector","../../Language","./Add","./Response/Add","../../Ui/Scroll","../../Ui/Reaction/Handler"],(function(e,t,n,i,o,r,a,s,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,o=n.__importDefault(o),r=n.__importDefault(r),d=n.__importStar(d),u=n.__importDefault(u);class p{#z;#me;constructor(e){this.#z=e,this.#he(),this.#fe(),this.#ge(),this.#be(),this.#ve(),this.#ye()}#ye(){"true"===this.#z.dataset.enableReactions&&(new u.default("com.woltlab.wcf.comment",{containerSelector:`#${this.#z.id} .commentList__item`,buttonSelector:".comment__button--react"}),new u.default("com.woltlab.wcf.comment.response",{containerSelector:`#${this.#z.id} .commentResponseList__item`,buttonSelector:".commentResponse__button--react"}))}#ve(){window.addEventListener("hashchange",(()=>{this.#_e()})),this.#_e()}#_e(){const e=window.location.hash.match(/^#(?:[^/]+\/)?comment(\d+)(?:\/response(\d+))?/);if(e){const t=this.#z.querySelector(`.commentList__item[data-comment-id="${e[1]}"]`);if(t)if(e[2]){const n=this.#z.querySelector(`.commentResponseList__item[data-response-id="${e[2]}"]`);n?this.#we(n,!0):this.#Ee(t,parseInt(e[2]))}else this.#we(t,!0);else this.#Se(parseInt(e[1]),e[2]?parseInt(e[2]):0)}}async#Se(e,t){let n,o=this.#z.querySelector(".commentPermalink");o&&o.remove(),o=document.createElement("div"),o.classList.add("commentList__item","commentPermalink","commentPermalink--loading"),o.innerHTML='<woltlab-core-loading-indicator size="48" hide-text></woltlab-core-loading-indicator>',this.#z.querySelector(".commentList")?.prepend(o);try{n=await(0,i.dboAction)("loadComment","wcf\\data\\comment\\CommentAction").objectIds([e]).payload({responseID:t}).dispatch()}catch(e){return void await(0,i.handleValidationErrors)(e,(()=>(o.remove(),!0)))}const{template:a,response:s}=n;r.default.insertHtml(a,o,"before"),o.remove();const l=this.#z.querySelector(`.commentList__item[data-comment-id="${e}"]`);if(l.classList.add("commentPermalink"),s){const e=document.createElement("div");e.classList.add("commentResponseList__item","commentResponsePermalink","commentResponsePermalink--loading"),e.innerHTML='<woltlab-core-loading-indicator size="32" hide-text></woltlab-core-loading-indicator>',l.querySelector(".commentResponseList").prepend(e),this.#Ce(s)}else this.#we(l,!0)}#Ce(e){const t=this.#z.querySelector(".commentResponsePermalink");r.default.insertHtml(e,t,"before");const n=t.previousElementSibling;t.classList.add("commentResponsePermalink"),t.remove(),this.#we(n,!0)}async#Ee(e,t){let n,o=e.querySelector(".commentResponsePermalink");o&&o.remove(),o=document.createElement("div"),o.classList.add("commentResponseList__item","commentResponsePermalink","commentResponsePermalink--loading"),o.innerHTML='<woltlab-core-loading-indicator size="32" hide-text></woltlab-core-loading-indicator>',e.querySelector(".commentResponseList").prepend(o);try{n=await(0,i.dboAction)("loadResponse","wcf\\data\\comment\\CommentAction").payload({responseID:t}).dispatch()}catch(e){return void await(0,i.handleValidationErrors)(e,(()=>(o.remove(),!0)))}this.#Ce(n.template)}#we(e,t=!1){d.element(e,(()=>{t&&(e.classList.contains("comment__highlight__target")&&e.classList.remove("comment__highlight__target"),e.classList.add("comment__highlight__target"))}))}#be(){"true"===this.#z.dataset.canAdd&&(new l.CommentAdd(this.#z.querySelector(".commentAdd"),parseInt(this.#z.dataset.objectTypeId),parseInt(this.#z.dataset.objectId),(e=>{this.#Le(e)})),this.#me=new c.CommentResponseAdd(this.#z.querySelector(".commentResponseAdd"),((e,t)=>{this.#ke(e,t)})))}#he(){(0,a.wheneverFirstSeen)("woltlab-core-comment",(e=>{this.#z.contains(e)&&(e.addEventListener("reply",(()=>{this.#xe(e,e.commentId)})),e.addEventListener("delete",(()=>{e.parentElement?.remove()})),this.#Me(e.parentElement))}))}#fe(){(0,a.wheneverFirstSeen)("woltlab-core-comment-response",(e=>{this.#z.contains(e)&&e.addEventListener("delete",(()=>{e.parentElement?.remove()}))}))}#Me(e){const t=e.querySelectorAll(".commentResponse").length,n=parseInt(e.dataset.responses);if(t<n){const i=(0,s.getPhrase)("wcf.comment.response.more",{count:n-t});if(e.querySelector(".commentLoadNextResponses"))e.querySelector(".commentLoadNextResponses__button").textContent=i;else{const t=document.createElement("div");t.classList.add("commentResponseList__item","commentLoadNextResponses"),e.querySelector(".commentResponseList").append(t);const n=document.createElement("button");n.type="button",n.classList.add("button","small","commentLoadNextResponses__button"),n.textContent=i,t.append(n),n.addEventListener("click",(()=>{this.#Ie(e)}))}}else e.querySelector(".commentLoadNextResponses")?.remove()}async#Ie(e,t=!1){e.querySelector(".commentLoadNextResponses__button").disabled=!0;const n=await(0,i.dboAction)("loadResponses","wcf\\data\\comment\\response\\CommentResponseAction").payload({data:{commentID:e.dataset.commentId,lastResponseTime:e.dataset.lastResponseTime,lastResponseID:e.dataset.lastResponseId,loadAllResponses:t?1:0}}).dispatch(),o=r.default.createFragmentFromHtml(n.template);o.querySelectorAll(".commentResponseList__item").forEach((t=>{e.querySelector(`.commentResponseList__item[data-response-id="${t.dataset.responseId}"]`)?.remove()})),e.querySelector(".commentResponseList").insertBefore(o,this.#z.querySelector(".commentLoadNextResponses")),e.dataset.lastResponseTime=n.lastResponseTime.toString(),e.dataset.lastResponseId=n.lastResponseID.toString(),this.#Me(e)}#ge(){if(this.#Te<this.#De&&!this.#z.querySelector(".commentLoadNext")){const e=document.createElement("div");e.classList.add("commentList__item","commentLoadNext"),this.#z.querySelector(".commentList").append(e);const t=document.createElement("button");t.type="button",t.classList.add("button","small","commentLoadNext__button"),t.textContent=(0,s.getPhrase)("wcf.comment.more"),e.append(t),t.addEventListener("click",(()=>{this.#Ae()}))}}async#Ae(){const e=this.#z.querySelector(".commentLoadNext__button");e.disabled=!0;const t=await(0,i.dboAction)("loadComments","wcf\\data\\comment\\CommentAction").payload({data:{objectID:this.#z.dataset.objectId,objectTypeID:this.#z.dataset.objectTypeId,lastCommentTime:this.#z.dataset.lastCommentTime}}).dispatch(),n=r.default.createFragmentFromHtml(t.template);n.querySelectorAll(".commentList__item").forEach((e=>{this.#z.querySelector(`.commentList__item[data-comment-id="${e.dataset.commentId}"]`)?.remove()})),this.#z.querySelector(".commentList").insertBefore(n,this.#z.querySelector(".commentLoadNext")),this.#z.dataset.lastCommentTime=t.lastCommentTime.toString(),this.#Te<this.#De?e.disabled=!1:this.#z.querySelector(".commentLoadNext").hidden=!0}#xe(e,t){e.parentElement.append(this.#me.container),this.#me.show(t)}#Le(e){const t=this.#z.querySelector(".commentAdd").parentElement;r.default.insertHtml(e,t,"after"),o.default.trigger();const n=t.nextElementSibling;window.setTimeout((()=>{d.element(n)}),100)}#ke(e,t){const n=this.#z.querySelector(`.commentList__item[data-comment-id="${e}"]`);let i=n.querySelector(".commentResponseList");if(!i){const e=document.createElement("div");e.classList.add("comment__responses"),n.append(e),i=document.createElement("div"),i.classList.add("commentResponseList"),i.dataset.responses="1",e.append(i)}r.default.insertHtml(t,i,"append"),o.default.trigger();const a=i.firstElementChild;window.setTimeout((()=>{d.element(a)}),100)}get#Te(){return this.#z.querySelectorAll(".comment").length}get#De(){return parseInt(this.#z.dataset.comments)}}t.setup=function(e){const t=document.getElementById(e);t?new p(t):console.debug(`Unable to find the container identified by '${e}'`)}})),define("WoltLabSuite/Core/Component/Comment/woltlab-core-comment",["require","exports","tslib","../../Ajax","../../Dom/Util","../../Ui/Dropdown/Simple","../../Ui/Notification","../Confirmation","../../Ui/Scroll","../../Event/Handler","../../Language","../Ckeditor"],(function(e,t,n,i,o,r,a,s,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WoltlabCoreCommentElement=void 0,o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importStar(a),l=n.__importStar(l),c=n.__importStar(c);class p extends HTMLParsedElement{parsedCallback(){if(this.menu){const e=this.menu.querySelector(".comment__option--enable");e?.addEventListener("click",(e=>{e.preventDefault(),this.#Pe()}));const t=this.menu.querySelector(".comment__option--delete");t?.addEventListener("click",(e=>{e.preventDefault(),this.#je()}));const n=this.menu.querySelector(".comment__option--edit");n?.addEventListener("click",(e=>{e.preventDefault(),this.#Oe()}))}const e=this.querySelector(".comment__button--reply");e?.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("reply"))}))}async#Pe(){await(0,i.dboAction)("enable","wcf\\data\\comment\\CommentAction").objectIds([this.commentId]).dispatch(),this.querySelector(".comment__status--disabled").hidden=!0,this.menu&&(this.menu.querySelector(".comment__option--enable").hidden=!0)}async#je(){await(0,s.confirmationFactory)().delete()&&(await(0,i.dboAction)("delete","wcf\\data\\comment\\CommentAction").objectIds([this.commentId]).dispatch(),a.show(),this.dispatchEvent(new CustomEvent("delete")))}async#Oe(){this.menu.querySelector(".comment__option--edit").hidden=!0;const{template:e}=await(0,i.dboAction)("beginEdit","wcf\\data\\comment\\CommentAction").objectIds([this.commentId]).dispatch();this.#qe(e)}#qe(e){this.querySelector(".htmlContent").hidden=!0,o.default.insertHtml(e,this.#G,"append"),this.querySelector('button[data-type="save"]').addEventListener("click",(()=>{this.#Ne()})),this.querySelector('button[data-type="cancel"]').addEventListener("click",(()=>{this.#Be()})),c.add("com.woltlab.wcf.ckeditor5",`submitEditor_${this.#Fe}`,(e=>{e.cancel=!0,this.#Ne()})),window.setTimeout((()=>{l.element(this)}),250)}async#Ne(){const e={data:{message:(0,u.getCkeditorById)(this.#Fe).getHtml()}};if(!this.#Ue(e))return;let t;c.fire("com.woltlab.wcf.ckeditor5",`submit_${this.#Fe}`,e),this.#r();try{t=await(0,i.dboAction)("save","wcf\\data\\comment\\CommentAction").objectIds([this.commentId]).payload(e).dispatch()}catch(e){return await(0,i.handleValidationErrors)(e,(({errorType:e})=>(o.default.innerError(document.getElementById(this.#Fe),e),!0))),void this.#Re()}o.default.setInnerHtml(this.querySelector(".htmlContent"),t.message),this.#Re(),this.#Be(),a.show()}#r(){let e=this.querySelector(".comment__loading");e||(e=document.createElement("div"),e.classList.add("comment__loading"),e.innerHTML='<woltlab-core-loading-indicator size="96" hide-text></woltlab-core-loading-indicator>',this.querySelector(".comment__message").append(e)),this.#G.hidden=!0,e.hidden=!1}#Re(){this.#G.hidden=!1;const e=this.querySelector(".comment__loading");e&&(e.hidden=!0)}#Ue(e){this.querySelectorAll(".innerError").forEach((e=>e.remove()));const t=(0,u.getCkeditorById)(this.#Fe);if(""===t.getHtml())return o.default.innerError(t.element,(0,d.getPhrase)("wcf.global.form.error.empty")),!1;const n={api:this,parameters:e,valid:!0};return c.fire("com.woltlab.wcf.ckeditor5",`validate_${this.#Fe}`,n),n.valid}#Be(){(0,u.getCkeditorById)(this.#Fe).destroy(),this.#G.remove(),this.menu.querySelector(".comment__option--edit").hidden=!1,this.querySelector(".htmlContent").hidden=!1}get#G(){let e=this.querySelector(".comment__editor");return e||(e=document.createElement("div"),e.classList.add("comment__editor"),this.querySelector(".comment__message").append(e)),e}get commentId(){return parseInt(this.getAttribute("comment-id"))}get menu(){let e=r.default.getDropdownMenu(`commentOptions${this.commentId}`);return void 0===e&&(e=this.querySelector(".comment__menu .dropdownMenu")||void 0),e}get#Fe(){return`commentEditor${this.commentId}`}}t.WoltlabCoreCommentElement=p,window.customElements.define("woltlab-core-comment",p),t.default=p})),define("WoltLabSuite/Core/Ui/Search/Input",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Util","../Dropdown/Simple"],(function(e,t,n,i,o,r,a){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),class{activeItem=void 0;ajaxPayload;autoFocus;callbackDropdownInit=void 0;callbackSelect=void 0;delay;dropdownContainerId="";element;excludedSearchValues=new Set;list=void 0;lastValue="";minLength;noResultPlaceholder;preventSubmit;request=void 0;suppressErrors;timerDelay=void 0;constructor(e,t){if(this.element=e,!(this.element instanceof HTMLElement))throw new TypeError("Expected a valid DOM element.");if("INPUT"!==this.element.nodeName||"search"!==this.element.type&&"text"!==this.element.type)throw new Error('Expected an input[type="text"].');t=o.extend({ajax:{actionName:"getSearchResultList",className:"",interfaceName:"wcf\\data\\ISearchAction"},autoFocus:!0,callbackDropdownInit:void 0,callbackSelect:void 0,delay:500,excludedSearchValues:[],minLength:3,noResultPlaceholder:"",preventSubmit:!1,suppressErrors:!1},t),this.ajaxPayload=t.ajax,this.autoFocus=t.autoFocus,this.callbackDropdownInit=t.callbackDropdownInit,this.callbackSelect=t.callbackSelect,this.delay=t.delay,t.excludedSearchValues.forEach((e=>{this.addExcludedSearchValues(e)})),this.minLength=t.minLength,this.noResultPlaceholder=t.noResultPlaceholder,this.preventSubmit=t.preventSubmit,this.suppressErrors=t.suppressErrors||!1,this.element.autocomplete="off",this.element.addEventListener("keydown",(e=>this.keydown(e))),this.element.addEventListener("keyup",(e=>this.keyup(e)))}addExcludedSearchValues(e){this.excludedSearchValues.add(e)}removeExcludedSearchValues(e){this.excludedSearchValues.delete(e)}keydown(e){(this.activeItem&&a.default.isOpen(this.dropdownContainerId)||this.preventSubmit)&&"Enter"===e.key&&e.preventDefault(),["ArrowUp","ArrowDown","Escape"].includes(e.key)&&e.preventDefault()}keyup(e){if(this.activeItem||!this.autoFocus)if(a.default.isOpen(this.dropdownContainerId)){if("ArrowUp"===e.key)return e.preventDefault(),this.keyboardPreviousItem();if("ArrowDown"===e.key)return e.preventDefault(),this.keyboardNextItem();if("Enter"===e.key)return e.preventDefault(),this.keyboardSelectItem()}else this.activeItem=void 0;if("Escape"===e.key)return void a.default.close(this.dropdownContainerId);const t=this.element.value.trim();this.lastValue!==t&&(this.lastValue=t,t.length<this.minLength?this.dropdownContainerId&&(a.default.close(this.dropdownContainerId),this.activeItem=void 0):this.delay?(this.timerDelay&&window.clearTimeout(this.timerDelay),this.timerDelay=window.setTimeout((()=>{this.search(t)}),this.delay)):this.search(t))}search(e){this.request&&this.request.abortPrevious(),this.request=i.api(this,this.getParameters(e))}getParameters(e){return{parameters:{data:{excludedSearchValues:Array.from(this.excludedSearchValues),searchString:e}}}}keyboardNextItem(){let e;this.activeItem&&(this.activeItem.classList.remove("active"),this.activeItem.nextElementSibling&&(e=this.activeItem.nextElementSibling)),this.activeItem=e||this.list.children[0],this.activeItem.classList.add("active")}keyboardPreviousItem(){let e;this.activeItem&&(this.activeItem.classList.remove("active"),this.activeItem.previousElementSibling&&(e=this.activeItem.previousElementSibling)),this.activeItem=e||this.list.children[this.list.childElementCount-1],this.activeItem.classList.add("active")}keyboardSelectItem(){this.selectItem(this.activeItem)}clickSelectItem(e){this.selectItem(e.currentTarget)}selectItem(e){this.callbackSelect&&!this.callbackSelect(e)?this.element.value="":this.element.value=e.dataset.label||"",this.activeItem=void 0,a.default.close(this.dropdownContainerId)}_ajaxSuccess(e){let t=!1;if(this.list?this.list.innerHTML="":(this.list=document.createElement("ul"),this.list.className="dropdownMenu",t=!0,"function"==typeof this.callbackDropdownInit&&this.callbackDropdownInit(this.list)),"object"==typeof e.returnValues){const t=this.clickSelectItem.bind(this);Object.keys(e.returnValues).forEach((n=>{const i=this.createListItem(e.returnValues[n]);i.addEventListener("click",t),this.list.appendChild(i)}))}if(t){this.element.insertAdjacentElement("afterend",this.list);const e=this.element.parentElement;a.default.initFragment(e,this.list),this.dropdownContainerId=r.default.identify(e)}if(this.dropdownContainerId)if(this.activeItem=void 0,this.list.childElementCount||this.handleEmptyResult()){a.default.open(this.dropdownContainerId,!0,this.element);const e=this.list.childElementCount?this.list.children[0]:void 0;this.autoFocus&&e&&~~(e.dataset.objectId||"")&&(this.activeItem=e,this.activeItem.classList.add("active"))}else a.default.close(this.dropdownContainerId)}handleEmptyResult(){if(!this.noResultPlaceholder)return!1;const e=document.createElement("li");e.className="dropdownText";const t=document.createElement("span");return t.textContent=this.noResultPlaceholder,e.appendChild(t),this.list.appendChild(e),!0}createListItem(e){const t=document.createElement("li");t.dataset.objectId=e.objectID.toString(),t.dataset.label=e.label;const n=document.createElement("span");return n.textContent=e.label,t.appendChild(n),t}_ajaxSetup(){return{data:this.ajaxPayload,silent:this.suppressErrors,ignoreError:this.suppressErrors}}}})),define("WoltLabSuite/Core/Component/GoogleMaps/Geocoding/Suggestion",["require","exports","tslib","../../../Ui/Search/Input"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importDefault(i);class o extends i.default{#He;constructor(e,t,n){super(e,t),this.#He=n}search(e){this.#He.geocode({address:e},((e,t)=>{if(t===google.maps.GeocoderStatus.OK){const t={actionName:"",objectIDs:[],returnValues:{}};e.forEach((e=>{t.returnValues[e.formatted_address]={label:e.formatted_address,objectID:e.formatted_address}})),this._ajaxSuccess(t)}}))}}t.setup=function(e,t,n){new o(e,{callbackSelect:n},t)}})),define("WoltLabSuite/Core/Component/GoogleMaps/woltlab-core-google-maps",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WoltlabCoreGoogleMapsElement=void 0;let n=!1;const i=new Promise((e=>{window.woltlab_core_google_maps_callback=e}));class o extends HTMLElement{#We;#Ve;#$e;#ze=!1;#He;constructor(){super(),this.#Ve=new Promise((e=>{this.#$e=e}))}connectedCallback(){this.hidden||this.#Ge()}attributeChangedCallback(e,t,n){"hidden"===e&&null===n&&this.#Ge()}static get observedAttributes(){return["hidden"]}#Ge(){this.#ze||(this.#ie(),this.#ze=!0,(e=>{if(!n){const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?"+(e?`key=${e}&`:"")+"callback=woltlab_core_google_maps_callback",document.head.appendChild(t),n=!0}return i})(this.apiKey).then((()=>{this.hasAttribute("access-user-location")?navigator.geolocation.getCurrentPosition((e=>{this.setAttribute("lat",e.coords.latitude.toString()),this.setAttribute("lng",e.coords.longitude.toString()),this.#Xe()}),(()=>{this.#Xe()})):this.#Xe()})))}#Xe(){this.#We=new google.maps.Map(this,{zoom:this.zoom,center:{lat:this.lat,lng:this.lng}}),this.#Ye(),this.#$e&&(this.#$e(),this.#$e=void 0)}async#Ye(){await this.#Ve;const e=this.bounds;e&&this.#We.fitBounds(new google.maps.LatLngBounds(new google.maps.LatLng(e.southWest.latitude,e.southWest.longitude),new google.maps.LatLng(e.northEast.latitude,e.northEast.longitude)))}#ie(){if(!this.apiKey)throw new TypeError("Must provide an api key.")}get apiKey(){return this.getAttribute("api-key")||""}async getMap(){return await this.#Ve,this.#We}get lat(){return this.getAttribute("lat")?parseFloat(this.getAttribute("lat")):0}get lng(){return this.getAttribute("lng")?parseFloat(this.getAttribute("lng")):0}get zoom(){return this.getAttribute("zoom")?parseInt(this.getAttribute("zoom")):13}get bounds(){return this.getAttribute("bounds")?JSON.parse(this.getAttribute("bounds")):null}async getGeocoder(){return await this.#Ve,void 0===this.#He&&(this.#He=new google.maps.Geocoder),this.#He}}t.WoltlabCoreGoogleMapsElement=o,window.customElements.define("woltlab-core-google-maps",o),t.default=o})),define("WoltLabSuite/Core/Component/GoogleMaps/Marker",["require","exports","./woltlab-core-google-maps"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDraggableMarker=t.addMarker=void 0,t.addMarker=async function(e,t,n,i,o){const r=await e.getMap(),a=new google.maps.Marker({map:r,position:new google.maps.LatLng(t,n),title:i});o&&r.setCenter(a.getPosition())},t.addDraggableMarker=async function(e,t,n){const i=await e.getMap();void 0===t&&(t=e.lat),void 0===n&&(n=e.lng);const o=new google.maps.Marker({map:i,position:new google.maps.LatLng(t,n),draggable:!0,clickable:!1});return i.setCenter(o.getPosition()),o}})),define("WoltLabSuite/Core/Component/GoogleMaps/Geocoding",["require","exports","../../Helper/Selector","./Geocoding/Suggestion","./Marker","./woltlab-core-google-maps"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;class r{#w;#We;#Qe;#Ke;constructor(e,t){this.#w=e,this.#We=t,this.#Z(),this.#We.getGeocoder().then((t=>{this.#w.hasAttribute("data-google-maps-marker")&&this.#Je(),e.value&&this.#Ze(e.value),(0,i.setup)(this.#w,t,(e=>(this.#Ze(e.dataset.label),!0)))}))}#Z(){this.#w.addEventListener("geocoding:move-marker",(e=>{this.#et(e.detail.latitude,e.detail.longitude)})),this.#w.addEventListener("geocoding:resolve",(e=>{this.#We.getGeocoder().then((t=>{const n=new google.maps.LatLng(e.detail.latitude,e.detail.longitude);t.geocode({location:n},((t,n)=>{n===google.maps.GeocoderStatus.OK&&e.detail.callback(t[0].formatted_address)}))}))})),this.#w.addEventListener("geocoding:reset-marker",(()=>{this.#Ke&&this.#et(this.#Ke.lat(),this.#Ke.lng())}))}async#Je(){this.#Qe=await(0,o.addDraggableMarker)(this.#We),this.#Ke=this.#Qe.getPosition(),this.#Qe.addListener("dragend",(()=>{this.#We.getGeocoder().then((e=>{e.geocode({location:this.#Qe.getPosition()},((e,t)=>{t===google.maps.GeocoderStatus.OK&&(this.#w.value=e[0].formatted_address,this.#tt(e[0].geometry.location.lat(),e[0].geometry.location.lng()))}))}))}))}async#et(e,t){const n=new google.maps.LatLng(e,t);this.#Qe?.setPosition(n),(await this.#We.getMap()).setCenter(n),this.#tt(e,t)}async#Ze(e){(await this.#We.getGeocoder()).geocode({address:e},(async(e,t)=>{t===google.maps.GeocoderStatus.OK&&(this.#Qe?.setPosition(e[0].geometry.location),(await this.#We.getMap()).setCenter(e[0].geometry.location),this.#tt(e[0].geometry.location.lat(),e[0].geometry.location.lng()))}))}#tt(e,t){this.#w.dataset.googleMapsLat=e.toString(),this.#w.dataset.googleMapsLng=t.toString(),this.#w.hasAttribute("data-google-maps-geocoding-store")&&this.#w.form&&this.#nt(this.#w.dataset.googleMapsGeocdingStore||"",e,t)}#nt(e,t,n){const i=e+"coordinates";let o=this.#w.form.querySelector(`input[name="${i}"]`);o||(o=document.createElement("input"),o.type="hidden",o.name=i,this.#w.form.append(o)),o.value=`${t},${n}`}}t.setup=function(){(0,n.wheneverFirstSeen)("[data-google-maps-geocoding]",(e=>{const t=document.getElementById(e.dataset.googleMapsGeocoding);new r(e,t)}))}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("@googlemaps/markerclusterer",["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).markerClusterer={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){var n,i;for(n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if(void 0===Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i,o=r(e);return t?(i=r(this).constructor,n=Reflect.construct(o,arguments,i)):n=o.apply(this,arguments),function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){var n,i,o={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]]);return o}function p(e,t,n,i,o){return{x:Pl(e),y:Pl(t),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:o}}function m(e,t){const[n,i]=e.geometry.coordinates;return{x:Pl(g(n)),y:Pl(b(i)),zoom:1/0,index:t,parentId:-1}}function h(e){return{type:"Feature",id:e.id,properties:f(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),v(e.y)]}};var t}function f(e){const t=e.numPoints,n=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return y(y({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function g(e){return e/360+.5}function b(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function v(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function y(e,t){for(const n in t)e[n]=t[n];return e}function _(e){return e.x}function w(e){return e.y}var E,S,C,L,k,x,M,I,T,D,A,P,j,O,q,N,B,F,U,R,H,W,V,$,z,G,X,Y,Q,K,J,Z,ee,te,ne,ie,oe,re,ae,se,le,ce,de,ue,pe,me,he,fe,ge,be,ve,ye,_e,we,Ee,Se,Ce,Le,ke,xe,Me,Ie,Te,De,Ae,Pe,je,Oe,qe,Ne,Be,Fe,Ue,Re,He,We,Ve,$e,ze,Ge,Xe,Ye,Qe,Ke,Je,Ze,et,tt,nt,it,ot,rt,at,st,lt,ct,dt,ut,pt,mt,ht,ft,gt,bt,vt,yt,_t,wt,Et,St,Ct,Lt,kt,xt,Mt,It,Tt,Dt,At,Pt,jt,Ot,qt,Nt,Bt,Ft,Ut,Rt,Ht,Wt,Vt,$t,zt,Gt,Xt,Yt,Qt,Kt,Jt,Zt,en,tn,nn,on,rn,an,sn,ln,cn,dn,un,pn,mn,hn,fn,gn,bn,vn,yn,_n,wn,En,Sn,Cn,Ln,kn,xn,Mn,In,Tn,Dn,An,Pn,jn,On,qn,Nn,Bn,Fn,Un,Rn,Hn,Wn,Vn,$n,zn,Gn,Xn,Yn,Qn,Kn,Jn,Zn,ei,ti,ni,ii,oi,ri,ai,si,li,ci,di,ui,pi,mi,hi,fi,gi,bi,vi,yi,_i,wi,Ei,Si,Ci,Li,ki,xi,Mi,Ii,Ti,Di,Ai,Pi,ji,Oi,qi,Ni,Bi,Fi,Ui,Ri,Hi,Wi,Vi,$i,zi,Gi,Xi,Yi,Qi,Ki,Ji,Zi,eo,to,no,io,oo,ro,ao,so,lo,co,uo,po,mo,ho,fo,go,bo,vo,yo,_o,wo,Eo,So,Co,Lo,ko,xo,Mo,Io,To,Do,Ao,Po,jo,Oo,qo,No,Bo,Fo,Uo,Ro,Ho,Wo,Vo,$o,zo,Go,Xo,Yo,Qo,Ko,Jo,Zo,er,tr,nr,ir,or,rr,ar,sr,lr,cr,dr,ur,pr,mr,hr,fr,gr,br,vr,yr,_r,wr,Er,Sr,Cr,Lr,kr,xr,Mr,Ir,Tr,Dr,Ar,Pr,jr,Or,qr,Nr,Br,Fr,Ur,Rr,Hr,Wr,Vr,$r,zr,Gr,Xr,Yr,Qr,Kr,Jr,Zr,ea,ta,na,ia,oa,ra,aa,sa,la,ca,da,ua,pa,ma,ha,fa,ga,ba,va,ya,_a,wa,Ea,Sa,Ca,La,ka,xa,Ma,Ia,Ta,Da,Aa,Pa,ja,Oa,qa,Na,Ba,Fa,Ua,Ra,Ha,Wa,Va,$a,za,Ga,Xa,Ya,Qa,Ka,Ja,Za,es,ts,ns,is,os,rs,as,ss,ls,cs,ds,us,ps,ms,hs,fs,gs,bs,vs,ys,_s,ws,Es,Ss,Cs,Ls,ks,xs,Ms,Is,Ts,Ds,As,Ps,js,Os,qs,Ns,Bs,Fs,Us,Rs,Hs,Ws,Vs,$s,zs,Gs,Xs,Ys,Qs,Ks,Js,Zs,el,tl,nl,il,ol,rl,al,sl,ll,cl,dl,ul,pl,ml,hl,fl,gl,bl,vl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yl=function(e){return e&&e.Math==Math&&e},_l=yl("object"==typeof globalThis&&globalThis)||yl("object"==typeof window&&window)||yl("object"==typeof self&&self)||yl("object"==typeof vl&&vl)||function(){return this}()||Function("return this")(),wl={},El=function(e){try{return!!e()}catch(e){return!0}},Sl=!El((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Cl=!El((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),Ll=Cl,kl=Function.prototype.call,xl=Ll?kl.bind(kl):function(){return kl.apply(kl,arguments)},Ml={},Il={}.propertyIsEnumerable,Tl=Object.getOwnPropertyDescriptor,Dl=Tl&&!Il.call({1:2},1);for(Dr in Ml.f=Dl?function(e){var t=Tl(this,e);return!!t&&t.enumerable}:Il,C=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},L=Cl,k=Function.prototype,x=k.call,M=L&&k.bind.bind(x,x),I=L?M:function(e){return function(){return x.apply(e,arguments)}},D=(T=I)({}.toString),A=T("".slice),P=function(e){return A(D(e),8,-1)},j=El,O=P,q=Object,N=I("".split),B=j((function(){return!q("z").propertyIsEnumerable(0)}))?function(e){return"String"==O(e)?N(e,""):q(e)}:q,F=function(e){return null==e},U=F,R=TypeError,H=function(e){if(U(e))throw R("Can't call method on "+e);return e},W=B,V=H,$=function(e){return W(V(e))},z="object"==typeof document&&document.all,X=(G={all:z,IS_HTMLDDA:void 0===z&&void 0!==z}).all,Y=G.IS_HTMLDDA?function(e){return"function"==typeof e||e===X}:function(e){return"function"==typeof e},Q=Y,K=G.all,J=G.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Q(e)||e===K}:function(e){return"object"==typeof e?null!==e:Q(e)},Z=_l,ee=Y,te=function(e){return ee(e)?e:void 0},ne=function(e,t){return arguments.length<2?te(Z[e]):Z[e]&&Z[e][t]},ie=I({}.isPrototypeOf),oe=_l,re=ne("navigator","userAgent")||"",ae=oe.process,se=oe.Deno,(ce=(le=ae&&ae.versions||se&&se.version)&&le.v8)&&(S=(E=ce.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!S&&re&&(!(E=re.match(/Edge\/(\d+)/))||E[1]>=74)&&(E=re.match(/Chrome\/(\d+)/))&&(S=+E[1]),ue=de=S,pe=El,me=!!Object.getOwnPropertySymbols&&!pe((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ue&&ue<41})),he=me&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,fe=ne,ge=Y,be=ie,ve=Object,ye=he?function(e){return"symbol"==typeof e}:function(e){var t=fe("Symbol");return ge(t)&&be(t.prototype,ve(e))},_e=String,we=function(e){try{return _e(e)}catch(e){return"Object"}},Ee=Y,Se=we,Ce=TypeError,Le=function(e){if(Ee(e))return e;throw Ce(Se(e)+" is not a function")},ke=Le,xe=F,Me=xl,Ie=Y,Te=J,De=TypeError,Ae={},Pe={get exports(){return Ae},set exports(e){Ae=e}},je=_l,Oe=Object.defineProperty,qe=function(e,t){try{Oe(je,e,{value:t,configurable:!0,writable:!0})}catch(n){je[e]=t}return t},Ne=qe,Be=_l["__core-js_shared__"]||Ne("__core-js_shared__",{}),Fe=Be,(Pe.exports=function(e,t){return Fe[e]||(Fe[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.27.1",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Ue=H,Re=Object,He=function(e){return Re(Ue(e))},We=He,Ve=I({}.hasOwnProperty),$e=Object.hasOwn||function(e,t){return Ve(We(e),t)},ze=I,Ge=0,Xe=Math.random(),Ye=ze(1..toString),Qe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ye(++Ge+Xe,36)},Ke=_l,Je=$e,Ze=Qe,et=me,tt=he,nt=Ae("wks"),it=Ke.Symbol,ot=it&&it.for,rt=tt?it:it&&it.withoutSetter||Ze,at=function(e){if(!Je(nt,e)||!et&&"string"!=typeof nt[e]){var t="Symbol."+e;et&&Je(it,e)?nt[e]=it[e]:nt[e]=tt&&ot?ot(t):rt(t)}return nt[e]},st=xl,lt=J,ct=ye,dt=function(e,t){var n=e[t];return xe(n)?void 0:ke(n)},ut=function(e,t){var n,i;if("string"===t&&Ie(n=e.toString)&&!Te(i=Me(n,e)))return i;if(Ie(n=e.valueOf)&&!Te(i=Me(n,e)))return i;if("string"!==t&&Ie(n=e.toString)&&!Te(i=Me(n,e)))return i;throw De("Can't convert object to primitive value")},pt=TypeError,mt=at("toPrimitive"),ht=function(e,t){if(!lt(e)||ct(e))return e;var n,i=dt(e,mt);if(i){if(void 0===t&&(t="default"),n=st(i,e,t),!lt(n)||ct(n))return n;throw pt("Can't convert object to primitive value")}return void 0===t&&(t="number"),ut(e,t)},ft=ht,gt=ye,bt=function(e){var t=ft(e,"string");return gt(t)?t:t+""},vt=J,yt=_l.document,_t=vt(yt)&&vt(yt.createElement),wt=function(e){return _t?yt.createElement(e):{}},Et=wt,St=!Sl&&!El((function(){return 7!=Object.defineProperty(Et("div"),"a",{get:function(){return 7}}).a})),Ct=Sl,Lt=xl,kt=Ml,xt=C,Mt=$,It=bt,Tt=$e,Dt=St,At=Object.getOwnPropertyDescriptor,wl.f=Ct?At:function(e,t){if(e=Mt(e),t=It(t),Dt)try{return At(e,t)}catch(e){}if(Tt(e,t))return xt(!Lt(kt.f,e,t),e[t])},Pt={},jt=Sl&&El((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ot=J,qt=String,Nt=TypeError,Bt=function(e){if(Ot(e))return e;throw Nt(qt(e)+" is not an object")},Ft=Sl,Ut=St,Rt=jt,Ht=Bt,Wt=bt,Vt=TypeError,$t=Object.defineProperty,zt=Object.getOwnPropertyDescriptor,"enumerable","configurable","writable",Pt.f=Ft?Rt?function(e,t,n){if(Ht(e),t=Wt(t),Ht(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var i=zt(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:i.configurable,enumerable:"enumerable"in n?n.enumerable:i.enumerable,writable:!1})}return $t(e,t,n)}:$t:function(e,t,n){if(Ht(e),t=Wt(t),Ht(n),Ut)try{return $t(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Vt("Accessors not supported");return"value"in n&&(e[t]=n.value),e},Gt=Pt,Xt=C,Yt=Sl?function(e,t,n){return Gt.f(e,t,Xt(1,n))}:function(e,t,n){return e[t]=n,e},Qt={},Kt={get exports(){return Qt},set exports(e){Qt=e}},Jt=Sl,Zt=$e,en=Function.prototype,tn=Jt&&Object.getOwnPropertyDescriptor,on={EXISTS:nn=Zt(en,"name"),PROPER:nn&&"something"===function(){}.name,CONFIGURABLE:nn&&(!Jt||Jt&&tn(en,"name").configurable)},rn=Y,an=Be,sn=I(Function.toString),rn(an.inspectSource)||(an.inspectSource=function(e){return sn(e)}),un=an.inspectSource,mn=Y(pn=_l.WeakMap)&&/native code/.test(String(pn)),hn=Qe,fn=Ae("keys"),gn=function(e){return fn[e]||(fn[e]=hn(e))},vn=mn,_n=J,wn=Yt,En=$e,Sn=Be,Cn=gn,Ln=bn={},kn="Object already initialized",xn=(yn=_l).TypeError,Mn=yn.WeakMap,vn||Sn.state?((In=Sn.state||(Sn.state=new Mn)).get=In.get,In.has=In.has,In.set=In.set,ln=function(e,t){if(In.has(e))throw xn(kn);return t.facade=e,In.set(e,t),t},cn=function(e){return In.get(e)||{}},dn=function(e){return In.has(e)}):(Ln[Tn=Cn("state")]=!0,ln=function(e,t){if(En(e,Tn))throw xn(kn);return t.facade=e,wn(e,Tn,t),t},cn=function(e){return En(e,Tn)?e[Tn]:{}},dn=function(e){return En(e,Tn)}),Dn={set:ln,get:cn,has:dn,enforce:function(e){return dn(e)?cn(e):ln(e,{})},getterFor:function(e){return function(t){var n;if(!_n(t)||(n=cn(t)).type!==e)throw xn("Incompatible receiver, "+e+" required");return n}}},An=El,Pn=Y,jn=$e,On=Sl,qn=on.CONFIGURABLE,Nn=un,Bn=Dn.enforce,Fn=Dn.get,Un=Object.defineProperty,Rn=On&&!An((function(){return 8!==Un((function(){}),"length",{value:8}).length})),Hn=String(String).split("String"),Wn=Kt.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!jn(e,"name")||qn&&e.name!==t)&&(On?Un(e,"name",{value:t,configurable:!0}):e.name=t),Rn&&n&&jn(n,"arity")&&e.length!==n.arity&&Un(e,"length",{value:n.arity});try{n&&jn(n,"constructor")&&n.constructor?On&&Un(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=Bn(e);return jn(i,"source")||(i.source=Hn.join("string"==typeof t?t:"")),e},Function.prototype.toString=Wn((function(){return Pn(this)&&Fn(this).source||Nn(this)}),"toString"),Vn=Y,$n=Pt,zn=Qt,Gn=qe,Xn=function(e,t,n,i){i||(i={});var o=i.enumerable,r=void 0!==i.name?i.name:t;if(Vn(n)&&zn(n,r,i),i.global)o?e[t]=n:Gn(t,n);else{try{i.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=n:$n.f(e,t,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e},Yn={},Qn=Math.ceil,Kn=Math.floor,Jn=Math.trunc||function(e){var t=+e;return(t>0?Kn:Qn)(t)},Zn=function(e){var t=+e;return t!=t||0===t?0:Jn(t)},ei=Zn,ti=Math.max,ni=Math.min,ii=function(e,t){var n=ei(e);return n<0?ti(n+t,0):ni(n,t)},oi=Zn,ri=Math.min,ai=function(e){return e>0?ri(oi(e),9007199254740991):0},si=function(e){return ai(e.length)},li=$,ci=ii,di=si,ui=function(e){return function(t,n,i){var o,r=li(t),a=di(r),s=ci(i,a);if(e&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((e||s in r)&&r[s]===n)return e||s||0;return!e&&-1}},pi={includes:ui(!0),indexOf:ui(!1)},mi=$e,hi=$,fi=pi.indexOf,gi=bn,bi=I([].push),vi=function(e,t){var n,i=hi(e),o=0,r=[];for(n in i)!mi(gi,n)&&mi(i,n)&&bi(r,n);for(;t.length>o;)mi(i,n=t[o++])&&(~fi(r,n)||bi(r,n));return r},_i=vi,wi=(yi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]).concat("length","prototype"),Yn.f=Object.getOwnPropertyNames||function(e){return _i(e,wi)},(Ei={}).f=Object.getOwnPropertySymbols,Si=ne,Ci=Yn,Li=Ei,ki=Bt,xi=I([].concat),Mi=Si("Reflect","ownKeys")||function(e){var t=Ci.f(ki(e)),n=Li.f;return n?xi(t,n(e)):t},Ii=$e,Ti=Mi,Di=wl,Ai=Pt,Pi=El,ji=Y,Oi=/#|\.prototype\./,qi=function(e,t){var n=Bi[Ni(e)];return n==Ui||n!=Fi&&(ji(t)?Pi(t):!!t)},Ni=qi.normalize=function(e){return String(e).replace(Oi,".").toLowerCase()},Bi=qi.data={},Fi=qi.NATIVE="N",Ui=qi.POLYFILL="P",Ri=qi,Hi=_l,Wi=wl.f,Vi=Yt,$i=Xn,zi=qe,Gi=function(e,t,n){var i,o,r,a,s;for(i=Ti(t),o=Ai.f,r=Di.f,a=0;a<i.length;a++)s=i[a],Ii(e,s)||n&&Ii(n,s)||o(e,s,r(t,s))},Xi=Ri,Yi=function(e,t){var n,i,o,r,a,s=e.target,l=e.global,c=e.stat;if(n=l?Hi:c?Hi[s]||zi(s,{}):(Hi[s]||{}).prototype)for(i in t){if(r=t[i],o=e.dontCallGetSet?(a=Wi(n,i))&&a.value:n[i],!Xi(l?i:s+(c?".":"#")+i,e.forced)&&void 0!==o){if(typeof r==typeof o)continue;Gi(r,o)}(e.sham||o&&o.sham)&&Vi(r,"sham",!0),$i(n,i,r,e)}},Qi=P,Ki=I,Ji=function(e){if("Function"===Qi(e))return Ki(e)},Zi=Le,eo=Cl,to=Ji(Ji.bind),no=P,io=Array.isArray||function(e){return"Array"==no(e)},(oo={})[at("toStringTag")]="z",ao=ro="[object z]"===String(oo),so=Y,lo=P,co=at("toStringTag"),uo=Object,po="Arguments"==lo(function(){return arguments}()),mo=ao?lo:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=uo(e),co))?n:po?lo(t):"Object"==(i=lo(t))&&so(t.callee)?"Arguments":i},ho=I,fo=El,go=Y,bo=mo,vo=un,yo=function(){},_o=[],wo=ne("Reflect","construct"),So=ho((Eo=/^\s*(?:class|function)\b/).exec),Co=!Eo.exec(yo),Lo=function(e){if(!go(e))return!1;try{return wo(yo,_o,e),!0}catch(e){return!1}},ko=function(e){if(!go(e))return!1;switch(bo(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Co||!!So(Eo,vo(e))}catch(e){return!0}},ko.sham=!0,xo=!wo||fo((function(){var e;return Lo(Lo.call)||!Lo(Object)||!Lo((function(){e=!0}))||e}))?ko:Lo,Mo=io,Io=xo,To=J,Do=at("species"),Ao=Array,Po=function(e){var t;return Mo(e)&&(t=e.constructor,(Io(t)&&(t===Ao||Mo(t.prototype))||To(t)&&null===(t=t[Do]))&&(t=void 0)),void 0===t?Ao:t},jo=function(e,t){return new(Po(e))(0===t?0:t)},Oo=function(e,t){return Zi(e),void 0===t?e:eo?to(e,t):function(){return e.apply(t,arguments)}},qo=B,No=He,Bo=si,Fo=jo,Uo=I([].push),Ro=function(e){var t=1==e,n=2==e,i=3==e,o=4==e,r=6==e,a=7==e,s=5==e||r;return function(l,c,d,u){for(var p,m,h=No(l),f=qo(h),g=Oo(c,d),b=Bo(f),v=0,y=u||Fo,_=t?y(l,b):n||a?y(l,0):void 0;b>v;v++)if((s||v in f)&&(m=g(p=f[v],v,h),e))if(t)_[v]=m;else if(m)switch(e){case 3:return!0;case 5:return p;case 6:return v;case 2:Uo(_,p)}else switch(e){case 4:return!1;case 7:Uo(_,p)}return r?-1:i||o?o:_}},Ho={forEach:Ro(0),map:Ro(1),filter:Ro(2),some:Ro(3),every:Ro(4),find:Ro(5),findIndex:Ro(6),filterReject:Ro(7)},Wo=El,Vo=de,$o=at("species"),zo=function(e){return Vo>=51||!Wo((function(){var t=[];return(t.constructor={})[$o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Go=Ho.map,Yi({target:"Array",proto:!0,forced:!zo("map")},{map:function(e){return Go(this,e,arguments.length>1?arguments[1]:void 0)}}),Xo=Le,Yo=He,Qo=B,Ko=si,Jo=TypeError,Zo=function(e){return function(t,n,i,o){Xo(n);var r=Yo(t),a=Qo(r),s=Ko(r),l=e?s-1:0,c=e?-1:1;if(i<2)for(;;){if(l in a){o=a[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw Jo("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in a&&(o=n(o,a[l],l,r));return o}},er={left:Zo(!1),right:Zo(!0)},tr=El,nr=function(e,t){var n=[][e];return!!n&&tr((function(){n.call(null,t||function(){return 1},1)}))},ir="process"==P(_l.process),or=er.left,rr=de,ar=ir,Yi({target:"Array",proto:!0,forced:!nr("reduce")||!ar&&rr>79&&rr<83},{reduce:function(e){var t=arguments.length;return or(this,e,t,t>1?arguments[1]:void 0)}}),sr=mo,lr=ro?{}.toString:function(){return"[object "+sr(this)+"]"},ro||Xn(Object.prototype,"toString",lr,{unsafe:!0}),cr=Ho.filter,Yi({target:"Array",proto:!0,forced:!zo("filter")},{filter:function(e){return cr(this,e,arguments.length>1?arguments[1]:void 0)}}),dr=function(){function e(n){var i=n.markers,o=n.position;t(this,e),this.markers=i,o&&(o instanceof google.maps.LatLng?this._position=o:this._position=new google.maps.LatLng(o))}return i(e,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(e,t){return e.extend(t.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(e){return e.getVisible()})).length}},{key:"push",value:function(e){this.markers.push(e)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),e}(),ur=function(e,t,n,i){var o=pr(e.getBounds(),t,i);return n.filter((function(e){return o.contains(e.getPosition())}))},pr=function(e,t,n){var i=hr(e,t),o=i.northEast,r=i.southWest,a=fr({northEast:o,southWest:r},n);return gr(a,t)},mr=function(e,t){var n=(t.lat-e.lat)*Math.PI/180,i=(t.lng-e.lng)*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371},hr=function(e,t){return{northEast:t.fromLatLngToDivPixel(e.getNorthEast()),southWest:t.fromLatLngToDivPixel(e.getSouthWest())}},fr=function(e,t){var n=e.northEast,i=e.southWest;return n.x+=t,n.y-=t,i.x-=t,i.y+=t,{northEast:n,southWest:i}},gr=function(e,t){var n=e.northEast,i=e.southWest,o=new google.maps.LatLngBounds;return o.extend(t.fromDivPixelToLatLng(n)),o.extend(t.fromDivPixelToLatLng(i)),o},br=function(){function e(n){var i=n.maxZoom,o=void 0===i?16:i;t(this,e),this.maxZoom=o}return i(e,[{key:"noop",value:function(e){var t=e.markers;return yr(t)}}]),e}(),vr=function(e){function n(e){var i,o,a,s;return t(this,n),a=void 0===(o=e.viewportPadding)?60:o,s=u(e,["viewportPadding"]),(i=r.call(this,s)).viewportPadding=60,i.viewportPadding=a,i}o(n,e);var r=s(n);return i(n,[{key:"calculate",value:function(e){var t=e.markers,n=e.map,i=e.mapCanvasProjection;return n.getZoom()>=this.maxZoom?{clusters:this.noop({markers:t,map:n,mapCanvasProjection:i}),changed:!1}:{clusters:this.cluster({markers:ur(n,i,t,this.viewportPadding),map:n,mapCanvasProjection:i})}}}]),n}(br),yr=function(e){return e.map((function(e){return new dr({position:e.getPosition(),markers:[e]})}))},Er=(wr=(_r=wt("span").classList)&&_r.constructor&&_r.constructor.prototype)===Object.prototype?void 0:wr,Sr=Ho.forEach,Cr=nr("forEach")?[].forEach:function(e){return Sr(this,e,arguments.length>1?arguments[1]:void 0)},Lr=_l,xr=Er,Mr=Cr,Ir=Yt,Tr=function(e){if(e&&e.forEach!==Mr)try{Ir(e,"forEach",Mr)}catch(t){e.forEach=Mr}},kr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})kr[Dr]&&Tr(Lr[Dr]&&Lr[Dr].prototype);Tr(xr),Ar=xl,Yi({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Ar(URL.prototype.toString,this)}}),Pr=function e(t,n){var i,o,r,a;if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,r[o]))return!1;for(o=i;0!=o--;)if(!e(t[a=r[o]],n[a]))return!1;return!0}return t!=t&&n!=n},jr=function(e){function n(e){var i,o,a,s,l,c;return t(this,n),a=void 0===(o=e.maxDistance)?4e4:o,l=void 0===(s=e.gridSize)?40:s,c=u(e,["maxDistance","gridSize"]),(i=r.call(this,c)).clusters=[],i.maxDistance=a,i.gridSize=l,i.state={zoom:null},i}o(n,e);var r=s(n);return i(n,[{key:"calculate",value:function(e){var t=e.markers,n=e.map,i=e.mapCanvasProjection,o={zoom:n.getZoom()},r=!1;return this.state.zoom>this.maxZoom&&o.zoom>this.maxZoom||(r=!Pr(this.state,o)),this.state=o,n.getZoom()>=this.maxZoom?{clusters:this.noop({markers:t,map:n,mapCanvasProjection:i}),changed:r}:{clusters:this.cluster({markers:ur(n,i,t,this.viewportPadding),map:n,mapCanvasProjection:i})}}},{key:"cluster",value:function(e){var t=this,n=e.markers,i=e.map,o=e.mapCanvasProjection;return this.clusters=[],n.forEach((function(e){t.addToClosestCluster(e,i,o)})),this.clusters}},{key:"addToClosestCluster",value:function(e,t,n){var i,o,r,a,s,l;for(i=this.maxDistance,o=null,r=0;r<this.clusters.length;r++)a=this.clusters[r],(s=mr(a.bounds.getCenter().toJSON(),e.getPosition().toJSON()))<i&&(i=s,o=a);o&&pr(o.bounds,n,this.gridSize).contains(e.getPosition())?o.push(e):(l=new dr({markers:[e]}),this.clusters.push(l))}}]),n}(vr),Or=function(e){function n(e){t(this,n);var i=u(e,[]);return r.call(this,i)}o(n,e);var r=s(n);return i(n,[{key:"calculate",value:function(e){var t=e.markers,n=e.map,i=e.mapCanvasProjection;return{clusters:this.cluster({markers:t,map:n,mapCanvasProjection:i}),changed:!1}}},{key:"cluster",value:function(e){return this.noop(e)}}]),n}(br),qr=vi,Nr=yi,Br=Object.keys||function(e){return qr(e,Nr)},Fr=Sl,Ur=I,Rr=xl,Hr=El,Wr=Br,Vr=Ei,$r=Ml,zr=He,Gr=B,Xr=Object.assign,Yr=Object.defineProperty,Qr=Ur([].concat),Kr=!Xr||Hr((function(){if(Fr&&1!==Xr({b:1},Xr(Yr({},"a",{enumerable:!0,get:function(){Yr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Xr({},e)[n]||Wr(Xr({},t)).join("")!=i}))?function(e,t){var n,i,o,r,a,s,l,c,d,u;for(n=zr(e),i=arguments.length,o=1,r=Vr.f,a=$r.f;i>o;)for(l=Gr(arguments[o++]),d=(c=r?Qr(Wr(l),r(l)):Wr(l)).length,u=0;d>u;)s=c[u++],Fr&&!Rr(a,l,s)||(n[s]=l[s]);return n}:Xr,Jr=Kr,Yi({target:"Object",stat:!0,arity:2,forced:Object.assign!==Jr},{assign:Jr}),Zr={},function(e,t){e.exports=function(){function e(n,i,o,r,a,s){if(!(a-r<=o)){var l=r+a>>1;t(n,i,l,r,a,s%2),e(n,i,o,r,l-1,s+1),e(n,i,o,l+1,a,s+1)}}function t(e,i,o,r,a,s){for(var l,c,d,u,p,m,h,f;a>r;){for(a-r>600&&(l=a-r+1,c=o-r+1,d=Math.log(l),u=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*u*(l-u)/l)*(c-l/2<0?-1:1),t(e,i,o,Math.max(r,Math.floor(o-c*u/l+p)),Math.min(a,Math.floor(o+(l-c)*u/l+p)),s)),m=i[2*o+s],h=r,f=a,n(e,i,r,o),i[2*a+s]>m&&n(e,i,r,a);h<f;){for(n(e,i,h,f),h++,f--;i[2*h+s]<m;)h++;for(;i[2*f+s]>m;)f--}i[2*r+s]===m?n(e,i,r,f):n(e,i,++f,a),f<=o&&(r=f+1),o<=f&&(a=f-1)}}function n(e,t,n,o){i(e,n,o),i(t,2*n,2*o),i(t,2*n+1,2*o+1)}function i(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function o(e,t,n,i){var o=e-n,r=t-i;return o*o+r*r}var r=function(e){return e[0]},a=function(e){return e[1]},s=function(t,n,i,o,s){void 0===n&&(n=r),void 0===i&&(i=a),void 0===o&&(o=64),void 0===s&&(s=Float64Array),this.nodeSize=o,this.points=t;for(var l=t.length<65536?Uint16Array:Uint32Array,c=this.ids=new l(t.length),d=this.coords=new s(2*t.length),u=0;u<t.length;u++)c[u]=u,d[2*u]=n(t[u]),d[2*u+1]=i(t[u]);e(c,d,o,0,c.length-1,0)};return s.prototype.range=function(e,t,n,i){return function(e,t,n,i,o,r,a){var s,l,c,d,u,p,m,h,f,g;for(c=[0,e.length-1,0],d=[];c.length;)if(u=c.pop(),(p=c.pop())-(m=c.pop())<=a)for(h=m;h<=p;h++)s=t[2*h],l=t[2*h+1],s>=n&&s<=o&&l>=i&&l<=r&&d.push(e[h]);else s=t[2*(f=Math.floor((m+p)/2))],l=t[2*f+1],s>=n&&s<=o&&l>=i&&l<=r&&d.push(e[f]),g=(u+1)%2,(0===u?n<=s:i<=l)&&(c.push(m),c.push(f-1),c.push(g)),(0===u?o>=s:r>=l)&&(c.push(f+1),c.push(p),c.push(g));return d}(this.ids,this.coords,e,t,n,i,this.nodeSize)},s.prototype.within=function(e,t,n){return function(e,t,n,i,r,a){var s,l,c,d,u,p,m,h,f,g,b;for(s=[0,e.length-1,0],l=[],c=r*r;s.length;)if(d=s.pop(),(u=s.pop())-(p=s.pop())<=a)for(m=p;m<=u;m++)o(t[2*m],t[2*m+1],n,i)<=c&&l.push(e[m]);else o(f=t[2*(h=Math.floor((p+u)/2))],g=t[2*h+1],n,i)<=c&&l.push(e[h]),b=(d+1)%2,(0===d?n-r<=f:i-r<=g)&&(s.push(p),s.push(h-1),s.push(b)),(0===d?n+r>=f:i+r>=g)&&(s.push(h+1),s.push(u),s.push(b));return l}(this.ids,this.coords,e,t,n,this.nodeSize)},s}()}({get exports(){return Zr},set exports(e){Zr=e}}),ea=Zr;const Al={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Pl=Math.fround||(ta=new Float32Array(1),e=>(ta[0]=+e,ta[0]));class jl{constructor(e){this.options=y(Object.create(Al),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:i,nodeSize:o}=this.options;t&&console.time("total time");const r=`prepare ${e.length} points`;t&&console.time(r),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(m(e[t],t));this.trees[i+1]=new ea(a,_,w,o,Float32Array),t&&console.timeEnd(r);for(let e=i;e>=n;e--){const n=+Date.now();a=this._cluster(a,e),this.trees[e]=new ea(a,_,w,o,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,a.length,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let o=180===e[2]?180:((e[2]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,o=180;else if(n>o){const e=this.getClusters([n,i,180,r],t),a=this.getClusters([-180,i,o,r],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(g(n),b(r),g(o),b(i)),l=[];for(const e of s){const t=a.points[e];l.push(t.numPoints?h(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",o=this.trees[n];if(!o)throw new Error(i);const r=o.points[t];if(!r)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=o.within(r.x,r.y,a),l=[];for(const t of s){const n=o.points[t];n.parentId===e&&l.push(n.numPoints?h(n):this.points[n.index])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,n){t=t||10,n=n||0;const i=[];return this._appendLeaves(i,e,t,n,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],o=Math.pow(2,e),{extent:r,radius:a}=this.options,s=a/r,l=(n-s)/o,c=(n+1+s)/o,d={features:[]};return this._addTileFeatures(i.range((t-s)/o,l,(t+1+s)/o,c),i.points,t,n,o,d),0===t&&this._addTileFeatures(i.range(1-s/o,l,1,c),i.points,o,n,o,d),t===o-1&&this._addTileFeatures(i.range(0,l,s/o,c),i.points,-1,n,o,d),d.features.length?d:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,o){const r=this.getChildren(t);for(const t of r){const r=t.properties;if(r&&r.cluster?o+r.point_count<=i?o+=r.point_count:o=this._appendLeaves(e,r.cluster_id,n,i,o):o<i?o++:e.push(t),e.length===n)break}return o}_addTileFeatures(e,t,n,i,o,r){for(const a of e){const e=t[a],s=e.numPoints;let l,c,d;if(s)l=f(e),c=e.x,d=e.y;else{const t=this.points[e.index];l=t.properties,c=g(t.geometry.coordinates[0]),d=b(t.geometry.coordinates[1])}const u={type:1,geometry:[[Math.round(this.options.extent*(c*o-n)),Math.round(this.options.extent*(d*o-i))]],tags:l};let p;s?p=e.id:this.options.generateId?p=e.index:this.points[e.index].id&&(p=this.points[e.index].id),void 0!==p&&(u.id=p),r.features.push(u)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:i,extent:o,reduce:r,minPoints:a}=this.options,s=i/(o*Math.pow(2,t));for(let i=0;i<e.length;i++){const o=e[i];if(o.zoom<=t)continue;o.zoom=t;const l=this.trees[t+1],c=l.within(o.x,o.y,s),d=o.numPoints||1;let u=d;for(const e of c){const n=l.points[e];n.zoom>t&&(u+=n.numPoints||1)}if(u>d&&u>=a){let e=o.x*d,a=o.y*d,s=r&&d>1?this._map(o,!0):null;const m=(i<<5)+(t+1)+this.points.length;for(const n of c){const i=l.points[n];if(i.zoom<=t)continue;i.zoom=t;const c=i.numPoints||1;e+=i.x*c,a+=i.y*c,i.parentId=m,r&&(s||(s=this._map(o,!0)),r(s,this._map(i)))}o.parentId=m,n.push(p(e/u,a/u,m,u,s))}else if(n.push(o),u>1)for(const e of c){const i=l.points[e];i.zoom<=t||(i.zoom=t,n.push(i))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?y({},e.properties):e.properties;const n=this.points[e.index].properties,i=this.options.map(n);return t&&i===n?y({},i):i}}na=function(e){function n(e){var i,o,a,s,l;return t(this,n),o=e.maxZoom,s=void 0===(a=e.radius)?60:a,l=u(e,["maxZoom","radius"]),(i=r.call(this,{maxZoom:o})).superCluster=new jl(Object.assign({maxZoom:i.maxZoom,radius:s},l)),i.state={zoom:null},i}o(n,e);var r=s(n);return i(n,[{key:"calculate",value:function(e){var t,n,i=!1;return Pr(e.markers,this.markers)||(i=!0,this.markers=l(e.markers),t=this.markers.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}}})),this.superCluster.load(t)),n={zoom:e.map.getZoom()},i||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(i=i||!Pr(this.state,n)),this.state=n,i&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:i}}},{key:"cluster",value:function(e){var t=e.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(e){var t,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,i,o,r,a,s;if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){n=[],i=!0,o=!1,r=void 0;try{for(s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),2!==n.length);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}(e)||c(e,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.geometry.coordinates),i=n[0],o=n[1],r=e.properties;return r.cluster?new dr({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((function(e){return e.properties.marker})),position:new google.maps.LatLng({lat:o,lng:i})}):(t=r.marker,new dr({markers:[t],position:t.getPosition()}))}}]),n}(br),oa=Pt,ra=Bt,aa=$,sa=Br,(ia={}).f=Sl&&!jt?Object.defineProperties:function(e,t){ra(e);for(var n,i=aa(t),o=sa(t),r=o.length,a=0;r>a;)oa.f(e,n=o[a++],i[n]);return e},ca=ne("document","documentElement"),da=Bt,ua=ia,pa=yi,ma=bn,ha=ca,fa=wt,ga=gn("IE_PROTO"),ba=function(){},va=function(e){return"<script>"+e+"<\/script>"},ya=function(e){e.write(va("")),e.close();var t=e.parentWindow.Object;return e=null,t},_a=function(){var e,t,n;try{la=new ActiveXObject("htmlfile")}catch(e){}for(_a="undefined"!=typeof document?document.domain&&la?ya(la):((t=fa("iframe")).style.display="none",ha.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(va("document.F=Object")),e.close(),e.F):ya(la),n=pa.length;n--;)delete _a.prototype[pa[n]];return _a()},ma[ga]=!0,wa=at,Ea=Object.create||function(e,t){var n;return null!==e?(ba.prototype=da(e),n=new ba,ba.prototype=null,n[ga]=e):n=_a(),void 0===t?n:ua.f(n,t)},Sa=Pt.f,Ca=wa("unscopables"),null==(La=Array.prototype)[Ca]&&Sa(La,Ca,{configurable:!0,value:Ea(null)}),ka=pi.includes,xa=function(e){La[Ca][e]=!0},Yi({target:"Array",proto:!0,forced:El((function(){return!Array(1).includes()}))},{includes:function(e){return ka(this,e,arguments.length>1?arguments[1]:void 0)}}),xa("includes"),Ma=J,Ia=P,Ta=at("match"),Da=function(e){var t;return Ma(e)&&(void 0!==(t=e[Ta])?!!t:"RegExp"==Ia(e))},Aa=TypeError,Pa=mo,ja=String,Oa=function(e){if("Symbol"===Pa(e))throw TypeError("Cannot convert a Symbol value to a string");return ja(e)},qa=at("match"),Na=Yi,Ba=function(e){if(Da(e))throw Aa("The method doesn't accept regular expressions");return e},Fa=H,Ua=Oa,Ra=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[qa]=!1,"/./"[e](t)}catch(e){}}return!1},Ha=I("".indexOf),Na({target:"String",proto:!0,forced:!Ra("includes")},{includes:function(e){return!!~Ha(Ua(Fa(this)),Ua(Ba(e)),arguments.length>1?arguments[1]:void 0)}}),Wa=Yi,Va=pi.indexOf,$a=nr,za=Ji([].indexOf),Ga=!!za&&1/za([1],1,-0)<0,Xa=$a("indexOf"),Wa({target:"Array",proto:!0,forced:Ga||!Xa},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Ga?za(this,e,t)||0:Va(this,e,t)}}),Ya=Sl,Qa=io,Ka=TypeError,Ja=Object.getOwnPropertyDescriptor,Za=Ya&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),es=TypeError,ts=bt,ns=Pt,is=C,os=we,rs=TypeError,as=Yi,ss=He,ls=ii,cs=Zn,ds=si,us=Za?function(e,t){if(Qa(e)&&!Ja(e,"length").writable)throw Ka("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},ps=function(e){if(e>9007199254740991)throw es("Maximum allowed index exceeded");return e},ms=jo,hs=function(e,t,n){var i=ts(t);i in e?ns.f(e,i,is(0,n)):e[i]=n},fs=function(e,t){if(!delete e[t])throw rs("Cannot delete property "+os(t)+" of "+os(e))},gs=zo("splice"),bs=Math.max,vs=Math.min,as({target:"Array",proto:!0,forced:!gs},{splice:function(e,t){var n,i,o,r,a,s,l=ss(this),c=ds(l),d=ls(e,c),u=arguments.length;for(0===u?n=i=0:1===u?(n=0,i=c-d):(n=u-2,i=vs(bs(cs(t),0),c-d)),ps(c+n-i),o=ms(l,i),r=0;r<i;r++)(a=d+r)in l&&hs(o,r,l[a]);if(o.length=i,n<i){for(r=d;r<c-i;r++)s=r+n,(a=r+i)in l?l[s]=l[a]:fs(l,s);for(r=c;r>c-i+n;r--)fs(l,r-1)}else if(n>i)for(r=c-i;r>d;r--)s=r+n-1,(a=r+i-1)in l?l[s]=l[a]:fs(l,s);for(r=0;r<n;r++)l[r+d]=arguments[r+2];return us(l,c-i+n),o}}),ys=_l,_s=Y,ws=String,Es=TypeError,Ss=I,Cs=Bt,Ls=function(e){if("object"==typeof e||_s(e))return e;throw Es("Can't set "+ws(e)+" as a prototype")},ks=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Ss(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return Cs(n),Ls(i),t?e(n,i):n.__proto__=i,n}}():void 0),xs=Y,Ms=J,Is=ks,Ts=I(1..valueOf),Ds=H,As=Oa,Ps=I("".replace),js="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Os=RegExp("^"+js+js+"*"),qs=RegExp(js+js+"*$"),Ns=function(e){return function(t){var n=As(Ds(t));return 1&e&&(n=Ps(n,Os,"")),2&e&&(n=Ps(n,qs,"")),n}},Bs={start:Ns(1),end:Ns(2),trim:Ns(3)},Fs=Yi,Us=Sl,Rs=_l,Hs=ys,Ws=I,Vs=Ri,$s=$e,zs=function(e,t,n){var i,o;return Is&&xs(i=t.constructor)&&i!==n&&Ms(o=i.prototype)&&o!==n.prototype&&Is(e,o),e},Gs=ie,Xs=ye,Ys=ht,Qs=El,Ks=Yn.f,Js=wl.f,Zs=Pt.f,el=Ts,tl=Bs.trim,nl=Rs.Number,Hs.Number,il=nl.prototype,ol=Rs.TypeError,rl=Ws("".slice),al=Ws("".charCodeAt),sl=function(e){var t=Ys(e,"number");return"bigint"==typeof t?t:ll(t)},ll=function(e){var t,n,i,o,r,a,s,l,c=Ys(e,"number");if(Xs(c))throw ol("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=tl(c),43===(t=al(c,0))||45===t){if(88===(n=al(c,2))||120===n)return NaN}else if(48===t){switch(al(c,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+c}for(a=(r=rl(c,2)).length,s=0;s<a;s++)if((l=al(r,s))<48||l>o)return NaN;return parseInt(r,i)}return+c},cl=Vs("Number",!nl(" 0o1")||!nl("0b1")||nl("+0x1")),dl=function(e){return Gs(il,e)&&Qs((function(){el(e)}))},ul=function(e){var t=arguments.length<1?0:nl(sl(e));return dl(this)?zs(Object(t),this,ul):t},ul.prototype=il,cl&&(il.constructor=ul),Fs({global:!0,constructor:!0,wrap:!0,forced:cl},{Number:ul}),cl&&function(e,t){for(var n,i=Us?Ks(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;i.length>o;o++)$s(t,n=i[o])&&!$s(e,n)&&Zs(e,n,Js(t,n))}(Hs.Number,nl),pl=i((function e(n,i){t(this,e),this.markers={sum:n.length};var o=i.map((function(e){return e.count})),r=o.reduce((function(e,t){return e+t}),0);this.clusters={count:i.length,markers:{mean:r/i.length,sum:r,min:Math.min.apply(Math,l(o)),max:Math.max.apply(Math,l(o))}}})),ml=function(){function e(){t(this,e)}return i(e,[{key:"render",value:function(e,t){var n=e.count,i=e.position,o=n>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",r=window.btoa('\n  <svg fill="'.concat(o,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:i,icon:{url:"data:image/svg+xml;base64,".concat(r),scaledSize:new google.maps.Size(45,45)},label:{text:String(n),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(n," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+n})}}]),e}(),fl=i((function e(){t(this,e),function(e,t){for(var n in t.prototype)e.prototype[n]=t.prototype[n]}(e,google.maps.OverlayView)})),e.MarkerClustererEvents=void 0,(hl=e.MarkerClustererEvents||(e.MarkerClustererEvents={})).CLUSTERING_BEGIN="clusteringbegin",hl.CLUSTERING_END="clusteringend",hl.CLUSTER_CLICK="click",gl=function(e,t,n){n.fitBounds(t.bounds)},bl=function(n){function r(e){var n,i=e.map,o=e.markers,s=void 0===o?[]:o,c=e.algorithm,d=void 0===c?new na({}):c,u=e.renderer,p=void 0===u?new ml:u,m=e.onClusterClick,h=void 0===m?gl:m;return t(this,r),(n=a.call(this)).markers=l(s),n.clusters=[],n.algorithm=d,n.renderer=p,n.onClusterClick=h,i&&n.setMap(i),n}o(r,n);var a=s(r);return i(r,[{key:"addMarker",value:function(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}},{key:"addMarkers",value:function(e,t){var n=this;e.forEach((function(e){n.addMarker(e,!0)})),t||this.render()}},{key:"removeMarker",value:function(e,t){var n=this.markers.indexOf(e);return-1!==n&&(e.setMap(null),this.markers.splice(n,1),t||this.render(),!0)}},{key:"removeMarkers",value:function(e,t){var n=this,i=!1;return e.forEach((function(e){i=n.removeMarker(e,!0)||i})),i&&!t&&this.render(),i}},{key:"clearMarkers",value:function(e){this.markers.length=0,e||this.render()}},{key:"render",value:function(){var t,n,i,o=this.getMap();o instanceof google.maps.Map&&this.getProjection()&&(google.maps.event.trigger(this,e.MarkerClustererEvents.CLUSTERING_BEGIN,this),n=(t=this.algorithm.calculate({markers:this.markers,map:o,mapCanvasProjection:this.getProjection()})).clusters,((i=t.changed)||null==i)&&(this.reset(),this.clusters=n,this.renderClusters()),google.maps.event.trigger(this,e.MarkerClustererEvents.CLUSTERING_END,this))}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(e){return e.setMap(null)})),this.clusters.forEach((function(e){return e.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var t=this,n=new pl(this.markers,this.clusters),i=this.getMap();this.clusters.forEach((function(o){1===o.markers.length?o.marker=o.markers[0]:(o.marker=t.renderer.render(o,n),t.onClusterClick&&o.marker.addListener("click",(function(n){google.maps.event.trigger(t,e.MarkerClustererEvents.CLUSTER_CLICK,o),t.onClusterClick(n,o,i)}))),o.marker.setMap(i)}))}}]),r}(fl),e.AbstractAlgorithm=br,e.AbstractViewportAlgorithm=vr,e.Cluster=dr,e.ClusterStats=pl,e.DefaultRenderer=ml,e.GridAlgorithm=jr,e.MarkerClusterer=bl,e.NoopAlgorithm=Or,e.SuperClusterAlgorithm=na,e.defaultOnClusterClickHandler=gl,e.distanceBetweenPoints=mr,e.extendBoundsToPaddedViewport=pr,e.extendPixelBounds=fr,e.filterMarkersToPaddedViewport=ur,e.noop=yr,e.pixelBoundsToLatLngBounds=gr,Object.defineProperty(e,"__esModule",{value:!0})})),define("WoltLabSuite/Core/Component/GoogleMaps/MarkerLoader",["require","exports","tslib","../../Ajax","../Dialog","../../Dom/Util","@googlemaps/markerclusterer","./woltlab-core-google-maps"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,r=n.__importDefault(r);class s{#We;#it;#ot;#rt;#at;#st;#y=[];constructor(e,t,n){this.#We=e,this.#it=t,this.#ot=n,this.#rt=new a.MarkerClusterer({map:e}),this.#lt()}async#lt(){this.#We.getBounds()&&await this.#ct(),this.#We.addListener("idle",(()=>{this.#ct()}))}async#ct(){const e=this.#We.getBounds().getNorthEast(),t=this.#We.getBounds().getSouthWest();this.#dt(e,t)&&(await(0,i.dboAction)("getMapMarkers",this.#it).payload({...this.#ot,excludedObjectIDs:JSON.stringify(this.#y),eastLongitude:e.lng(),northLatitude:e.lat(),southLatitude:t.lat(),westLongitude:t.lng()}).dispatch()).markers.forEach((e=>{this.#ut(e)}))}#ut(e){const t=new google.maps.Marker({map:this.#We,position:new google.maps.LatLng(e.latitude,e.longitude),title:e.title});if(this.#rt.addMarker(t),e.infoWindow){const n=document.createElement("div");r.default.setInnerHtml(n,e.infoWindow);const i=new google.maps.InfoWindow({content:n});if(t.addListener("click",(()=>{i.open(this.#We,t)})),e.dialog){let t;i.addListener("domready",(()=>{const i=n.querySelector(".jsButtonShowDialog");i?.addEventListener("click",(()=>{t||(t=(0,o.dialogFactory)().fromHtml(e.dialog).withoutControls()),t.show(i.dataset.title||i.textContent)}))}))}}e.objectID&&this.#y.push(e.objectID),e.objectIDs&&this.#y.push(...e.objectIDs)}#dt(e,t){return!(this.#at&&this.#at.lat()>=e.lat()&&this.#at.lng()>=e.lng()&&this.#st.lat()<=t.lat()&&this.#st.lng()<=t.lng()||(this.#at=e,this.#st=t,0))}}t.setup=async function(e,t,n){const i=await e.getMap();new s(i,t,n)}})),define("WoltLabSuite/Core/Component/User/List",["require","exports","tslib","../../Ajax","../../Ui/Pagination","../Dialog"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserList=void 0,o=n.__importDefault(o),t.UserList=class{#pt;#mt;#ht=1;#ft=0;#e;constructor(e,t){this.#pt=e,this.#mt=t}open(){this.#ht=1,this.#gt(this.#ht)}#bt(e,t){e&&(this.#ht=e);const n=this.#vt();if(n.content.innerHTML=t,n.show(this.#mt),this.#ft>1){const e=n.content.querySelector(".jsPagination");null!==e&&new o.default(e,{activePage:this.#ht,maxPage:this.#ft,callbackSwitch:e=>{this.#gt(e)}})}}async#gt(e){if(0!==this.#ft&&(e<1||e>this.#ft))throw new RangeError(`pageNo must be between 1 and ${this.#ft} (${e} given).`);this.#pt.parameters.pageNo=e;const t=await(0,i.dboAction)("getGroupedUserList",this.#pt.className).payload(this.#pt.parameters).dispatch();t.pageCount&&(this.#ft=t.pageCount),this.#bt(e,t.template)}#vt(){return void 0===this.#e&&(this.#e=(0,r.dialogFactory)().withoutContent().withoutControls()),this.#e}}})),define("WoltLabSuite/Core/Controller/Moderation/AssignUser",["require","exports","../../Component/Dialog","../../Language","../../Ui/Notification"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(e){e.addEventListener("click",(()=>{!async function(e){const{ok:t,result:r}=await(0,n.dialogFactory)().usingFormBuilder().fromEndpoint(e);var a;t&&(function(e){const t=document.getElementById("moderationAssignedUser");if(null===e)t.textContent=(0,i.getPhrase)("wcf.moderation.assignedUser.nobody");else{const n=document.createElement("a");n.href=e.link,n.dataset.objectId=e.userID.toString(),n.classList.add("userLink"),n.innerHTML=e.username,t.innerHTML="",t.append(n)}}(r.assignee),a=r.status,document.getElementById("moderationQueueStatus").textContent=a,(0,o.show)())}(e.dataset.url)}))}})),define("WoltLabSuite/Core/Controller/Notice/Dismiss",["require","exports","tslib","../../Ajax"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),t.setup=function(){document.querySelectorAll(".jsDismissNoticeButton").forEach((e=>{e.addEventListener("click",(e=>function(e){const t=e.currentTarget;i.apiOnce({data:{actionName:"dismiss",className:"wcf\\data\\notice\\NoticeAction",objectIDs:[t.dataset.objectId]},success:()=>{t.parentElement.remove()}})}(e)))}))}})),define("WoltLabSuite/Core/Controller/Style/ColorScheme",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(){const e=document.querySelector('meta[name="theme-color"]');e.content=window.getComputedStyle(document.body).getPropertyValue("--wcfPageThemeColor"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>{document.documentElement.dataset.colorScheme=t.matches?"dark":"light",e.content=window.getComputedStyle(document.body).getPropertyValue("--wcfPageThemeColor")}))}})),define("WoltLabSuite/Core/Controller/User/Profile",["require","exports","../../Component/User/List"],(function(e,t,n){"use strict";function i(e,t,i){const o=document.getElementById(t);if(o){let t;o.addEventListener("click",(()=>{void 0===t&&(t=new n.UserList({className:i,parameters:{userID:e}},o.dataset.dialogTitle)),t.open()}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(e){!function(e){i(e,"followingAll","wcf\\data\\user\\follow\\UserFollowingAction")}(e),function(e){i(e,"followerAll","wcf\\data\\user\\follow\\UserFollowAction")}(e),function(e){i(e,"visitorAll","wcf\\data\\user\\profile\\visitor\\UserProfileVisitorAction")}(e)}})),define("WoltLabSuite/Core/Form/Builder/Dialog",["require","exports","tslib","../../Core","../../Ui/Dialog","../../Ajax","./Manager"],(function(e,t,n,i,o,r,a){"use strict";return i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importStar(a),class{_actionName;_className;_dialogContent;_dialogId;_formId;_options;_additionalSubmitButtons;constructor(e,t,n,i){this.init(e,t,n,i)}init(e,t,n,r){if(this._dialogId=e,this._className=t,this._actionName=n,this._options=i.extend({actionParameters:{},destroyOnClose:!1,usesDboAction:/\w+\\data\\/.test(this._className)},r),this._options.dialog=i.extend(this._options.dialog||{},{onClose:()=>this._dialogOnClose()}),o.default.getDialog(this._dialogId))throw new Error(`The dialogId ${this._dialogId} is already in use.`);this._formId="",this._dialogContent=""}_ajaxSetup(){const e={data:{actionName:this._actionName,className:this._className,parameters:this._options.actionParameters}};return this._options.usesDboAction||(e.url="index.php?ajax-invoke/&t="+i.getXsrfToken(),e.withCredentials=!0),e}_ajaxSuccess(e){switch(e.actionName){case this._actionName:if(void 0===e.returnValues)throw new Error("Missing return data.");!function(e){if(void 0===e.dialog)throw new Error("Missing dialog template in return data.");if(void 0===e.formId)throw new Error("Missing form id in return data.")}(e.returnValues),this._openDialogContent(e.returnValues.formId,e.returnValues.dialog);break;case this._options.submitActionName:if(e.returnValues&&void 0!==(t=e.returnValues).dialog&&void 0!==t.formId){if(e.returnValues.formId!==this._formId)throw new Error("Mismatch between form ids: expected '"+this._formId+"' but got '"+e.returnValues.formId+"'.");this._openDialogContent(e.returnValues.formId,e.returnValues.dialog)}else this.destroy(),"function"==typeof this._options.successCallback&&this._options.successCallback(e.returnValues||{});break;default:throw new Error("Cannot handle action '"+e.actionName+"'.")}var t}_closeDialog(){o.default.close(this),"function"==typeof this._options.closeCallback&&this._options.closeCallback()}_dialogOnClose(){this._options.destroyOnClose&&this.destroy()}_dialogSetup(){return{id:this._dialogId,options:this._options.dialog,source:this._dialogContent}}_dialogSubmit(){this.getData().then((e=>this._submitForm(e)))}_openDialogContent(e,t){this.destroy(!0),this._formId=e,this._dialogContent=t;const n=o.default.open(this,this._dialogContent),r=n.content.querySelector("button[data-type=cancel]");null===r||i.stringToBool(r.dataset.hasEventListener||"")||(r.addEventListener("click",(()=>this._closeDialog())),r.dataset.hasEventListener="1"),this._additionalSubmitButtons=Array.from(n.content.querySelectorAll(':not(.formSubmit) button[type="submit"]')),this._additionalSubmitButtons.forEach((e=>{e.addEventListener("click",(()=>{this._additionalSubmitButtons.forEach((t=>{t.dataset.isClicked=t===e?"1":"0"})),setTimeout((()=>o.default.submit(this._dialogId)),0)}))}))}_submitForm(e){const t=o.default.getDialog(this).content.querySelector("button[data-type=submit]");"function"==typeof this._options.onSubmit?this._options.onSubmit(e,t):"string"==typeof this._options.submitActionName&&(t.disabled=!0,this._additionalSubmitButtons.forEach((e=>e.disabled=!0)),r.api(this,{actionName:this._options.submitActionName,parameters:{data:e,formId:this._formId}}))}destroy(e=!1){""!==this._formId&&(a.hasForm(this._formId)&&a.unregisterForm(this._formId),!0!==e&&o.default.destroy(this))}getData(){if(""===this._formId)throw new Error("Form has not been requested yet.");return a.getData(this._formId)}open(){o.default.getDialog(this._dialogId)?o.default.open(this):r.api(this)}}})),define("WoltLabSuite/Core/Helper/Dom/View",["require","exports","tslib","../../Dom/Util"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomView=void 0,i=n.__importDefault(i);class o{#yt;constructor(e){this.#yt=this.#_t(e)}get root(){return this.#yt}#_t(e){if(e instanceof HTMLElement)return e;if("string"==typeof e&&(e=i.default.createFragmentFromHtml(e)),1===e.children.length)return e.children[0];const t=document.createElement("div");return t.append(e),t}}t.DomView=o,t.default=o})),function(e){!function(t){function n(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}var i="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=n(e);void 0===i.Reflect?i.Reflect=e:o=n(i.Reflect,o),function(e){function t(e,t,n){var i,o=O.get(e);if(d(o)){if(!n)return;o=new P,O.set(e,o)}if(d(i=o.get(t))){if(!n)return;i=new P,o.set(t,i)}return i}function n(e,t,o){var r;return!!i(e,t,o)||!u(r=w(t))&&n(e,r,o)}function i(e,n,i){var o=t(n,i,!1);return!d(o)&&!!o.has(e)}function o(e,t,n){var a;return i(e,t,n)?r(e,t,n):u(a=w(t))?void 0:o(e,a,n)}function r(e,n,i){var o=t(n,i,!1);if(!d(o))return o.get(e)}function a(e,n,i,o){t(i,o,!0).set(e,n)}function s(e,t){var n,i,o,r,a,c,d,u,p=l(e,t),m=w(e);if(null===m)return p;if((n=s(m,t)).length<=0)return p;if(p.length<=0)return n;for(i=new j,o=[],r=0,a=p;r<a.length;r++)c=a[r],i.has(c)||(i.add(c),o.push(c));for(d=0,u=n;d<u.length;d++)c=u[d],i.has(c)||(i.add(c),o.push(c));return o}function l(e,n){var i,o,r,a,s=[],l=t(e,n,!1);if(d(l))return s;for(i=function(e){var t,n=v(e,k);if(!g(n))throw new TypeError;if(!p(t=n.call(e)))throw new TypeError;return t}(l.keys()),o=0;;){if(!(r=y(i)))return s.length=o,s;a=r.value;try{s[o]=a}catch(e){try{_(i)}finally{throw e}}o++}}function c(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function d(e){return void 0===e}function u(e){return null===e}function p(e){return"object"==typeof e?null!==e:"function"==typeof e}function m(e,t){var n,i,o;switch(c(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}if(n=3===t?"string":5===t?"number":"default",void 0!==(i=v(e,L))){if(p(o=i.call(e,n)))throw new TypeError;return o}return function(e,t){var n,i,o,r;if("string"===t){if(g(n=e.toString)&&!p(i=n.call(e)))return i;if(g(o=e.valueOf)&&!p(i=o.call(e)))return i}else{if(g(o=e.valueOf)&&!p(i=o.call(e)))return i;if(g(r=e.toString)&&!p(i=r.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function h(e){var t=m(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function f(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function g(e){return"function"==typeof e}function b(e){return"function"==typeof e}function v(e,t){var n=e[t];if(null!=n){if(!g(n))throw new TypeError;return n}}function y(e){var t=e.next();return!t.done&&t}function _(e){var t=e.return;t&&t.call(e)}function w(e){var t,n,i,o=Object.getPrototypeOf(e);return"function"!=typeof e||e===D||o!==D||null==(n=(t=e.prototype)&&Object.getPrototypeOf(t))||n===Object.prototype||"function"!=typeof(i=n.constructor)||i===e?o:i}function E(e){return e.__=void 0,delete e.__,e}var S=Object.prototype.hasOwnProperty,C="function"==typeof Symbol,L=C&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",k=C&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",x="function"==typeof Object.create,M={__proto__:[]}instanceof Array,I=!x&&!M,T={create:x?function(){return E(Object.create(null))}:M?function(){return E({__proto__:null})}:function(){return E({})},has:I?function(e,t){return S.call(e,t)}:function(e,t){return t in e},get:I?function(e,t){return S.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},D=Object.getPrototypeOf(Function),A="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,P=A||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){function e(e,t){return e}function t(e,t){return t}function n(e,t){return[e,t]}var i={},o=[],r=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[k]=function(){return this},e.prototype.next=function(){var e,t=this._index;return t>=0&&t<this._keys.length?(e=this._selector(this._keys[t],this._values[t]),t+1>=this._keys.length?(this._index=-1,this._keys=o,this._values=o):this._index++,{value:e,done:!1}):{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=o,this._values=o),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=o,this._values=o),{value:e,done:!0}},e}();return function(){function o(){this._keys=[],this._values=[],this._cacheKey=i,this._cacheIndex=-2}return Object.defineProperty(o.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),o.prototype.has=function(e){return this._find(e,!1)>=0},o.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},o.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},o.prototype.delete=function(e){var t,n,o=this._find(e,!1);if(o>=0){for(t=this._keys.length,n=o+1;n<t;n++)this._keys[n-1]=this._keys[n],this._values[n-1]=this._values[n];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=i,this._cacheIndex=-2),!0}return!1},o.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=i,this._cacheIndex=-2},o.prototype.keys=function(){return new r(this._keys,this._values,e)},o.prototype.values=function(){return new r(this._keys,this._values,t)},o.prototype.entries=function(){return new r(this._keys,this._values,n)},o.prototype["@@iterator"]=function(){return this.entries()},o.prototype[k]=function(){return this.entries()},o.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},o}()}():Map,j=A||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new P}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[k]=function(){return this.keys()},e}():Set,O=new(A||"function"!=typeof WeakMap?function(){function e(){var e;do{e="@@WeakMap@@"+i()}while(T.has(r,e));return r[e]=!0,e}function t(e,t){if(!S.call(e,a)){if(!t)return;Object.defineProperty(e,a,{value:T.create()})}return e[a]}function n(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function i(){var e,t,i,r,a=(r=o,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(r)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(r)):n(new Uint8Array(r),r):n(new Array(r),r));for(a[6]=79&a[6]|64,a[8]=191&a[8]|128,e="",t=0;t<o;++t)4!==t&&6!==t&&8!==t||(e+="-"),(i=a[t])<16&&(e+="0"),e+=i.toString(16).toLowerCase();return e}var o=16,r=T.create(),a=e();return function(){function n(){this._key=e()}return n.prototype.has=function(e){var n=t(e,!1);return void 0!==n&&T.has(n,this._key)},n.prototype.get=function(e){var n=t(e,!1);return void 0!==n?T.get(n,this._key):void 0},n.prototype.set=function(e,n){return t(e,!0)[this._key]=n,this},n.prototype.delete=function(e){var n=t(e,!1);return void 0!==n&&delete n[this._key]},n.prototype.clear=function(){this._key=e()},n}()}():WeakMap);e("decorate",(function(e,t,n,i){if(d(n)){if(!f(e))throw new TypeError;if(!b(t))throw new TypeError;return function(e,t){var n,i;for(n=e.length-1;n>=0;--n)if(!d(i=(0,e[n])(t))&&!u(i)){if(!b(i))throw new TypeError;t=i}return t}(e,t)}if(!f(e))throw new TypeError;if(!p(t))throw new TypeError;if(!p(i)&&!d(i)&&!u(i))throw new TypeError;return u(i)&&(i=void 0),function(e,t,n,i){var o,r;for(o=e.length-1;o>=0;--o)if(!d(r=(0,e[o])(t,n,i))&&!u(r)){if(!p(r))throw new TypeError;i=r}return i}(e,t,n=h(n),i)})),e("metadata",(function(e,t){return function(n,i){if(!p(n))throw new TypeError;if(!d(i)&&!function(e){switch(c(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;a(e,t,n,i)}})),e("defineMetadata",(function(e,t,n,i){if(!p(n))throw new TypeError;return d(i)||(i=h(i)),a(e,t,n,i)})),e("hasMetadata",(function(e,t,i){if(!p(t))throw new TypeError;return d(i)||(i=h(i)),n(e,t,i)})),e("hasOwnMetadata",(function(e,t,n){if(!p(t))throw new TypeError;return d(n)||(n=h(n)),i(e,t,n)})),e("getMetadata",(function(e,t,n){if(!p(t))throw new TypeError;return d(n)||(n=h(n)),o(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!p(t))throw new TypeError;return d(n)||(n=h(n)),r(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!p(e))throw new TypeError;return d(t)||(t=h(t)),s(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!p(e))throw new TypeError;return d(t)||(t=h(t)),l(e,t)})),e("deleteMetadata",(function(e,n,i){var o,r;if(!p(n))throw new TypeError;return d(i)||(i=h(i)),!d(o=t(n,i,!1))&&!!o.delete(e)&&(o.size>0||((r=O.get(n)).delete(i),r.size>0||O.delete(n),!0))}))}(o)}()}(Reflect||(Reflect={})),define("reflect-metadata",(function(){})),define("WoltLabSuite/Core/Helper/Dom/Element",["require","exports","./View","reflect-metadata"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomElementList=t.DomElement=void 0,t.DomElement=function(e,t){return function(i,o){if(!(i instanceof n.DomView))throw new Error("@DomElement() is only supported on `DomView`");const{nullable:r,type:a}=Object.assign({nullable:!1,type:Reflect.getMetadata("design:type",i,o)},t);Object.defineProperty(i,o,{configurable:!0,get(){const t=this.root.querySelector(e);if(null===t){if(r)return null;throw new Error(`Unable to find an element with the selector '${e}'.`)}if(!(t instanceof a))throw new Error(`Expected an element of type '${a.name}' but found '${t.nodeName}'.`);return t}})}},t.DomElementList=function(e,t){return function(i,o){if(!(i instanceof n.DomView))throw new Error("@DomElementList() is only supported on `DomView`");if(Reflect.getMetadata("design:type",i,o).prototype!==Array.prototype)throw new Error("The type must be an array of elements.");const{type:r}=t;Object.defineProperty(i,o,{configurable:!0,get(){const t=Array.from(this.root.querySelectorAll(e));for(const e of t)if(!(e instanceof r))throw new Error(`Expected an element of type '${r.name}' but found '${e.nodeName}'.`);return t}})}}})),define("WoltLabSuite/Core/Media/List/Upload",["require","exports","tslib","../Upload","../../Core"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_createButton(){super._createButton();const e=this._button.querySelector("span"),t=document.createTextNode(" ");e.insertBefore(t,e.childNodes[0]);const n=document.createElement("fa-icon");n.setIcon("upload"),e.insertBefore(n,e.childNodes[0])}_getParameters(){return this._options.categoryId?o.extend(super._getParameters(),{categoryID:this._options.categoryId}):super._getParameters()}}return r})),define("WoltLabSuite/Core/Media/Manager/Search",["require","exports","tslib","../../Dom/Traverse","../../Language","../../Ajax","../../Dom/Util"],(function(e,t,n,i,o,r,a){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a),class{_cancelButton;_input;_mediaManager;_searchContainer;_searchMode=!1;constructor(e){this._mediaManager=e;const t=e.getDialog();this._searchContainer=t.querySelector(".mediaManagerSearch"),this._input=t.querySelector(".mediaManagerSearchField"),this._input.addEventListener("keypress",(e=>this._keyPress(e))),this._cancelButton=t.querySelector(".mediaManagerSearchCancelButton"),this._cancelButton.addEventListener("click",(()=>this._cancelSearch()))}_ajaxSetup(){return{data:{actionName:"getSearchResultList",className:"wcf\\data\\media\\MediaAction",interfaceName:"wcf\\data\\ISearchAction"}}}_ajaxSuccess(e){this._mediaManager.setMedia(e.returnValues.media||{},e.returnValues.template||"",{pageCount:e.returnValues.pageCount||0,pageNo:e.returnValues.pageNo||0}),this._mediaManager.getDialog().querySelector(".dialogContent").scrollTop=0}_cancelSearch(){this._searchMode&&(this._searchMode=!1,this.resetSearch(),this._mediaManager.resetMedia())}_hideStringThresholdError(){const e=i.childByClass(this._input.parentNode.parentNode,"innerInfo");e&&a.default.hide(e)}_keyPress(e){"Enter"===e.key&&(e.preventDefault(),this._input.value.length>=this._mediaManager.getOption("minSearchLength")?(this._hideStringThresholdError(),this.search()):this._showStringThresholdError())}_showStringThresholdError(){let e=i.childByClass(this._input.parentNode.parentNode,"innerInfo");e?a.default.show(e):(e=document.createElement("p"),e.className="innerInfo",e.textContent=o.get("wcf.media.search.info.searchStringThreshold",{minSearchLength:this._mediaManager.getOption("minSearchLength")}),this._input.parentNode.insertAdjacentElement("afterend",e))}hideSearch(){a.default.hide(this._searchContainer)}resetSearch(){this._input.value=""}showSearch(){a.default.show(this._searchContainer)}search(e){"number"!=typeof e&&(e=1);let t=this._input.value;t&&this._input.value.length<this._mediaManager.getOption("minSearchLength")?(this._showStringThresholdError(),t=""):this._hideStringThresholdError(),this._searchMode=!0,r.api(this,{parameters:{categoryID:this._mediaManager.getCategoryId(),imagesOnly:this._mediaManager.getOption("imagesOnly"),mode:this._mediaManager.getMode(),pageNo:e,searchString:t}})}}})),define("WoltLabSuite/Core/Media/Manager/Base",["require","exports","tslib","../../Core","../../Language","../../Permission","../../Dom/Change/Listener","../../Event/Handler","../../Dom/Traverse","../../Dom/Util","../../Ui/Dialog","../../Controller/Clipboard","../../Ui/Pagination","../../Ui/Notification","../../StringUtil","./Search","../Upload","../Editor","../Clipboard"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h,f,g,b,v){"use strict";i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importStar(c),d=n.__importStar(d),u=n.__importStar(u),p=n.__importDefault(p),m=n.__importStar(m),h=n.__importStar(h),f=n.__importDefault(f),g=n.__importDefault(g),b=n.__importDefault(b),v=n.__importStar(v);let y=0;return class{_forceClipboard=!1;_hadInitiallyMarkedItems=!1;_id;_listItems=new Map;_media=new Map;_mediaCategorySelect;_mediaEditor=null;_mediaManagerMediaList=null;_pagination=null;_search=null;_upload=null;_options;constructor(e){this._options=i.extend({dialogTitle:o.get("wcf.media.manager"),imagesOnly:!1,minSearchLength:3},e),this._id="mediaManager"+y++,r.get("admin.content.cms.canManageMedia")&&(this._mediaEditor=new b.default(this)),a.add("WoltLabSuite/Core/Media/Manager",(()=>this._addButtonEventListeners())),s.add("com.woltlab.wcf.media.upload","success",(e=>this._openEditorAfterUpload(e)))}_addButtonEventListeners(){this._mediaManagerMediaList&&r.get("admin.content.cms.canManageMedia")&&l.childrenByTag(this._mediaManagerMediaList,"LI").forEach((e=>{const t=e.querySelector(".jsMediaEditButton");t&&(t.classList.remove("jsMediaEditButton"),t.addEventListener("click",(e=>this._editMedia(e))))}))}_categoryChange(){this._search.search()}_click(e){e?.preventDefault(),d.open(this)}_dialogClose(){(r.get("admin.content.cms.canManageMedia")||this._forceClipboard)&&u.hideEditor("com.woltlab.wcf.media")}_dialogInit(e,t){Object.entries(t.returnValues.media||{}).forEach((([e,t])=>{this._media.set(~~e,t)})),this._initPagination(~~t.returnValues.pageCount),this._hadInitiallyMarkedItems=t.returnValues.hasMarkedItems>0}_dialogSetup(){return{id:this._id,options:{onClose:()=>this._dialogClose(),onShow:()=>this._dialogShow(),title:this._options.dialogTitle},source:{after:(e,t)=>this._dialogInit(e,t),data:{actionName:"getManagementDialog",className:"wcf\\data\\media\\MediaAction",parameters:{mode:this.getMode(),imagesOnly:this._options.imagesOnly}}}}}_dialogShow(){if(this._mediaManagerMediaList)v.setMediaManager(this);else{const e=this.getDialog();this._mediaManagerMediaList=e.querySelector(".mediaManagerMediaList"),this._mediaCategorySelect=e.querySelector(".mediaManagerCategoryList > select"),this._mediaCategorySelect&&this._mediaCategorySelect.addEventListener("change",(()=>this._categoryChange()));const t=l.childrenByTag(this._mediaManagerMediaList,"LI");if(t.forEach((e=>{this._listItems.set(~~e.dataset.objectId,e)})),r.get("admin.content.cms.canManageMedia")){const e=d.getDialog(this).dialog.querySelector(".mediaManagerMediaUploadButton");this._upload=new g.default(c.identify(e),c.identify(this._mediaManagerMediaList),{mediaManager:this}),s.add("WoltLabSuite/Core/Ui/Object/Action","delete",(e=>this.removeMedia(~~e.objectElement.dataset.objectId)))}r.get("admin.content.cms.canManageMedia")||this._forceClipboard?v.init("menuManagerDialog-"+this.getMode(),!!this._hadInitiallyMarkedItems,this):this._removeClipboardCheckboxes(),this._search=new f.default(this),t.length||this._search.hideSearch()}(r.get("admin.content.cms.canManageMedia")||this._forceClipboard)&&u.showEditor()}_editMedia(e){if(!r.get("admin.content.cms.canManageMedia"))throw new Error("You are not allowed to edit media files.");d.close(this);const t=e.currentTarget;this._mediaEditor.edit(this._media.get(~~t.dataset.objectId))}_editorClose(){d.open(this)}_editorSuccess(e,t,n=!0){if(this._mediaCategorySelect){const n=~~this._mediaCategorySelect.value;if(n){const i=~~e.categoryID;t==i||t!=n&&i!=n||this._search.search()}}n&&d.open(this),this._media.set(~~e.mediaID,e);const i=this._listItems.get(~~e.mediaID),o=i.querySelector(".mediaTitle");e.isMultilingual?e.title&&e.title[window.LANGUAGE_ID]?o.textContent=e.title[window.LANGUAGE_ID]:o.textContent=e.filename:e.title&&e.title[e.languageID]?o.textContent=e.title[e.languageID]:o.textContent=e.filename;const r=i.querySelector(".mediaThumbnail");r.innerHTML=e.elementTag;const a=r.querySelector("img");a&&(a.src+=`&refresh=${Date.now()}`)}_initPagination(e,t){if(void 0===t&&(t=1),e>1){const n=document.createElement("div");n.className="paginationBottom jsPagination";const i=d.getDialog(this).content.querySelector(".jsPagination");i.insertAdjacentElement("beforebegin",n),i.remove(),this._pagination=new p.default(n,{activePage:t,callbackSwitch:e=>this._search.search(e),maxPage:e})}else this._pagination&&c.hide(this._pagination.getElement())}_removeClipboardCheckboxes(){this._mediaManagerMediaList.querySelectorAll(".mediaCheckbox").forEach((e=>e.remove()))}_openEditorAfterUpload(e){if(e.upload===this._upload&&!e.isMultiFileUpload&&!this._upload.hasPendingUploads()){const t=Object.keys(e.media);t.length&&(d.close(this),this._mediaEditor.edit(this._media.get(~~e.media[t[0]].mediaID)))}}_setMedia(e){this._media=new Map(Object.entries(e).map((([e,t])=>[~~e,t])));let t=l.nextByClass(this._mediaManagerMediaList,"info");this._media.size?t&&c.hide(t):(null===t&&(t=document.createElement("p"),t.className="info",t.textContent=o.get("wcf.media.search.noResults")),c.show(t),c.insertAfter(t,this._mediaManagerMediaList)),l.childrenByTag(this._mediaManagerMediaList,"LI").forEach((e=>{this._media.has(~~e.dataset.objectId)?c.show(e):c.hide(e)})),a.trigger(),r.get("admin.content.cms.canManageMedia")||this._forceClipboard?u.reload():this._removeClipboardCheckboxes()}addMedia(e,t){e.languageID||(e.isMultilingual=1),this._media.set(~~e.mediaID,e),this._listItems.set(~~e.mediaID,t),1===this._listItems.size&&this._search.showSearch()}clipboardDeleteMedia(e){e.forEach((e=>{this.removeMedia(~~e)})),m.show()}getCategoryId(){return this._mediaCategorySelect?~~this._mediaCategorySelect.value:0}getDialog(){return d.getDialog(this).dialog}getMode(){return""}getOption(e){return this._options[e]?this._options[e]:null}removeMedia(e){if(this._listItems.has(e)){try{this._listItems.get(e).remove()}catch(e){}this._listItems.delete(e),this._media.delete(e)}}resetMedia(){this._search.search()}setMedia(e,t,n){if(Object.entries(e).length>0){const e=document.createElement("ul");e.innerHTML=t,l.childrenByTag(e,"LI").forEach((e=>{this._listItems.has(~~e.dataset.objectId)||(this._listItems.set(~~e.dataset.objectId,e),this._mediaManagerMediaList.appendChild(e))}))}this._initPagination(n.pageCount,n.pageNo),this._setMedia(e)}setupMediaElement(e,t){const n=l.childByClass(t,"mediaInformation"),a=document.createElement("nav");a.className="jsMobileNavigation buttonGroupNavigation",n.parentNode.appendChild(a);const s=document.createElement("ul");s.className="buttonList iconList",a.appendChild(s);const c=document.createElement("li");c.className="mediaCheckbox",s.appendChild(c);const d=document.createElement("a");c.appendChild(d);const u=document.createElement("label");d.appendChild(u);const p=document.createElement("input");if(p.className="jsClipboardItem",p.type="checkbox",p.dataset.objectId=e.mediaID.toString(),u.appendChild(p),r.get("admin.content.cms.canManageMedia")){const t=document.createElement("li");t.className="jsMediaEditButton",t.dataset.objectId=e.mediaID.toString(),s.appendChild(t),t.innerHTML=`\n        <a class="jsTooltip" title="${o.get("wcf.global.button.edit")}">\n          <fa-icon name="pencil"></fa-icon>\n          <span class="invisible">${o.get("wcf.global.button.edit")}</span>\n        </a>`;const n=document.createElement("li");n.classList.add("jsObjectAction"),n.dataset.objectAction="delete";const r=i.getUuid();n.dataset.confirmMessage=h.unescapeHTML(o.get("wcf.media.delete.confirmMessage",{title:r})).replace(r,h.escapeHTML(e.filename)),s.appendChild(n),n.innerHTML=`\n        <a class="jsTooltip" title="${o.get("wcf.global.button.delete")}">\n          <fa-icon name="xmark"></fa-icon>\n          <span class="invisible">${o.get("wcf.global.button.delete")}</span>\n        </a>`}}}})),define("WoltLabSuite/Core/Media/Manager/Editor",["require","exports","tslib","./Base","../../Core","../../Event/Handler","../../Dom/Traverse","../../Language","../../Ui/Dialog","../../Controller/Clipboard","../../Dom/Util","../../Component/Ckeditor/Event"],(function(e,t,n,i,o,r,a,s,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaManagerEditor=void 0,i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importStar(c),d=n.__importDefault(d);class p extends i.default{_mediaToInsert=new Map;_mediaToInsertByClipboard=!1;_uploadData;_uploadId=null;constructor(e){if(super(e=o.extend({callbackInsert:null},e)),this._forceClipboard=!0,void 0!==this._options.ckeditor){const e=this._options.ckeditor;(0,u.listenToCkeditor)(e.sourceElement).bbcode((({bbcode:e})=>"media"===e&&(this._click(),!0))),e.features.attachment||(0,u.listenToCkeditor)(e.sourceElement).uploadMedia((e=>{this._editorUpload(e)}))}}_addButtonEventListeners(){super._addButtonEventListeners(),this._mediaManagerMediaList&&a.childrenByTag(this._mediaManagerMediaList,"LI").forEach((e=>{const t=e.querySelector(".jsMediaInsertButton");t&&(t.classList.remove("jsMediaInsertButton"),t.addEventListener("click",(e=>this._openInsertDialog(e))))}))}_buildInsertDialog(){let e="";this._getThumbnailSizes().forEach((t=>{e+='<option value="'+t+'">'+s.get("wcf.media.insert.imageSize."+t)+"</option>"})),e+='<option value="original">'+s.get("wcf.media.insert.imageSize.original")+"</option>";const t=`\n      <div class="section">\n        <dl class="thumbnailSizeSelection">\n          <dt>${s.get("wcf.media.insert.imageSize")}</dt>\n          <dd>\n            <select name="thumbnailSize">\n              ${e}\n            </select>\n          </dd>\n        </dl>\n      </div>\n      <div class="formSubmit">\n        <button type="button" class="button buttonPrimary">${s.get("wcf.global.button.insert")}</button>\n      </div>`;l.open({_dialogSetup:()=>({id:this._getInsertDialogId(),options:{onClose:()=>this._editorClose(),onSetup:e=>{e.querySelector(".buttonPrimary").addEventListener("click",(e=>this._insertMedia(e))),d.default.show(e.querySelector(".thumbnailSizeSelection"))},title:s.get("wcf.media.insert")},source:t})})}_dialogShow(){if(super._dialogShow(),this._uploadData){if(null!==this._upload){const e=this._upload.uploadFile(this._uploadData.file);this._uploadData.promise=new Promise((t=>{const n=r.add("com.woltlab.wcf.media.upload","success",(i=>{i.uploadId===e&&(r.remove("com.woltlab.wcf.media.upload","success",n),t({mediaId:i.media[0].mediaID,mediaSize:"original",url:i.media[0].link}))}))}))}this._uploadData=void 0}}_editorUpload(e){this._uploadData=e,l.open(this)}_getInsertDialogId(){return[this._id+"Insert",...this._mediaToInsert.keys()].join("-")}_getThumbnailSizes(){return["small","medium","large"].map((e=>Array.from(this._mediaToInsert.values()).every((t=>null!==t[e+"ThumbnailType"]))?e:null)).filter((e=>null!==e))}_insertMedia(e,t,n=!1){if(void 0===n&&(n=!0),e){l.close(this._getInsertDialogId());const n=e.currentTarget.closest(".dialogContent").querySelector("select[name=thumbnailSize]");t=n.value}null!==this._options.callbackInsert?this._options.callbackInsert(this._mediaToInsert,"separate",t):this._mediaToInsert.forEach((e=>this._insertMediaItem(t,e))),this._mediaToInsertByClipboard&&c.unmark("com.woltlab.wcf.media",Array.from(this._mediaToInsert.keys())),this._mediaToInsert=new Map,this._mediaToInsertByClipboard=!1,n&&l.close(this)}_insertMediaItem(e,t){const n=this._options.ckeditor;if(t.isImage){let i="";["small","medium","large","original"].some((n=>0!=t[n+"ThumbnailHeight"]&&(i=n,e==n))),(e=i)||(e="original");let o=t.link;"original"!==e&&(o=t[e+"ThumbnailLink"]),n.insertHtml(`<img src="${o}" class="woltlabSuiteMedia" data-media-id="${t.mediaID}" data-media-size="${e}">`)}else n.insertText(`[wsm='${t.mediaID}'][/wsm]`)}_mediaUploaded(e){null!==this._uploadId&&this._upload===e.upload&&(this._uploadId===e.uploadId||Array.isArray(this._uploadId)&&-1!==this._uploadId.indexOf(e.uploadId))&&(this._mediaToInsert=new Map(e.media.entries()),this._insertMedia(null,"medium",!1),this._uploadId=null)}_openInsertDialog(e){const t=e.currentTarget;this.insertMedia([~~t.dataset.objectId])}clipboardInsertMedia(e){this.insertMedia(e,!0)}insertMedia(e,t){this._mediaToInsert=new Map,this._mediaToInsertByClipboard=t||!1;let n=!0;if(e.forEach((e=>{const t=this._media.get(e);this._mediaToInsert.set(t.mediaID,t),t.isImage||(n=!1)})),n)if(this._getThumbnailSizes().length){l.close(this);const e=this._getInsertDialogId();l.getDialog(e)?l.openStatic(e,null):this._buildInsertDialog()}else this._insertMedia(void 0,"original");else this._insertMedia()}getMode(){return"editor"}setupMediaElement(e,t){super.setupMediaElement(e,t);const n=t.querySelector("nav.buttonGroupNavigation > ul"),i=document.createElement("li");i.className="jsMediaInsertButton",i.dataset.objectId=e.mediaID.toString(),n.appendChild(i),i.innerHTML=`\n      <a class="jsTooltip" title="${s.get("wcf.global.button.insert")}">\n        <fa-icon name="plus"></fa-icon>\n        <span class="invisible">${s.get("wcf.global.button.insert")}</span>\n      </a>`}}t.MediaManagerEditor=p,t.default=p})),define("WoltLabSuite/Core/Media/Manager/Select",["require","exports","tslib","./Base","../../Core","../../Dom/Traverse","../../FileUtil","../../Language","../../Ui/Dialog","../../Dom/Util"],(function(e,t,n,i,o,r,a,s,l,c){"use strict";i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importDefault(c);class d extends i.default{_activeButton=null;_buttons;_storeElements=new WeakMap;constructor(e){super(e),this._buttons=document.getElementsByClassName(this._options.buttonClass||"jsMediaSelectButton"),Array.from(this._buttons).forEach((e=>{const t=e.dataset.store;if(t){const n=document.getElementById(t);if(n&&"INPUT"===n.tagName){e.addEventListener("click",(e=>this._click(e))),this._storeElements.set(e,n);const t=document.createElement("p");t.className="button",e.insertAdjacentElement("afterend",t);const i=document.createElement("fa-icon");i.setIcon("xmark"),t.appendChild(i),n.value||c.default.hide(t),t.addEventListener("click",(e=>this._removeMedia(e)))}}}))}_addButtonEventListeners(){super._addButtonEventListeners(),this._mediaManagerMediaList&&r.childrenByTag(this._mediaManagerMediaList,"LI").forEach((e=>{const t=e.querySelector(".jsMediaSelectButton");t&&(t.classList.remove("jsMediaSelectButton"),t.addEventListener("click",(e=>this._chooseMedia(e))))}))}_chooseMedia(e){if(null===this._activeButton)throw new Error("Media cannot be chosen if no button is active.");const t=e.currentTarget,n=this._media.get(~~t.dataset.objectId),i=document.getElementById(this._activeButton.dataset.store);i.value=n.mediaID.toString(),o.triggerEvent(i,"change");const r=this._activeButton.dataset.display;if(r){const e=document.getElementById(r);if(e)if(n.isImage){const t=n.smallThumbnailLink?n.smallThumbnailLink:n.link,i=n.altText&&n.altText[window.LANGUAGE_ID]?n.altText[window.LANGUAGE_ID]:"";e.innerHTML=`<img src="${t}" alt="${i}" />`}else{let t=a.getIconNameByFilename(n.filename);t=t?"file-"+t:"file",e.innerHTML=`\n            <div class="box48" style="margin-bottom: 10px;">\n              <fa-icon size="48" name="${t}"></fa-icon>\n              <div class="containerHeadline">\n                <h3>${n.filename}</h3>\n                <p>${n.formattedFilesize}</p>\n              </div>\n            </div>`}}this._activeButton.nextElementSibling.style.removeProperty("display"),l.close(this)}_click(e){if(e.preventDefault(),this._activeButton=e.currentTarget,super._click(e),!this._mediaManagerMediaList)return;const t=this._storeElements.get(this._activeButton);r.childrenByTag(this._mediaManagerMediaList,"LI").forEach((e=>{t.value&&t.value==e.dataset.objectId?e.classList.add("jsSelected"):e.classList.remove("jsSelected")}))}getMode(){return"select"}setupMediaElement(e,t){super.setupMediaElement(e,t);const n=t.querySelector("nav.buttonGroupNavigation > ul"),i=document.createElement("li");i.className="jsMediaSelectButton",i.dataset.objectId=e.mediaID.toString(),n.appendChild(i),i.innerHTML=`\n        <a class="jsTooltip" title="${s.get("wcf.media.button.select")}">\n          <fa-icon name="check"></fa-icon>\n          <span class="invisible">${s.get("wcf.media.button.select")}</span>\n        </a>\n      `}_removeMedia(e){e.preventDefault();const t=e.currentTarget,n=t.previousElementSibling;t.remove();const i=document.getElementById(n.dataset.store);i.value="",o.triggerEvent(i,"change");const r=n.dataset.display;if(r){const e=document.getElementById(r);e&&(e.innerHTML="")}}}return d})),define("WoltLabSuite/Core/Ui/Article/MarkAllAsRead",["require","exports","tslib","../../Ajax","../Notification"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,o=n.__importStar(o),t.setup=function(){document.querySelectorAll(".markAllAsReadButton").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),async function(){await(0,i.dboAction)("markAllAsRead","wcf\\data\\article\\ArticleAction").dispatch(),document.querySelectorAll(".contentItemList .contentItemBadgeNew").forEach((e=>e.remove())),document.querySelectorAll(".boxMenu .active .badge").forEach((e=>e.remove())),o.show()}()}))}))}})),define("WoltLabSuite/Core/Ui/Dropdown/Builder",["require","exports","tslib","../../Core","./Simple"],(function(e,t,n,i,o){"use strict";function r(e){if(!(e instanceof HTMLUListElement))throw new TypeError("Expected a reference to an <ul> element.");if(!e.classList.contains("dropdownMenu"))throw new Error("List does not appear to be a dropdown menu.")}function a(e){const t=document.createElement("li");if("divider"===e)return t.className="dropdownDivider",t;"string"==typeof e.identifier&&(t.dataset.identifier=e.identifier);const n=document.createElement("a");if(n.href="string"==typeof e.href?e.href:"#","function"==typeof e.callback)n.addEventListener("click",(t=>{t.preventDefault(),e.callback(n)}));else if("#"===n.href)throw new Error("Expected either a `href` value or a `callback`.");if(e.attributes&&i.isPlainObject(e.attributes)&&Object.keys(e.attributes).forEach((t=>{const i=e.attributes[t];if("string"!=typeof i)throw new Error("Expected only string values.");-1!==t.indexOf("-")?n.setAttribute(`data-${t}`,i):n.dataset[t]=i})),t.appendChild(n),void 0!==e.icon&&i.isPlainObject(e.icon)){if("string"!=typeof e.icon.name)throw new TypeError("Expected a valid icon name.");let t=16;"number"==typeof e.icon.size&&-1!==c.indexOf(~~e.icon.size)&&(t=~~e.icon.size);const i=document.createElement("fa-icon");i.size=t,i.setIcon(e.icon.name,!!e.icon.forceSolid),n.appendChild(i)}const o="string"==typeof e.label?e.label.trim():"",r="string"==typeof e.labelHtml?e.labelHtml.trim():"";if(""===o&&""===r)throw new TypeError("Expected either a label or a `labelHtml`.");const a=document.createElement("span");return a[o?"textContent":"innerHTML"]=o||r,n.appendChild(document.createTextNode(" ")),n.appendChild(a),t}function s(e,t){r(e),e.appendChild(a(t))}function l(e,t){if(r(e),!Array.isArray(t))throw new TypeError("Expected an array of items.");const n=t.length;if(0===n)throw new Error("Expected a non-empty list of items.");if(1===n)s(e,t[0]);else{const n=document.createDocumentFragment();t.forEach((e=>{n.appendChild(a(e))})),e.appendChild(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.divider=t.attach=t.setItems=t.appendItems=t.appendItem=t.buildItem=t.create=void 0,i=n.__importStar(i),o=n.__importDefault(o);const c=[16,24,32,48,64,96,144];t.create=function(e,t){const n=document.createElement("ul");return n.className="dropdownMenu","string"==typeof t&&(n.dataset.identifier=t),Array.isArray(e)&&e.length>0&&l(n,e),n},t.buildItem=function(e){return a(e)},t.appendItem=s,t.appendItems=l,t.setItems=function(e,t){r(e),e.innerHTML="",l(e,t)},t.attach=function(e,t){r(e),o.default.initFragment(t,e),t.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),o.default.toggleDropdown(t.id)}))},t.divider=function(){return"divider"}})),define("WoltLabSuite/Core/Ui/File/Delete",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Change/Listener","../../Language"],(function(e,t,n,i,o,r,a){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a),class{buttonContainer;containers=new Map;deleteButton=void 0;internalId;isSingleImagePreview;target;uploadHandler;constructor(e,t,n,i){this.isSingleImagePreview=n,this.uploadHandler=i;const o=document.getElementById(e);if(null===o)throw new Error(`Element id '${e}' is unknown.`);this.buttonContainer=o;const r=document.getElementById(t);if(null===r)throw new Error(`Element id '${t}' is unknown.`);this.target=r;const a=this.target.dataset.internalId;if(!a)throw new Error("InternalId is unknown.");this.internalId=a,this.rebuild()}createButtons(){let e=!1;this.target.querySelectorAll("li.uploadedFile").forEach((t=>{const n=t.dataset.uniqueFileId;if(void 0===n||this.containers.has(n))return;const i={uniqueFileId:n,element:t};this.containers.set(n,i),this.initDeleteButton(t,i),e=!0})),e&&r.default.trigger()}initDeleteButton(e,t){const n=e.querySelector(".buttonGroup");if(null===n)throw new Error(`Button group in '${this.target.id}' is unknown.`);const i=document.createElement("li"),o=document.createElement("span");o.className="button jsDeleteButton small",o.textContent=a.get("wcf.global.button.delete"),i.appendChild(o),n.appendChild(i),i.addEventListener("click",this.deleteElement.bind(this,t.uniqueFileId))}deleteElement(e){i.api(this,{uniqueFileId:e,internalId:this.internalId})}rebuild(){if(!this.isSingleImagePreview)return void this.createButtons();const e=this.target.querySelector("img");if(null!==e){const t=e.dataset.uniqueFileId;if(!this.containers.has(t)){const n={uniqueFileId:t,element:e};this.containers.set(t,n),this.deleteButton=document.createElement("p"),this.deleteButton.className="button deleteButton";const i=document.createElement("span");i.textContent=a.get("wcf.global.button.delete"),this.deleteButton.appendChild(i),this.buttonContainer.appendChild(this.deleteButton),this.deleteButton.addEventListener("click",this.deleteElement.bind(this,n.uniqueFileId))}}}_ajaxSuccess(e){this.containers.get(e.uniqueFileId).element.remove(),this.isSingleImagePreview&&this.deleteButton&&(this.deleteButton.remove(),this.deleteButton=void 0),this.uploadHandler.checkMaxFiles(),o.triggerEvent(this.target,"change")}_ajaxSetup(){return{url:"index.php?ajax-file-delete/&t="+o.getXsrfToken()}}}})),define("WoltLabSuite/Core/Ui/File/Upload",["require","exports","tslib","../../Core","./Delete","../../Dom/Util","../../Language","../../Upload"],(function(e,t,n,i,o,r,a,s){"use strict";i=n.__importStar(i),o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importStar(a),s=n.__importDefault(s);class l extends s.default{_deleteHandler;constructor(e,t,n){if(void 0===(n=n||{}).internalId)throw new Error("Missing internal id.");(n=i.extend({imagePreview:!1,maxFiles:null,className:"invalid",url:`index.php?ajax-file-upload/&t=${i.getXsrfToken()}`},n)).multiple=null===n.maxFiles||n.maxFiles>1,super(e,t,n),this.checkMaxFiles(),this._deleteHandler=new o.default(e,t,this._options.imagePreview,this)}_createFileElement(e){const t=super._createFileElement(e);t.classList.add("box64","uploadedFile");const n=t.querySelector("progress"),i=document.createElement("fa-icon");i.size=64,i.setIcon("spinner");const o=t.textContent;t.textContent="",t.append(i);const r=document.createElement("div"),a=document.createElement("p");a.textContent=o;const s=document.createElement("small");s.appendChild(n),r.appendChild(a),r.appendChild(s);const l=document.createElement("div");l.appendChild(r);const c=document.createElement("ul");return c.className="buttonGroup",l.appendChild(c),t.append(l),t}_failure(e,t){throw this._fileElements[e].forEach((e=>{e.classList.add("uploadFailed");const t=e.querySelector("small");t.innerHTML="",e.querySelector("fa-icon").setIcon("ban");const n=document.createElement("span");n.className="innerError",n.textContent=a.get("wcf.upload.error.uploadFailed"),t.insertAdjacentElement("afterend",n)})),new Error(`Upload failed: ${t.message}`)}_upload(e,t,n){const i=this._buttonContainer.parentElement.querySelector("small.innerError:not(.innerFileError)");return i&&i.remove(),super._upload(e,t,n)}_success(e,t){this._fileElements[e].forEach(((n,i)=>{if(void 0!==t.files[i]){const e=t.files[i];if(this._options.imagePreview){if(null===e.image)throw new Error("Expect image for uploaded file. None given.");n.remove();const t=this._target.querySelector("img.previewImage");if(null!==t)t.src=e.image;else{const t=document.createElement("img");t.classList.add("previewImage"),t.src=e.image,t.style.setProperty("max-width","100%",""),t.dataset.uniqueFileId=e.uniqueFileId,this._target.appendChild(t)}}else{n.dataset.uniqueFileId=e.uniqueFileId,n.querySelector("small").textContent=e.filesize.toString();const t=n.querySelector("fa-icon");if(null!==e.image){const n=document.createElement("a");n.classList.add("jsImageViewer"),n.href=e.image;const i=document.createElement("img");i.classList.add("formUploadHandlerContentListImage"),i.src=e.image,i.width=e.imageWidth,i.height=e.imageHeight,n.appendChild(i),t.replaceWith(n)}else t.setIcon(e.icon,"paperclip"===e.icon)}}else{if(void 0===t.error[i])throw new Error(`Unknown uploaded file for uploadId ${e}.`);{const e=t.error[i];n.classList.add("uploadFailed");const o=n.querySelector("small");o.innerHTML="",n.querySelector("fa-icon").setIcon("ban");let r=n.querySelector(".innerError");null===r?(r=document.createElement("span"),r.className="innerError",r.textContent=e.errorMessage,o.insertAdjacentElement("afterend",r)):r.textContent=e.errorMessage}}})),this._deleteHandler.rebuild(),this.checkMaxFiles(),i.triggerEvent(this._target,"change")}_getFormData(){return{internalId:this._options.internalId}}validateUpload(e){if(null===this._options.maxFiles||e.length+this.countFiles()<=this._options.maxFiles)return!0;{let e=this._buttonContainer.parentElement.querySelector("small.innerError:not(.innerFileError)");return null===e&&(e=document.createElement("small"),e.className="innerError",this._buttonContainer.insertAdjacentElement("afterend",e)),e.textContent=a.get("wcf.upload.error.reachedRemainingLimit",{maxFiles:this._options.maxFiles-this.countFiles()}),!1}}countFiles(){return this._options.imagePreview?null!==this._target.querySelector("img")?1:0:this._target.childElementCount}checkMaxFiles(){null!==this._options.maxFiles&&this.countFiles()>=this._options.maxFiles?r.default.hide(this._button):r.default.show(this._button)}}return l})),define("WoltLabSuite/Core/Ui/ItemList/Filter",["require","exports","tslib","../../Core","../../Dom/Util","../../Language","../../StringUtil","../Dropdown/Simple"],(function(e,t,n,i,o,r,a,s){"use strict";return i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importDefault(s),class{_container;_dropdownId="";_dropdown=void 0;_element;_fragment=void 0;_input;_items=new Set;_options;_value="";_clearButton;constructor(e,t){this._options=i.extend({callbackPrepareItem:void 0,enableVisibilityFilter:!0,filterPosition:"top"},t),"top"!==this._options.filterPosition&&(this._options.filterPosition="bottom");const n=document.getElementById(e);if(null===n)throw new Error("Expected a valid element id, '"+e+"' does not match anything.");if(!n.classList.contains("scrollableCheckboxList")&&"function"!=typeof this._options.callbackPrepareItem)throw new Error("Filter only works with elements with the CSS class 'scrollableCheckboxList'.");"function"!=typeof this._options.callbackPrepareItem&&(this._options.callbackPrepareItem=e=>this._prepareItem(e)),n.dataset.filter="showAll";const o=document.createElement("div");o.className="itemListFilter",n.insertAdjacentElement("beforebegin",o),o.appendChild(n);const a=document.createElement("div");a.className="inputAddon";const s=document.createElement("input");if(s.className="long",s.type="text",s.placeholder=r.get("wcf.global.filter.placeholder"),s.addEventListener("keydown",(e=>{"Enter"===e.key&&e.preventDefault()})),s.addEventListener("keyup",(()=>this._keyup())),this._clearButton=document.createElement("a"),this._clearButton.href="#",this._clearButton.className="button inputSuffix disabled jsTooltip",this._clearButton.title=r.get("wcf.global.filter.button.clear"),this._clearButton.innerHTML='<fa-icon name="xmark" solid></fa-icon>',this._clearButton.addEventListener("click",(e=>{e.preventDefault(),this.reset()})),a.appendChild(s),a.appendChild(this._clearButton),this._options.enableVisibilityFilter){const e=document.createElement("a");e.href="#",e.className="button inputSuffix jsTooltip",e.title=r.get("wcf.global.filter.button.visibility"),e.innerHTML='<fa-icon name="eye"></fa-icon>',e.addEventListener("click",(e=>this._toggleVisibility(e))),a.appendChild(e)}"bottom"===this._options.filterPosition?o.appendChild(a):o.insertBefore(a,n),this._container=o,this._element=n,this._input=s;const l=Math.max(this._element.offsetHeight,200);this._element.style.setProperty("height",`${l}px`,"")}reset(){this._input.value="",this._keyup()}_buildItems(){this._items.clear(),Array.from(this._element.children).forEach((e=>{this._items.add(this._options.callbackPrepareItem(e))}))}_prepareItem(e){const t=e.children[0],n=t.textContent.trim(),i=t.children[0];for(;i.nextSibling;)t.removeChild(i.nextSibling);t.appendChild(document.createTextNode(" "));const o=document.createElement("span");return o.textContent=n,t.appendChild(o),{item:e,span:o,text:n}}_keyup(){const e=this._input.value.trim();if(this._value===e)return;e?this._clearButton.classList.remove("disabled"):this._clearButton.classList.add("disabled"),this._fragment||(this._fragment=document.createDocumentFragment()),this._fragment.appendChild(this._element),this._items.size||this._buildItems();const t=new RegExp("("+a.escapeRegExp(e)+")","i");let n=""===e;this._items.forEach((i=>{""===e?(i.span.textContent=i.text,o.default.show(i.item)):t.test(i.text)?(i.span.innerHTML=i.text.replace(t,"<u>$1</u>"),o.default.show(i.item),n=!0):o.default.hide(i.item)})),"bottom"===this._options.filterPosition?this._container.insertAdjacentElement("afterbegin",this._element):this._container.insertAdjacentElement("beforeend",this._element),this._value=e,o.default.innerError(this._container,!n&&r.get("wcf.global.filter.error.noMatches"))}_toggleVisibility(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;if(!this._dropdown){const e=document.createElement("ul");e.className="dropdownMenu",["activeOnly","highlightActive","showAll"].forEach((t=>{const n=document.createElement("a");n.dataset.type=t,n.href="#",n.textContent=r.get(`wcf.global.filter.visibility.${t}`),n.addEventListener("click",(e=>this._setVisibility(e)));const i=document.createElement("li");if(i.appendChild(n),"showAll"===t){i.className="active";const t=document.createElement("li");t.className="dropdownDivider",e.appendChild(t)}e.appendChild(i)})),s.default.initFragment(t,e),this._setupVisibilityFilter(),this._dropdown=e,this._dropdownId=t.id}s.default.toggleDropdown(t.id,t)}_setupVisibilityFilter(){const e=this._element.nextSibling,t=this._element.parentElement,n=this._element.scrollTop;document.createDocumentFragment().appendChild(this._element),this._element.querySelectorAll("li").forEach((e=>{const t=e.querySelector('input[type="checkbox"]');if(t)t.checked&&e.classList.add("active"),t.addEventListener("change",(()=>{t.checked?e.classList.add("active"):e.classList.remove("active")}));else{const t=e.querySelector('input[type="radio"]');t&&(t.checked&&e.classList.add("active"),t.addEventListener("change",(()=>{this._element.querySelectorAll("li").forEach((e=>e.classList.remove("active"))),t.checked?e.classList.add("active"):e.classList.remove("active")})))}})),t.insertBefore(this._element,e),this._element.scrollTop=n}_setVisibility(e){e.preventDefault();const t=e.currentTarget,n=t.dataset.type;if(s.default.close(this._dropdownId),this._element.dataset.filter===n)return;this._element.dataset.filter=n,this._dropdown.querySelector(".active").classList.remove("active"),t.parentElement.classList.add("active");const i=document.getElementById(this._dropdownId);"showAll"===n?i.classList.remove("active"):i.classList.add("active");const o=i.querySelector("fa-icon");"showAll"===n?o.setIcon("eye"):o.setIcon("eye-slash")}}})),define("WoltLabSuite/Core/Ui/ItemList/LineBreakSeparatedText",["require","exports","tslib","../Confirmation","../../Language","../../Dom/Util"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UiItemListLineBreakSeparatedText=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r);class a{addButton=void 0;clearButton=void 0;itemInput=void 0;itemList;items=new Set;mutationObserver;options;submitField=void 0;uiDisabled=!1;constructor(e,t={}){if(this.itemList=e,this.options=t,!this.options.submitFieldName){const e=this.itemList.nextElementSibling;if(!(e instanceof HTMLInputElement&&"hidden"===e.type))throw new Error("Missing `submitFieldName` option");this.submitField=e}this.itemList.closest("form").addEventListener("submit",(()=>this.submit())),this.mutationObserver=new MutationObserver((e=>{e.forEach((e=>{"readonly"===e.attributeName&&(e.target.readOnly?this.disableUi():this.enableUi())}))})),this.initValues(),this.buildUi()}addItem(e){if(e.preventDefault(),this.uiDisabled)return;const t=this.itemInput,n=t.value.trim();""===n?r.default.innerError(t.parentElement,o.get("wcf.global.form.error.empty")):this.items.has(n)?r.default.innerError(t.parentElement,o.get("wcf.acp.option.type.lineBreakSeparatedText.error.duplicate",{item:n}),!0):(this.insertItem(n),this.resetInput()),t.focus()}buildUi(){const e=document.createElement("div");e.classList.add("itemListFilter"),this.itemList.insertAdjacentElement("beforebegin",e),e.appendChild(this.itemList);const t=document.createElement("div");t.classList.add("inputAddon"),e.appendChild(t),this.itemInput=document.createElement("input"),this.itemInput.classList.add("long"),this.itemInput.type="text",this.itemInput.placeholder=o.get("wcf.acp.option.type.lineBreakSeparatedText.placeholder"),this.itemInput.addEventListener("keydown",(e=>this.keydown(e))),this.itemInput.addEventListener("paste",(e=>this.paste(e))),t.appendChild(this.itemInput),this.mutationObserver.observe(this.itemInput,{attributes:!0}),this.addButton=document.createElement("a"),this.addButton.href="#",this.addButton.classList.add("button","inputSuffix","jsTooltip"),this.addButton.title=o.get("wcf.global.button.add"),this.addButton.innerHTML='<fa-icon name="plus" solid></fa-icon>',this.addButton.addEventListener("click",(e=>this.addItem(e))),t.appendChild(this.addButton),this.clearButton=document.createElement("a"),this.clearButton.href="#",this.clearButton.classList.add("button","inputSuffix","jsTooltip"),this.clearButton.title=o.get("wcf.global.button.delete"),this.clearButton.innerHTML='<fa-icon name="times" solid></fa-icon>',this.clearButton.addEventListener("click",(e=>this.clearList(e))),t.appendChild(this.clearButton),0===this.items.size&&r.default.hide(this.clearButton)}clearList(e){e.preventDefault(),this.uiDisabled||i.show({confirm:()=>{this.itemList.innerHTML="",this.items.clear(),this.hideList()},message:o.get("wcf.acp.option.type.lineBreakSeparatedText.clearList.confirmMessage"),messageIsHtml:!0})}deleteItem(e){if(this.uiDisabled)return;const t=e.currentTarget,n=t.closest("li").dataset.value;i.show({confirm:()=>{t.closest("li").remove(),0===this.itemList.childElementCount&&this.hideList(),this.items.delete(n)},message:o.get("wcf.button.delete.confirmMessage",{objectTitle:n}),messageIsHtml:!0})}disableUi(){this.addButton.classList.add("disabled"),this.clearButton.classList.add("disabled"),this.itemList.querySelectorAll(".jsDeleteItem").forEach((e=>e.classList.add("disabled"))),this.uiDisabled=!0}enableUi(){this.addButton.classList.remove("disabled"),this.clearButton.classList.remove("disabled"),this.itemList.querySelectorAll(".jsDeleteItem").forEach((e=>e.classList.remove("disabled"))),this.uiDisabled=!1}hideList(){r.default.hide(this.itemList),r.default.hide(this.clearButton)}initValues(){Array.from(this.itemList.children).forEach((e=>{this.items.add(e.dataset.value),e.querySelector(".jsDeleteItem").addEventListener("click",(e=>this.deleteItem(e)))}))}insertItem(e){this.items.add(e);const t=document.createElement("li");t.dataset.value=e;const n=document.createElement("span");n.innerHTML='<fa-icon name="xmark" solid></fa-icon>',n.classList.add("jsDeleteItem","jsTooltip","pointer"),n.title=o.get("wcf.global.button.delete"),n.addEventListener("click",(e=>this.deleteItem(e))),t.append(n),t.append(document.createTextNode(" "));const i=document.createElement("span");i.innerText=e,t.append(i);const r=Array.from(this.itemList.children).find((t=>t.dataset.value>e));r?this.itemList.insertBefore(t,r):this.itemList.append(t),this.showList()}keydown(e){"Enter"===e.key&&this.addItem(e)}paste(e){if(this.uiDisabled)return;const t=e.clipboardData.getData("text/plain").split("\n");t.length>1&&(e.preventDefault(),t.forEach((e=>{""===(e=e.trim())||this.items.has(e)||this.insertItem(e)})),this.resetInput())}resetInput(){r.default.innerError(this.itemInput.parentElement,""),this.itemInput.value=""}showList(){r.default.show(this.itemList),r.default.show(this.clearButton)}submit(){const e=Array.from(this.items).join("\n");if(this.submitField)this.submitField.value=e;else{const t=document.createElement("input");t.type="hidden",t.name=this.options.submitFieldName,t.value=e,this.itemList.parentElement.append(t)}}}t.UiItemListLineBreakSeparatedText=a,t.default=a})),define("WoltLabSuite/Core/Ui/ItemList/Static",["require","exports","tslib","../../Core","../../Dom/Traverse","../../Language","../Dropdown/Simple"],(function(e,t,n,i,o,r,a){"use strict";function s(e){const t=p.get(e);-1!==t.options.maxItems&&(t.list.childElementCount-1<t.options.maxItems?t.element.disabled&&(t.element.disabled=!1,t.element.removeAttribute("placeholder")):t.element.disabled||(t.element.disabled=!0,t.element.placeholder=r.get("wcf.global.form.input.maxItems")))}function l(e,t,n){const i=p.get(e),o=document.createElement("li");o.className="item";const r=document.createElement("span");if(r.className="content",r.dataset.objectId=t.objectId.toString(),r.textContent=t.value,o.appendChild(r),n||!i.element.disabled){const e=document.createElement("button");e.type="button",e.innerHTML='<fa-icon name="xmark"></fa-icon>',e.addEventListener("click",(e=>c(e))),o.appendChild(e)}i.list.insertBefore(o,i.listItem),i.element.value="",i.element.disabled||s(e);let a=d(i);"function"==typeof i.options.callbackChange&&(null===a&&(a=u(e)),i.options.callbackChange(e,a))}function c(e,t){e instanceof Event&&(e=e.currentTarget.parentElement);const n=e.parentElement.dataset.elementId,i=p.get(n);e.remove(),t||i.element.focus(),s(n);let o=d(i);"function"==typeof i.options.callbackChange&&(null===o&&(o=u(n)),i.options.callbackChange(n,o))}function d(e){if(!e.options.isCSV)return null;const t=u(e.element.id);return e.shadow.value=t.map((e=>e.value)).join(","),t}function u(e){if(!p.has(e))throw new Error(`Element id '${e}' is unknown.`);const t=p.get(e),n=[];return t.list.querySelectorAll(".item > span").forEach((e=>{n.push({objectId:~~e.dataset.objectId,value:e.textContent})})),n}Object.defineProperty(t,"__esModule",{value:!0}),t.setValues=t.getValues=t.init=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a);const p=new Map;t.init=function(e,t,n){const r=document.getElementById(e);if(null===r)throw new Error("Expected a valid element id, '"+e+"' is invalid.");if(p.has(e)){const t=p.get(e);Object.values(t).forEach((e=>{e instanceof HTMLElement&&e.parentElement&&e.remove()})),a.default.destroy(e),p.delete(e)}const s=i.extend({maxItems:-1,maxLength:-1,isCSV:!1,callbackChange:null,callbackSubmit:null,submitFieldName:""},n),d=o.parentByTag(r,"FORM");if(null!==d&&!s.isCSV){if(!s.submitFieldName.length&&"function"!=typeof s.callbackSubmit)throw new Error("Expected a valid function for option 'callbackSubmit', a non-empty value for option 'submitFieldName' or enabling the option 'submitFieldCSV'.");d.addEventListener("submit",(()=>{const t=u(e);s.submitFieldName.length?t.forEach((e=>{const t=document.createElement("input");t.type="hidden",t.name=s.submitFieldName.replace("{$objectId}",e.objectId.toString()),t.value=e.value,d.appendChild(t)})):s.callbackSubmit(d,t)}))}const m=function(e,t){const n=document.createElement("ol");n.className="inputItemList"+(e.disabled?" disabled":""),n.dataset.elementId=e.id,n.addEventListener("click",(t=>{t.target===n&&e.focus()}));const i=document.createElement("li");let o;i.className="input",n.appendChild(i),e.addEventListener("keydown",(e=>function(e){const t=e.currentTarget,n=t.parentElement.previousElementSibling;"Backspace"===e.key?0===t.value.length&&null!==n&&(n.classList.contains("active")?c(n):n.classList.add("active")):"Escape"===e.key&&null!==n&&n.classList.contains("active")&&n.classList.remove("active")}(e))),e.addEventListener("keypress",(e=>function(e){if("Enter"===e.key||","===e.key){e.preventDefault();const t=e.currentTarget,n=t.value.trim();n.length&&l(t.id,{objectId:0,value:n})}}(e))),e.addEventListener("keyup",(e=>function(e){const t=e.currentTarget;if(t.value.length>0){const e=t.parentElement.previousElementSibling;null!==e&&e.classList.remove("active")}}(e))),e.addEventListener("paste",(e=>function(e){const t=e.currentTarget;e.clipboardData.getData("text/plain").split(",").map((e=>e.trim())).filter((e=>e.length>0)).forEach((e=>{l(t.id,{objectId:0,value:e})})),e.preventDefault()}(e))),e.addEventListener("blur",(e=>function(e){const t=e.currentTarget;window.setTimeout((()=>{const e=t.value.trim();e.length&&l(t.id,{objectId:0,value:e})}),100)}(e))),e.insertAdjacentElement("beforebegin",n),i.appendChild(e),-1!==t.maxLength&&(e.maxLength=t.maxLength);let r=[];if(t.isCSV&&(o=document.createElement("input"),o.className="itemListInputShadow",o.type="hidden",o.name=e.name,e.removeAttribute("name"),n.insertAdjacentElement("beforebegin",o),r=e.value.split(",").map((e=>e.trim())).filter((e=>e.length>0)),"TEXTAREA"===e.nodeName)){const t=document.createElement("input");t.type="text",e.parentElement.insertBefore(t,e),t.id=e.id,e.remove(),e=t}return{element:e,list:n,shadow:o,values:r}}(r,s);if(p.set(e,{dropdownMenu:null,element:m.element,list:m.list,listItem:m.element.parentElement,options:s,shadow:m.shadow}),t=m.values.length?m.values:t,Array.isArray(t)){const n=!m.element.disabled;t.forEach((t=>{"string"==typeof t&&(t={objectId:0,value:t}),l(e,t,n)}))}},t.getValues=u,t.setValues=function(e,t){if(!p.has(e))throw new Error(`Element id '${e}' is unknown.`);const n=p.get(e);o.childrenByClass(n.list,"item").forEach((e=>c(e,!0))),t.forEach((t=>l(e,t)))}})),define("WoltLabSuite/Core/Ui/ItemList/User",["require","exports","tslib","../ItemList"],(function(e,t,n,i){"use strict";function o(e){const t=r(e.element.id),n=[],i=[];t.forEach((e=>{e.type&&"group"===e.type?i.push(e.objectId):n.push(e.value)}));const o=e.shadow;return o.value=n.join(","),e._shadowGroups||(e._shadowGroups=document.createElement("input"),e._shadowGroups.type="hidden",e._shadowGroups.name=`${o.name}GroupIDs`,o.insertAdjacentElement("beforebegin",e._shadowGroups)),e._shadowGroups.value=i.join(","),t}function r(e){return i.getValues(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getValues=t.init=void 0,i=n.__importStar(i),t.init=function(e,t){i.init(e,[],{ajax:{className:"wcf\\data\\user\\UserAction",parameters:{data:{includeUserGroups:t.includeUserGroups?~~t.includeUserGroups:0,restrictUserGroupIDs:Array.isArray(t.restrictUserGroupIDs)?t.restrictUserGroupIDs:[]}}},callbackChange:"function"==typeof t.callbackChange?t.callbackChange:null,callbackSyncShadow:t.csvPerType?o:null,callbackSetupValues:"function"==typeof t.callbackSetupValues?t.callbackSetupValues:null,excludedSearchValues:Array.isArray(t.excludedSearchValues)?t.excludedSearchValues:[],isCSV:!0,maxItems:t.maxItems?~~t.maxItems:-1,restricted:!0})},t.getValues=r})),define("WoltLabSuite/Core/Ui/Like/Handler",["require","exports","tslib","../../Core","../../Dom/Change/Listener","../../Language","../../StringUtil","../Reaction/Handler","../../User"],(function(e,t,n,i,o,r,a,s,l){"use strict";i=n.__importStar(i),o=n.__importDefault(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importDefault(s),l=n.__importDefault(l);const c=new Map(Object.entries(window.REACTION_TYPES));return class{_containers=new WeakMap;_objectType;_options;constructor(e,t){if(!t.containerSelector)throw new Error("[WoltLabSuite/Core/Ui/Like/Handler] Expected a non-empty string for option 'containerSelector'.");this._objectType=e,this._options=i.extend({badgeClassNames:"",isSingleItem:!1,markListItemAsActive:!1,renderAsButton:!0,summaryPrepend:!0,summaryUseIcon:!0,canDislike:!1,canLike:!1,canLikeOwnContent:!1,canViewSummary:!1,badgeContainerSelector:".messageHeader .messageStatus",buttonAppendToSelector:".messageFooter .messageFooterButtons",buttonBeforeSelector:"",containerSelector:"",summarySelector:".messageFooterGroup"},t),this.initContainers(),o.default.add(`WoltLabSuite/Core/Ui/Like/Handler-${e}`,(()=>this.initContainers())),new s.default(this._objectType,{containerSelector:this._options.containerSelector})}initContainers(){let e=!1;document.querySelectorAll(this._options.containerSelector).forEach((t=>{if(this._containers.has(t))return;const n={badge:null,dislikeButton:null,likeButton:null,summary:null,dislikes:~~t.dataset.likeDislikes,liked:~~t.dataset.likeLiked,likes:~~t.dataset.likeLikes,objectId:~~t.dataset.objectId,users:JSON.parse(t.dataset.likeUsers)};this._containers.set(t,n),this._buildWidget(t,n),e=!0})),e&&o.default.trigger()}_buildWidget(e,t){let n,i=!0;if(n=this._options.isSingleItem?document.querySelector(this._options.summarySelector):e.querySelector(this._options.summarySelector),null===n&&(n=this._options.isSingleItem?document.querySelector(this._options.badgeContainerSelector):e.querySelector(this._options.badgeContainerSelector),i=!1),null!==n){const e=document.createElement("ul");if(e.classList.add("reactionSummaryList"),i?e.classList.add("likesSummary"):e.classList.add("reactionSummaryListTiny"),Object.entries(t.users).forEach((([t,n])=>{const i=c.get(t);if("reactionTypeID"===t||!i)return;const o=document.createElement("li");o.className="reactCountButton",o.setAttribute("reaction-type-id",t);const r=document.createElement("span");r.className="reactionCount",r.innerHTML=a.shortUnit(~~n),o.appendChild(r),o.innerHTML=i.renderedIcon+o.innerHTML,e.appendChild(o)})),i)this._options.summaryPrepend?n.insertAdjacentElement("afterbegin",e):n.insertAdjacentElement("beforeend",e);else if("OL"===n.nodeName||"UL"===n.nodeName){const t=document.createElement("li");t.appendChild(e),n.appendChild(t)}else n.appendChild(e);t.badge=e}if(this._options.canLike&&(l.default.userId!=~~e.dataset.userId||this._options.canLikeOwnContent)){let n=null;this._options.buttonAppendToSelector&&(n=this._options.isSingleItem?document.querySelector(this._options.buttonAppendToSelector):e.querySelector(this._options.buttonAppendToSelector));let i=null;if(this._options.buttonBeforeSelector&&(i=this._options.isSingleItem?document.querySelector(this._options.buttonBeforeSelector):e.querySelector(this._options.buttonBeforeSelector)),null===i&&null===n)throw new Error("Unable to find insert location for like/dislike buttons.");t.likeButton=this._createButton(e,t.users.reactionTypeID,i,n)}}_createButton(e,t,n,i){const o=r.get("wcf.reactions.react"),a=document.createElement("li");a.className="wcfReactButton";const s=document.createElement("a");s.className="jsTooltip reactButton",this._options.renderAsButton&&s.classList.add("button"),s.href="#",s.title=o;const l=document.createElement("fa-icon");l.setIcon("smile"),void 0===t||0==t?l.dataset.reactionTypeId="0":(s.dataset.reactionTypeId=t.toString(),s.classList.add("active")),s.appendChild(l);const c=document.createElement("span");return c.className="invisible",c.innerHTML=o,s.appendChild(document.createTextNode(" ")),s.appendChild(c),a.appendChild(s),n?n.insertAdjacentElement("beforebegin",a):i.insertAdjacentElement("beforeend",a),s}}})),define("WoltLabSuite/Core/Ui/Message/InlineEditor",["require","exports","tslib","WoltLabSuite/Core/Component/Ckeditor/Event","../../Ajax","../../Component/Ckeditor","../../Core","../../Dom/Change/Listener","../../Dom/Util","../../Event/Handler","../../Language","../Dropdown/Reusable","../Notification","../Screen","../Scroll"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h){"use strict";return o=n.__importStar(o),a=n.__importStar(a),s=n.__importDefault(s),l=n.__importDefault(l),c=n.__importStar(c),d=n.__importStar(d),u=n.__importStar(u),p=n.__importStar(p),m=n.__importStar(m),h=n.__importStar(h),class{_activeDropdownElement;_activeElement;_dropdownMenu;_elements;_options;constructor(e){this.init(e)}init(e){this._activeDropdownElement=null,this._activeElement=null,this._dropdownMenu=null,this._elements=new WeakMap,this._options=a.extend({canEditInline:!1,className:"",containerId:0,dropdownIdentifier:"",editorPrefix:"messageEditor",messageSelector:".jsMessage",quoteManager:null},e),this.rebuild(),s.default.add(`Ui/Message/InlineEdit_${this._options.className}`,(()=>this.rebuild()))}rebuild(){document.querySelectorAll(this._options.messageSelector).forEach((e=>{if(this._elements.has(e))return;const t=e.querySelector(".jsMessageEditButton");if(null!==t){const n=a.stringToBool(e.dataset.canEdit||""),i=a.stringToBool(e.dataset.canEditInline||"");this._options.canEditInline||i?(t.addEventListener("click",(t=>this._clickDropdown(e,t))),t.classList.add("jsDropdownEnabled"),n&&t.addEventListener("dblclick",(t=>this._click(e,t)))):n&&t.addEventListener("click",(t=>this._click(e,t)))}const n=e.querySelector(".messageBody"),i=e.querySelector(".messageFooter"),o=i.querySelector(".messageFooterButtons"),r=e.querySelector(".messageHeader"),s=n.querySelector(".messageText");this._elements.set(e,{button:t,messageBody:n,messageBodyEditor:null,messageFooter:i,messageFooterButtons:o,messageHeader:r,messageText:s})}))}_click(e,t){null===e&&(e=this._activeDropdownElement),t&&t.preventDefault(),null===this._activeElement?(this._activeElement=e,this._prepare(),o.api(this,{actionName:"beginEdit",parameters:{containerID:this._options.containerId,objectID:this._getObjectId(e)}})):this._activeElement!==e&&p.show("wcf.message.error.editorAlreadyInUse",void 0,"warning")}_clickDropdown(e,t){t.preventDefault();const n=t.currentTarget;if(!n.classList.contains("dropdownToggle")){if(n.classList.add("dropdownToggle"),n.parentElement.classList.add("dropdown"),n.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this._activeDropdownElement=e;let i=n;if(m.is("screen-sm-down")&&0===n.clientWidth){const e=n.closest(this._options.messageSelector);i=this._elements.get(e).messageHeader.querySelector(".messageQuickOptions")}u.toggleDropdown(this._options.dropdownIdentifier,i)})),null===this._dropdownMenu){this._dropdownMenu=document.createElement("ul"),this._dropdownMenu.className="dropdownMenu";const e=this._dropdownGetItems();c.fire("com.woltlab.wcf.inlineEditor",`dropdownInit_${this._options.dropdownIdentifier}`,{items:e}),this._dropdownBuild(e),u.init(this._options.dropdownIdentifier,this._dropdownMenu),u.registerCallback(this._options.dropdownIdentifier,((e,t)=>this._dropdownToggle(e,t)))}setTimeout((()=>n.click()),10)}}_dropdownBuild(e){e.forEach((e=>{const t=document.createElement("li");if(t.dataset.item=e.item,"divider"===e.item)t.className="dropdownDivider";else{const n=document.createElement("span");n.textContent=d.get(e.label),t.appendChild(n),"editItem"===e.item?t.addEventListener("click",(e=>this._click(null,e))):t.addEventListener("click",(e=>this._clickDropdownItem(e)))}this._dropdownMenu.appendChild(t)}))}_dropdownToggle(e,t){const n=this._elements.get(this._activeDropdownElement),i=n.button.parentElement;if("close"===t)return i.classList.remove("dropdownOpen"),void n.messageFooterButtons.classList.remove("forceVisible");i.classList.add("dropdownOpen"),n.messageFooterButtons.classList.add("forceVisible");const o=new Map(Object.entries(this._dropdownOpen()));c.fire("com.woltlab.wcf.inlineEditor",`dropdownOpen_${this._options.dropdownIdentifier}`,{element:this._activeDropdownElement,visibility:o});const r=this._dropdownMenu;let a=!1;const s=Array.from(r.children);s.forEach(((e,t)=>{const n=e.dataset.item;if("divider"===n)a?(l.default.show(e),a=!1):l.default.hide(e);else if(!1===o.get(n)){if(l.default.hide(e),t>0&&t+1===s.length){const t=e.previousElementSibling;"divider"===t.dataset.item&&l.default.hide(t)}}else l.default.show(e),a=!0}))}_dropdownGetItems(){return[]}_dropdownOpen(){return{}}_dropdownSelect(e){}_clickDropdownItem(e){e.preventDefault();const t=e.currentTarget.dataset.item,n={cancel:!1,element:this._activeDropdownElement,item:t};c.fire("com.woltlab.wcf.inlineEditor",`dropdownItemClick_${this._options.dropdownIdentifier}`,n),n.cancel?e.preventDefault():this._dropdownSelect(t)}_prepare(){const e=this._elements.get(this._activeElement),t=document.createElement("div");t.className="messageBody editor",e.messageBodyEditor=t;const n=document.createElement("fa-icon");n.size=48,n.setIcon("spinner"),t.appendChild(n),e.messageBody.insertAdjacentElement("afterend",t),l.default.hide(e.messageBody)}_showEditor(e){const t=this._getEditorId(),n=this._activeElement,i=this._elements.get(n);n.classList.add("jsInvalidQuoteTarget");const o=n.parentElement;o.classList.contains("anchorFixedHeader")&&o.classList.add("disableAnchorFixedHeader"),i.messageBodyEditor.querySelector("fa-icon").remove();const r=i.messageBodyEditor,a=document.createElement("div");a.className="editorContainer",l.default.setInnerHtml(a,e.returnValues.template),r.appendChild(a);const s=a.querySelector(".formSubmit");s.querySelector('button[data-type="save"]').addEventListener("click",(()=>this._save())),s.querySelector('button[data-type="cancel"]').addEventListener("click",(()=>this._restoreMessage())),c.add("com.woltlab.wcf.ckeditor5",`submitEditor_${t}`,(e=>{e.cancel=!0,this._save()})),l.default.hide(i.messageHeader),l.default.hide(i.messageFooter),window.setTimeout((()=>{this._options.quoteManager&&this._options.quoteManager.setAlternativeEditor(t),h.element(n)}),250)}_restoreMessage(){const e=this._activeElement,t=this._elements.get(e);this._destroyEditor(),t.messageBodyEditor.remove(),t.messageBodyEditor=null,l.default.show(t.messageBody),l.default.show(t.messageFooter),l.default.show(t.messageHeader),e.classList.remove("jsInvalidQuoteTarget");const n=e.parentElement;n.classList.contains("anchorFixedHeader")&&n.classList.remove("disableAnchorFixedHeader"),this._activeElement=null,this._options.quoteManager&&this._options.quoteManager.clearAlternativeEditor()}_save(){const e=this._getEditorId(),t=(0,r.getCkeditorById)(e),n={containerID:this._options.containerId,data:{message:t.getHtml()},objectID:this._getObjectId(this._activeElement),removeQuoteIDs:this._options.quoteManager?this._options.quoteManager.getQuotesMarkedForRemoval():[]},a=document.getElementById(`settings_${e}`);a&&a.querySelectorAll("input, select, textarea").forEach((e=>{if("INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)&&!e.checked)return;const t=e.name;if(Object.prototype.hasOwnProperty.call(n,t))throw new Error(`Variable overshadowing, key '${t}' is already present.`);n[t]=e.value.trim()}));let s=this._validate(n);s instanceof Promise||(s=!1===s?Promise.reject():Promise.resolve()),s.then((()=>{(0,i.dispatchToCkeditor)(t.sourceElement).collectMetaData({metaData:n}),o.api(this,{actionName:"save",parameters:n}),this._hideEditor()}),(e=>{const t=e.message;console.log(`Validation of post edit failed: ${t}`)}))}_validate(e){this._activeElement.querySelectorAll(".innerError").forEach((e=>e.remove()));const t={api:this,parameters:e,valid:!0,promises:[]};return c.fire("com.woltlab.wcf.ckeditor5",`validate_${this._getEditorId()}`,t),t.valid?t.promises.push(Promise.resolve()):t.promises.push(Promise.reject()),Promise.all(t.promises)}throwError(e,t){l.default.innerError(e,t)}_showMessage(e){const t=this._activeElement,n=this._elements.get(t);if(l.default.setInnerHtml(n.messageBody.querySelector(".messageText"),e.returnValues.message),"string"==typeof e.returnValues.attachmentList){n.messageFooter.querySelectorAll(".attachmentThumbnailList, .attachmentFileList").forEach((e=>e.remove()));const t=document.createElement("div");let i;for(l.default.setInnerHtml(t,e.returnValues.attachmentList);t.childNodes.length;)i=t.childNodes[t.childNodes.length-1],n.messageFooter.insertBefore(i,n.messageFooter.firstChild)}if("string"==typeof e.returnValues.poll){const t=n.messageBody.querySelector(".pollContainer");if(null!==t&&t.parentElement.remove(),""!==e.returnValues.poll){const t=document.createElement("div");t.className="jsInlineEditorHideContent",l.default.setInnerHtml(t,e.returnValues.poll),n.messageBody.insertAdjacentElement("afterbegin",t)}}(0,r.getCkeditorById)(this._getEditorId()).discardDraft(),this._restoreMessage(),this._updateHistory(this._getHash(this._getObjectId(t))),p.show(),this._options.quoteManager&&(this._options.quoteManager.clearAlternativeEditor(),this._options.quoteManager.countQuotes())}_hideEditor(){const e=this._elements.get(this._activeElement),t=e.messageBodyEditor.querySelector(".editorContainer");l.default.hide(t);const n=document.createElement("fa-icon");n.size=48,n.setIcon("spinner"),e.messageBodyEditor.appendChild(n)}_restoreEditor(){const e=this._elements.get(this._activeElement).messageBodyEditor;e.querySelector('fa-icon[name="spinner"]').remove();const t=e.querySelector(".editorContainer");null!==t&&l.default.show(t)}_destroyEditor(){(0,r.getCkeditorById)(this._getEditorId(),!1)?.destroy()}_getHash(e){return`#message${e}`}_updateHistory(e){window.location.hash=e}_getEditorId(){return this._options.editorPrefix+this._getObjectId(this._activeElement).toString()}_getObjectId(e){return e.dataset.objectId||""}_ajaxFailure(e){const t=this._elements.get(this._activeElement).messageBodyEditor.querySelector(".ck.ck-editor");return null===t?(this._restoreMessage(),!0):(this._restoreEditor(),!e||void 0===e.returnValues||void 0===e.returnValues.realErrorMessage||(l.default.innerError(t,e.returnValues.realErrorMessage),!1))}_ajaxSuccess(e){switch(e.actionName){case"beginEdit":this._showEditor(e);break;case"save":this._showMessage(e)}}_ajaxSetup(){return{data:{className:this._options.className,interfaceName:"wcf\\data\\IMessageInlineEditorAction"},silent:!0}}legacyEdit(e){this._click(document.getElementById(e),null)}}})),define("WoltLabSuite/Core/Ui/Message/Manager",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Change/Listener","../../Language","../../StringUtil"],(function(e,t,n,i,o,r,a,s){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importStar(a),s=n.__importStar(s),class{_elements=new Map;_options;constructor(e){this._options=o.extend({className:"",selector:""},e),this.rebuild(),r.default.add(`Ui/Message/Manager${this._options.className}`,this.rebuild.bind(this))}rebuild(){this._elements.clear(),document.querySelectorAll(this._options.selector).forEach((e=>{this._elements.set(e.dataset.objectId,e)}))}getPermission(e,t){t="can"+s.ucfirst(t);const n=this._elements.get(e);if(void 0===n)throw new Error(`Unknown object id '${e}' for selector '${this._options.selector}'`);return o.stringToBool(n.dataset[s.toCamelCase(t)]||"")}getPropertyValue(e,t,n){const i=this._elements.get(e);if(void 0===i)throw new Error(`Unknown object id '${e}' for selector '${this._options.selector}'`);const r=i.dataset[s.toCamelCase(t)]||"";return n?o.stringToBool(r):r}update(e,t,n){i.api(this,{actionName:t,parameters:n||{},objectIDs:[e]})}updateItems(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=this._elements.get(e);void 0!==n&&Object.entries(t).forEach((([e,t])=>{this._update(n,e,t)}))}))}updateAllItems(e){const t=Array.from(this._elements.keys());this.updateItems(t,e)}setNote(e,t,n){const i=this._elements.get(e);if(void 0===i)throw new Error(`Unknown object id '${e}' for selector '${this._options.selector}'`);const o=i.querySelector(".messageFooterNotes");let r=o.querySelector(`.${t}`);n?(null===r&&(r=document.createElement("p"),r.className="messageFooterNote "+t,o.appendChild(r)),r.innerHTML=n):null!==r&&r.remove()}_update(e,t,n){e.dataset[t]=n.toString();const i=1==n||!0===n||"true"===n;this._updateState(e,t,n,i)}_updateState(e,t,n,i){switch(t){case"isDeleted":i?e.classList.add("messageDeleted"):e.classList.remove("messageDeleted"),this._toggleMessageStatus(e,"jsIconDeleted","wcf.message.status.deleted","red",i);break;case"isDisabled":i?e.classList.add("messageDisabled"):e.classList.remove("messageDisabled"),this._toggleMessageStatus(e,"jsIconDisabled","wcf.message.status.disabled","green",i)}}_toggleMessageStatus(e,t,n,i,o){let r=e.querySelector(".messageStatus");if(null===r){const t=e.querySelector(".messageHeaderMetaData");if(null===t)return;r=document.createElement("ul"),r.className="messageStatus",t.insertAdjacentElement("afterend",r)}let s=r.querySelector(`.${t}`);if(o){if(null!==s)return;s=document.createElement("span"),s.className=`badge label ${i} ${t}`,s.textContent=a.get(n);const e=document.createElement("li");e.appendChild(s),r.appendChild(e)}else{if(null===s)return;s.parentElement.remove()}}_getAttributeName(e){return-1!==e.indexOf("-")?e:e.split(/([A-Z][a-z]+)/).map((e=>e.trim().toLowerCase())).filter((e=>e.length>0)).join("-")}_ajaxSuccess(e){throw new Error("Method _ajaxSuccess() must be implemented by deriving functions.")}_ajaxSetup(){return{data:{className:this._options.className}}}}})),define("WoltLabSuite/Core/Ui/Message/Quote",["require","exports","tslib","../../Ajax","../../Core","../../Event/Handler","../../Language","../../Dom/Change/Listener","../../Dom/Util"],(function(e,t,n,i,o,r,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UiMessageQuote=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importDefault(s),l=n.__importDefault(l);class c{activeMessageId="";className;containers=new Map;containerSelector="";copyQuote=document.createElement("div");message="";messageBodySelector;objectId=0;objectType="";timerSelectionChange=void 0;isMouseDown=!1;quoteManager;constructor(e,t,n,i,o,r,a){this.className=t,this.objectType=n,this.containerSelector=i,this.messageBodySelector=o,this.initContainers(),a=a&&e.supportPaste(),this.quoteManager=e,this.initCopyQuote(a),document.addEventListener("mouseup",(e=>this.onMouseUp(e))),document.addEventListener("selectionchange",(()=>this.onSelectionchange())),s.default.add("UiMessageQuote",(()=>this.initContainers())),document.addEventListener("touchstart",(e=>{const t=e.target;t===this.copyQuote||this.copyQuote.contains(t)||(this.copyQuote.classList.add("touchForceInaccessible"),document.addEventListener("touchend",(()=>{this.copyQuote.classList.remove("touchForceInaccessible")}),{once:!0,passive:!1}))}),{passive:!1})}initContainers(){document.querySelectorAll(this.containerSelector).forEach((e=>{const t=l.default.identify(e);this.containers.has(t)||(this.containers.set(t,e),e.classList.contains("jsInvalidQuoteTarget")||(e.addEventListener("mousedown",(e=>this.onMouseDown(e))),e.classList.add("jsQuoteMessageContainer"),e.querySelector(".jsQuoteMessage")?.addEventListener("click",(e=>this.saveFullQuote(e)))))}))}onSelectionchange(){if(!this.isMouseDown){if(""===this.activeMessageId){const e=window.getSelection();if(1!==e.rangeCount||e.isCollapsed)return;const t=e.getRangeAt(0),n=l.default.closest(t.startContainer,".jsQuoteMessageContainer"),i=l.default.closest(t.endContainer,".jsQuoteMessageContainer");if(n&&n===i&&!n.classList.contains("jsInvalidQuoteTarget")){let e=t.commonAncestorContainer;e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentElement);const i=e.offsetParent;if(n.contains(i)&&i.scrollTop+i.clientHeight<e.offsetTop)return;this.activeMessageId=n.id}}this.timerSelectionChange&&window.clearTimeout(this.timerSelectionChange),this.timerSelectionChange=window.setTimeout((()=>this.onMouseUp()),100)}}onMouseDown(e){this.copyQuote.classList.remove("active");const t=e.currentTarget;this.activeMessageId=t.classList.contains("jsInvalidQuoteTarget")?"":t.id,this.timerSelectionChange&&(window.clearTimeout(this.timerSelectionChange),this.timerSelectionChange=void 0),this.isMouseDown=!0}getNodeText(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:e=>"BLOCKQUOTE"===e.nodeName||"SCRIPT"===e.nodeName?NodeFilter.FILTER_REJECT:!(e instanceof HTMLImageElement)||e.classList.contains("smiley")&&e.alt?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT});let n="";const i=[];for(;t.nextNode();){const e=t.currentNode;if(e instanceof Text){const t=e.parentElement;if(t instanceof HTMLAnchorElement&&i.includes(t))continue;n+=e.nodeValue.replace(/\n/g," ")}else{if(e instanceof HTMLAnchorElement){const t=e.textContent;if(t.indexOf("…")>0){const o=t.split(/\u2026/);if(2===o.length){const t=e.href;0===t.indexOf(o[0])&&t.substr(-1*o[1].length)===o[1]&&(n+=t,i.push(e))}}}switch(e.nodeName){case"BR":case"LI":case"TD":case"UL":n+="\n";break;case"P":n+="\n\n";break;case"IMG":n+=` ${e.alt} `;break;case"DIV":(e.classList.contains("codeBoxHeadline")||e.classList.contains("codeBoxLine"))&&(n+="\n")}}}return n}onMouseUp(e){if(e instanceof Event&&(this.timerSelectionChange&&(window.clearTimeout(this.timerSelectionChange),this.timerSelectionChange=void 0),this.isMouseDown=!1),""===this.activeMessageId)return void this.copyQuote.classList.remove("active");const t=window.getSelection();if(1!==t.rangeCount||t.isCollapsed)return void this.copyQuote.classList.remove("active");const n=this.containers.get(this.activeMessageId);if(void 0===n)return;const i=~~n.dataset.objectId,o=this.messageBodySelector?n.querySelector(this.messageBodySelector):n;let r=t.anchorNode;for(;r&&r!==o;)r=r.parentNode;if(r!==o)return void this.copyQuote.classList.remove("active");const a=this.getSelectedText().trim();if(""===a)return void this.copyQuote.classList.remove("active");const s=t.getRangeAt(0),c=l.default.getClosestElement(s.startContainer),d=l.default.getClosestElement(s.endContainer);if(c.closest("blockquote")||d.closest("blockquote"))return void this.copyQuote.classList.remove("active");const u=this.getNodeText(o);if(!this.normalizeTextForComparison(u).includes(this.normalizeTextForComparison(a)))return;this.copyQuote.classList.add("active");const p=this.copyQuote.classList.contains("touchForceInaccessible");p&&this.copyQuote.classList.remove("touchForceInaccessible");const m=this.getElementBoundaries(t),h=(this.copyQuote.offsetHeight,this.copyQuote.offsetWidth);let f=(m.right-m.left)/2-h/2+m.left;const g=o.getBoundingClientRect();f<g.left?f=g.left:f+h>g.right&&(f=g.right-h),this.copyQuote.style.setProperty("top",`${m.bottom+7}px`),this.copyQuote.style.setProperty("left",`${f}px`),this.copyQuote.classList.remove("active"),p&&this.copyQuote.classList.add("touchForceInaccessible"),this.timerSelectionChange?(window.clearTimeout(this.timerSelectionChange),this.timerSelectionChange=void 0):this.activeMessageId="",window.setTimeout((()=>{const e=this.getSelectedText().trim();""!==e&&(this.copyQuote.classList.add("active"),this.message=e,this.objectId=i)}),10)}normalizeTextForComparison(e){return e.replace(/\r?\n|\r/g,"\n").replace(/\s/g," ").replace(/\s{2,}/g," ")}getElementBoundaries(e){let t=null;if(e.rangeCount>0){const n=e.getRangeAt(0).getBoundingClientRect(),i=window.pageYOffset;t={bottom:n.bottom+i,left:n.left,right:n.right,top:n.top+i}}return t}initCopyQuote(e){this.copyQuote.classList.add("balloonTooltip","interactive","quoteManagerCopy");const t=document.createElement("span");if(t.classList.add("jsQuoteManagerStore"),t.textContent=a.get("wcf.message.quote.quoteSelected"),t.addEventListener("click",(e=>this.saveQuote(e))),this.copyQuote.appendChild(t),e){const e=document.createElement("span");e.classList.add("jsQuoteManagerQuoteAndInsert"),e.textContent=a.get("wcf.message.quote.quoteAndReply"),e.addEventListener("click",(e=>this.saveAndInsertQuote(e))),this.copyQuote.appendChild(e)}document.body.appendChild(this.copyQuote)}getSelectedText(){const e=window.getSelection();return e.rangeCount?this.getNodeText(e.getRangeAt(0).cloneContents()):""}saveFullQuote(e){e.preventDefault();const t=e.currentTarget;i.api(this,{actionName:"saveFullQuote",objectIDs:[t.dataset.objectId]});const n=t.querySelector("a");o.stringToBool(t.dataset.isQuoted||"")?(t.dataset.isQuoted="false",n.classList.remove("active")):(t.dataset.isQuoted="true",n.classList.add("active"));const r=t.closest(".buttonGroupNavigation");r&&r.classList.contains("jsMobileButtonGroupNavigation")&&r.querySelector(".dropdownLabel").click()}saveQuote(e,t=!1){e?.preventDefault(),i.api(this,{actionName:"saveQuote",objectIDs:[this.objectId],parameters:{message:this.message,renderQuote:t}});const n=window.getSelection();n.rangeCount&&(n.removeAllRanges(),this.copyQuote.classList.remove("active"))}saveAndInsertQuote(e){e.preventDefault(),this.saveQuote(void 0,!0)}_ajaxSuccess(e){if(void 0!==e.returnValues.count){void 0!==e.returnValues.fullQuoteMessageIDs&&(e.returnValues.fullQuoteObjectIDs=e.returnValues.fullQuoteMessageIDs);const t=e.returnValues.fullQuoteObjectIDs||{};this.quoteManager.updateCount(e.returnValues.count,t)}switch(e.actionName){case"saveQuote":case"saveFullQuote":e.returnValues.renderedQuote&&r.fire("com.woltlab.wcf.message.quote","insert",{forceInsert:"saveQuote"===e.actionName,quote:e.returnValues.renderedQuote})}}_ajaxSetup(){return{data:{className:this.className,interfaceName:"wcf\\data\\IMessageQuoteAction"}}}updateFullQuoteObjectIDs(e){this.containers.forEach((t=>{const n=t.querySelector(".jsQuoteMessage");n.dataset.isQuoted="false";const i=n.querySelector("a");n.classList.remove("active");const o=~~n.dataset.objectID;e.includes(o)&&(n.dataset.isQuoted="true",i.classList.add("active"))}))}}t.UiMessageQuote=c,t.default=c})),define("WoltLabSuite/Core/Ui/Message/Reply",["require","exports","tslib","../../Ajax","../../Core","../../Event/Handler","../../Language","../../Dom/Change/Listener","../../Dom/Util","../Dialog","../Notification","../../User","../../Controller/Captcha","../Scroll","../../Component/Ckeditor","WoltLabSuite/Core/Component/Ckeditor/Event"],(function(e,t,n,i,o,r,a,s,l,c,d,u,p,m,h,f){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a),s=n.__importDefault(s),l=n.__importDefault(l),c=n.__importDefault(c),d=n.__importStar(d),u=n.__importDefault(u),p=n.__importDefault(p),m=n.__importStar(m),class{_container;_content;_ckeditor;_guestDialogId="";_loadingOverlay=null;_options;_textarea;constructor(e){this._options=o.extend({ajax:{className:""},quoteManager:null,successMessage:"wcf.global.success.add"},e),this._container=document.getElementById("messageQuickReply"),this._content=this._container.querySelector(".messageContent"),this._textarea=document.getElementById("text"),this._container.querySelector(".message").classList.add("jsInvalidQuoteTarget"),this._container.querySelector('button[data-type="save"]').addEventListener("click",(e=>this._submit(e))),document.querySelectorAll(".jsQuickReply").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),m.element(this._container,(()=>{this._getCKEditor().focus()}))}))}))}_submitGuestDialog(e){if(e instanceof KeyboardEvent&&"Enter"!==e.key)return;const t=e.currentTarget,n=t.closest(".dialogContent").querySelector("input[name=username]");if(""===n.value)return l.default.innerError(n,a.get("wcf.global.form.error.empty")),void n.closest("dl").classList.add("formError");let i={parameters:{data:{username:n.value}}};const r=t.dataset.captchaId;if(p.default.has(r)){const e=p.default.getData(r);p.default.delete(r),e instanceof Promise?e.then((e=>{i=o.extend(i,e),this._submit(void 0,i)})):(i=o.extend(i,e),this._submit(void 0,i))}else this._submit(void 0,i)}_submit(e,t){if(e&&e.preventDefault(),this._content.classList.contains("loading")&&(!this._guestDialogId||!c.default.isOpen(this._guestDialogId)))return;if(!this._validate())return;this._showLoadingOverlay();const n={};Object.entries(this._container.dataset).forEach((([e,t])=>{n[e.replace(/Id$/,"ID")]=t})),n.data={message:this._getCKEditor().getHtml()},n.removeQuoteIDs=this._options.quoteManager?this._options.quoteManager.getQuotesMarkedForRemoval():[];const r=document.getElementById("settings_text");r&&r.querySelectorAll("input, select, textarea").forEach((e=>{if("INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)&&!e.checked)return;const t=e.name;if(Object.prototype.hasOwnProperty.call(n,t))throw new Error(`Variable overshadowing, key '${t}' is already present.`);n[t]=e.value.trim()})),(0,f.dispatchToCkeditor)(this._textarea).collectMetaData({metaData:n.data}),u.default.userId||t||(n.requireGuestDialog=!0),i.api(this,o.extend({parameters:n},t))}_validate(){this._container.querySelectorAll(".innerError").forEach((e=>e.remove()));const e=this._getCKEditor().getHtml();if(""===e)return this.throwError(this._getCKEditor().element,a.get("wcf.global.form.error.empty")),!1;const t={api:this,editor:this._getCKEditor(),message:e,valid:!0};return r.fire("com.woltlab.wcf.ckeditor5","validate_text",t),t.valid}throwError(e,t){l.default.innerError(e,"empty"===t?a.get("wcf.global.form.error.empty"):t)}_showLoadingOverlay(){null===this._loadingOverlay&&(this._loadingOverlay=document.createElement("div"),this._loadingOverlay.className="messageContentLoadingOverlay",this._loadingOverlay.innerHTML='<fa-icon size="96" name="spinner" solid></fa-icon>'),this._content.classList.add("loading"),this._content.appendChild(this._loadingOverlay)}_hideLoadingOverlay(){this._content.classList.remove("loading");const e=this._content.querySelector(".messageContentLoadingOverlay");null!==e&&e.remove()}_reset(){this._getCKEditor().reset()}_handleError(e){const t={api:this,cancel:!1,returnValues:e.returnValues};r.fire("com.woltlab.wcf.ckeditor5","handleError_text",t),t.cancel||this.throwError(this._getCKEditor().element,e.returnValues.realErrorMessage)}_getCKEditor(){if(void 0===this._ckeditor&&(this._ckeditor=(0,h.getCkeditor)(this._textarea),void 0===this._ckeditor))throw new Error(`Unable to find the CKEditor instance for '${this._textarea.id}'.`);return this._ckeditor}_insertMessage(e){if(this._getCKEditor().discardDraft(),e.returnValues.url)window.location.href==e.returnValues.url&&window.location.reload(),window.location.href=e.returnValues.url;else{if(e.returnValues.template){let t;if("DESC"===this._container.dataset.sortOrder)l.default.insertHtml(e.returnValues.template,this._container,"after"),t=l.default.identify(this._container.nextElementSibling);else{let n=this._container;n.previousElementSibling&&n.previousElementSibling.classList.contains("messageListPagination")&&(n=n.previousElementSibling),l.default.insertHtml(e.returnValues.template,n,"before"),t=l.default.identify(n.previousElementSibling)}this._container.dataset.lastPostTime=e.returnValues.lastPostTime.toString(),window.history.replaceState(void 0,"",`#${t}`),m.element(document.getElementById(t))}d.show(a.get(this._options.successMessage)),this._options.quoteManager&&this._options.quoteManager.countQuotes(),s.default.trigger()}}_ajaxSuccess(e){if(!u.default.userId&&!e.returnValues.guestDialogID)throw new Error("Missing 'guestDialogID' return value for guest.");if(!u.default.userId&&e.returnValues.guestDialog){const t=e.returnValues.guestDialogID;c.default.openStatic(t,e.returnValues.guestDialog,{closable:!1,onClose:function(){p.default.has(t)&&p.default.delete(t)},title:a.get("wcf.global.confirmation.title")});const n=c.default.getDialog(t);n.content.querySelector("input[type=submit]").addEventListener("click",(e=>this._submitGuestDialog(e))),n.content.querySelector("input[type=text]").addEventListener("keypress",(e=>this._submitGuestDialog(e))),this._guestDialogId=t}else this._insertMessage(e),u.default.userId||c.default.close(e.returnValues.guestDialogID),this._reset(),this._hideLoadingOverlay()}_ajaxFailure(e){return this._hideLoadingOverlay(),null===e||void 0===e.returnValues||void 0===e.returnValues.realErrorMessage||(this._handleError(e),!1)}_ajaxSetup(){return{data:{actionName:"quickReply",className:this._options.ajax.className,interfaceName:"wcf\\data\\IMessageQuickReplyAction"},silent:!0}}}})),define("WoltLabSuite/Core/Ui/Message/Share",["require","exports","tslib","../../Event/Handler","../../StringUtil"],(function(e,t,n,i,o){"use strict";function r(e,t,n,i){i||(i=s),window.open(t.replace("{pageURL}",i).replace("{text}",a+(n?`%20${i}`:"")),e,"height=600,width=600")}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importStar(o);let a="",s="";t.init=function(){const e=document.querySelector('meta[property="og:title"]');null!==e&&(a=encodeURIComponent(e.content));const t=document.querySelector('meta[property="og:url"]');null!==t&&(s=encodeURIComponent(t.content)),document.querySelectorAll(".jsMessageShareButtons").forEach((e=>{e.classList.remove("jsMessageShareButtons");let t=encodeURIComponent(o.unescapeHTML(e.dataset.url||""));t||(t=s);const n={facebook:{link:e.querySelector('.messageShareProvider[data-identifier="Facebook"]'),share(e){e.preventDefault(),r("facebook","https://www.facebook.com/sharer.php?u={pageURL}&t={text}",!0,t)}},reddit:{link:e.querySelector('.messageShareProvider[data-identifier="Reddit"]'),share(e){e.preventDefault(),r("reddit","https://ssl.reddit.com/submit?url={pageURL}",!1,t)}},twitter:{link:e.querySelector('.messageShareProvider[data-identifier="Twitter"]'),share(e){e.preventDefault(),r("twitter","https://twitter.com/share?url={pageURL}&text={text}",!1,t)}},linkedIn:{link:e.querySelector('.messageShareProvider[data-identifier="LinkedIn"]'),share(e){e.preventDefault(),r("linkedIn","https://www.linkedin.com/cws/share?url={pageURL}",!1,t)}},pinterest:{link:e.querySelector('.messageShareProvider[data-identifier="Pinterest"]'),share(e){e.preventDefault(),r("pinterest","https://www.pinterest.com/pin/create/link/?url={pageURL}&description={text}",!1,t)}},xing:{link:e.querySelector('.messageShareProvider[data-identifier="XING"]'),share(e){e.preventDefault(),r("xing","https://www.xing.com/social_plugins/share?url={pageURL}",!1,t)}},whatsApp:{link:e.querySelector('.messageShareProvider[data-identifier="WhatsApp"]'),share(e){e.preventDefault(),window.location.href="https://api.whatsapp.com/send?text="+a+"%20"+s}}};i.fire("com.woltlab.wcf.message.share","shareProvider",{container:e,providers:n,pageDescription:a,pageUrl:s}),Object.values(n).forEach((e=>{null!==e.link&&e.link.addEventListener("click",(t=>e.share(t)))}))}))}})),define("WoltLabSuite/Core/Ui/Message/TwitterEmbed",["require","exports","https://platform.twitter.com/widgets.js"],(function(e,t){"use strict";async function n(e,t,n=!1){const o=await i,r="dark"===document.documentElement.dataset.colorScheme?"dark":"light",a=await o.widgets.createTweet(t,e,{dnt:!0,lang:document.documentElement.lang,theme:r});if(a&&n){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(a)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.embedAll=t.embedTweet=void 0;const i=new Promise((e=>{twttr.ready(e)}));t.embedTweet=n,t.embedAll=function(){document.querySelectorAll("[data-wsc-twitter-tweet]").forEach((e=>{const t=e.dataset.wscTwitterTweet;t&&(delete e.dataset.wscTwitterTweet,n(e,t,!0))}))}})),define("WoltLabSuite/Core/Ui/Moderation/MarkAllAsRead",["require","exports","tslib","../../Ajax","../Notification"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,o=n.__importStar(o),t.setup=function(){document.querySelectorAll(".markAllAsReadButton").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),async function(){await(0,i.dboAction)("markAllAsRead","wcf\\data\\moderation\\queue\\ModerationQueueAction").dispatch(),document.querySelectorAll(".moderationQueueEntryList .new").forEach((e=>{e.classList.remove("new")})),document.querySelector("#outstandingModeration .badgeUpdate")?.remove(),o.show()}()}))}))}})),define("WoltLabSuite/Core/Ui/Moderation/MarkAsRead",["require","exports","../../Ajax"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const i=new WeakSet;t.setup=function(){document.querySelectorAll(".moderationQueueEntryList .new .columnAvatar").forEach((e=>{i.has(e)||(i.add(e),e.addEventListener("dblclick",(t=>{t.preventDefault();const i=e.closest(".moderationQueueEntry");i.classList.contains("new")&&async function(e){const t=parseInt(e.dataset.queueId,10);await(0,n.dboAction)("markAsRead","wcf\\data\\moderation\\queue\\ModerationQueueAction").objectIds([t]).dispatch(),e.classList.remove("new"),e.querySelector(".columnAvatar p")?.removeAttribute("title")}(i)}),{once:!0}))}))}})),define("WoltLabSuite/Core/Ui/Moderation/Report",["require","exports","tslib","../../Ajax","../../Component/Dialog","../../Dom/Util","../../Helper/Selector","../../Language","../Notification"],(function(e,t,n,i,o,r,a,s,l){"use strict";function c(e){(function(e){return""===e.dataset.reportContent?(console.error("Missing the value for [data-report-content]",e),!1):!!parseInt(e.dataset.objectId||"")||(console.error("Expected a valid integer for [data-object-id]",e),!1)})(e)&&e.addEventListener("click",(t=>{"A"!==e.tagName&&"true"!==e.dataset.isLegacyButton||t.preventDefault(),async function(e){const t=parseInt(e.dataset.objectId||""),n=e.dataset.reportContent,a=await(0,i.dboAction)("prepareReport","wcf\\data\\moderation\\queue\\ModerationQueueReportAction").payload({objectID:t,objectType:n}).dispatch();let c;a.alreadyReported?c=(0,o.dialogFactory)().fromHtml(a.template).asAlert():(c=(0,o.dialogFactory)().fromHtml(a.template).asPrompt(),c.addEventListener("validate",(e=>{(function(e){const t=e.content.querySelector(".jsReportMessage"),n=t.closest("dl");return""===t.value.trim()?(n.classList.add("formError"),(0,r.innerError)(t,s.get("wcf.global.form.error.empty")),!1):(n.classList.remove("formError"),(0,r.innerError)(t,!1),!0)})(c)||e.preventDefault()})),c.addEventListener("primary",(()=>{!async function(e,t,n){const o=e.content.querySelector(".jsReportMessage").value.trim();await(0,i.dboAction)("report","wcf\\data\\moderation\\queue\\ModerationQueueReportAction").payload({message:o,objectID:n,objectType:t}).dispatch(),l.show()}(c,n,t)}))),c.show(s.get("wcf.moderation.report.reportContent"))}(e)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.registerLegacyButton=void 0,s=n.__importStar(s),l=n.__importStar(l),t.registerLegacyButton=function(e,t){e.dataset.reportContent=t,e.dataset.isLegacyButton="true",c(e)},t.setup=function(){(0,a.wheneverFirstSeen)("[data-report-content]",(e=>c(e)))}})),define("WoltLabSuite/Core/Ui/Pagination/JumpToPage",["require","exports","../../Component/Dialog","../../Helper/Selector","../../Language"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(){(0,i.wheneverFirstSeen)("woltlab-core-pagination",(e=>{e.addEventListener("jumpToPage",(()=>{!function(e){const t=`\n    <dl>\n      <dt></dt>\n      <dd>\n        <input\n          class="tiny"\n          type="number"\n          min="1"\n          max="${e.count}"\n          value="${e.count}"\n          aria-label="${(0,o.getPhrase)("wcf.page.jumpTo.pageNo")}"\n          required\n        >\n        <small>${(0,o.getPhrase)("wcf.page.jumpTo.description",{pages:e.count})}</small>\n      </dd>\n    </dl>\n  `,i=(0,n.dialogFactory)().fromHtml(t).asPrompt(),r=i.content.querySelector('input[type="number"]');i.addEventListener("primary",(()=>{e.jumpToPage(parseInt(r.value))})),i.show((0,o.getPhrase)("wcf.page.jumpTo")),r.select()}(e)}))}))}})),define("WoltLabSuite/Core/Ui/Poll/View/Participants",["require","exports","../../../Component/User/List"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Participants=void 0;class i{pollManager;button;userList=void 0;constructor(e){this.pollManager=e;const t=this.pollManager.getElement().querySelector(".showPollParticipantsButton");if(!t)throw new Error(`Could not find button with selector "showPollParticipantsButton" for poll "${this.pollManager.pollId}"`);this.button=t,this.button.addEventListener("click",(e=>{e&&e.preventDefault(),this.open()}))}open(){this.userList||(this.userList=new n.UserList({className:"wcf\\data\\poll\\PollAction",parameters:{pollID:this.pollManager.pollId}},this.pollManager.question)),this.userList.open()}showButton(){this.button.hidden=!1}hideButton(){this.button.hidden=!0}}t.Participants=i,t.default=i})),define("WoltLabSuite/Core/Ui/Poll/View/Results",["require","exports","tslib","../../../Ajax","../Poll"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Results=void 0,i=n.__importStar(i);class r{pollManager;button;constructor(e,t){this.pollManager=e,this.button=t,this.button.addEventListener("click",(async e=>{e&&e.preventDefault(),this.button.disabled=!0,this.pollManager.hasView(o.PollViews.results)?this.pollManager.displayView(o.PollViews.results):await this.loadView(),this.button.disabled=!1}))}async loadView(){const e=i.dboAction("getResultTemplate","wcf\\data\\poll\\PollAction");e.objectIds([this.pollManager.pollId]);const t=await e.dispatch();this.pollManager.addView(o.PollViews.results,t.template),this.pollManager.displayView(o.PollViews.results)}checkVisibility(e){e===o.PollViews.results?this.button.hidden=!0:this.button.hidden=!1}}t.Results=r,t.default=r})),define("WoltLabSuite/Core/Ui/Poll/View/Vote",["require","exports","tslib","../../../Ajax","../Poll"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vote=void 0,i=n.__importStar(i);class r{pollManager;button;constructor(e){this.pollManager=e;const t=this.pollManager.getElement().querySelector(".showVoteFormButton");if(!t)throw new Error(`Could not find button with selector ".showVoteFormButton" for poll "${this.pollManager.pollId}"`);this.button=t,this.button.addEventListener("click",(async e=>{e&&e.preventDefault(),this.button.disabled=!0,this.pollManager.hasView(o.PollViews.vote)?this.pollManager.displayView(o.PollViews.vote):await this.loadView(),this.button.disabled=!1}))}async loadView(){const e=i.dboAction("getVoteTemplate","wcf\\data\\poll\\PollAction");e.objectIds([this.pollManager.pollId]);const t=await e.dispatch();this.pollManager.addView(o.PollViews.vote,t.template),this.pollManager.displayView(o.PollViews.vote)}checkVisibility(e){e!==o.PollViews.vote&&this.pollManager.canVote?this.button.hidden=!1:this.button.hidden=!0}}t.Vote=r,t.default=r})),define("WoltLabSuite/Core/Ui/Poll/Vote",["require","exports","tslib","./Poll","../../Ajax"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vote=void 0,o=n.__importStar(o);class r{pollManager;button;inputs;constructor(e){this.pollManager=e;const t=this.pollManager.getElement().querySelector(".votePollButton");if(!t)throw new Error(`Could not find vote button for poll "${this.pollManager.pollId}".`);this.button=t,this.button.addEventListener("click",(()=>this.submit())),this.initSelects()}initSelects(){if(this.pollManager.hasView(i.PollViews.vote)){const e=this.pollManager.getView(i.PollViews.vote);this.inputs=Array.from(e.querySelectorAll("input")),this.inputs.forEach((e=>{e.addEventListener("change",(()=>this.checkInputs()))})),this.checkInputs()}}checkInputs(){let e=0;this.inputs.forEach((t=>{t.checked&&e++,this.pollManager.maxVotes>1&&(t.disabled=!1)})),0===e?this.button.disabled=!0:(e>=this.pollManager.maxVotes&&this.pollManager.maxVotes>1&&this.inputs.forEach((e=>{e.checked||(e.disabled=!0)})),this.button.disabled=!1)}getSelectedOptions(){return this.inputs.filter((e=>e.checked)).map((e=>parseInt(e.value,10)))}async submit(){this.button.disabled=!0;const e=this.getSelectedOptions(),t=o.dboAction("vote","wcf\\data\\poll\\PollAction");t.objectIds([this.pollManager.pollId]),t.payload({optionIDs:e});const n=await t.dispatch();this.pollManager.canVote=!!n.changeableVote,this.pollManager.canViewResults=!0,this.pollManager.addView(i.PollViews.results,n.template),this.pollManager.displayView(i.PollViews.results),this.pollManager.changeTotalVotes(n.totalVotes,n.totalVotesTooltip),this.button.disabled=!1}checkVisibility(e){this.button.hidden=e!==i.PollViews.vote}}t.Vote=r,t.default=r})),define("WoltLabSuite/Core/Ui/Poll/Poll",["require","exports","tslib","../../Dom/Change/Listener","../../Dom/Util","../../StringUtil","./View/Participants","./View/Results","./View/Vote","./Vote"],(function(e,t,n,i,o,r,a,s,l,c){"use strict";function d(){document.querySelectorAll(".pollContainer").forEach((e=>{if(!e.dataset.pollId)throw new Error("Invalid poll element given. Missing pollID.");const t=parseInt(e.dataset.pollId,10);h.has(t)||h.set(t,new m(t))}))}function u(){i.default.add("WoltLabSuite/Core/Ui/Poll/Manager/Poll",(()=>{d()})),d()}var p;Object.defineProperty(t,"__esModule",{value:!0}),t.setupAll=t.Poll=t.PollViews=void 0,i=n.__importDefault(i),o=n.__importDefault(o),a=n.__importDefault(a),s=n.__importDefault(s),l=n.__importDefault(l),c=n.__importDefault(c),function(e){e.vote="vote",e.results="results"}(p||(t.PollViews=p={}));class m{pollId;element;voteView=void 0;resultsView=void 0;participants=void 0;voteHandler=void 0;views=new Map;constructor(e){const t=document.getElementById(`poll${e}`);if(null===t)throw new Error(`Could not find poll with id "${e}".`);this.element=t,this.pollId=e,this.getInnerContainer().querySelectorAll("div").forEach((e=>{e.dataset.key&&this.views.set(e.dataset.key,e)}));const n=this.element.querySelector(".showResultsButton");this.canViewResults&&null!==n&&(this.resultsView=new s.default(this,n)),this.canVote&&(this.voteView=new l.default(this),this.voteHandler=new c.default(this)),this.canViewParticipants()&&(this.participants=new a.default(this))}getElement(){return this.element}hasView(e){return this.views.has(e)}getView(e){if(!this.hasView(e))throw new Error(`The view "${e}" is unknown for poll "${this.pollId}".`);return this.views.get(e)}displayView(e){if(!this.hasView(e))throw new Error(`The view "${e}" is unknown for poll "${this.pollId}".`);this.views.forEach((e=>{e.hidden=!0})),this.views.get(e).hidden=!1,this.voteView?.checkVisibility(e),this.resultsView?.checkVisibility(e),this.voteHandler?.checkVisibility(e),this.canViewParticipants()&&(e===p.results?(this.participants||(this.participants=new a.default(this)),this.participants.showButton()):this.participants?.hideButton())}addView(e,t){const n=document.createElement("div");n.dataset.key=e,n.hidden=!0,o.default.setInnerHtml(n,t),this.getInnerContainer().append(n),this.views.has(e)&&this.views.get(e).remove(),this.views.set(e,n),e===p.vote&&this.voteHandler.initSelects()}canViewParticipants(){return this.canViewResults&&this.isPublic}getInnerContainer(){const e=this.element.querySelector(".pollInnerContainer");if(!e)throw new Error(`Could not find inner container for poll "${this.pollId}"`);return e}changeTotalVotes(e,t){const n=this.getElement().querySelector(".pollTotalVotesBadge");if(!n)throw new Error("Could not find total votes badge.");n.textContent=(0,r.formatNumeric)(e),n.dataset.tooltip=t}get isPublic(){return"true"===this.element.dataset.isPublic}get maxVotes(){return parseInt(this.element.dataset.maxVotes,10)}get question(){return this.element.dataset.question}get canVote(){return"true"===this.element.dataset.canVote}set canVote(e){this.element.dataset.canVote=e?"true":"false"}get canViewResults(){return"true"===this.element.dataset.canViewResult}set canViewResults(e){this.element.dataset.canViewResult=e?"true":"false"}}t.Poll=m;const h=new Map;t.setupAll=u,t.default=u})),define("WoltLabSuite/Core/Ui/Reaction/CountButtons",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Change/Listener","../../Dom/Util","../../Event/Handler","../../StringUtil","../Dialog"],(function(e,t,n,i,o,r,a,s,l,c){"use strict";i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importStar(s),l=n.__importStar(l),c=n.__importDefault(c);const d=new Map(Object.entries(window.REACTION_TYPES));return class{_containers=new Map;_currentObjectId=0;_objects=new Map;_objectType;_options;constructor(e,t){if(!t.containerSelector)throw new Error("[WoltLabSuite/Core/Ui/Reaction/CountButtons] Expected a non-empty string for option 'containerSelector'.");this._objectType=e,this._options=o.extend({summaryListSelector:".reactionSummaryList",containerSelector:"",isSingleItem:!1,parameters:{data:{}}},t),this.initContainers(),r.default.add(`WoltLabSuite/Core/Ui/Reaction/CountButtons-${e}`,(()=>this.initContainers()))}initContainers(){let e=!1;document.querySelectorAll(this._options.containerSelector).forEach((t=>{const n=a.default.identify(t);if(this._containers.has(n))return;const i=~~t.dataset.objectId,o={reactButton:null,summary:null,objectId:i,element:t};this._containers.set(n,o),this._initReactionCountButtons(t,o);const r=this._objects.get(i)||[];r.push(o),this._objects.set(i,r),e=!0})),e&&r.default.trigger()}updateCountButtons(e,t){let n=!1;this._objects.get(e).forEach((e=>{let i;if(i=this._options.isSingleItem?document.querySelector(this._options.summaryListSelector):e.element.querySelector(this._options.summaryListSelector),null===i)return;const o=new Map(Object.entries(t)),r=new Map;i.querySelectorAll(".reactCountButton").forEach((e=>{const t=e.dataset.reactionTypeId;o.has(t)?r.set(t,e):e.remove()})),o.forEach(((e,t)=>{if(r.has(t))r.get(t).querySelector(".reactionCount").innerHTML=l.shortUnit(e);else if(d.has(t)){const o=document.createElement("span");o.className="reactCountButton",o.innerHTML=d.get(t).renderedIcon,o.dataset.reactionTypeId=t;const r=document.createElement("span");r.className="reactionCount",r.innerHTML=l.shortUnit(e),o.appendChild(r),i.appendChild(o),n=!0}})),i.childElementCount>0?a.default.show(i):a.default.hide(i)})),n&&r.default.trigger()}_initReactionCountButtons(e,t){let n;n=this._options.isSingleItem?document.querySelector(this._options.summaryListSelector):e.querySelector(this._options.summaryListSelector),null!==n&&n.addEventListener("click",(e=>this._showReactionOverlay(t.objectId,e)))}_showReactionOverlay(e,t){t.preventDefault(),this._currentObjectId=e,this._showOverlay()}_showOverlay(){this._options.parameters.data.containerID=`${this._objectType}-${this._currentObjectId}`,this._options.parameters.data.objectID=this._currentObjectId,this._options.parameters.data.objectType=this._objectType,i.api(this,{parameters:this._options.parameters})}_ajaxSuccess(e){s.fire("com.woltlab.wcf.ReactionCountButtons","openDialog",e),c.default.open(this,e.returnValues.template),c.default.setTitle("userReactionOverlay-"+this._objectType,e.returnValues.title)}_ajaxSetup(){return{data:{actionName:"getReactionDetails",className:"\\wcf\\data\\reaction\\ReactionAction"}}}_dialogSetup(){return{id:`userReactionOverlay-${this._objectType}`,options:{title:""},source:null}}}})),define("WoltLabSuite/Core/Ui/Reaction/SummaryDetails",["require","exports","../../Ajax","../../Component/Dialog","../../Helper/Selector"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,t.setup=function(){(0,o.wheneverFirstSeen)("woltlab-core-reaction-summary",(e=>{e.addEventListener("showDetails",(()=>{!async function(e,t){const o=await(0,n.dboAction)("getReactionDetails","wcf\\data\\reaction\\ReactionAction").payload({data:{objectID:e,objectType:t}}).dispatch();(0,i.dialogFactory)().fromHtml(o.template).withoutControls().show(o.title)}(e.objectId,e.objectType)}))}))}})),define("WoltLabSuite/Core/Ui/Search/Page",["require","exports","tslib","../../Core","../../Dom/Util","../Dropdown/Simple","../Screen","./Input"],(function(e,t,n,i,o,r,a,s){"use strict";function l(e){e.preventDefault();const t=e.currentTarget,n=t.dataset.objectType,o=t.dataset.extendedLink;o&&(document.querySelector(".pageHeaderSearchExtendedLink").href=o),d.clear();try{const e=JSON.parse(t.dataset.parameters||"");i.isPlainObject(e)&&Object.keys(e).forEach((t=>{d.set(t,e[t])}))}catch(e){}n&&"everywhere"!==n&&d.set("type",n),document.getElementById("pageHeaderSearchInputContainer").querySelector(".pageHeaderSearchType > .button > .pageHeaderSearchTypeLabel").textContent=t.textContent}function c(e,t){const n=new URL(e.action);n.search+=""!==n.search?"&":"?",n.search+=new URLSearchParams([["q",t.value.trim()],...Array.from(d)]).toString(),window.location.href=n.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importStar(a),s=n.__importDefault(s);const d=new Map;t.init=function(e){const t=document.getElementById("pageHeaderSearchInput"),n=t.form;new s.default(t,{ajax:{className:"wcf\\data\\search\\keyword\\SearchKeywordAction"},autoFocus:!1,callbackDropdownInit(e){if(e.classList.add("dropdownMenuPageSearch"),a.is("screen-lg")){e.dataset.dropdownAlignmentHorizontal="right";const n=t.clientWidth;e.style.setProperty("min-width",`${n}px`,"");const i=t.parentElement,r=o.default.offset(i).left+i.clientWidth-(o.default.offset(t).left+n),a=o.default.styleAsInt(window.getComputedStyle(i),"padding-bottom");e.style.setProperty("transform",`translateX(-${Math.ceil(r)}px) translateY(-${a}px)`,"")}},callbackSelect:()=>(setTimeout((()=>{c(n,t)}),1),!0),suppressErrors:!0});const i=document.querySelector(".pageHeaderSearchType"),d=r.default.getDropdownMenu(o.default.identify(i));d.querySelectorAll("a[data-object-type]").forEach((e=>{e.addEventListener("click",l)})),d.querySelector('a[data-object-type="'+e+'"]').click(),n.addEventListener("submit",(e=>{e.preventDefault(),c(n,t)}))}})),define("WoltLabSuite/Core/Ui/Smiley/Insert",["require","exports","../../Component/Ckeditor"],(function(e,t,n){"use strict";return class{container;editorId;constructor(e){this.editorId=e;let t=document.getElementById("smilies-"+this.editorId);if(!t&&(t=document.getElementById(this.editorId+"SmiliesTabContainer"),!t))throw new Error("Unable to find the message tab menu container containing the smilies.");this.container=t,this.container.addEventListener("keydown",(e=>this.keydown(e))),this.container.addEventListener("mousedown",(e=>this.mousedown(e)))}keydown(e){const t=document.activeElement;if(t.classList.contains("jsSmiley"))if(["ArrowLeft","ArrowRight","End","Home"].includes(e.key)){e.preventDefault();const n=e.currentTarget,i=Array.from(n.querySelectorAll(".jsSmiley"));"ArrowLeft"===e.key&&i.reverse();let o=i.indexOf(t);"Home"===e.key?o=0:"End"===e.key?o=i.length-1:(o+=1,o===i.length&&(o=0)),i[o].focus()}else if("Enter"===e.key||"Space"===e.key){e.preventDefault();const n=t.querySelector("img");this.insert(n)}}mousedown(e){const t=e.target.closest("li");if(t&&this.container.contains(t)){e.preventDefault();const n=t.querySelector("img");n&&this.insert(n)}}insert(e){const t=(0,n.getCkeditorById)(this.editorId);if(void 0===t)throw new Error(`Unable to find the CKEditor instance for '${this.editorId}'.`);const i=document.createElement("img");i.classList.add("smiley"),i.src=e.src,i.alt=e.alt,i.height=e.height,i.width=e.width,e.srcset&&(i.srcset=e.srcset),t.insertHtml(i.outerHTML)}}})),define("WoltLabSuite/Core/Ui/Sortable/List",["require","exports","tslib","../../Core","../Screen"],(function(e,t,n,i,o){"use strict";return i=n.__importStar(i),o=n.__importStar(o),class{_options;constructor(e){this._options=i.extend({containerId:"",className:"",offset:0,options:{},isSimpleSorting:!1,additionalParameters:{}},e),o.on("screen-sm-md",{match:()=>this._enable(!0),unmatch:()=>this._disable(),setup:()=>this._enable(!0)}),o.on("screen-lg",{match:()=>this._enable(!1),unmatch:()=>this._disable(),setup:()=>this._enable(!1)})}_enable(e){const t=this._options.options;e&&(t.handle=".sortableNodeHandle"),new window.WCF.Sortable.List(this._options.containerId,this._options.className,this._options.offset,t,this._options.isSimpleSorting,this._options.additionalParameters)}_disable(){window.jQuery(`#${this._options.containerId} .sortableList`)[this._options.isSimpleSorting?"sortable":"nestedSortable"]("destroy")}}})),define("WoltLabSuite/Core/Ui/Style/FontAwesome",["require","exports","tslib","../../Language","../Dialog","../ItemList/Filter"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=t.setup=void 0,i=n.__importStar(i),o=n.__importDefault(o),r=n.__importDefault(r);class a{callback=void 0;iconList=void 0;itemListFilter=void 0;open(e){this.callback=e,o.default.open(this)}click(e){e.preventDefault();const t=e.target.closest("li").querySelector("fa-icon");o.default.close(this),this.callback(t.name,t.solid)}_dialogSetup(){return{id:"fontAwesomeSelection",options:{onSetup:()=>{this.iconList=document.getElementById("fontAwesomeIcons");const e=[];window.getFontAwesome6Metadata().forEach((([,t],n)=>{t&&e.push(`<li><fa-icon size="48" name="${n}" solid></fa-icon><small>${n}</small></li>`),e.push(`<li><fa-icon size="48" name="${n}"></fa-icon><small>${n}</small></li>`)})),this.iconList.innerHTML=e.join(""),this.iconList.addEventListener("click",(e=>this.click(e))),this.itemListFilter=new r.default("fontAwesomeIcons",{callbackPrepareItem:e=>{const t=e.querySelector("small"),n=t.textContent.trim();return{item:e,span:t,text:n}},enableVisibilityFilter:!1,filterPosition:"top"})},onShow:()=>{this.itemListFilter.reset()},title:i.get("wcf.global.fontAwesome.selectIcon")},source:'<ul class="fontAwesomeIcons" id="fontAwesomeIcons"></ul>'}}}let s;t.setup=function(){s||(s=new a)},t.open=function(e){if(!s)throw new Error("Missing icon data, please include the template before calling this method using `{include file='fontAwesomeJavaScript'}`.");s.open(e)}})),define("WoltLabSuite/Core/Ui/Toggle/Input",["require","exports","tslib","../../Dom/Util"],(function(e,t,n,i){"use strict";return i=n.__importDefault(i),class{element;hide;show;constructor(e,t){const n=document.querySelector(e);if(null===n)throw new Error("Unable to find element by selector '"+e+"'.");const i="INPUT"===n.nodeName?n.type:"";if("checkbox"!==i&&"radio"!==i)throw new Error("Illegal element, expected input[type='checkbox'] or input[type='radio'].");this.element=n,this.hide=this.getElements("hide",Array.isArray(t.hide)?t.hide:[]),this.show=this.getElements("show",Array.isArray(t.show)?t.show:[]),this.element.addEventListener("change",(e=>this.change(e))),this.updateVisibility(this.show,this.element.checked),this.updateVisibility(this.hide,!this.element.checked)}getElements(e,t){const n=[];return t.forEach((t=>{let i=null;if("string"==typeof t){if(i=document.querySelector(t),null===i)throw new Error(`Unable to find an element with the selector '${t}'.`)}else{if(!(t instanceof HTMLElement))throw new TypeError(`The array '${e}' may only contain string selectors or DOM elements.`);i=t}n.push(i)})),n}change(e){const t=e.currentTarget.checked;this.updateVisibility(this.show,t),this.updateVisibility(this.hide,!t)}updateVisibility(e,t){e.forEach((e=>{i.default[t?"show":"hide"](e)}))}}})),define("WoltLabSuite/Core/Ui/User/List",["require","exports","tslib","../../Ajax","../../Core","../../Dom/Util","../Dialog","../Pagination"],(function(e,t,n,i,o,r,a,s){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importDefault(r),a=n.__importDefault(a),s=n.__importDefault(s),class{cache=new Map;options;pageCount=0;pageNo=1;constructor(e){this.options=o.extend({className:"",dialogTitle:"",parameters:{}},e)}open(){this.pageNo=1,this.showPage()}showPage(e){if("number"==typeof e&&(this.pageNo=+e),0!==this.pageCount&&(this.pageNo<1||this.pageNo>this.pageCount))throw new RangeError(`pageNo must be between 1 and ${this.pageCount} (${this.pageNo} given).`);if(this.cache.has(this.pageNo)){const e=a.default.open(this,this.cache.get(this.pageNo));if(this.pageCount>1){const t=e.content.querySelector(".jsPagination");null!==t&&new s.default(t,{activePage:this.pageNo,maxPage:this.pageCount,callbackSwitch:this.showPage.bind(this)});const n=e.content.parentElement;n.scrollTop>0&&(n.scrollTop=0)}}else this.options.parameters.pageNo=this.pageNo,i.api(this,{parameters:this.options.parameters})}_ajaxSuccess(e){void 0!==e.returnValues.pageCount&&(this.pageCount=~~e.returnValues.pageCount),this.cache.set(this.pageNo,e.returnValues.template),this.showPage()}_ajaxSetup(){return{data:{actionName:"getGroupedUserList",className:this.options.className,interfaceName:"wcf\\data\\IGroupedUserListAction"}}}_dialogSetup(){return{id:r.default.getUniqueId(),options:{title:this.options.dialogTitle},source:null}}}})),define("WoltLabSuite/Core/Ui/User/ObjectWatch",["require","exports","tslib","../../Ajax","../Notification","../../Language","../../Event/Handler"],(function(e,t,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a);const s=new Map;t.setup=function(){document.querySelectorAll(".userObjectWatchDropdown").forEach((e=>{if(!e.dataset.objectId)throw new Error("Missing objectId for '.userObjectWatchDropdown' element.");const t=parseInt(e.dataset.objectId,10);s.has(t)||s.set(t,new Set),s.get(t).add(e),e.querySelectorAll(".userObjectWatchSelect").forEach((e=>{if(!e.dataset.subscribe)throw new Error("Missing 'data-subscribe' attribute for '.userObjectWatchSelect' element.");e.addEventListener("click",(t=>{t.preventDefault(),async function(e){const t=e.closest(".userObjectWatchDropdown"),n=parseInt(e.dataset.subscribe,10),l=parseInt(t.dataset.objectId,10),c=t.dataset.objectType;await i.dboAction("saveSubscription","wcf\\data\\user\\object\\watch\\UserObjectWatchAction").payload({enableNotification:1,objectID:l,objectType:c,subscribe:n}).dispatch(),s.has(l)&&s.get(l).forEach((e=>{e.querySelectorAll(".userObjectWatchSelect").forEach((e=>{parseInt(e.dataset.subscribe,10)===n?e.classList.add("active"):e.classList.remove("active")}))})),document.querySelectorAll(`.userObjectWatchDropdownToggle[data-object-type="${c}"][data-object-id="${l}"]`).forEach((e=>{const t=e.querySelector("fa-icon"),i=e.querySelector("span:not(.icon)");n?(e.classList.add("active"),t.setIcon("bookmark",!0),i.textContent=r.get("wcf.user.objectWatch.button.subscribed")):(e.classList.remove("active"),t.setIcon("bookmark"),i.textContent=r.get("wcf.user.objectWatch.button.subscribe")),e.dataset.isSubscribed=n.toString()})),a.fire("com.woltlab.wcf.objectWatch","updatedSubscription"),o.show()}(e)}))}))}))}})),define("WoltLabSuite/Core/Ui/User/PasswordStrength",["require","exports","tslib","../../Language","../../Dom/Util"],(function(e,t,n,i,o){"use strict";function r(e){return[].concat(e,e.split(/\W+/))}i=n.__importStar(i),o=n.__importDefault(o);const a=[],s=document.querySelector('meta[property="og:site_name"]')?.getAttribute("content");return s&&a.push(s),class{input;zxcvbn;relatedInputs=[];staticDictionary=[];feedbacker;wrapper;score=document.createElement("span");verdictResult=document.createElement("input");constructor(t,o){this.input=t,new Promise(((t,n)=>{e(["zxcvbn"],t,n)})).then(n.__importStar).then((({default:e})=>{this.zxcvbn=e,o.relatedInputs&&(this.relatedInputs=o.relatedInputs),o.staticDictionary&&(this.staticDictionary=o.staticDictionary),this.feedbacker=function(e){const t={};return Object.entries(e.default_phrases).forEach((([e,n])=>{t[e]={},Object.entries(n).forEach((([n,o])=>{const r=`wcf.user.password.zxcvbn.${e}.${n}`,a=i.get(r);t[e][n]=a!==r?a:o}))})),new e(t)}(e.Feedback);const t=this.input.closest(".inputAddon");if(null===t)throw new Error("Expected a parent with `.inputAddon`.");this.wrapper=t,this.wrapper.classList.add("inputAddonPasswordStrength");const n=document.createElement("div");n.className="passwordStrengthRating";const r=document.createElement("small");r.textContent=i.get("wcf.user.password.strength"),n.appendChild(r),this.score.className="passwordStrengthScore",this.score.dataset.score="-1",n.appendChild(this.score),this.wrapper.appendChild(n),this.verdictResult.type="hidden",this.verdictResult.name=`${this.input.name}_passwordStrengthVerdict`,this.wrapper.parentNode.insertBefore(this.verdictResult,this.wrapper),this.input.addEventListener("input",(e=>this.evaluate(e))),this.relatedInputs.forEach((e=>e.addEventListener("input",(e=>this.evaluate(e))))),""!==this.input.value.trim()&&this.evaluate()}))}evaluate(e){const t=(n=a.concat(this.staticDictionary,this.relatedInputs.map((e=>e.value.trim()))),i=r,n.map(i).reduce(((e,t)=>e.concat(t)),[])).filter((e=>e.length>0));var n,i;const s=this.input.value.trim(),l=this.zxcvbn(s.substr(0,100),t);l.feedback=this.feedbacker.from_result(l),this.score.dataset.score=0===s.length?"-1":l.score.toString(),void 0!==e&&o.default.innerError(this.wrapper,l.feedback.warning),this.verdictResult.value=JSON.stringify(l)}}})),define("WoltLabSuite/Core/Component/Comment/Response/woltlab-core-comment-response",["require","exports","tslib","../../../Ajax","../../../Dom/Util","../../../Ui/Dropdown/Simple","../../../Ui/Notification","../../Confirmation","../../../Event/Handler","../../../Ui/Scroll","../../../Language","../../Ckeditor"],(function(e,t,n,i,o,r,a,s,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WoltlabCoreCommentResponseElement=void 0,o=n.__importDefault(o),r=n.__importDefault(r),a=n.__importStar(a),l=n.__importStar(l),c=n.__importStar(c);class p extends HTMLParsedElement{parsedCallback(){if(this.menu){const e=this.menu.querySelector(".commentResponse__option--enable");e?.addEventListener("click",(e=>{e.preventDefault(),this.#Pe()}));const t=this.menu.querySelector(".commentResponse__option--delete");t?.addEventListener("click",(e=>{e.preventDefault(),this.#je()}));const n=this.menu.querySelector(".commentResponse__option--edit");n?.addEventListener("click",(e=>{e.preventDefault(),this.#Oe()}))}}async#Pe(){await(0,i.dboAction)("enable","wcf\\data\\comment\\response\\CommentResponseAction").objectIds([this.responseId]).dispatch(),this.querySelector(".commentResponse__status--disabled").hidden=!0,this.menu&&(this.menu.querySelector(".commentResponse__option--enable").hidden=!0)}async#je(){await(0,s.confirmationFactory)().delete()&&(await(0,i.dboAction)("delete","wcf\\data\\comment\\response\\CommentResponseAction").objectIds([this.responseId]).dispatch(),a.show(),this.dispatchEvent(new CustomEvent("delete")))}async#Oe(){this.menu.querySelector(".commentResponse__option--edit").hidden=!0;const{template:e}=await(0,i.dboAction)("beginEdit","wcf\\data\\comment\\response\\CommentResponseAction").objectIds([this.responseId]).dispatch();this.#qe(e)}#qe(e){this.querySelector(".htmlContent").hidden=!0,o.default.insertHtml(e,this.#G,"append"),this.querySelector('button[data-type="save"]').addEventListener("click",(()=>{this.#Ne()})),this.querySelector('button[data-type="cancel"]').addEventListener("click",(()=>{this.#Be()})),l.add("com.woltlab.wcf.ckeditor5",`submitEditor_${this.#Fe}`,(e=>{e.cancel=!0,this.#Ne()})),window.setTimeout((()=>{c.element(this)}),250)}async#Ne(){const e={data:{message:(0,u.getCkeditorById)(this.#Fe).getHtml()}};if(!this.#Ue(e))return;let t;l.fire("com.woltlab.wcf.ckeditor5",`submit_${this.#Fe}`,e),this.#r();try{t=await(0,i.dboAction)("save","wcf\\data\\comment\\response\\CommentResponseAction").objectIds([this.responseId]).payload(e).dispatch()}catch(e){return await(0,i.handleValidationErrors)(e,(({errorType:e})=>(o.default.innerError(document.getElementById(this.#Fe),e),!0))),void this.#Re()}o.default.setInnerHtml(this.querySelector(".htmlContent"),t.message),this.#Re(),this.#Be(),a.show()}#r(){let e=this.querySelector(".commentResponse__loading");e||(e=document.createElement("div"),e.classList.add("commentResponse__loading"),e.innerHTML='<woltlab-core-loading-indicator size="96" hide-text></woltlab-core-loading-indicator>',this.querySelector(".commentResponse__message").append(e)),this.#G.hidden=!0,e.hidden=!1}#Re(){this.#G.hidden=!1;const e=this.querySelector(".commentResponse__loading");e&&(e.hidden=!0)}#Ue(e){this.querySelectorAll(".innerError").forEach((e=>e.remove()));const t=(0,u.getCkeditorById)(this.#Fe);if(""===t.getHtml())return o.default.innerError(t.element,(0,d.getPhrase)("wcf.global.form.error.empty")),!1;const n={api:this,parameters:e,valid:!0};return l.fire("com.woltlab.wcf.ckeditor5",`validate_${this.#Fe}`,n),n.valid}#Be(){(0,u.getCkeditorById)(this.#Fe).destroy(),this.#G.remove(),this.menu.querySelector(".commentResponse__option--edit").hidden=!1,this.querySelector(".htmlContent").hidden=!1}get#G(){let e=this.querySelector(".commentResponse__editor");return e||(e=document.createElement("div"),e.classList.add("commentResponse__editor"),this.querySelector(".commentResponse__message").append(e)),e}get responseId(){return parseInt(this.getAttribute("response-id"))}get menu(){let e=r.default.getDropdownMenu(`commentResponseOptions${this.responseId}`);return void 0===e&&(e=this.querySelector(".commentResponse__menu .dropdownMenu")||void 0),e}get#Fe(){return`commentResponseEditor${this.responseId}`}}t.WoltlabCoreCommentResponseElement=p,window.customElements.define("woltlab-core-comment-response",p),t.default=p})),define("WoltLabSuite/Core/Controller/User/Notification/Settings",["require","exports","tslib","../../../Language","../../../Ui/Dropdown/Reusable"],(function(e,t,n,i,o){"use strict";function r(){return document.getElementById(`settings_${s}_mailNotificationType`)}let a;Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0,i=n.__importStar(i),o=n.__importStar(o);let s=0;t.init=function(){document.querySelectorAll(".jsCheckboxNotificationSettingsState").forEach((e=>{e.addEventListener("change",(e=>function(e){const t=e.currentTarget,n=~~t.dataset.objectId,i=document.querySelector(`.notificationSettingsEmailType[data-object-id="${n}"]`);null!==i&&(t.checked?i.classList.remove("disabled"):i.classList.add("disabled"))}(e)))})),document.querySelectorAll(".notificationSettingsEmailType").forEach((e=>{e.addEventListener("click",(e=>function(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;var n,l;s=~~t.dataset.objectId,a||(a=document.createElement("ul"),a.className="dropdownMenu",["instant","daily","divider","none"].forEach((e=>{const t=document.createElement("li");if("divider"===e)t.className="dropdownDivider";else{const n=document.createElement("a");n.href="#",n.textContent=i.get(`wcf.user.notification.mailNotificationType.${e}`),t.appendChild(n),t.dataset.value=e,t.addEventListener("click",(e=>function(e){e.preventDefault();const t=e.currentTarget.dataset.value;r().value=t;const n=document.querySelector(`.notificationSettingsEmailType[data-object-id="${s}"]`);n.title=i.get(`wcf.user.notification.mailNotificationType.${t}`);const o=n.querySelector(".jsIconNotificationSettingsEmailType fa-icon");switch(t){case"daily":o.setIcon("clock");break;case"instant":o.setIcon("bolt");break;case"none":o.setIcon("xmark")}s=0}(e)))}a.appendChild(t)})),o.init("UiNotificationSettingsEmailType",a)),n=r().value,a.querySelectorAll("li").forEach((e=>{e.dataset.value===n?e.classList.add("active"):e.classList.remove("active")})),l=t,o.toggleDropdown("UiNotificationSettingsEmailType",l)}(e)))}))}})),define("WoltLabSuite/Core/Form/Builder/Container/SuffixFormField",["require","exports","tslib","../../../Ui/Dropdown/Simple","../../../Event/Handler"],(function(e,t,n,i,o){"use strict";return i=n.__importDefault(i),o=n.__importStar(o),class{_formId;_suffixField;_suffixDropdownMenu;_suffixDropdownToggle;constructor(e,t){this._formId=e,this._suffixField=document.getElementById(t),this._suffixDropdownMenu=i.default.getDropdownMenu(t+"_dropdown"),this._suffixDropdownToggle=i.default.getDropdown(t+"_dropdown").getElementsByClassName("dropdownToggle")[0],Array.from(this._suffixDropdownMenu.children).forEach((e=>{e.addEventListener("click",(e=>this._changeSuffixSelection(e)))})),o.add("WoltLabSuite/Core/Form/Builder/Manager","afterUnregisterForm",(e=>this._destroyDropdown(e)))}_changeSuffixSelection(e){const t=e.currentTarget;t.classList.contains("disabled")||(Array.from(this._suffixDropdownMenu.children).forEach((e=>{e===t?e.classList.add("active"):e.classList.remove("active")})),this._suffixField.value=t.dataset.value,this._suffixDropdownToggle.innerHTML=t.dataset.label+' <fa-icon name="caret-down" solid></fa-icon>')}_destroyDropdown(e){e.formId===this._formId&&i.default.destroy(this._suffixDropdownMenu.id)}}})),define("WoltLabSuite/Core/Form/Builder/Field/Acl",["require","exports","tslib","./Field"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{_aclList;_getData(){return{[this._fieldId]:this._aclList.getData()}}_readField(){}setAclList(e){return this._aclList=e,this}}return o})),define("WoltLabSuite/Core/Form/Builder/Field/Button",["require","exports","tslib","./Field"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,i=n.__importDefault(i);class o extends i.default{_getData(){const e={};return"1"===this._field.dataset.isClicked&&(e[this._fieldId]=this._field.value),e}}t.Button=o,t.default=o})),define("WoltLabSuite/Core/Form/Builder/Field/Captcha",["require","exports","tslib","./Field","../../../Controller/Captcha"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importDefault(o);class r extends i.default{_getData(){return o.default.has(this._fieldId)?o.default.getData(this._fieldId):{}}_readField(){}destroy(){o.default.has(this._fieldId)&&o.default.delete(this._fieldId)}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Checkboxes",["require","exports","tslib","./Field","WoltLabSuite/Core/Dom/Util"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i);class r extends i.default{_fields;constructor(e){super(e),this._fields=Array.from(document.querySelectorAll(`input[name="${(0,o.escapeAttributeSelector)(this._fieldId)}[]"]`))}_getData(){const e=this._fields.map((e=>e.checked?e.value:null)).filter((e=>null!==e));return{[this._fieldId]:e}}_readField(){}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Checked",["require","exports","tslib","./Field"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{_getData(){return{[this._fieldId]:this._field.checked?"1":"0"}}}return o})),define("WoltLabSuite/Core/Form/Builder/Field/CheckedVoid",["require","exports","tslib","./Field"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckedVoid=void 0,i=n.__importDefault(i);class o extends i.default{_getData(){return this._field.checked?{[this._fieldId]:1}:{}}}t.CheckedVoid=o,t.default=o})),define("WoltLabSuite/Core/Form/Builder/Field/Ckeditor",["require","exports","tslib","./Field","WoltLabSuite/Core/Component/Ckeditor/Event","WoltLabSuite/Core/Component/Ckeditor"],(function(e,t,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ckeditor=void 0,i=n.__importDefault(i);class a extends i.default{_getData(){const e=(0,r.getCkeditorById)(this._fieldId);return{[this._fieldId]:e.getHtml()}}destroy(){(0,o.dispatchToCkeditor)(this._field).destroy()}}t.Ckeditor=a,t.default=a})),define("WoltLabSuite/Core/Form/Builder/Field/Date",["require","exports","tslib","./Field","../../../Date/Picker"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importDefault(o);class r extends i.default{_getData(){return{[this._fieldId]:o.default.getValue(this._field)}}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/ItemList",["require","exports","tslib","./Field","../../../Ui/ItemList/Static"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_getData(){const e=[];return o.getValues(this._fieldId).forEach((t=>{t.objectId?e[t.objectId]=t.value:e.push(t.value)})),{[this._fieldId]:e}}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/RadioButton",["require","exports","tslib","./Field","WoltLabSuite/Core/Dom/Util"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i);class r extends i.default{_fields;constructor(e){super(e),this._fields=Array.from(document.querySelectorAll(`input[name="${(0,o.escapeAttributeSelector)(this._fieldId)}"]`))}_getData(){const e={};return this._fields.some((t=>!!t.checked&&(e[this._fieldId]=t.value,!0))),e}_readField(){}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/SimpleAcl",["require","exports","tslib","./Field","WoltLabSuite/Core/Dom/Util"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i);class r extends i.default{_getData(){const e=Array.from(document.querySelectorAll(`input[name="${(0,o.escapeAttributeSelector)(this._fieldId)}[group][]"]`)).map((e=>e.value)),t=Array.from(document.querySelectorAll(`input[name="${(0,o.escapeAttributeSelector)(this._fieldId)}[user][]"]`)).map((e=>e.value));return{[this._fieldId]:{group:e,user:t}}}_readField(){}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Tag",["require","exports","tslib","./Field","../../../Ui/ItemList"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_getData(){const e=o.getValues(this._fieldId).map((e=>e.value));return{[this._fieldId]:e}}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/User",["require","exports","tslib","./Field","../../../Ui/ItemList"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_getData(){const e=o.getValues(this._fieldId).map((e=>e.value));return{[this._fieldId]:e.join(",")}}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Value",["require","exports","tslib","./Field"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{_getData(){return{[this._fieldId]:this._field.value}}}return o})),define("WoltLabSuite/Core/Form/Builder/Field/ValueI18n",["require","exports","tslib","./Field","../../../Language/Input"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_getData(){const e={},t=o.getValues(this._fieldId);return t.size>1?(Object.prototype.hasOwnProperty.call(e,this._fieldId+"_i18n")||(e[this._fieldId+"_i18n"]={}),t.forEach(((t,n)=>{e[this._fieldId+"_i18n"][n]=t}))):e[this._fieldId]=t.get(0),e}destroy(){o.unregister(this._fieldId)}}return r})),define("WoltLabSuite/Core/Ui/Object/Action/Toogle",["require","exports","./Toggle"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,Object.defineProperty(t,"setup",{enumerable:!0,get:function(){return n.setup}})})),define("WoltLabSuite/Core/Ui/User/Menu/View",["require","exports","tslib","../../../Date/Util","../../../StringUtil","../../../Dom/Change/Listener","../../../Language","focus-trap","perfect-scrollbar","../../Screen"],(function(e,t,n,i,o,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserMenuView=void 0,r=n.__importStar(r),a=n.__importStar(a),l=n.__importDefault(l),c=n.__importStar(c);class d{element;usePerfectScrollbar=!1;focusTrap;markAllAsReadButton;perfectScrollbar=void 0;provider;constructor(e){this.provider=e,this.element=document.createElement("div"),this.buildElement(),this.markAllAsReadButton=this.buildButton({icon:'<fa-icon size="24" name="check" solid></fa-icon>',link:"#",name:"markAllAsRead",title:a.get("wcf.global.button.markAllAsRead")}),this.focusTrap=(0,s.createFocusTrap)(this.element,{allowOutsideClick:!0,escapeDeactivates:()=>(this.element.dispatchEvent(new Event("shouldClose")),!1),fallbackFocus:this.element}),c.on("screen-lg",{match:()=>{this.usePerfectScrollbar=!0,this.rebuildScrollbar()},unmatch:()=>{this.usePerfectScrollbar=!1,this.rebuildScrollbar()},setup:()=>{this.usePerfectScrollbar=!0,this.rebuildScrollbar()}})}getElement(){return this.element}async open(){const e=this.provider.isStale();if(e&&this.reset(),this.element.hidden=!1,this.focusTrap.activate(),e){const e=await this.provider.getData();this.setContent(e)}}close(){this.focusTrap.deactivate(),this.element.hidden=!0}getItems(){return Array.from(this.getContent().querySelectorAll(".userMenuItem"))}setContent(e){const t=this.getContent();if(this.markAllAsReadButton.remove(),0===e.length)t.innerHTML=`<span class="userMenuContentStatus">${this.provider.getEmptyViewMessage()}</span>`;else{let n=!1;const i=document.createDocumentFragment();e.forEach((e=>{e.isUnread&&(n=!0),i.append(this.createItem(e))})),t.innerHTML="",t.append(i),n&&this.element.querySelector(".userMenuButtons").prepend(this.markAllAsReadButton),r.trigger()}this.rebuildScrollbar()}rebuildScrollbar(){if(this.usePerfectScrollbar){const e=this.getContent();this.enablePerfectScrollbar(e)}else this.disablePerfectScrollbar()}enablePerfectScrollbar(e){this.perfectScrollbar?this.perfectScrollbar.update():this.perfectScrollbar=new l.default(e,{suppressScrollX:!0,wheelPropagation:!1})}disablePerfectScrollbar(){this.perfectScrollbar?.destroy(),this.perfectScrollbar=void 0}createItem(e){const t=document.createElement("div");t.classList.add("userMenuItem"),t.dataset.objectId=e.objectId.toString(),t.dataset.isUnread=e.isUnread?"true":"false";const n=(0,o.escapeHTML)(e.link);t.innerHTML=`\n      <div class="userMenuItemImage">${e.image}</div>\n      <div class="userMenuItemContent">\n        <a href="${n}" class="userMenuItemLink">${e.content}</a>\n      </div>\n      <div class="userMenuItemMeta"></div>\n      <div class="userMenuItemUnread">\n        <button type="button" class="userMenuItemMarkAsRead jsTooltip" title="${a.get("wcf.global.button.markAsRead")}">\n          <fa-icon size="24" name="check"></fa-icon>\n        </button>\n      </div>\n    `;const r=(0,i.getTimeElement)(new Date(1e3*e.time));if(t.querySelector(".userMenuItemMeta").append(r),t.querySelector(".userMenuItemMarkAsRead").addEventListener("click",(async()=>{await this.provider.markAsRead(e.objectId),this.markAsRead(t)})),e.usernames.length>0){const n=t.querySelector(".userMenuItemContent"),i=document.createElement("div");i.classList.add("userMenuItemUsernames"),i.textContent=e.usernames.join(", "),n.insertAdjacentElement("afterend",i),t.classList.add("userMenuItemWithUsernames")}return this.provider.hasPlainTitle()&&t.querySelector(".userMenuItemLink").classList.add("userMenuItemLinkPlain"),t}markAsRead(e){e.dataset.isUnread="false",0===this.getContent().querySelectorAll('.userMenuItem[data-is-unread="true"]').length&&this.markAllAsReadButton.remove()}reset(){this.getContent().innerHTML='\n      <span class="userMenuContentStatus">\n        <woltlab-core-loading-indicator size="24" hide-text></woltlab-core-loading-indicator>\n      </span>\n    '}buildElement(){this.element.hidden=!0,this.element.classList.add("userMenu"),this.element.dataset.origin=this.provider.getPanelButton().id,this.element.tabIndex=-1,this.element.innerHTML=`\n      <div class="userMenuHeader">\n        <div class="userMenuTitle">${this.provider.getTitle()}</div>\n        <div class="userMenuButtons"></div>\n      </div>\n      <div class="userMenuContent userMenuContentScrollable"></div>\n    `,this.element.addEventListener("click",(e=>e.stopPropagation()));const e=this.element.querySelector(".userMenuButtons");this.provider.getMenuButtons().forEach((t=>{e.append(this.buildButton(t))}));const t=this.provider.getFooter();if(null!==t&&this.element.append(this.buildFooter(t)),"com.woltlab.wcf.notifications"===this.provider.getIdentifier()){const e=this.provider.getDesktopNotifications();e&&this.element.querySelector(".userMenuHeader").insertAdjacentElement("afterend",e)}}buildButton(e){let t;return"#"===e.link?(t=document.createElement("button"),t.type="button"):(t=document.createElement("a"),t.href=e.link),t.classList.add("userMenuButton","jsTooltip"),t.title=e.title,t.innerHTML=e.icon,"markAllAsRead"===e.name&&t.addEventListener("click",(e=>{e.preventDefault(),this.markAllAsRead()})),t}async markAllAsRead(){await this.provider.markAllAsRead(),this.getContent().querySelectorAll(".userMenuItem").forEach((e=>{e.dataset.isUnread="false"})),this.markAllAsReadButton.remove()}buildFooter(e){const t=(0,o.escapeHTML)(e.link),n=(0,o.escapeHTML)(e.title),i=document.createElement("div");return i.classList.add("userMenuFooter"),i.innerHTML=`<a href="${t}" class="userMenuFooterLink">${n}</a>`,i}getContent(){return this.element.querySelector(".userMenuContent")}}t.UserMenuView=d,t.default=d})),define("WoltLabSuite/Core/Ui/User/Search/Input",["require","exports","tslib","../../../Core","../../Search/Input"],(function(e,t,n,i,o){"use strict";i=n.__importStar(i),o=n.__importDefault(o);class r extends o.default{constructor(e,t){const n=i.isPlainObject(t)&&!0===t.includeUserGroups;super(e,t=i.extend({ajax:{className:"wcf\\data\\user\\UserAction",parameters:{data:{includeUserGroups:n?1:0}}}},t))}createListItem(e){const t=super.createListItem(e);t.dataset.type=e.type;const n=document.createElement("div");return n.className="box16",n.innerHTML="group"===e.type?'<fa-icon name="users" solid></fa-icon>':e.icon,n.appendChild(t.children[0]),t.appendChild(n),t}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Controller/Label",["require","exports","tslib","../../../../Core","../../../../Dom/Util","../../../../Language","../../../../Ui/Dropdown/Simple"],(function(e,t,n,i,o,r,a){"use strict";return i=n.__importStar(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a),class{_formFieldContainer;_input;_labelChooser;_options;constructor(e,t,n){this._formFieldContainer=document.getElementById(e+"Container"),this._labelChooser=this._formFieldContainer.getElementsByClassName("labelChooser")[0],this._options=i.extend({forceSelection:!1,showWithoutSelection:!1},n),this._input=document.createElement("input"),this._input.type="hidden",this._input.id=e,this._input.name=e,this._input.value=t,this._formFieldContainer.appendChild(this._input);const s=o.identify(this._labelChooser);let l=a.default.getDropdownMenu(s);null===l&&(a.default.init(this._labelChooser.getElementsByClassName("dropdownToggle")[0]),l=a.default.getDropdownMenu(s));let c=null;if(this._options.showWithoutSelection||!this._options.forceSelection){c=document.createElement("ul"),l.appendChild(c);const e=document.createElement("li");e.classList.add("dropdownDivider"),c.appendChild(e)}if(this._options.showWithoutSelection){const e=document.createElement("li");e.dataset.labelId="-1",this._blockScroll(e),c.appendChild(e);const t=document.createElement("span");e.appendChild(t);const n=document.createElement("span");n.classList.add("badge","label"),n.innerHTML=r.get("wcf.label.withoutSelection"),t.appendChild(n)}if(!this._options.forceSelection){const e=document.createElement("li");e.dataset.labelId="0",this._blockScroll(e),c.appendChild(e);const t=document.createElement("span");e.appendChild(t);const n=document.createElement("span");n.classList.add("badge","label"),n.innerHTML=r.get("wcf.label.none"),t.appendChild(n)}l.querySelectorAll("li:not(.dropdownDivider)").forEach((e=>{e.addEventListener("click",(e=>this._click(e))),t&&e.dataset.labelId===t&&this._selectLabel(e)}))}_blockScroll(e){e.addEventListener("wheel",(e=>e.preventDefault()),{passive:!1})}_click(e){e.preventDefault(),this._selectLabel(e.currentTarget)}_selectLabel(e){let t=e.dataset.labelId;t||(t="0");const n=e.querySelector("span > span"),i=this._labelChooser.querySelector(".dropdownToggle > span");i.className=n.className,i.textContent=n.textContent,this._input.value=t}}})),define("WoltLabSuite/Core/Form/Builder/Field/Controller/Rating",["require","exports","tslib","../../../../Environment"],(function(e,t,n,i){"use strict";return i=n.__importStar(i),class{_field;_input;_ratingElements;constructor(e,t){if(this._field=document.getElementById(e+"Container"),null===this._field)throw new Error("Unknown field with id '"+e+"'");this._input=document.createElement("input"),this._input.id=e,this._input.name=e,this._input.type="hidden",this._input.value=t,this._field.appendChild(this._input),this._ratingElements=new Map;const n=this._field.querySelector(".ratingList");n.addEventListener("mouseleave",(()=>this._restoreRating())),n.querySelectorAll("li").forEach((e=>{e.classList.contains("ratingMetaButton")?(e.addEventListener("click",(e=>this._metaButtonClick(e))),e.addEventListener("mouseenter",(()=>this._restoreRating()))):(this._ratingElements.set(e.dataset.rating,e),e.addEventListener("click",(e=>this._listItemClick(e))),e.addEventListener("mouseenter",(e=>this._listItemMouseEnter(e))),e.addEventListener("mouseleave",(()=>this._listItemMouseLeave())))}))}_listItemClick(e){const t=e.currentTarget;this._input.value=t.dataset.rating,"desktop"!==i.platform()&&this._restoreRating()}_listItemMouseEnter(e){const t=e.currentTarget.dataset.rating;this._ratingElements.forEach(((e,n)=>{const i=e.querySelector("fa-icon");this._toggleIcon(i,~~n<=~~t)}))}_listItemMouseLeave(){this._ratingElements.forEach((e=>{const t=e.querySelector("fa-icon");this._toggleIcon(t,!1)}))}_metaButtonClick(e){"removeRating"===e.currentTarget.dataset.action&&(this._input.value="",this._listItemMouseLeave())}_restoreRating(){this._ratingElements.forEach(((e,t)=>{const n=e.querySelector("fa-icon");this._toggleIcon(n,~~t<=~~this._input.value)}))}_toggleIcon(e,t=!1){t?e.setIcon("star",!0):e.setIcon("star")}}})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Abstract",["require","exports","tslib","WoltLabSuite/Core/Dom/Util","./Manager"],(function(e,t,n,i,o){"use strict";return o=n.__importStar(o),class{_dependentElement;_field;_fields;_noField;constructor(e,t){this.init(e,t)}checkDependency(){throw new Error("Missing implementation of WoltLabSuite/Core/Form/Builder/Field/Dependency/Abstract.checkDependency!")}getDependentNode(){return this._dependentElement}getField(){return this._field}getFields(){return this._fields}init(e,t){if(this._dependentElement=document.getElementById(e),null===this._dependentElement)throw new Error("Unknown dependent element with container id '"+e+"Container'.");if(this._field=document.getElementById(t),null===this._field){if(this._fields=[],document.querySelectorAll(`input[type=radio][name="${(0,i.escapeAttributeSelector)(t)}"]`).forEach((e=>{this._fields.push(e)})),!this._fields.length&&(document.querySelectorAll(`input[type=checkbox][name="${(0,i.escapeAttributeSelector)(t)}[]"]`).forEach((e=>{this._fields.push(e)})),!this._fields.length))throw new Error("Unknown field with id '"+t+"'.")}else if(this._fields=[this._field],"INPUT"===this._field.nodeName&&"radio"===this._field.type&&""!==this._field.dataset.noInputId){if(this._noField=document.getElementById(this._field.dataset.noInputId),null===this._noField)throw new Error("Cannot find 'no' input field for input field '"+t+"'");this._fields.push(this._noField)}o.addDependency(this)}}})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Empty",["require","exports","tslib","./Abstract"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{checkDependency(){if(null!==this._field)switch(this._field.tagName){case"INPUT":{const e=this._field;switch(e.type){case"checkbox":return!e.checked;case"radio":return!(!this._noField||!this._noField.checked)||!e.checked;default:return 0===e.value.trim().length}}case"SELECT":{const e=this._field;return e.multiple?0===this._field.querySelectorAll("option:checked").length:"0"==e.value||0===e.value.length}case"TEXTAREA":return 0===this._field.value.trim().length}return this._fields.every((e=>!e.checked))}}return o})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/IsNotClicked",["require","exports","tslib","./Abstract","./Manager"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IsNotClicked=void 0,i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{constructor(e,t){super(e,t),this._field.addEventListener("click",(()=>{this._field.dataset.isClicked="1",o.checkDependencies()}))}checkDependency(){return"1"!==this._field.dataset.isClicked}}t.IsNotClicked=r,t.default=r})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/NonEmpty",["require","exports","tslib","./Abstract"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{checkDependency(){if(null!==this._field)switch(this._field.tagName){case"INPUT":{const e=this._field;switch(e.type){case"checkbox":return e.checked;case"radio":return(!this._noField||!this._noField.checked)&&e.checked;default:return 0!==e.value.trim().length}}case"SELECT":{const e=this._field;return e.multiple?0!==e.querySelectorAll("option:checked").length:"0"!=e.value&&0!==e.value.length}case"TEXTAREA":return 0!==this._field.value.trim().length}return this._fields.some((e=>e.checked))}}return o})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Value",["require","exports","tslib","./Abstract","./Manager"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_isNegated=!1;_values;checkDependency(){if(!this._values)throw new Error("Values have not been set.");const e=[];if(this._field){if(o.isHiddenByDependencies(this._field))return!1;e.push(this._field.value)}else{let t=!0;if(this._fields.forEach((n=>{if(n.checked){if(o.isHiddenByDependencies(n))return t=!1,!1;e.push(n.value)}})),!t)return!1}let t=!1;return this._values.forEach((n=>{e.forEach((e=>{n==e&&(t=!0)}))})),t?!this._isNegated:this._isNegated}negate(e){return this._isNegated=e,this}values(e){return this._values=e,this}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/ValueInterval",["require","exports","tslib","./Abstract","./Manager"],(function(e,t,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueInterval=void 0,i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{_maximum=null;_minimum=null;checkDependency(){if(this._field){if(o.isHiddenByDependencies(this._field))return!1;const e=parseFloat(this._field.value);return!(isNaN(e)||null!==this._minimum&&this._minimum>e||null!==this._maximum&&this._maximum<e)}throw new Error("'ValueInterval' is only supported for individual fields.")}maximum(e){return this._maximum=e,this}minimum(e){return this._minimum=e,this}}t.ValueInterval=r,t.default=r})),define("WoltLabSuite/Core/Form/Builder/Field/Language/ContentLanguage",["require","exports","tslib","../Value","../../../../Language/Chooser"],(function(e,t,n,i,o){"use strict";i=n.__importDefault(i),o=n.__importStar(o);class r extends i.default{destroy(){o.removeChooser(this._fieldId)}}return r})),define("WoltLabSuite/Core/Form/Builder/Field/Wysiwyg/Attachment",["require","exports","tslib","../Value"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{constructor(e){super(e+"_tmpHash")}}return o})),define("WoltLabSuite/Core/Form/Builder/Field/Wysiwyg/Poll",["require","exports","tslib","../Field"],(function(e,t,n,i){"use strict";i=n.__importDefault(i);class o extends i.default{_pollEditor;_getData(){return this._pollEditor.getData()}_readField(){}setPollEditor(e){this._pollEditor=e}}return o})),define("WoltLabSuite/Core/Ui/User/Menu/Data/Notification",["require","exports","tslib","../../../../Ajax","../View","../Manager","../../../../Language","../../../../Notification/Handler"],(function(e,t,n,i,o,r,a,s){"use strict";function l(e){const t=document.querySelector('link[rel="icon"]');if(!t)return;c||(c=t.href);const n=Math.trunc(e).toString();if("0"===n)return void(t.href=c);const i=document.createElement("img");i.src=c,i.addEventListener("load",(()=>{const e=document.createElement("canvas");e.width=i.naturalWidth,e.height=i.naturalHeight;const o=e.getContext("2d");o&&(o.drawImage(i,0,0,e.width,e.height),function(e,t){const n=e.canvas.width;let i=!1,o=.4*n;const r=.4*n;let a=.6*n;const s=.6*n;2===t.length?(o-=.4*a,a*=1.4,i=!0):t.length>=3&&(o-=.65*a,a*=1.65,i=!0),e.beginPath(),e.fillStyle="#d00",i?(e.moveTo(o+a/2,r),e.lineTo(o+a-s/2,r),e.quadraticCurveTo(o+a,r,o+a,r+s/2),e.lineTo(o+a,r+s-s/2),e.quadraticCurveTo(o+a,r+s,o+a-s/2,r+s),e.lineTo(o+s/2,r+s),e.quadraticCurveTo(o,r+s,o,r+s-s/2),e.lineTo(o,r+s/2),e.quadraticCurveTo(o,r,o+s/2,r)):e.arc(o+a/2,r+s/2,s/2,0,2*Math.PI),e.fill(),e.closePath(),e.beginPath(),e.stroke(),e.font="bold "+Math.floor(s*(t.length>2?.85:1)).toString()+"px sans-serif",e.textAlign="center",e.fillStyle="#fff",t.length>3?e.fillText((t.length>4?9:Math.floor(+t/1e3)).toString()+"k+",Math.floor(o+a/2),Math.floor(r+s-.2*s)):e.fillText(t,Math.floor(o+a/2),Math.floor(r+s-.15*s)),e.closePath()}(o,n),t.href=e.toDataURL("image/png"))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0,o=n.__importDefault(o),a=n.__importStar(a);let c="";class d{button;options;stale=!0;view=void 0;constructor(e,t){this.button=e,this.options=t,this.counter>0&&l(this.counter),window.WCF.System.PushNotification.addCallback("userNotificationCount",(e=>{this.updateCounter(e),this.stale=!0}))}get counter(){return parseInt(this.button.dataset.count,10)}set counter(e){this.button.dataset.count=e.toString()}getPanelButton(){return this.button}getMenuButtons(){return[{icon:'<fa-icon size="24" name="cog" solid></fa-icon>',link:this.options.settingsLink,name:"settings",title:this.options.settingsTitle}]}getIdentifier(){return"com.woltlab.wcf.notifications"}async getData(){const e=await(0,i.dboAction)("getNotificationData","wcf\\data\\user\\notification\\UserNotificationAction").disableLoadingIndicator().dispatch();return this.updateCounter(e.totalCount),this.stale=!1,e.items}getFooter(){return{link:this.options.showAllLink,title:this.options.showAllTitle}}getTitle(){return this.options.title}getView(){return void 0===this.view&&(this.view=new o.default(this)),this.view}getEmptyViewMessage(){return this.options.noItems}hasPlainTitle(){return!1}hasUnreadContent(){return this.counter>0}isStale(){if(this.stale)return!0;const e=this.getView().getItems().filter((e=>"true"===e.dataset.isUnread));return this.counter!==e.length}getDesktopNotifications(){if(!("Notification"in window))return null;if("granted"===Notification.permission||"denied"===Notification.permission)return null;const e=document.createElement("div");e.classList.add("userMenuNotifications"),e.textContent=a.get("wcf.user.notification.enableDesktopNotifications");const t=document.createElement("div");t.classList.add("userMenuNotificationsButtons"),e.append(t);const n=document.createElement("button");return n.type="button",n.classList.add("button","small","userMenuNotificationsButton"),n.textContent=a.get("wcf.user.notification.enableDesktopNotifications.button"),n.addEventListener("click",(async t=>{t.preventDefault(),"granted"===await Notification.requestPermission()&&(0,s.enableNotifications)(),e.remove()})),t.append(n),e}async markAsRead(e){const t=await(0,i.dboAction)("markAsConfirmed","wcf\\data\\user\\notification\\UserNotificationAction").objectIds([e]).dispatch();this.updateCounter(t.totalCount)}async markAllAsRead(){await(0,i.dboAction)("markAllAsConfirmed","wcf\\data\\user\\notification\\UserNotificationAction").dispatch(),this.updateCounter(0)}updateCounter(e){this.counter=e;let t=this.button.querySelector(".badge");null===t&&e>0&&(t=document.createElement("span"),t.classList.add("badge","badgeUpdate"),this.button.querySelector("a").append(t)),t&&(0===e?t.remove():t.textContent=e.toString()),l(e)}}let u=!1;t.setup=function(e){if(!u){const t=document.getElementById("userNotifications");if(null!==t){const n=new d(t,e);(0,r.registerProvider)(n)}u=!0}}})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Container/Abstract",["require","exports","tslib","../Manager"],(function(e,t,n,i){"use strict";return i=n.__importStar(i),class{_container;constructor(e){this.init(e)}checkContainer(){throw new Error("Missing implementation of WoltLabSuite/Core/Form/Builder/Field/Dependency/Container.checkContainer!")}init(e){if("string"!=typeof e)throw new TypeError("Container id has to be a string.");if(this._container=document.getElementById(e),null===this._container)throw new Error("Unknown container with id '"+e+"'.");i.addContainerCheckCallback((()=>this.checkContainer()))}}})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Container/Default",["require","exports","tslib","./Abstract","../../../../../Core","../Manager","../../../../../Dom/Util"],(function(e,t,n,i,o,r,a){"use strict";i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importDefault(a);class s extends i.default{checkContainer(){if(o.stringToBool(this._container.dataset.ignoreDependencies||""))return;if(r.isHiddenByDependencies(this._container))return;const e=!a.default.isHidden(this._container),t=Array.from(this._container.children).some(((e,t)=>(0!==t||"H2"!==e.tagName&&"HEADER"!==e.tagName)&&!a.default.isHidden(e)));e!==t&&(t?a.default.show(this._container):a.default.hide(this._container),r.checkContainers())}}return s})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Container/Tab",["require","exports","tslib","./Abstract","../Manager","../../../../../Dom/Util","../../../../../Ui/TabMenu"],(function(e,t,n,i,o,r,a){"use strict";i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a);class s extends i.default{checkContainer(){if(o.isHiddenByDependencies(this._container))return;const e=!r.isHidden(this._container),t=Array.from(this._container.children).some((e=>!r.isHidden(e)));if(e!==t){const e=this._container.parentNode.parentNode.querySelector("#"+r.identify(this._container.parentNode)+" > nav > ul > li[data-name="+this._container.id+"]");if(null===e)throw new Error("Cannot find tab menu entry for tab '"+this._container.id+"'.");if(t)r.show(this._container),r.show(e);else{r.hide(this._container),r.hide(e);const t=a.getTabMenu(r.identify(e.closest(".tabMenuContainer")));t.getActiveTab()===e&&t.selectFirstVisible()}o.checkContainers()}}}return s})),define("WoltLabSuite/Core/Form/Builder/Field/Dependency/Container/TabMenu",["require","exports","tslib","./Abstract","../Manager","../../../../../Dom/Util","../../../../../Ui/TabMenu"],(function(e,t,n,i,o,r,a){"use strict";i=n.__importDefault(i),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a);class s extends i.default{checkContainer(){if(o.isHiddenByDependencies(this._container))return;const e=!r.isHidden(this._container),t=this._container.parentNode.querySelectorAll("#"+r.identify(this._container)+" > nav > ul > li"),n=Array.from(t).some((e=>!r.isHidden(e)));e!==n&&(n?(r.show(this._container),a.getTabMenu(r.identify(this._container)).selectFirstVisible()):r.hide(this._container),o.checkContainers())}}return s})),function(e){function t(){for(;i.length&&"function"==typeof i[0];)i.shift()()}var n=e.require,i=[],o=0;e.orgRequire=n,e.require=function(r,a,s){if(!Array.isArray(r))return n.apply(e,arguments);var l=new Promise((function(e,a){var s=o++;i.push(s),n(r,(function(){var n=arguments;i[i.indexOf(s)]=function(){e(n)},t()}),(function(e){i[i.indexOf(s)]=function(){a(e)},t()}))}));return a&&(l=l.then((function(t){return a.apply(e,t)}))),s&&l.catch(s),l},e.require.config=n.config}(window),define("require.linearExecution",(function(){}));
//# sourceMappingURL=../proxy_sourcemap.php?o8LCasjgtQ-LMu__GxAYTA6FaidijCByOzHlWO0ZM5MAvKVmQ2AwkbtKjm-9AZ_4BI0KB1DKBrnckhiz5Y9CGojxtyXmq5GJXQJETHXYaU8oFIMbfeGIMfO0FhFkD36k5F1K67tl0vbNIDHmE7Ctu_Txc74kd_gwV96QjDiP6Pq3rXAXRvsmwaJCTBDLA8xnI46YkWlpJohBJ-AqHVw2KvHGT7dMy5pXADVvl6XvC9LeDmZ3os9odKqeaH1WdeuNLxJ8vBD4EJ5heMwurMxT4p2uZez3LSv2TTNr-mtZqbFDYP9okTYJMFMWxe6Y234Hxtyexwmdnxm_YKFOjTYQag/WCF/9d088689144db0ffdfb8337b0d07d9393837be1b6523a72408e44d70afe8181b